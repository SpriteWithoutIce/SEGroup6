DEBUG 2024-06-01 14:41:18,238 schema ALTER TABLE `app01_onduty` ADD COLUMN `id` bigint AUTO_INCREMENT DEFAULT %s NOT NULL PRIMARY KEY; (params [1])
DEBUG 2024-06-01 14:42:31,954 schema ALTER TABLE `app01_onduty` ADD COLUMN `id` bigint AUTO_INCREMENT DEFAULT %s NOT NULL PRIMARY KEY; (params [1])
DEBUG 2024-06-01 14:45:26,875 schema ALTER TABLE `app01_onduty` ADD COLUMN `id` bigint AUTO_INCREMENT DEFAULT %s NOT NULL PRIMARY KEY; (params [1])
DEBUG 2024-06-01 14:46:42,421 schema ALTER TABLE `app01_onduty` ADD COLUMN `id` bigint AUTO_INCREMENT DEFAULT %s NOT NULL PRIMARY KEY; (params [1])
DEBUG 2024-06-01 14:52:17,811 schema ALTER TABLE `app01_onduty` ADD COLUMN `id` bigint AUTO_INCREMENT DEFAULT %s NOT NULL PRIMARY KEY; (params [1])
DEBUG 2024-06-01 14:55:38,399 schema ALTER TABLE `app01_onduty` ADD COLUMN `id` integer AUTO_INCREMENT DEFAULT %s NOT NULL PRIMARY KEY; (params [1])
DEBUG 2024-08-20 20:26:35,858 schema CREATE TABLE `django_migrations` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `app` varchar(255) NOT NULL, `name` varchar(255) NOT NULL, `applied` datetime(6) NOT NULL); (params None)
DEBUG 2024-08-20 20:26:35,877 schema CREATE TABLE `django_content_type` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(100) NOT NULL, `app_label` varchar(100) NOT NULL, `model` varchar(100) NOT NULL); (params None)
DEBUG 2024-08-20 20:26:35,896 schema ALTER TABLE `django_content_type` ADD CONSTRAINT `django_content_type_app_label_model_76bd3d3b_uniq` UNIQUE (`app_label`, `model`); (params ())
DEBUG 2024-08-20 20:26:35,938 schema CREATE TABLE `auth_permission` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(50) NOT NULL, `content_type_id` integer NOT NULL, `codename` varchar(100) NOT NULL); (params None)
DEBUG 2024-08-20 20:26:35,967 schema CREATE TABLE `auth_group` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(80) NOT NULL UNIQUE); (params None)
DEBUG 2024-08-20 20:26:35,993 schema CREATE TABLE `auth_group_permissions` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `group_id` integer NOT NULL, `permission_id` integer NOT NULL); (params None)
DEBUG 2024-08-20 20:26:36,052 schema CREATE TABLE `auth_user` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `password` varchar(128) NOT NULL, `last_login` datetime(6) NOT NULL, `is_superuser` bool NOT NULL, `username` varchar(30) NOT NULL UNIQUE, `first_name` varchar(30) NOT NULL, `last_name` varchar(30) NOT NULL, `email` varchar(75) NOT NULL, `is_staff` bool NOT NULL, `is_active` bool NOT NULL, `date_joined` datetime(6) NOT NULL); (params None)
DEBUG 2024-08-20 20:26:36,072 schema CREATE TABLE `auth_user_groups` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `user_id` integer NOT NULL, `group_id` integer NOT NULL); (params None)
DEBUG 2024-08-20 20:26:36,121 schema CREATE TABLE `auth_user_user_permissions` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `user_id` integer NOT NULL, `permission_id` integer NOT NULL); (params None)
DEBUG 2024-08-20 20:26:36,169 schema ALTER TABLE `auth_permission` ADD CONSTRAINT `auth_permission_content_type_id_codename_01ab375a_uniq` UNIQUE (`content_type_id`, `codename`); (params ())
DEBUG 2024-08-20 20:26:36,188 schema ALTER TABLE `auth_permission` ADD CONSTRAINT `auth_permission_content_type_id_2f476e4b_fk_django_co` FOREIGN KEY (`content_type_id`) REFERENCES `django_content_type` (`id`); (params ())
DEBUG 2024-08-20 20:26:36,213 schema ALTER TABLE `auth_group_permissions` ADD CONSTRAINT `auth_group_permissions_group_id_permission_id_0cd325b0_uniq` UNIQUE (`group_id`, `permission_id`); (params ())
DEBUG 2024-08-20 20:26:36,232 schema ALTER TABLE `auth_group_permissions` ADD CONSTRAINT `auth_group_permissions_group_id_b120cbf9_fk_auth_group_id` FOREIGN KEY (`group_id`) REFERENCES `auth_group` (`id`); (params ())
DEBUG 2024-08-20 20:26:36,253 schema ALTER TABLE `auth_group_permissions` ADD CONSTRAINT `auth_group_permissio_permission_id_84c5c92e_fk_auth_perm` FOREIGN KEY (`permission_id`) REFERENCES `auth_permission` (`id`); (params ())
DEBUG 2024-08-20 20:26:36,279 schema ALTER TABLE `auth_user_groups` ADD CONSTRAINT `auth_user_groups_user_id_group_id_94350c0c_uniq` UNIQUE (`user_id`, `group_id`); (params ())
DEBUG 2024-08-20 20:26:36,296 schema ALTER TABLE `auth_user_groups` ADD CONSTRAINT `auth_user_groups_user_id_6a12ed8b_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); (params ())
DEBUG 2024-08-20 20:26:36,321 schema ALTER TABLE `auth_user_groups` ADD CONSTRAINT `auth_user_groups_group_id_97559544_fk_auth_group_id` FOREIGN KEY (`group_id`) REFERENCES `auth_group` (`id`); (params ())
DEBUG 2024-08-20 20:26:36,347 schema ALTER TABLE `auth_user_user_permissions` ADD CONSTRAINT `auth_user_user_permissions_user_id_permission_id_14a6b632_uniq` UNIQUE (`user_id`, `permission_id`); (params ())
DEBUG 2024-08-20 20:26:36,366 schema ALTER TABLE `auth_user_user_permissions` ADD CONSTRAINT `auth_user_user_permissions_user_id_a95ead1b_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); (params ())
DEBUG 2024-08-20 20:26:36,391 schema ALTER TABLE `auth_user_user_permissions` ADD CONSTRAINT `auth_user_user_permi_permission_id_1fbb5f2c_fk_auth_perm` FOREIGN KEY (`permission_id`) REFERENCES `auth_permission` (`id`); (params ())
DEBUG 2024-08-20 20:26:36,449 schema CREATE TABLE `django_admin_log` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `action_time` datetime(6) NOT NULL, `object_id` longtext NULL, `object_repr` varchar(200) NOT NULL, `action_flag` smallint UNSIGNED NOT NULL CHECK (`action_flag` >= 0), `change_message` longtext NOT NULL, `content_type_id` integer NULL, `user_id` integer NOT NULL); (params None)
DEBUG 2024-08-20 20:26:36,492 schema ALTER TABLE `django_admin_log` ADD CONSTRAINT `django_admin_log_content_type_id_c4bce8eb_fk_django_co` FOREIGN KEY (`content_type_id`) REFERENCES `django_content_type` (`id`); (params ())
DEBUG 2024-08-20 20:26:36,520 schema ALTER TABLE `django_admin_log` ADD CONSTRAINT `django_admin_log_user_id_c564eba6_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); (params ())
DEBUG 2024-08-20 20:26:36,641 schema CREATE TABLE `app01_doctors` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `identity_num` varchar(64) NOT NULL, `name` varchar(20) NOT NULL, `title` varchar(50) NOT NULL, `department` varchar(20) NOT NULL, `research` varchar(150) NULL, `cost` numeric(5, 2) NOT NULL, `avatar` varchar(100) NULL, `avatar_name` varchar(128) NOT NULL); (params None)
DEBUG 2024-08-20 20:26:36,660 schema CREATE TABLE `app01_medicine` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(50) NOT NULL, `medicine_type` smallint NOT NULL, `symptom` varchar(200) NOT NULL, `price` numeric(5, 2) NOT NULL, `quantity` integer NOT NULL, `photo_name` varchar(128) NOT NULL); (params None)
DEBUG 2024-08-20 20:26:36,678 schema CREATE TABLE `app01_patients` (`identity` smallint NOT NULL, `identity_num` varchar(64) NOT NULL PRIMARY KEY, `name` varchar(20) NOT NULL, `health_insurance` smallint NOT NULL, `gender` smallint NOT NULL, `birthday` date NOT NULL, `phone_num` varchar(15) NOT NULL, `address` varchar(128) NOT NULL); (params None)
DEBUG 2024-08-20 20:26:36,694 schema CREATE TABLE `app01_user` (`type` smallint NOT NULL, `identity_num` varchar(64) NOT NULL PRIMARY KEY, `password` varchar(64) NOT NULL); (params None)
DEBUG 2024-08-20 20:26:36,714 schema CREATE TABLE `app01_onduty` (`doctor_id` bigint NOT NULL PRIMARY KEY, `date` date NOT NULL, `time` smallint NOT NULL, `state` integer NOT NULL); (params None)
DEBUG 2024-08-20 20:26:36,736 schema CREATE TABLE `app01_register` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `queue_id` integer NOT NULL, `time` datetime(6) NOT NULL, `position` varchar(128) NOT NULL, `doctor_id` bigint NOT NULL, `patient_id` varchar(64) NOT NULL, `register_id` varchar(64) NOT NULL); (params None)
DEBUG 2024-08-20 20:26:36,801 schema CREATE TABLE `app01_treatment` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `queue_id` integer NOT NULL, `time` datetime(6) NOT NULL, `advice` varchar(256) NOT NULL, `medicine` longtext NOT NULL, `price` numeric(5, 2) NOT NULL, `doctor_id` bigint NOT NULL, `patient_id` varchar(64) NOT NULL); (params None)
DEBUG 2024-08-20 20:26:36,858 schema CREATE TABLE `app01_notice` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `msg_type` smallint NOT NULL, `time` datetime(6) NOT NULL, `isRead` bool NOT NULL, `doctor_id` bigint NOT NULL, `patient_id` varchar(64) NOT NULL, `register_id` bigint NULL, `treatment_id` bigint NULL); (params None)
DEBUG 2024-08-20 20:26:36,943 schema CREATE TABLE `app01_bill` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `type` smallint NOT NULL, `state` bool NOT NULL, `price` numeric(5, 2) NOT NULL, `patient_id` varchar(64) NULL, `register_id` bigint NULL, `treatment_id` bigint NULL); (params None)
DEBUG 2024-08-20 20:26:37,007 schema ALTER TABLE `app01_onduty` ADD CONSTRAINT `app01_onduty_doctor_id_9b012eb7_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-20 20:26:37,032 schema ALTER TABLE `app01_register` ADD CONSTRAINT `app01_register_doctor_id_e0ea61dc_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-20 20:26:37,059 schema ALTER TABLE `app01_register` ADD CONSTRAINT `app01_register_patient_id_4a065a29_fk_app01_pat` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-20 20:26:37,087 schema ALTER TABLE `app01_register` ADD CONSTRAINT `app01_register_register_id_e85a8e5b_fk_app01_pat` FOREIGN KEY (`register_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-20 20:26:37,116 schema ALTER TABLE `app01_treatment` ADD CONSTRAINT `app01_treatment_doctor_id_a47beada_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-20 20:26:37,141 schema ALTER TABLE `app01_treatment` ADD CONSTRAINT `app01_treatment_patient_id_52a8e1e5_fk_app01_pat` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-20 20:26:37,168 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_doctor_id_2d7f7104_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-20 20:26:37,193 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_patient_id_74974826_fk_app01_patients_identity_num` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-20 20:26:37,221 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_register_id_6c54784c_fk_app01_register_id` FOREIGN KEY (`register_id`) REFERENCES `app01_register` (`id`); (params ())
DEBUG 2024-08-20 20:26:37,256 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_treatment_id_596ea92a_fk_app01_treatment_id` FOREIGN KEY (`treatment_id`) REFERENCES `app01_treatment` (`id`); (params ())
DEBUG 2024-08-20 20:26:37,286 schema ALTER TABLE `app01_bill` ADD CONSTRAINT `app01_bill_patient_id_96fe396a_fk_app01_patients_identity_num` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-20 20:26:37,312 schema ALTER TABLE `app01_bill` ADD CONSTRAINT `app01_bill_register_id_cf59300e_fk_app01_register_id` FOREIGN KEY (`register_id`) REFERENCES `app01_register` (`id`); (params ())
DEBUG 2024-08-20 20:26:37,339 schema ALTER TABLE `app01_bill` ADD CONSTRAINT `app01_bill_treatment_id_73ef4d98_fk_app01_treatment_id` FOREIGN KEY (`treatment_id`) REFERENCES `app01_treatment` (`id`); (params ())
DEBUG 2024-08-20 20:26:37,396 schema ALTER TABLE `django_content_type` MODIFY `name` varchar(100) NULL; (params [])
DEBUG 2024-08-20 20:26:37,467 schema ALTER TABLE `django_content_type` DROP COLUMN `name`; (params ())
DEBUG 2024-08-20 20:26:37,521 schema ALTER TABLE `auth_permission` MODIFY `name` varchar(255) NOT NULL; (params [])
DEBUG 2024-08-20 20:26:37,575 schema ALTER TABLE `auth_user` MODIFY `email` varchar(254) NOT NULL; (params [])
DEBUG 2024-08-20 20:26:37,665 schema ALTER TABLE `auth_user` MODIFY `last_login` datetime(6) NULL; (params [])
DEBUG 2024-08-20 20:26:37,779 schema ALTER TABLE `auth_user` MODIFY `username` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-20 20:26:37,841 schema ALTER TABLE `auth_user` MODIFY `last_name` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-20 20:26:37,901 schema ALTER TABLE `auth_group` MODIFY `name` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-20 20:26:38,021 schema ALTER TABLE `auth_user` MODIFY `first_name` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-20 20:26:38,080 schema CREATE TABLE `django_session` (`session_key` varchar(40) NOT NULL PRIMARY KEY, `session_data` longtext NOT NULL, `expire_date` datetime(6) NOT NULL); (params None)
DEBUG 2024-08-20 20:26:38,109 schema CREATE INDEX `django_session_expire_date_a5c62663` ON `django_session` (`expire_date`); (params ())
ERROR 2024-08-20 20:26:39,618 log Internal Server Error: /api/appointment/add/
Traceback (most recent call last):
  File "D:\anacoda\Lib\site-packages\django\db\backends\utils.py", line 89, in _execute
    return self.cursor.execute(sql, params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\backends\mysql\base.py", line 75, in execute
    return self.cursor.execute(query, args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\pymysql\cursors.py", line 153, in execute
    result = self._query(query)
             ^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\pymysql\cursors.py", line 322, in _query
    conn.query(q)
  File "D:\anacoda\Lib\site-packages\pymysql\connections.py", line 558, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\pymysql\connections.py", line 822, in _read_query_result
    result.read()
  File "D:\anacoda\Lib\site-packages\pymysql\connections.py", line 1200, in read
    first_packet = self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\pymysql\connections.py", line 772, in _read_packet
    packet.raise_for_error()
  File "D:\anacoda\Lib\site-packages\pymysql\protocol.py", line 221, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "D:\anacoda\Lib\site-packages\pymysql\err.py", line 143, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'registerMan_id' in 'field list'")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\anacoda\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\views\decorators\csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\views\generic\base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 509, in dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 480, in raise_uncaught_exception
    raise exc
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\86185\Desktop\SEGroup6\Ã¨Ã¨¾ÍÕï\Project\app01\views.py", line 157, in post
    return self.addRegisterData(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\86185\Desktop\SEGroup6\Ã¨Ã¨¾ÍÕï\Project\app01\views.py", line 328, in addRegisterData
    notice.save()
  File "D:\anacoda\Lib\site-packages\django\db\models\base.py", line 814, in save
    self.save_base(
  File "D:\anacoda\Lib\site-packages\django\db\models\base.py", line 877, in save_base
    updated = self._save_table(
              ^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\base.py", line 1020, in _save_table
    results = self._do_insert(
              ^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\base.py", line 1061, in _do_insert
    return manager._insert(
           ^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\manager.py", line 87, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\query.py", line 1805, in _insert
    return query.get_compiler(using=using).execute_sql(returning_fields)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\sql\compiler.py", line 1822, in execute_sql
    cursor.execute(sql, params)
  File "D:\anacoda\Lib\site-packages\django\db\backends\utils.py", line 67, in execute
    return self._execute_with_wrappers(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\backends\utils.py", line 80, in _execute_with_wrappers
    return executor(sql, params, many, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\backends\utils.py", line 84, in _execute
    with self.db.wrap_database_errors:
  File "D:\anacoda\Lib\site-packages\django\db\utils.py", line 91, in __exit__
    raise dj_exc_value.with_traceback(traceback) from exc_value
  File "D:\anacoda\Lib\site-packages\django\db\backends\utils.py", line 89, in _execute
    return self.cursor.execute(sql, params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\backends\mysql\base.py", line 75, in execute
    return self.cursor.execute(query, args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\pymysql\cursors.py", line 153, in execute
    result = self._query(query)
             ^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\pymysql\cursors.py", line 322, in _query
    conn.query(q)
  File "D:\anacoda\Lib\site-packages\pymysql\connections.py", line 558, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\pymysql\connections.py", line 822, in _read_query_result
    result.read()
  File "D:\anacoda\Lib\site-packages\pymysql\connections.py", line 1200, in read
    first_packet = self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\pymysql\connections.py", line 772, in _read_packet
    packet.raise_for_error()
  File "D:\anacoda\Lib\site-packages\pymysql\protocol.py", line 221, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "D:\anacoda\Lib\site-packages\pymysql\err.py", line 143, in raise_mysql_exception
    raise errorclass(errno, errval)
django.db.utils.OperationalError: (1054, "Unknown column 'registerMan_id' in 'field list'")
WARNING 2024-08-20 20:26:39,696 log Bad Request: /api/registers/list/
DEBUG 2024-08-20 20:27:57,030 schema CREATE TABLE `django_migrations` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `app` varchar(255) NOT NULL, `name` varchar(255) NOT NULL, `applied` datetime(6) NOT NULL); (params None)
DEBUG 2024-08-20 20:27:57,046 schema CREATE TABLE `django_content_type` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(100) NOT NULL, `app_label` varchar(100) NOT NULL, `model` varchar(100) NOT NULL); (params None)
DEBUG 2024-08-20 20:27:57,064 schema ALTER TABLE `django_content_type` ADD CONSTRAINT `django_content_type_app_label_model_76bd3d3b_uniq` UNIQUE (`app_label`, `model`); (params ())
DEBUG 2024-08-20 20:27:57,111 schema CREATE TABLE `auth_permission` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(50) NOT NULL, `content_type_id` integer NOT NULL, `codename` varchar(100) NOT NULL); (params None)
DEBUG 2024-08-20 20:27:57,139 schema CREATE TABLE `auth_group` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(80) NOT NULL UNIQUE); (params None)
DEBUG 2024-08-20 20:27:57,154 schema CREATE TABLE `auth_group_permissions` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `group_id` integer NOT NULL, `permission_id` integer NOT NULL); (params None)
DEBUG 2024-08-20 20:27:57,199 schema CREATE TABLE `auth_user` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `password` varchar(128) NOT NULL, `last_login` datetime(6) NOT NULL, `is_superuser` bool NOT NULL, `username` varchar(30) NOT NULL UNIQUE, `first_name` varchar(30) NOT NULL, `last_name` varchar(30) NOT NULL, `email` varchar(75) NOT NULL, `is_staff` bool NOT NULL, `is_active` bool NOT NULL, `date_joined` datetime(6) NOT NULL); (params None)
DEBUG 2024-08-20 20:27:57,215 schema CREATE TABLE `auth_user_groups` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `user_id` integer NOT NULL, `group_id` integer NOT NULL); (params None)
DEBUG 2024-08-20 20:27:57,272 schema CREATE TABLE `auth_user_user_permissions` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `user_id` integer NOT NULL, `permission_id` integer NOT NULL); (params None)
DEBUG 2024-08-20 20:27:57,311 schema ALTER TABLE `auth_permission` ADD CONSTRAINT `auth_permission_content_type_id_codename_01ab375a_uniq` UNIQUE (`content_type_id`, `codename`); (params ())
DEBUG 2024-08-20 20:27:57,331 schema ALTER TABLE `auth_permission` ADD CONSTRAINT `auth_permission_content_type_id_2f476e4b_fk_django_co` FOREIGN KEY (`content_type_id`) REFERENCES `django_content_type` (`id`); (params ())
DEBUG 2024-08-20 20:27:57,355 schema ALTER TABLE `auth_group_permissions` ADD CONSTRAINT `auth_group_permissions_group_id_permission_id_0cd325b0_uniq` UNIQUE (`group_id`, `permission_id`); (params ())
DEBUG 2024-08-20 20:27:57,373 schema ALTER TABLE `auth_group_permissions` ADD CONSTRAINT `auth_group_permissions_group_id_b120cbf9_fk_auth_group_id` FOREIGN KEY (`group_id`) REFERENCES `auth_group` (`id`); (params ())
DEBUG 2024-08-20 20:27:57,396 schema ALTER TABLE `auth_group_permissions` ADD CONSTRAINT `auth_group_permissio_permission_id_84c5c92e_fk_auth_perm` FOREIGN KEY (`permission_id`) REFERENCES `auth_permission` (`id`); (params ())
DEBUG 2024-08-20 20:27:57,420 schema ALTER TABLE `auth_user_groups` ADD CONSTRAINT `auth_user_groups_user_id_group_id_94350c0c_uniq` UNIQUE (`user_id`, `group_id`); (params ())
DEBUG 2024-08-20 20:27:57,444 schema ALTER TABLE `auth_user_groups` ADD CONSTRAINT `auth_user_groups_user_id_6a12ed8b_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); (params ())
DEBUG 2024-08-20 20:27:57,466 schema ALTER TABLE `auth_user_groups` ADD CONSTRAINT `auth_user_groups_group_id_97559544_fk_auth_group_id` FOREIGN KEY (`group_id`) REFERENCES `auth_group` (`id`); (params ())
DEBUG 2024-08-20 20:27:57,489 schema ALTER TABLE `auth_user_user_permissions` ADD CONSTRAINT `auth_user_user_permissions_user_id_permission_id_14a6b632_uniq` UNIQUE (`user_id`, `permission_id`); (params ())
DEBUG 2024-08-20 20:27:57,507 schema ALTER TABLE `auth_user_user_permissions` ADD CONSTRAINT `auth_user_user_permissions_user_id_a95ead1b_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); (params ())
DEBUG 2024-08-20 20:27:57,531 schema ALTER TABLE `auth_user_user_permissions` ADD CONSTRAINT `auth_user_user_permi_permission_id_1fbb5f2c_fk_auth_perm` FOREIGN KEY (`permission_id`) REFERENCES `auth_permission` (`id`); (params ())
DEBUG 2024-08-20 20:27:57,586 schema CREATE TABLE `django_admin_log` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `action_time` datetime(6) NOT NULL, `object_id` longtext NULL, `object_repr` varchar(200) NOT NULL, `action_flag` smallint UNSIGNED NOT NULL CHECK (`action_flag` >= 0), `change_message` longtext NOT NULL, `content_type_id` integer NULL, `user_id` integer NOT NULL); (params None)
DEBUG 2024-08-20 20:27:57,624 schema ALTER TABLE `django_admin_log` ADD CONSTRAINT `django_admin_log_content_type_id_c4bce8eb_fk_django_co` FOREIGN KEY (`content_type_id`) REFERENCES `django_content_type` (`id`); (params ())
DEBUG 2024-08-20 20:27:57,652 schema ALTER TABLE `django_admin_log` ADD CONSTRAINT `django_admin_log_user_id_c564eba6_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); (params ())
DEBUG 2024-08-20 20:27:57,790 schema CREATE TABLE `app01_doctors` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `identity_num` varchar(64) NOT NULL, `name` varchar(20) NOT NULL, `title` varchar(50) NOT NULL, `department` varchar(20) NOT NULL, `research` varchar(150) NULL, `cost` numeric(5, 2) NOT NULL, `avatar` varchar(100) NULL, `avatar_name` varchar(128) NOT NULL); (params None)
DEBUG 2024-08-20 20:27:57,810 schema CREATE TABLE `app01_medicine` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(50) NOT NULL, `medicine_type` smallint NOT NULL, `symptom` varchar(200) NOT NULL, `price` numeric(5, 2) NOT NULL, `quantity` integer NOT NULL, `photo_name` varchar(128) NOT NULL); (params None)
DEBUG 2024-08-20 20:27:57,825 schema CREATE TABLE `app01_patients` (`identity` smallint NOT NULL, `identity_num` varchar(64) NOT NULL PRIMARY KEY, `name` varchar(20) NOT NULL, `health_insurance` smallint NOT NULL, `gender` smallint NOT NULL, `birthday` date NOT NULL, `phone_num` varchar(15) NOT NULL, `address` varchar(128) NOT NULL); (params None)
DEBUG 2024-08-20 20:27:57,841 schema CREATE TABLE `app01_user` (`type` smallint NOT NULL, `identity_num` varchar(64) NOT NULL PRIMARY KEY, `password` varchar(64) NOT NULL); (params None)
DEBUG 2024-08-20 20:27:57,858 schema CREATE TABLE `app01_treatment` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `queue_id` integer NOT NULL, `time` datetime(6) NOT NULL, `advice` varchar(256) NOT NULL, `medicine` longtext NOT NULL, `price` numeric(5, 2) NOT NULL, `doctor_id` bigint NOT NULL, `patient_id` varchar(64) NOT NULL); (params None)
DEBUG 2024-08-20 20:27:57,900 schema CREATE TABLE `app01_register` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `queue_id` integer NOT NULL, `time` datetime(6) NOT NULL, `position` varchar(128) NOT NULL, `doctor_id` bigint NOT NULL, `patient_id` varchar(64) NOT NULL, `register_id` varchar(64) NOT NULL); (params None)
DEBUG 2024-08-20 20:27:57,958 schema CREATE TABLE `app01_onduty` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `date` date NOT NULL, `time` smallint NOT NULL, `state` integer NOT NULL, `doctor_id` bigint NOT NULL); (params None)
DEBUG 2024-08-20 20:27:57,989 schema CREATE TABLE `app01_notice` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `msg_type` smallint NOT NULL, `time` datetime(6) NOT NULL, `isRead` bool NOT NULL, `doctor_id` bigint NOT NULL, `patient_id` varchar(64) NOT NULL, `register_id` bigint NULL, `registerMan_id` varchar(64) NULL, `treatment_id` bigint NULL); (params None)
DEBUG 2024-08-20 20:27:58,069 schema CREATE TABLE `app01_bill` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `type` smallint NOT NULL, `state` bool NOT NULL, `price` numeric(5, 2) NOT NULL, `patient_id` varchar(64) NULL, `register_id` bigint NULL, `treatment_id` bigint NULL); (params None)
DEBUG 2024-08-20 20:27:58,124 schema ALTER TABLE `app01_treatment` ADD CONSTRAINT `app01_treatment_doctor_id_a47beada_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-20 20:27:58,148 schema ALTER TABLE `app01_treatment` ADD CONSTRAINT `app01_treatment_patient_id_52a8e1e5_fk_app01_pat` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-20 20:27:58,174 schema ALTER TABLE `app01_register` ADD CONSTRAINT `app01_register_doctor_id_e0ea61dc_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-20 20:27:58,196 schema ALTER TABLE `app01_register` ADD CONSTRAINT `app01_register_patient_id_4a065a29_fk_app01_pat` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-20 20:27:58,222 schema ALTER TABLE `app01_register` ADD CONSTRAINT `app01_register_register_id_e85a8e5b_fk_app01_pat` FOREIGN KEY (`register_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-20 20:27:58,251 schema ALTER TABLE `app01_onduty` ADD CONSTRAINT `app01_onduty_doctor_id_9b012eb7_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-20 20:27:58,275 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_doctor_id_2d7f7104_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-20 20:27:58,299 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_patient_id_74974826_fk_app01_patients_identity_num` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-20 20:27:58,324 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_register_id_6c54784c_fk_app01_register_id` FOREIGN KEY (`register_id`) REFERENCES `app01_register` (`id`); (params ())
DEBUG 2024-08-20 20:27:58,352 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_registerMan_id_1bd9adce_fk_app01_pat` FOREIGN KEY (`registerMan_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-20 20:27:58,381 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_treatment_id_596ea92a_fk_app01_treatment_id` FOREIGN KEY (`treatment_id`) REFERENCES `app01_treatment` (`id`); (params ())
DEBUG 2024-08-20 20:27:58,411 schema ALTER TABLE `app01_bill` ADD CONSTRAINT `app01_bill_patient_id_96fe396a_fk_app01_patients_identity_num` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-20 20:27:58,434 schema ALTER TABLE `app01_bill` ADD CONSTRAINT `app01_bill_register_id_cf59300e_fk_app01_register_id` FOREIGN KEY (`register_id`) REFERENCES `app01_register` (`id`); (params ())
DEBUG 2024-08-20 20:27:58,459 schema ALTER TABLE `app01_bill` ADD CONSTRAINT `app01_bill_treatment_id_73ef4d98_fk_app01_treatment_id` FOREIGN KEY (`treatment_id`) REFERENCES `app01_treatment` (`id`); (params ())
DEBUG 2024-08-20 20:27:58,516 schema ALTER TABLE `django_content_type` MODIFY `name` varchar(100) NULL; (params [])
DEBUG 2024-08-20 20:27:58,578 schema ALTER TABLE `django_content_type` DROP COLUMN `name`; (params ())
DEBUG 2024-08-20 20:27:58,639 schema ALTER TABLE `auth_permission` MODIFY `name` varchar(255) NOT NULL; (params [])
DEBUG 2024-08-20 20:27:58,695 schema ALTER TABLE `auth_user` MODIFY `email` varchar(254) NOT NULL; (params [])
DEBUG 2024-08-20 20:27:58,802 schema ALTER TABLE `auth_user` MODIFY `last_login` datetime(6) NULL; (params [])
DEBUG 2024-08-20 20:27:58,912 schema ALTER TABLE `auth_user` MODIFY `username` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-20 20:27:58,969 schema ALTER TABLE `auth_user` MODIFY `last_name` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-20 20:27:59,028 schema ALTER TABLE `auth_group` MODIFY `name` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-20 20:27:59,152 schema ALTER TABLE `auth_user` MODIFY `first_name` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-20 20:27:59,204 schema CREATE TABLE `django_session` (`session_key` varchar(40) NOT NULL PRIMARY KEY, `session_data` longtext NOT NULL, `expire_date` datetime(6) NOT NULL); (params None)
DEBUG 2024-08-20 20:27:59,234 schema CREATE INDEX `django_session_expire_date_a5c62663` ON `django_session` (`expire_date`); (params ())
WARNING 2024-08-20 20:28:00,829 log Bad Request: /api/registers/list/
DEBUG 2024-08-21 09:21:42,390 schema CREATE TABLE `django_migrations` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `app` varchar(255) NOT NULL, `name` varchar(255) NOT NULL, `applied` datetime(6) NOT NULL); (params None)
DEBUG 2024-08-21 09:21:42,441 schema CREATE TABLE `django_content_type` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(100) NOT NULL, `app_label` varchar(100) NOT NULL, `model` varchar(100) NOT NULL); (params None)
DEBUG 2024-08-21 09:21:42,472 schema ALTER TABLE `django_content_type` ADD CONSTRAINT `django_content_type_app_label_model_76bd3d3b_uniq` UNIQUE (`app_label`, `model`); (params ())
DEBUG 2024-08-21 09:21:42,542 schema CREATE TABLE `auth_permission` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(50) NOT NULL, `content_type_id` integer NOT NULL, `codename` varchar(100) NOT NULL); (params None)
DEBUG 2024-08-21 09:21:42,575 schema CREATE TABLE `auth_group` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(80) NOT NULL UNIQUE); (params None)
DEBUG 2024-08-21 09:21:42,590 schema CREATE TABLE `auth_group_permissions` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `group_id` integer NOT NULL, `permission_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 09:21:42,632 schema CREATE TABLE `auth_user` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `password` varchar(128) NOT NULL, `last_login` datetime(6) NOT NULL, `is_superuser` bool NOT NULL, `username` varchar(30) NOT NULL UNIQUE, `first_name` varchar(30) NOT NULL, `last_name` varchar(30) NOT NULL, `email` varchar(75) NOT NULL, `is_staff` bool NOT NULL, `is_active` bool NOT NULL, `date_joined` datetime(6) NOT NULL); (params None)
DEBUG 2024-08-21 09:21:42,675 schema CREATE TABLE `auth_user_groups` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `user_id` integer NOT NULL, `group_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 09:21:42,723 schema CREATE TABLE `auth_user_user_permissions` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `user_id` integer NOT NULL, `permission_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 09:21:42,768 schema ALTER TABLE `auth_permission` ADD CONSTRAINT `auth_permission_content_type_id_codename_01ab375a_uniq` UNIQUE (`content_type_id`, `codename`); (params ())
DEBUG 2024-08-21 09:21:42,788 schema ALTER TABLE `auth_permission` ADD CONSTRAINT `auth_permission_content_type_id_2f476e4b_fk_django_co` FOREIGN KEY (`content_type_id`) REFERENCES `django_content_type` (`id`); (params ())
DEBUG 2024-08-21 09:21:42,813 schema ALTER TABLE `auth_group_permissions` ADD CONSTRAINT `auth_group_permissions_group_id_permission_id_0cd325b0_uniq` UNIQUE (`group_id`, `permission_id`); (params ())
DEBUG 2024-08-21 09:21:42,832 schema ALTER TABLE `auth_group_permissions` ADD CONSTRAINT `auth_group_permissions_group_id_b120cbf9_fk_auth_group_id` FOREIGN KEY (`group_id`) REFERENCES `auth_group` (`id`); (params ())
DEBUG 2024-08-21 09:21:42,857 schema ALTER TABLE `auth_group_permissions` ADD CONSTRAINT `auth_group_permissio_permission_id_84c5c92e_fk_auth_perm` FOREIGN KEY (`permission_id`) REFERENCES `auth_permission` (`id`); (params ())
DEBUG 2024-08-21 09:21:42,886 schema ALTER TABLE `auth_user_groups` ADD CONSTRAINT `auth_user_groups_user_id_group_id_94350c0c_uniq` UNIQUE (`user_id`, `group_id`); (params ())
DEBUG 2024-08-21 09:21:42,905 schema ALTER TABLE `auth_user_groups` ADD CONSTRAINT `auth_user_groups_user_id_6a12ed8b_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); (params ())
DEBUG 2024-08-21 09:21:42,928 schema ALTER TABLE `auth_user_groups` ADD CONSTRAINT `auth_user_groups_group_id_97559544_fk_auth_group_id` FOREIGN KEY (`group_id`) REFERENCES `auth_group` (`id`); (params ())
DEBUG 2024-08-21 09:21:42,956 schema ALTER TABLE `auth_user_user_permissions` ADD CONSTRAINT `auth_user_user_permissions_user_id_permission_id_14a6b632_uniq` UNIQUE (`user_id`, `permission_id`); (params ())
DEBUG 2024-08-21 09:21:42,973 schema ALTER TABLE `auth_user_user_permissions` ADD CONSTRAINT `auth_user_user_permissions_user_id_a95ead1b_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); (params ())
DEBUG 2024-08-21 09:21:42,998 schema ALTER TABLE `auth_user_user_permissions` ADD CONSTRAINT `auth_user_user_permi_permission_id_1fbb5f2c_fk_auth_perm` FOREIGN KEY (`permission_id`) REFERENCES `auth_permission` (`id`); (params ())
DEBUG 2024-08-21 09:21:43,063 schema CREATE TABLE `django_admin_log` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `action_time` datetime(6) NOT NULL, `object_id` longtext NULL, `object_repr` varchar(200) NOT NULL, `action_flag` smallint UNSIGNED NOT NULL CHECK (`action_flag` >= 0), `change_message` longtext NOT NULL, `content_type_id` integer NULL, `user_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 09:21:43,108 schema ALTER TABLE `django_admin_log` ADD CONSTRAINT `django_admin_log_content_type_id_c4bce8eb_fk_django_co` FOREIGN KEY (`content_type_id`) REFERENCES `django_content_type` (`id`); (params ())
DEBUG 2024-08-21 09:21:43,136 schema ALTER TABLE `django_admin_log` ADD CONSTRAINT `django_admin_log_user_id_c564eba6_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); (params ())
DEBUG 2024-08-21 09:21:43,259 schema CREATE TABLE `app01_doctors` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `identity_num` varchar(64) NOT NULL, `name` varchar(20) NOT NULL, `title` varchar(50) NOT NULL, `department` varchar(20) NOT NULL, `research` varchar(150) NULL, `cost` numeric(5, 2) NOT NULL, `avatar` varchar(100) NULL, `avatar_name` varchar(128) NOT NULL); (params None)
DEBUG 2024-08-21 09:21:43,276 schema CREATE TABLE `app01_medicine` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(50) NOT NULL, `medicine_type` smallint NOT NULL, `symptom` varchar(200) NOT NULL, `price` numeric(5, 2) NOT NULL, `quantity` integer NOT NULL, `photo_name` varchar(128) NOT NULL); (params None)
DEBUG 2024-08-21 09:21:43,292 schema CREATE TABLE `app01_patients` (`identity` smallint NOT NULL, `identity_num` varchar(64) NOT NULL PRIMARY KEY, `name` varchar(20) NOT NULL, `health_insurance` smallint NOT NULL, `gender` smallint NOT NULL, `birthday` date NOT NULL, `phone_num` varchar(15) NOT NULL, `address` varchar(128) NOT NULL); (params None)
DEBUG 2024-08-21 09:21:43,308 schema CREATE TABLE `app01_user` (`type` smallint NOT NULL, `identity_num` varchar(64) NOT NULL PRIMARY KEY, `password` varchar(64) NOT NULL); (params None)
DEBUG 2024-08-21 09:21:43,327 schema CREATE TABLE `app01_treatment` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `queue_id` integer NOT NULL, `time` datetime(6) NOT NULL, `advice` varchar(256) NOT NULL, `medicine` longtext NOT NULL, `price` numeric(5, 2) NOT NULL, `doctor_id` bigint NOT NULL, `patient_id` varchar(64) NOT NULL); (params None)
DEBUG 2024-08-21 09:21:43,386 schema CREATE TABLE `app01_register` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `queue_id` integer NOT NULL, `time` datetime(6) NOT NULL, `position` varchar(128) NOT NULL, `doctor_id` bigint NOT NULL, `patient_id` varchar(64) NOT NULL, `register_id` varchar(64) NOT NULL); (params None)
DEBUG 2024-08-21 09:21:43,458 schema CREATE TABLE `app01_onduty` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `date` date NOT NULL, `time` smallint NOT NULL, `state` integer NOT NULL, `doctor_id` bigint NOT NULL); (params None)
DEBUG 2024-08-21 09:21:43,494 schema CREATE TABLE `app01_notice` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `msg_type` smallint NOT NULL, `time` datetime(6) NOT NULL, `isRead` bool NOT NULL, `doctor_id` bigint NOT NULL, `patient_id` varchar(64) NOT NULL, `register_id` bigint NULL, `registerMan_id` varchar(64) NULL, `treatment_id` bigint NULL); (params None)
DEBUG 2024-08-21 09:21:43,575 schema CREATE TABLE `app01_bill` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `type` smallint NOT NULL, `state` bool NOT NULL, `price` numeric(5, 2) NOT NULL, `patient_id` varchar(64) NULL, `register_id` bigint NULL, `treatment_id` bigint NULL); (params None)
DEBUG 2024-08-21 09:21:43,636 schema ALTER TABLE `app01_treatment` ADD CONSTRAINT `app01_treatment_doctor_id_a47beada_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 09:21:43,667 schema ALTER TABLE `app01_treatment` ADD CONSTRAINT `app01_treatment_patient_id_52a8e1e5_fk_app01_pat` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 09:21:43,698 schema ALTER TABLE `app01_register` ADD CONSTRAINT `app01_register_doctor_id_e0ea61dc_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 09:21:43,724 schema ALTER TABLE `app01_register` ADD CONSTRAINT `app01_register_patient_id_4a065a29_fk_app01_pat` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 09:21:43,752 schema ALTER TABLE `app01_register` ADD CONSTRAINT `app01_register_register_id_e85a8e5b_fk_app01_pat` FOREIGN KEY (`register_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 09:21:43,784 schema ALTER TABLE `app01_onduty` ADD CONSTRAINT `app01_onduty_doctor_id_9b012eb7_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 09:21:43,813 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_doctor_id_2d7f7104_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 09:21:43,840 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_patient_id_74974826_fk_app01_patients_identity_num` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 09:21:43,874 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_register_id_6c54784c_fk_app01_register_id` FOREIGN KEY (`register_id`) REFERENCES `app01_register` (`id`); (params ())
DEBUG 2024-08-21 09:21:43,906 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_registerMan_id_1bd9adce_fk_app01_pat` FOREIGN KEY (`registerMan_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 09:21:43,942 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_treatment_id_596ea92a_fk_app01_treatment_id` FOREIGN KEY (`treatment_id`) REFERENCES `app01_treatment` (`id`); (params ())
DEBUG 2024-08-21 09:21:43,982 schema ALTER TABLE `app01_bill` ADD CONSTRAINT `app01_bill_patient_id_96fe396a_fk_app01_patients_identity_num` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 09:21:44,024 schema ALTER TABLE `app01_bill` ADD CONSTRAINT `app01_bill_register_id_cf59300e_fk_app01_register_id` FOREIGN KEY (`register_id`) REFERENCES `app01_register` (`id`); (params ())
DEBUG 2024-08-21 09:21:44,064 schema ALTER TABLE `app01_bill` ADD CONSTRAINT `app01_bill_treatment_id_73ef4d98_fk_app01_treatment_id` FOREIGN KEY (`treatment_id`) REFERENCES `app01_treatment` (`id`); (params ())
DEBUG 2024-08-21 09:21:44,142 schema ALTER TABLE `django_content_type` MODIFY `name` varchar(100) NULL; (params [])
DEBUG 2024-08-21 09:21:44,232 schema ALTER TABLE `django_content_type` DROP COLUMN `name`; (params ())
DEBUG 2024-08-21 09:21:44,300 schema ALTER TABLE `auth_permission` MODIFY `name` varchar(255) NOT NULL; (params [])
DEBUG 2024-08-21 09:21:44,401 schema ALTER TABLE `auth_user` MODIFY `email` varchar(254) NOT NULL; (params [])
DEBUG 2024-08-21 09:21:44,564 schema ALTER TABLE `auth_user` MODIFY `last_login` datetime(6) NULL; (params [])
DEBUG 2024-08-21 09:21:44,721 schema ALTER TABLE `auth_user` MODIFY `username` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 09:21:44,800 schema ALTER TABLE `auth_user` MODIFY `last_name` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 09:21:44,877 schema ALTER TABLE `auth_group` MODIFY `name` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 09:21:45,061 schema ALTER TABLE `auth_user` MODIFY `first_name` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 09:21:45,120 schema CREATE TABLE `django_session` (`session_key` varchar(40) NOT NULL PRIMARY KEY, `session_data` longtext NOT NULL, `expire_date` datetime(6) NOT NULL); (params None)
DEBUG 2024-08-21 09:21:45,146 schema CREATE INDEX `django_session_expire_date_a5c62663` ON `django_session` (`expire_date`); (params ())
WARNING 2024-08-21 09:21:49,408 log Bad Request: /api/registers/list/
WARNING 2024-08-21 09:21:49,936 log Bad Request: /api/treatments/list/
WARNING 2024-08-21 09:21:50,169 log Bad Request: /api/treatments/list/
DEBUG 2024-08-21 09:22:00,056 schema CREATE TABLE `django_migrations` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `app` varchar(255) NOT NULL, `name` varchar(255) NOT NULL, `applied` datetime(6) NOT NULL); (params None)
DEBUG 2024-08-21 09:22:00,083 schema CREATE TABLE `django_content_type` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(100) NOT NULL, `app_label` varchar(100) NOT NULL, `model` varchar(100) NOT NULL); (params None)
DEBUG 2024-08-21 09:22:00,107 schema ALTER TABLE `django_content_type` ADD CONSTRAINT `django_content_type_app_label_model_76bd3d3b_uniq` UNIQUE (`app_label`, `model`); (params ())
DEBUG 2024-08-21 09:22:00,182 schema CREATE TABLE `auth_permission` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(50) NOT NULL, `content_type_id` integer NOT NULL, `codename` varchar(100) NOT NULL); (params None)
DEBUG 2024-08-21 09:22:00,238 schema CREATE TABLE `auth_group` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(80) NOT NULL UNIQUE); (params None)
DEBUG 2024-08-21 09:22:00,259 schema CREATE TABLE `auth_group_permissions` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `group_id` integer NOT NULL, `permission_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 09:22:00,328 schema CREATE TABLE `auth_user` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `password` varchar(128) NOT NULL, `last_login` datetime(6) NOT NULL, `is_superuser` bool NOT NULL, `username` varchar(30) NOT NULL UNIQUE, `first_name` varchar(30) NOT NULL, `last_name` varchar(30) NOT NULL, `email` varchar(75) NOT NULL, `is_staff` bool NOT NULL, `is_active` bool NOT NULL, `date_joined` datetime(6) NOT NULL); (params None)
DEBUG 2024-08-21 09:22:00,353 schema CREATE TABLE `auth_user_groups` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `user_id` integer NOT NULL, `group_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 09:22:00,416 schema CREATE TABLE `auth_user_user_permissions` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `user_id` integer NOT NULL, `permission_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 09:22:00,481 schema ALTER TABLE `auth_permission` ADD CONSTRAINT `auth_permission_content_type_id_codename_01ab375a_uniq` UNIQUE (`content_type_id`, `codename`); (params ())
DEBUG 2024-08-21 09:22:00,512 schema ALTER TABLE `auth_permission` ADD CONSTRAINT `auth_permission_content_type_id_2f476e4b_fk_django_co` FOREIGN KEY (`content_type_id`) REFERENCES `django_content_type` (`id`); (params ())
DEBUG 2024-08-21 09:22:00,543 schema ALTER TABLE `auth_group_permissions` ADD CONSTRAINT `auth_group_permissions_group_id_permission_id_0cd325b0_uniq` UNIQUE (`group_id`, `permission_id`); (params ())
DEBUG 2024-08-21 09:22:00,565 schema ALTER TABLE `auth_group_permissions` ADD CONSTRAINT `auth_group_permissions_group_id_b120cbf9_fk_auth_group_id` FOREIGN KEY (`group_id`) REFERENCES `auth_group` (`id`); (params ())
DEBUG 2024-08-21 09:22:00,599 schema ALTER TABLE `auth_group_permissions` ADD CONSTRAINT `auth_group_permissio_permission_id_84c5c92e_fk_auth_perm` FOREIGN KEY (`permission_id`) REFERENCES `auth_permission` (`id`); (params ())
DEBUG 2024-08-21 09:22:00,638 schema ALTER TABLE `auth_user_groups` ADD CONSTRAINT `auth_user_groups_user_id_group_id_94350c0c_uniq` UNIQUE (`user_id`, `group_id`); (params ())
DEBUG 2024-08-21 09:22:00,660 schema ALTER TABLE `auth_user_groups` ADD CONSTRAINT `auth_user_groups_user_id_6a12ed8b_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); (params ())
DEBUG 2024-08-21 09:22:00,692 schema ALTER TABLE `auth_user_groups` ADD CONSTRAINT `auth_user_groups_group_id_97559544_fk_auth_group_id` FOREIGN KEY (`group_id`) REFERENCES `auth_group` (`id`); (params ())
DEBUG 2024-08-21 09:22:00,729 schema ALTER TABLE `auth_user_user_permissions` ADD CONSTRAINT `auth_user_user_permissions_user_id_permission_id_14a6b632_uniq` UNIQUE (`user_id`, `permission_id`); (params ())
DEBUG 2024-08-21 09:22:00,754 schema ALTER TABLE `auth_user_user_permissions` ADD CONSTRAINT `auth_user_user_permissions_user_id_a95ead1b_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); (params ())
DEBUG 2024-08-21 09:22:00,782 schema ALTER TABLE `auth_user_user_permissions` ADD CONSTRAINT `auth_user_user_permi_permission_id_1fbb5f2c_fk_auth_perm` FOREIGN KEY (`permission_id`) REFERENCES `auth_permission` (`id`); (params ())
DEBUG 2024-08-21 09:22:00,863 schema CREATE TABLE `django_admin_log` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `action_time` datetime(6) NOT NULL, `object_id` longtext NULL, `object_repr` varchar(200) NOT NULL, `action_flag` smallint UNSIGNED NOT NULL CHECK (`action_flag` >= 0), `change_message` longtext NOT NULL, `content_type_id` integer NULL, `user_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 09:22:00,925 schema ALTER TABLE `django_admin_log` ADD CONSTRAINT `django_admin_log_content_type_id_c4bce8eb_fk_django_co` FOREIGN KEY (`content_type_id`) REFERENCES `django_content_type` (`id`); (params ())
DEBUG 2024-08-21 09:22:00,962 schema ALTER TABLE `django_admin_log` ADD CONSTRAINT `django_admin_log_user_id_c564eba6_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); (params ())
DEBUG 2024-08-21 09:22:01,110 schema CREATE TABLE `app01_doctors` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `identity_num` varchar(64) NOT NULL, `name` varchar(20) NOT NULL, `title` varchar(50) NOT NULL, `department` varchar(20) NOT NULL, `research` varchar(150) NULL, `cost` numeric(5, 2) NOT NULL, `avatar` varchar(100) NULL, `avatar_name` varchar(128) NOT NULL); (params None)
DEBUG 2024-08-21 09:22:01,133 schema CREATE TABLE `app01_medicine` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(50) NOT NULL, `medicine_type` smallint NOT NULL, `symptom` varchar(200) NOT NULL, `price` numeric(5, 2) NOT NULL, `quantity` integer NOT NULL, `photo_name` varchar(128) NOT NULL); (params None)
DEBUG 2024-08-21 09:22:01,161 schema CREATE TABLE `app01_patients` (`identity` smallint NOT NULL, `identity_num` varchar(64) NOT NULL PRIMARY KEY, `name` varchar(20) NOT NULL, `health_insurance` smallint NOT NULL, `gender` smallint NOT NULL, `birthday` date NOT NULL, `phone_num` varchar(15) NOT NULL, `address` varchar(128) NOT NULL); (params None)
DEBUG 2024-08-21 09:22:01,187 schema CREATE TABLE `app01_user` (`type` smallint NOT NULL, `identity_num` varchar(64) NOT NULL PRIMARY KEY, `password` varchar(64) NOT NULL); (params None)
DEBUG 2024-08-21 09:22:01,212 schema CREATE TABLE `app01_treatment` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `queue_id` integer NOT NULL, `time` datetime(6) NOT NULL, `advice` varchar(256) NOT NULL, `medicine` longtext NOT NULL, `price` numeric(5, 2) NOT NULL, `doctor_id` bigint NOT NULL, `patient_id` varchar(64) NOT NULL); (params None)
DEBUG 2024-08-21 09:22:01,279 schema CREATE TABLE `app01_register` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `queue_id` integer NOT NULL, `time` datetime(6) NOT NULL, `position` varchar(128) NOT NULL, `doctor_id` bigint NOT NULL, `patient_id` varchar(64) NOT NULL, `register_id` varchar(64) NOT NULL); (params None)
DEBUG 2024-08-21 09:22:01,384 schema CREATE TABLE `app01_onduty` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `date` date NOT NULL, `time` smallint NOT NULL, `state` integer NOT NULL, `doctor_id` bigint NOT NULL); (params None)
DEBUG 2024-08-21 09:22:01,437 schema CREATE TABLE `app01_notice` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `msg_type` smallint NOT NULL, `time` datetime(6) NOT NULL, `isRead` bool NOT NULL, `doctor_id` bigint NOT NULL, `patient_id` varchar(64) NOT NULL, `register_id` bigint NULL, `registerMan_id` varchar(64) NULL, `treatment_id` bigint NULL); (params None)
DEBUG 2024-08-21 09:22:01,577 schema CREATE TABLE `app01_bill` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `type` smallint NOT NULL, `state` bool NOT NULL, `price` numeric(5, 2) NOT NULL, `patient_id` varchar(64) NULL, `register_id` bigint NULL, `treatment_id` bigint NULL); (params None)
DEBUG 2024-08-21 09:22:01,660 schema ALTER TABLE `app01_treatment` ADD CONSTRAINT `app01_treatment_doctor_id_a47beada_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 09:22:01,693 schema ALTER TABLE `app01_treatment` ADD CONSTRAINT `app01_treatment_patient_id_52a8e1e5_fk_app01_pat` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 09:22:01,728 schema ALTER TABLE `app01_register` ADD CONSTRAINT `app01_register_doctor_id_e0ea61dc_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 09:22:01,761 schema ALTER TABLE `app01_register` ADD CONSTRAINT `app01_register_patient_id_4a065a29_fk_app01_pat` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 09:22:01,797 schema ALTER TABLE `app01_register` ADD CONSTRAINT `app01_register_register_id_e85a8e5b_fk_app01_pat` FOREIGN KEY (`register_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 09:22:01,834 schema ALTER TABLE `app01_onduty` ADD CONSTRAINT `app01_onduty_doctor_id_9b012eb7_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 09:22:01,865 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_doctor_id_2d7f7104_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 09:22:01,897 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_patient_id_74974826_fk_app01_patients_identity_num` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 09:22:01,932 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_register_id_6c54784c_fk_app01_register_id` FOREIGN KEY (`register_id`) REFERENCES `app01_register` (`id`); (params ())
DEBUG 2024-08-21 09:22:01,966 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_registerMan_id_1bd9adce_fk_app01_pat` FOREIGN KEY (`registerMan_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 09:22:02,005 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_treatment_id_596ea92a_fk_app01_treatment_id` FOREIGN KEY (`treatment_id`) REFERENCES `app01_treatment` (`id`); (params ())
DEBUG 2024-08-21 09:22:02,050 schema ALTER TABLE `app01_bill` ADD CONSTRAINT `app01_bill_patient_id_96fe396a_fk_app01_patients_identity_num` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 09:22:02,085 schema ALTER TABLE `app01_bill` ADD CONSTRAINT `app01_bill_register_id_cf59300e_fk_app01_register_id` FOREIGN KEY (`register_id`) REFERENCES `app01_register` (`id`); (params ())
DEBUG 2024-08-21 09:22:02,124 schema ALTER TABLE `app01_bill` ADD CONSTRAINT `app01_bill_treatment_id_73ef4d98_fk_app01_treatment_id` FOREIGN KEY (`treatment_id`) REFERENCES `app01_treatment` (`id`); (params ())
DEBUG 2024-08-21 09:22:02,209 schema ALTER TABLE `django_content_type` MODIFY `name` varchar(100) NULL; (params [])
DEBUG 2024-08-21 09:22:02,362 schema ALTER TABLE `django_content_type` DROP COLUMN `name`; (params ())
DEBUG 2024-08-21 09:22:02,458 schema ALTER TABLE `auth_permission` MODIFY `name` varchar(255) NOT NULL; (params [])
DEBUG 2024-08-21 09:22:02,545 schema ALTER TABLE `auth_user` MODIFY `email` varchar(254) NOT NULL; (params [])
DEBUG 2024-08-21 09:22:02,660 schema ALTER TABLE `auth_user` MODIFY `last_login` datetime(6) NULL; (params [])
DEBUG 2024-08-21 09:22:02,830 schema ALTER TABLE `auth_user` MODIFY `username` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 09:22:02,909 schema ALTER TABLE `auth_user` MODIFY `last_name` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 09:22:03,054 schema ALTER TABLE `auth_group` MODIFY `name` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 09:22:03,252 schema ALTER TABLE `auth_user` MODIFY `first_name` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 09:22:03,329 schema CREATE TABLE `django_session` (`session_key` varchar(40) NOT NULL PRIMARY KEY, `session_data` longtext NOT NULL, `expire_date` datetime(6) NOT NULL); (params None)
DEBUG 2024-08-21 09:22:03,375 schema CREATE INDEX `django_session_expire_date_a5c62663` ON `django_session` (`expire_date`); (params ())
WARNING 2024-08-21 09:22:05,976 log Bad Request: /api/registers/list/
WARNING 2024-08-21 09:22:06,379 log Bad Request: /api/treatments/list/
WARNING 2024-08-21 09:22:06,887 log Bad Request: /api/treatments/list/
DEBUG 2024-08-21 09:26:16,602 schema CREATE TABLE `django_migrations` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `app` varchar(255) NOT NULL, `name` varchar(255) NOT NULL, `applied` datetime(6) NOT NULL); (params None)
DEBUG 2024-08-21 09:26:16,621 schema CREATE TABLE `django_content_type` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(100) NOT NULL, `app_label` varchar(100) NOT NULL, `model` varchar(100) NOT NULL); (params None)
DEBUG 2024-08-21 09:26:16,641 schema ALTER TABLE `django_content_type` ADD CONSTRAINT `django_content_type_app_label_model_76bd3d3b_uniq` UNIQUE (`app_label`, `model`); (params ())
DEBUG 2024-08-21 09:26:16,694 schema CREATE TABLE `auth_permission` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(50) NOT NULL, `content_type_id` integer NOT NULL, `codename` varchar(100) NOT NULL); (params None)
DEBUG 2024-08-21 09:26:16,726 schema CREATE TABLE `auth_group` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(80) NOT NULL UNIQUE); (params None)
DEBUG 2024-08-21 09:26:16,742 schema CREATE TABLE `auth_group_permissions` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `group_id` integer NOT NULL, `permission_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 09:26:16,788 schema CREATE TABLE `auth_user` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `password` varchar(128) NOT NULL, `last_login` datetime(6) NOT NULL, `is_superuser` bool NOT NULL, `username` varchar(30) NOT NULL UNIQUE, `first_name` varchar(30) NOT NULL, `last_name` varchar(30) NOT NULL, `email` varchar(75) NOT NULL, `is_staff` bool NOT NULL, `is_active` bool NOT NULL, `date_joined` datetime(6) NOT NULL); (params None)
DEBUG 2024-08-21 09:26:16,808 schema CREATE TABLE `auth_user_groups` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `user_id` integer NOT NULL, `group_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 09:26:16,851 schema CREATE TABLE `auth_user_user_permissions` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `user_id` integer NOT NULL, `permission_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 09:26:16,897 schema ALTER TABLE `auth_permission` ADD CONSTRAINT `auth_permission_content_type_id_codename_01ab375a_uniq` UNIQUE (`content_type_id`, `codename`); (params ())
DEBUG 2024-08-21 09:26:16,916 schema ALTER TABLE `auth_permission` ADD CONSTRAINT `auth_permission_content_type_id_2f476e4b_fk_django_co` FOREIGN KEY (`content_type_id`) REFERENCES `django_content_type` (`id`); (params ())
DEBUG 2024-08-21 09:26:16,942 schema ALTER TABLE `auth_group_permissions` ADD CONSTRAINT `auth_group_permissions_group_id_permission_id_0cd325b0_uniq` UNIQUE (`group_id`, `permission_id`); (params ())
DEBUG 2024-08-21 09:26:16,958 schema ALTER TABLE `auth_group_permissions` ADD CONSTRAINT `auth_group_permissions_group_id_b120cbf9_fk_auth_group_id` FOREIGN KEY (`group_id`) REFERENCES `auth_group` (`id`); (params ())
DEBUG 2024-08-21 09:26:16,982 schema ALTER TABLE `auth_group_permissions` ADD CONSTRAINT `auth_group_permissio_permission_id_84c5c92e_fk_auth_perm` FOREIGN KEY (`permission_id`) REFERENCES `auth_permission` (`id`); (params ())
DEBUG 2024-08-21 09:26:17,010 schema ALTER TABLE `auth_user_groups` ADD CONSTRAINT `auth_user_groups_user_id_group_id_94350c0c_uniq` UNIQUE (`user_id`, `group_id`); (params ())
DEBUG 2024-08-21 09:26:17,029 schema ALTER TABLE `auth_user_groups` ADD CONSTRAINT `auth_user_groups_user_id_6a12ed8b_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); (params ())
DEBUG 2024-08-21 09:26:17,056 schema ALTER TABLE `auth_user_groups` ADD CONSTRAINT `auth_user_groups_group_id_97559544_fk_auth_group_id` FOREIGN KEY (`group_id`) REFERENCES `auth_group` (`id`); (params ())
DEBUG 2024-08-21 09:26:17,084 schema ALTER TABLE `auth_user_user_permissions` ADD CONSTRAINT `auth_user_user_permissions_user_id_permission_id_14a6b632_uniq` UNIQUE (`user_id`, `permission_id`); (params ())
DEBUG 2024-08-21 09:26:17,104 schema ALTER TABLE `auth_user_user_permissions` ADD CONSTRAINT `auth_user_user_permissions_user_id_a95ead1b_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); (params ())
DEBUG 2024-08-21 09:26:17,130 schema ALTER TABLE `auth_user_user_permissions` ADD CONSTRAINT `auth_user_user_permi_permission_id_1fbb5f2c_fk_auth_perm` FOREIGN KEY (`permission_id`) REFERENCES `auth_permission` (`id`); (params ())
DEBUG 2024-08-21 09:26:17,193 schema CREATE TABLE `django_admin_log` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `action_time` datetime(6) NOT NULL, `object_id` longtext NULL, `object_repr` varchar(200) NOT NULL, `action_flag` smallint UNSIGNED NOT NULL CHECK (`action_flag` >= 0), `change_message` longtext NOT NULL, `content_type_id` integer NULL, `user_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 09:26:17,235 schema ALTER TABLE `django_admin_log` ADD CONSTRAINT `django_admin_log_content_type_id_c4bce8eb_fk_django_co` FOREIGN KEY (`content_type_id`) REFERENCES `django_content_type` (`id`); (params ())
DEBUG 2024-08-21 09:26:17,261 schema ALTER TABLE `django_admin_log` ADD CONSTRAINT `django_admin_log_user_id_c564eba6_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); (params ())
DEBUG 2024-08-21 09:26:17,382 schema CREATE TABLE `app01_doctors` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `identity_num` varchar(64) NOT NULL, `name` varchar(20) NOT NULL, `title` varchar(50) NOT NULL, `department` varchar(20) NOT NULL, `research` varchar(150) NULL, `cost` numeric(5, 2) NOT NULL, `avatar` varchar(100) NULL, `avatar_name` varchar(128) NOT NULL); (params None)
DEBUG 2024-08-21 09:26:17,403 schema CREATE TABLE `app01_medicine` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(50) NOT NULL, `medicine_type` smallint NOT NULL, `symptom` varchar(200) NOT NULL, `price` numeric(5, 2) NOT NULL, `quantity` integer NOT NULL, `photo_name` varchar(128) NOT NULL); (params None)
DEBUG 2024-08-21 09:26:17,423 schema CREATE TABLE `app01_patients` (`identity` smallint NOT NULL, `identity_num` varchar(64) NOT NULL PRIMARY KEY, `name` varchar(20) NOT NULL, `health_insurance` smallint NOT NULL, `gender` smallint NOT NULL, `birthday` date NOT NULL, `phone_num` varchar(15) NOT NULL, `address` varchar(128) NOT NULL); (params None)
DEBUG 2024-08-21 09:26:17,445 schema CREATE TABLE `app01_user` (`type` smallint NOT NULL, `identity_num` varchar(64) NOT NULL PRIMARY KEY, `password` varchar(64) NOT NULL); (params None)
DEBUG 2024-08-21 09:26:17,466 schema CREATE TABLE `app01_treatment` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `queue_id` integer NOT NULL, `time` datetime(6) NOT NULL, `advice` varchar(256) NOT NULL, `medicine` longtext NOT NULL, `price` numeric(5, 2) NOT NULL, `doctor_id` bigint NOT NULL, `patient_id` varchar(64) NOT NULL); (params None)
DEBUG 2024-08-21 09:26:17,514 schema CREATE TABLE `app01_register` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `queue_id` integer NOT NULL, `time` datetime(6) NOT NULL, `position` varchar(128) NOT NULL, `doctor_id` bigint NOT NULL, `patient_id` varchar(64) NOT NULL, `register_id` varchar(64) NOT NULL); (params None)
DEBUG 2024-08-21 09:26:17,584 schema CREATE TABLE `app01_onduty` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `date` date NOT NULL, `time` smallint NOT NULL, `state` integer NOT NULL, `doctor_id` bigint NOT NULL); (params None)
DEBUG 2024-08-21 09:26:17,631 schema CREATE TABLE `app01_notice` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `msg_type` smallint NOT NULL, `time` datetime(6) NOT NULL, `isRead` bool NOT NULL, `doctor_id` bigint NOT NULL, `patient_id` varchar(64) NOT NULL, `register_id` bigint NULL, `registerMan_id` varchar(64) NULL, `treatment_id` bigint NULL); (params None)
DEBUG 2024-08-21 09:26:17,731 schema CREATE TABLE `app01_bill` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `type` smallint NOT NULL, `state` bool NOT NULL, `price` numeric(5, 2) NOT NULL, `patient_id` varchar(64) NULL, `register_id` bigint NULL, `treatment_id` bigint NULL); (params None)
DEBUG 2024-08-21 09:26:17,790 schema ALTER TABLE `app01_treatment` ADD CONSTRAINT `app01_treatment_doctor_id_a47beada_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 09:26:17,818 schema ALTER TABLE `app01_treatment` ADD CONSTRAINT `app01_treatment_patient_id_52a8e1e5_fk_app01_pat` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 09:26:17,844 schema ALTER TABLE `app01_register` ADD CONSTRAINT `app01_register_doctor_id_e0ea61dc_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 09:26:17,872 schema ALTER TABLE `app01_register` ADD CONSTRAINT `app01_register_patient_id_4a065a29_fk_app01_pat` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 09:26:17,900 schema ALTER TABLE `app01_register` ADD CONSTRAINT `app01_register_register_id_e85a8e5b_fk_app01_pat` FOREIGN KEY (`register_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 09:26:17,929 schema ALTER TABLE `app01_onduty` ADD CONSTRAINT `app01_onduty_doctor_id_9b012eb7_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 09:26:17,955 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_doctor_id_2d7f7104_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 09:26:17,982 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_patient_id_74974826_fk_app01_patients_identity_num` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 09:26:18,011 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_register_id_6c54784c_fk_app01_register_id` FOREIGN KEY (`register_id`) REFERENCES `app01_register` (`id`); (params ())
DEBUG 2024-08-21 09:26:18,042 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_registerMan_id_1bd9adce_fk_app01_pat` FOREIGN KEY (`registerMan_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 09:26:18,076 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_treatment_id_596ea92a_fk_app01_treatment_id` FOREIGN KEY (`treatment_id`) REFERENCES `app01_treatment` (`id`); (params ())
DEBUG 2024-08-21 09:26:18,107 schema ALTER TABLE `app01_bill` ADD CONSTRAINT `app01_bill_patient_id_96fe396a_fk_app01_patients_identity_num` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 09:26:18,134 schema ALTER TABLE `app01_bill` ADD CONSTRAINT `app01_bill_register_id_cf59300e_fk_app01_register_id` FOREIGN KEY (`register_id`) REFERENCES `app01_register` (`id`); (params ())
DEBUG 2024-08-21 09:26:18,162 schema ALTER TABLE `app01_bill` ADD CONSTRAINT `app01_bill_treatment_id_73ef4d98_fk_app01_treatment_id` FOREIGN KEY (`treatment_id`) REFERENCES `app01_treatment` (`id`); (params ())
DEBUG 2024-08-21 09:26:18,221 schema ALTER TABLE `django_content_type` MODIFY `name` varchar(100) NULL; (params [])
DEBUG 2024-08-21 09:26:18,300 schema ALTER TABLE `django_content_type` DROP COLUMN `name`; (params ())
DEBUG 2024-08-21 09:26:18,357 schema ALTER TABLE `auth_permission` MODIFY `name` varchar(255) NOT NULL; (params [])
DEBUG 2024-08-21 09:26:18,417 schema ALTER TABLE `auth_user` MODIFY `email` varchar(254) NOT NULL; (params [])
DEBUG 2024-08-21 09:26:18,509 schema ALTER TABLE `auth_user` MODIFY `last_login` datetime(6) NULL; (params [])
DEBUG 2024-08-21 09:26:18,623 schema ALTER TABLE `auth_user` MODIFY `username` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 09:26:18,684 schema ALTER TABLE `auth_user` MODIFY `last_name` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 09:26:18,752 schema ALTER TABLE `auth_group` MODIFY `name` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 09:26:18,879 schema ALTER TABLE `auth_user` MODIFY `first_name` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 09:26:18,934 schema CREATE TABLE `django_session` (`session_key` varchar(40) NOT NULL PRIMARY KEY, `session_data` longtext NOT NULL, `expire_date` datetime(6) NOT NULL); (params None)
DEBUG 2024-08-21 09:26:18,966 schema CREATE INDEX `django_session_expire_date_a5c62663` ON `django_session` (`expire_date`); (params ())
WARNING 2024-08-21 09:26:20,681 log Bad Request: /api/registers/list/
WARNING 2024-08-21 09:26:20,983 log Bad Request: /api/treatments/list/
WARNING 2024-08-21 09:26:21,281 log Bad Request: /api/treatments/list/
DEBUG 2024-08-21 09:30:22,210 schema CREATE TABLE `django_migrations` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `app` varchar(255) NOT NULL, `name` varchar(255) NOT NULL, `applied` datetime(6) NOT NULL); (params None)
DEBUG 2024-08-21 09:30:22,228 schema CREATE TABLE `django_content_type` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(100) NOT NULL, `app_label` varchar(100) NOT NULL, `model` varchar(100) NOT NULL); (params None)
DEBUG 2024-08-21 09:30:22,247 schema ALTER TABLE `django_content_type` ADD CONSTRAINT `django_content_type_app_label_model_76bd3d3b_uniq` UNIQUE (`app_label`, `model`); (params ())
DEBUG 2024-08-21 09:30:22,297 schema CREATE TABLE `auth_permission` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(50) NOT NULL, `content_type_id` integer NOT NULL, `codename` varchar(100) NOT NULL); (params None)
DEBUG 2024-08-21 09:30:22,332 schema CREATE TABLE `auth_group` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(80) NOT NULL UNIQUE); (params None)
DEBUG 2024-08-21 09:30:22,350 schema CREATE TABLE `auth_group_permissions` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `group_id` integer NOT NULL, `permission_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 09:30:22,409 schema CREATE TABLE `auth_user` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `password` varchar(128) NOT NULL, `last_login` datetime(6) NOT NULL, `is_superuser` bool NOT NULL, `username` varchar(30) NOT NULL UNIQUE, `first_name` varchar(30) NOT NULL, `last_name` varchar(30) NOT NULL, `email` varchar(75) NOT NULL, `is_staff` bool NOT NULL, `is_active` bool NOT NULL, `date_joined` datetime(6) NOT NULL); (params None)
DEBUG 2024-08-21 09:30:22,430 schema CREATE TABLE `auth_user_groups` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `user_id` integer NOT NULL, `group_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 09:30:22,477 schema CREATE TABLE `auth_user_user_permissions` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `user_id` integer NOT NULL, `permission_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 09:30:22,522 schema ALTER TABLE `auth_permission` ADD CONSTRAINT `auth_permission_content_type_id_codename_01ab375a_uniq` UNIQUE (`content_type_id`, `codename`); (params ())
DEBUG 2024-08-21 09:30:22,540 schema ALTER TABLE `auth_permission` ADD CONSTRAINT `auth_permission_content_type_id_2f476e4b_fk_django_co` FOREIGN KEY (`content_type_id`) REFERENCES `django_content_type` (`id`); (params ())
DEBUG 2024-08-21 09:30:22,566 schema ALTER TABLE `auth_group_permissions` ADD CONSTRAINT `auth_group_permissions_group_id_permission_id_0cd325b0_uniq` UNIQUE (`group_id`, `permission_id`); (params ())
DEBUG 2024-08-21 09:30:22,584 schema ALTER TABLE `auth_group_permissions` ADD CONSTRAINT `auth_group_permissions_group_id_b120cbf9_fk_auth_group_id` FOREIGN KEY (`group_id`) REFERENCES `auth_group` (`id`); (params ())
DEBUG 2024-08-21 09:30:22,614 schema ALTER TABLE `auth_group_permissions` ADD CONSTRAINT `auth_group_permissio_permission_id_84c5c92e_fk_auth_perm` FOREIGN KEY (`permission_id`) REFERENCES `auth_permission` (`id`); (params ())
DEBUG 2024-08-21 09:30:22,642 schema ALTER TABLE `auth_user_groups` ADD CONSTRAINT `auth_user_groups_user_id_group_id_94350c0c_uniq` UNIQUE (`user_id`, `group_id`); (params ())
DEBUG 2024-08-21 09:30:22,659 schema ALTER TABLE `auth_user_groups` ADD CONSTRAINT `auth_user_groups_user_id_6a12ed8b_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); (params ())
DEBUG 2024-08-21 09:30:22,691 schema ALTER TABLE `auth_user_groups` ADD CONSTRAINT `auth_user_groups_group_id_97559544_fk_auth_group_id` FOREIGN KEY (`group_id`) REFERENCES `auth_group` (`id`); (params ())
DEBUG 2024-08-21 09:30:22,718 schema ALTER TABLE `auth_user_user_permissions` ADD CONSTRAINT `auth_user_user_permissions_user_id_permission_id_14a6b632_uniq` UNIQUE (`user_id`, `permission_id`); (params ())
DEBUG 2024-08-21 09:30:22,740 schema ALTER TABLE `auth_user_user_permissions` ADD CONSTRAINT `auth_user_user_permissions_user_id_a95ead1b_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); (params ())
DEBUG 2024-08-21 09:30:22,766 schema ALTER TABLE `auth_user_user_permissions` ADD CONSTRAINT `auth_user_user_permi_permission_id_1fbb5f2c_fk_auth_perm` FOREIGN KEY (`permission_id`) REFERENCES `auth_permission` (`id`); (params ())
DEBUG 2024-08-21 09:30:22,830 schema CREATE TABLE `django_admin_log` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `action_time` datetime(6) NOT NULL, `object_id` longtext NULL, `object_repr` varchar(200) NOT NULL, `action_flag` smallint UNSIGNED NOT NULL CHECK (`action_flag` >= 0), `change_message` longtext NOT NULL, `content_type_id` integer NULL, `user_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 09:30:22,884 schema ALTER TABLE `django_admin_log` ADD CONSTRAINT `django_admin_log_content_type_id_c4bce8eb_fk_django_co` FOREIGN KEY (`content_type_id`) REFERENCES `django_content_type` (`id`); (params ())
DEBUG 2024-08-21 09:30:22,913 schema ALTER TABLE `django_admin_log` ADD CONSTRAINT `django_admin_log_user_id_c564eba6_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); (params ())
DEBUG 2024-08-21 09:30:23,043 schema CREATE TABLE `app01_doctors` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `identity_num` varchar(64) NOT NULL, `name` varchar(20) NOT NULL, `title` varchar(50) NOT NULL, `department` varchar(20) NOT NULL, `research` varchar(150) NULL, `cost` numeric(5, 2) NOT NULL, `avatar` varchar(100) NULL, `avatar_name` varchar(128) NOT NULL); (params None)
DEBUG 2024-08-21 09:30:23,064 schema CREATE TABLE `app01_medicine` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(50) NOT NULL, `medicine_type` smallint NOT NULL, `symptom` varchar(200) NOT NULL, `price` numeric(5, 2) NOT NULL, `quantity` integer NOT NULL, `photo_name` varchar(128) NOT NULL); (params None)
DEBUG 2024-08-21 09:30:23,085 schema CREATE TABLE `app01_patients` (`identity` smallint NOT NULL, `identity_num` varchar(64) NOT NULL PRIMARY KEY, `name` varchar(20) NOT NULL, `health_insurance` smallint NOT NULL, `gender` smallint NOT NULL, `birthday` date NOT NULL, `phone_num` varchar(15) NOT NULL, `address` varchar(128) NOT NULL); (params None)
DEBUG 2024-08-21 09:30:23,101 schema CREATE TABLE `app01_user` (`type` smallint NOT NULL, `identity_num` varchar(64) NOT NULL PRIMARY KEY, `password` varchar(64) NOT NULL); (params None)
DEBUG 2024-08-21 09:30:23,121 schema CREATE TABLE `app01_treatment` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `queue_id` integer NOT NULL, `time` datetime(6) NOT NULL, `advice` varchar(256) NOT NULL, `medicine` longtext NOT NULL, `price` numeric(5, 2) NOT NULL, `doctor_id` bigint NOT NULL, `patient_id` varchar(64) NOT NULL); (params None)
DEBUG 2024-08-21 09:30:23,170 schema CREATE TABLE `app01_register` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `queue_id` integer NOT NULL, `time` datetime(6) NOT NULL, `position` varchar(128) NOT NULL, `doctor_id` bigint NOT NULL, `patient_id` varchar(64) NOT NULL, `register_id` varchar(64) NOT NULL); (params None)
DEBUG 2024-08-21 09:30:23,238 schema CREATE TABLE `app01_onduty` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `date` date NOT NULL, `time` smallint NOT NULL, `state` integer NOT NULL, `doctor_id` bigint NOT NULL); (params None)
DEBUG 2024-08-21 09:30:23,274 schema CREATE TABLE `app01_notice` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `msg_type` smallint NOT NULL, `time` datetime(6) NOT NULL, `isRead` bool NOT NULL, `doctor_id` bigint NOT NULL, `patient_id` varchar(64) NOT NULL, `register_id` bigint NULL, `registerMan_id` varchar(64) NULL, `treatment_id` bigint NULL); (params None)
DEBUG 2024-08-21 09:30:23,473 schema CREATE TABLE `app01_bill` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `type` smallint NOT NULL, `state` bool NOT NULL, `price` numeric(5, 2) NOT NULL, `patient_id` varchar(64) NULL, `register_id` bigint NULL, `treatment_id` bigint NULL); (params None)
DEBUG 2024-08-21 09:30:23,677 schema ALTER TABLE `app01_treatment` ADD CONSTRAINT `app01_treatment_doctor_id_a47beada_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 09:30:23,752 schema ALTER TABLE `app01_treatment` ADD CONSTRAINT `app01_treatment_patient_id_52a8e1e5_fk_app01_pat` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 09:30:23,785 schema ALTER TABLE `app01_register` ADD CONSTRAINT `app01_register_doctor_id_e0ea61dc_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 09:30:23,812 schema ALTER TABLE `app01_register` ADD CONSTRAINT `app01_register_patient_id_4a065a29_fk_app01_pat` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 09:30:23,849 schema ALTER TABLE `app01_register` ADD CONSTRAINT `app01_register_register_id_e85a8e5b_fk_app01_pat` FOREIGN KEY (`register_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 09:30:23,881 schema ALTER TABLE `app01_onduty` ADD CONSTRAINT `app01_onduty_doctor_id_9b012eb7_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 09:30:23,907 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_doctor_id_2d7f7104_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 09:30:23,941 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_patient_id_74974826_fk_app01_patients_identity_num` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 09:30:23,969 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_register_id_6c54784c_fk_app01_register_id` FOREIGN KEY (`register_id`) REFERENCES `app01_register` (`id`); (params ())
DEBUG 2024-08-21 09:30:24,001 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_registerMan_id_1bd9adce_fk_app01_pat` FOREIGN KEY (`registerMan_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 09:30:24,033 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_treatment_id_596ea92a_fk_app01_treatment_id` FOREIGN KEY (`treatment_id`) REFERENCES `app01_treatment` (`id`); (params ())
DEBUG 2024-08-21 09:30:24,067 schema ALTER TABLE `app01_bill` ADD CONSTRAINT `app01_bill_patient_id_96fe396a_fk_app01_patients_identity_num` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 09:30:24,096 schema ALTER TABLE `app01_bill` ADD CONSTRAINT `app01_bill_register_id_cf59300e_fk_app01_register_id` FOREIGN KEY (`register_id`) REFERENCES `app01_register` (`id`); (params ())
DEBUG 2024-08-21 09:30:24,124 schema ALTER TABLE `app01_bill` ADD CONSTRAINT `app01_bill_treatment_id_73ef4d98_fk_app01_treatment_id` FOREIGN KEY (`treatment_id`) REFERENCES `app01_treatment` (`id`); (params ())
DEBUG 2024-08-21 09:30:24,195 schema ALTER TABLE `django_content_type` MODIFY `name` varchar(100) NULL; (params [])
DEBUG 2024-08-21 09:30:24,273 schema ALTER TABLE `django_content_type` DROP COLUMN `name`; (params ())
DEBUG 2024-08-21 09:30:24,333 schema ALTER TABLE `auth_permission` MODIFY `name` varchar(255) NOT NULL; (params [])
DEBUG 2024-08-21 09:30:24,412 schema ALTER TABLE `auth_user` MODIFY `email` varchar(254) NOT NULL; (params [])
DEBUG 2024-08-21 09:30:24,519 schema ALTER TABLE `auth_user` MODIFY `last_login` datetime(6) NULL; (params [])
DEBUG 2024-08-21 09:30:24,657 schema ALTER TABLE `auth_user` MODIFY `username` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 09:30:24,720 schema ALTER TABLE `auth_user` MODIFY `last_name` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 09:30:24,796 schema ALTER TABLE `auth_group` MODIFY `name` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 09:30:24,958 schema ALTER TABLE `auth_user` MODIFY `first_name` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 09:30:25,032 schema CREATE TABLE `django_session` (`session_key` varchar(40) NOT NULL PRIMARY KEY, `session_data` longtext NOT NULL, `expire_date` datetime(6) NOT NULL); (params None)
DEBUG 2024-08-21 09:30:25,069 schema CREATE INDEX `django_session_expire_date_a5c62663` ON `django_session` (`expire_date`); (params ())
WARNING 2024-08-21 09:30:26,917 log Bad Request: /api/registers/list/
WARNING 2024-08-21 09:30:27,232 log Bad Request: /api/treatments/list/
WARNING 2024-08-21 09:30:27,501 log Bad Request: /api/treatments/list/
DEBUG 2024-08-21 10:07:04,846 schema CREATE TABLE `django_migrations` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `app` varchar(255) NOT NULL, `name` varchar(255) NOT NULL, `applied` datetime(6) NOT NULL); (params None)
DEBUG 2024-08-21 10:07:04,870 schema CREATE TABLE `django_content_type` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(100) NOT NULL, `app_label` varchar(100) NOT NULL, `model` varchar(100) NOT NULL); (params None)
DEBUG 2024-08-21 10:07:04,895 schema ALTER TABLE `django_content_type` ADD CONSTRAINT `django_content_type_app_label_model_76bd3d3b_uniq` UNIQUE (`app_label`, `model`); (params ())
DEBUG 2024-08-21 10:07:04,975 schema CREATE TABLE `auth_permission` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(50) NOT NULL, `content_type_id` integer NOT NULL, `codename` varchar(100) NOT NULL); (params None)
DEBUG 2024-08-21 10:07:05,020 schema CREATE TABLE `auth_group` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(80) NOT NULL UNIQUE); (params None)
DEBUG 2024-08-21 10:07:05,044 schema CREATE TABLE `auth_group_permissions` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `group_id` integer NOT NULL, `permission_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 10:07:05,112 schema CREATE TABLE `auth_user` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `password` varchar(128) NOT NULL, `last_login` datetime(6) NOT NULL, `is_superuser` bool NOT NULL, `username` varchar(30) NOT NULL UNIQUE, `first_name` varchar(30) NOT NULL, `last_name` varchar(30) NOT NULL, `email` varchar(75) NOT NULL, `is_staff` bool NOT NULL, `is_active` bool NOT NULL, `date_joined` datetime(6) NOT NULL); (params None)
DEBUG 2024-08-21 10:07:05,131 schema CREATE TABLE `auth_user_groups` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `user_id` integer NOT NULL, `group_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 10:07:05,170 schema CREATE TABLE `auth_user_user_permissions` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `user_id` integer NOT NULL, `permission_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 10:07:05,213 schema ALTER TABLE `auth_permission` ADD CONSTRAINT `auth_permission_content_type_id_codename_01ab375a_uniq` UNIQUE (`content_type_id`, `codename`); (params ())
DEBUG 2024-08-21 10:07:05,230 schema ALTER TABLE `auth_permission` ADD CONSTRAINT `auth_permission_content_type_id_2f476e4b_fk_django_co` FOREIGN KEY (`content_type_id`) REFERENCES `django_content_type` (`id`); (params ())
DEBUG 2024-08-21 10:07:05,254 schema ALTER TABLE `auth_group_permissions` ADD CONSTRAINT `auth_group_permissions_group_id_permission_id_0cd325b0_uniq` UNIQUE (`group_id`, `permission_id`); (params ())
DEBUG 2024-08-21 10:07:05,273 schema ALTER TABLE `auth_group_permissions` ADD CONSTRAINT `auth_group_permissions_group_id_b120cbf9_fk_auth_group_id` FOREIGN KEY (`group_id`) REFERENCES `auth_group` (`id`); (params ())
DEBUG 2024-08-21 10:07:05,298 schema ALTER TABLE `auth_group_permissions` ADD CONSTRAINT `auth_group_permissio_permission_id_84c5c92e_fk_auth_perm` FOREIGN KEY (`permission_id`) REFERENCES `auth_permission` (`id`); (params ())
DEBUG 2024-08-21 10:07:05,325 schema ALTER TABLE `auth_user_groups` ADD CONSTRAINT `auth_user_groups_user_id_group_id_94350c0c_uniq` UNIQUE (`user_id`, `group_id`); (params ())
DEBUG 2024-08-21 10:07:05,341 schema ALTER TABLE `auth_user_groups` ADD CONSTRAINT `auth_user_groups_user_id_6a12ed8b_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); (params ())
DEBUG 2024-08-21 10:07:05,369 schema ALTER TABLE `auth_user_groups` ADD CONSTRAINT `auth_user_groups_group_id_97559544_fk_auth_group_id` FOREIGN KEY (`group_id`) REFERENCES `auth_group` (`id`); (params ())
DEBUG 2024-08-21 10:07:05,396 schema ALTER TABLE `auth_user_user_permissions` ADD CONSTRAINT `auth_user_user_permissions_user_id_permission_id_14a6b632_uniq` UNIQUE (`user_id`, `permission_id`); (params ())
DEBUG 2024-08-21 10:07:05,413 schema ALTER TABLE `auth_user_user_permissions` ADD CONSTRAINT `auth_user_user_permissions_user_id_a95ead1b_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); (params ())
DEBUG 2024-08-21 10:07:05,443 schema ALTER TABLE `auth_user_user_permissions` ADD CONSTRAINT `auth_user_user_permi_permission_id_1fbb5f2c_fk_auth_perm` FOREIGN KEY (`permission_id`) REFERENCES `auth_permission` (`id`); (params ())
DEBUG 2024-08-21 10:07:05,502 schema CREATE TABLE `django_admin_log` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `action_time` datetime(6) NOT NULL, `object_id` longtext NULL, `object_repr` varchar(200) NOT NULL, `action_flag` smallint UNSIGNED NOT NULL CHECK (`action_flag` >= 0), `change_message` longtext NOT NULL, `content_type_id` integer NULL, `user_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 10:07:05,549 schema ALTER TABLE `django_admin_log` ADD CONSTRAINT `django_admin_log_content_type_id_c4bce8eb_fk_django_co` FOREIGN KEY (`content_type_id`) REFERENCES `django_content_type` (`id`); (params ())
DEBUG 2024-08-21 10:07:05,581 schema ALTER TABLE `django_admin_log` ADD CONSTRAINT `django_admin_log_user_id_c564eba6_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); (params ())
DEBUG 2024-08-21 10:07:05,700 schema CREATE TABLE `app01_doctors` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `identity_num` varchar(64) NOT NULL, `name` varchar(20) NOT NULL, `title` varchar(50) NOT NULL, `department` varchar(20) NOT NULL, `research` varchar(150) NULL, `cost` numeric(5, 2) NOT NULL, `avatar` varchar(100) NULL, `avatar_name` varchar(128) NOT NULL); (params None)
DEBUG 2024-08-21 10:07:05,717 schema CREATE TABLE `app01_medicine` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(50) NOT NULL, `medicine_type` smallint NOT NULL, `symptom` varchar(200) NOT NULL, `price` numeric(5, 2) NOT NULL, `quantity` integer NOT NULL, `photo_name` varchar(128) NOT NULL); (params None)
DEBUG 2024-08-21 10:07:05,734 schema CREATE TABLE `app01_patients` (`identity` smallint NOT NULL, `identity_num` varchar(64) NOT NULL PRIMARY KEY, `name` varchar(20) NOT NULL, `health_insurance` smallint NOT NULL, `gender` smallint NOT NULL, `birthday` date NOT NULL, `phone_num` varchar(15) NOT NULL, `address` varchar(128) NOT NULL); (params None)
DEBUG 2024-08-21 10:07:05,750 schema CREATE TABLE `app01_user` (`type` smallint NOT NULL, `identity_num` varchar(64) NOT NULL PRIMARY KEY, `password` varchar(64) NOT NULL); (params None)
DEBUG 2024-08-21 10:07:05,767 schema CREATE TABLE `app01_treatment` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `queue_id` integer NOT NULL, `time` datetime(6) NOT NULL, `advice` varchar(256) NOT NULL, `medicine` longtext NOT NULL, `price` numeric(5, 2) NOT NULL, `doctor_id` bigint NOT NULL, `patient_id` varchar(64) NOT NULL); (params None)
DEBUG 2024-08-21 10:07:05,811 schema CREATE TABLE `app01_register` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `queue_id` integer NOT NULL, `time` datetime(6) NOT NULL, `position` varchar(128) NOT NULL, `doctor_id` bigint NOT NULL, `patient_id` varchar(64) NOT NULL, `register_id` varchar(64) NOT NULL); (params None)
DEBUG 2024-08-21 10:07:05,869 schema CREATE TABLE `app01_onduty` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `date` date NOT NULL, `time` smallint NOT NULL, `state` integer NOT NULL, `doctor_id` bigint NOT NULL); (params None)
DEBUG 2024-08-21 10:07:05,900 schema CREATE TABLE `app01_notice` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `msg_type` smallint NOT NULL, `time` datetime(6) NOT NULL, `isRead` bool NOT NULL, `doctor_id` bigint NOT NULL, `patient_id` varchar(64) NOT NULL, `register_id` bigint NULL, `registerMan_id` varchar(64) NULL, `treatment_id` bigint NULL); (params None)
DEBUG 2024-08-21 10:07:05,984 schema CREATE TABLE `app01_bill` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `type` smallint NOT NULL, `state` bool NOT NULL, `price` numeric(5, 2) NOT NULL, `patient_id` varchar(64) NULL, `register_id` bigint NULL, `treatment_id` bigint NULL); (params None)
DEBUG 2024-08-21 10:07:06,036 schema ALTER TABLE `app01_treatment` ADD CONSTRAINT `app01_treatment_doctor_id_a47beada_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 10:07:06,061 schema ALTER TABLE `app01_treatment` ADD CONSTRAINT `app01_treatment_patient_id_52a8e1e5_fk_app01_pat` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 10:07:06,090 schema ALTER TABLE `app01_register` ADD CONSTRAINT `app01_register_doctor_id_e0ea61dc_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 10:07:06,116 schema ALTER TABLE `app01_register` ADD CONSTRAINT `app01_register_patient_id_4a065a29_fk_app01_pat` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 10:07:06,142 schema ALTER TABLE `app01_register` ADD CONSTRAINT `app01_register_register_id_e85a8e5b_fk_app01_pat` FOREIGN KEY (`register_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 10:07:06,169 schema ALTER TABLE `app01_onduty` ADD CONSTRAINT `app01_onduty_doctor_id_9b012eb7_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 10:07:06,196 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_doctor_id_2d7f7104_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 10:07:06,220 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_patient_id_74974826_fk_app01_patients_identity_num` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 10:07:06,246 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_register_id_6c54784c_fk_app01_register_id` FOREIGN KEY (`register_id`) REFERENCES `app01_register` (`id`); (params ())
DEBUG 2024-08-21 10:07:06,279 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_registerMan_id_1bd9adce_fk_app01_pat` FOREIGN KEY (`registerMan_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 10:07:06,316 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_treatment_id_596ea92a_fk_app01_treatment_id` FOREIGN KEY (`treatment_id`) REFERENCES `app01_treatment` (`id`); (params ())
DEBUG 2024-08-21 10:07:06,356 schema ALTER TABLE `app01_bill` ADD CONSTRAINT `app01_bill_patient_id_96fe396a_fk_app01_patients_identity_num` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 10:07:06,395 schema ALTER TABLE `app01_bill` ADD CONSTRAINT `app01_bill_register_id_cf59300e_fk_app01_register_id` FOREIGN KEY (`register_id`) REFERENCES `app01_register` (`id`); (params ())
DEBUG 2024-08-21 10:07:06,432 schema ALTER TABLE `app01_bill` ADD CONSTRAINT `app01_bill_treatment_id_73ef4d98_fk_app01_treatment_id` FOREIGN KEY (`treatment_id`) REFERENCES `app01_treatment` (`id`); (params ())
DEBUG 2024-08-21 10:07:06,523 schema ALTER TABLE `django_content_type` MODIFY `name` varchar(100) NULL; (params [])
DEBUG 2024-08-21 10:07:06,628 schema ALTER TABLE `django_content_type` DROP COLUMN `name`; (params ())
DEBUG 2024-08-21 10:07:06,703 schema ALTER TABLE `auth_permission` MODIFY `name` varchar(255) NOT NULL; (params [])
DEBUG 2024-08-21 10:07:06,796 schema ALTER TABLE `auth_user` MODIFY `email` varchar(254) NOT NULL; (params [])
DEBUG 2024-08-21 10:07:06,915 schema ALTER TABLE `auth_user` MODIFY `last_login` datetime(6) NULL; (params [])
DEBUG 2024-08-21 10:07:07,090 schema ALTER TABLE `auth_user` MODIFY `username` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 10:07:07,165 schema ALTER TABLE `auth_user` MODIFY `last_name` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 10:07:07,258 schema ALTER TABLE `auth_group` MODIFY `name` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 10:07:07,438 schema ALTER TABLE `auth_user` MODIFY `first_name` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 10:07:07,513 schema CREATE TABLE `django_session` (`session_key` varchar(40) NOT NULL PRIMARY KEY, `session_data` longtext NOT NULL, `expire_date` datetime(6) NOT NULL); (params None)
DEBUG 2024-08-21 10:07:07,569 schema CREATE INDEX `django_session_expire_date_a5c62663` ON `django_session` (`expire_date`); (params ())
WARNING 2024-08-21 10:07:09,422 log Bad Request: /api/doctors/setData/
WARNING 2024-08-21 10:07:09,828 log Bad Request: /api/doctors/delete/
WARNING 2024-08-21 10:07:11,538 log Bad Request: /api/registers/list/
WARNING 2024-08-21 10:07:11,969 log Bad Request: /api/treatments/list/
WARNING 2024-08-21 10:07:12,469 log Bad Request: /api/treatments/list/
DEBUG 2024-08-21 10:08:46,268 schema CREATE TABLE `django_migrations` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `app` varchar(255) NOT NULL, `name` varchar(255) NOT NULL, `applied` datetime(6) NOT NULL); (params None)
DEBUG 2024-08-21 10:08:46,285 schema CREATE TABLE `django_content_type` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(100) NOT NULL, `app_label` varchar(100) NOT NULL, `model` varchar(100) NOT NULL); (params None)
DEBUG 2024-08-21 10:08:46,304 schema ALTER TABLE `django_content_type` ADD CONSTRAINT `django_content_type_app_label_model_76bd3d3b_uniq` UNIQUE (`app_label`, `model`); (params ())
DEBUG 2024-08-21 10:08:46,348 schema CREATE TABLE `auth_permission` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(50) NOT NULL, `content_type_id` integer NOT NULL, `codename` varchar(100) NOT NULL); (params None)
DEBUG 2024-08-21 10:08:46,380 schema CREATE TABLE `auth_group` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(80) NOT NULL UNIQUE); (params None)
DEBUG 2024-08-21 10:08:46,400 schema CREATE TABLE `auth_group_permissions` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `group_id` integer NOT NULL, `permission_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 10:08:46,446 schema CREATE TABLE `auth_user` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `password` varchar(128) NOT NULL, `last_login` datetime(6) NOT NULL, `is_superuser` bool NOT NULL, `username` varchar(30) NOT NULL UNIQUE, `first_name` varchar(30) NOT NULL, `last_name` varchar(30) NOT NULL, `email` varchar(75) NOT NULL, `is_staff` bool NOT NULL, `is_active` bool NOT NULL, `date_joined` datetime(6) NOT NULL); (params None)
DEBUG 2024-08-21 10:08:46,461 schema CREATE TABLE `auth_user_groups` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `user_id` integer NOT NULL, `group_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 10:08:46,505 schema CREATE TABLE `auth_user_user_permissions` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `user_id` integer NOT NULL, `permission_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 10:08:46,549 schema ALTER TABLE `auth_permission` ADD CONSTRAINT `auth_permission_content_type_id_codename_01ab375a_uniq` UNIQUE (`content_type_id`, `codename`); (params ())
DEBUG 2024-08-21 10:08:46,567 schema ALTER TABLE `auth_permission` ADD CONSTRAINT `auth_permission_content_type_id_2f476e4b_fk_django_co` FOREIGN KEY (`content_type_id`) REFERENCES `django_content_type` (`id`); (params ())
DEBUG 2024-08-21 10:08:46,592 schema ALTER TABLE `auth_group_permissions` ADD CONSTRAINT `auth_group_permissions_group_id_permission_id_0cd325b0_uniq` UNIQUE (`group_id`, `permission_id`); (params ())
DEBUG 2024-08-21 10:08:46,610 schema ALTER TABLE `auth_group_permissions` ADD CONSTRAINT `auth_group_permissions_group_id_b120cbf9_fk_auth_group_id` FOREIGN KEY (`group_id`) REFERENCES `auth_group` (`id`); (params ())
DEBUG 2024-08-21 10:08:46,637 schema ALTER TABLE `auth_group_permissions` ADD CONSTRAINT `auth_group_permissio_permission_id_84c5c92e_fk_auth_perm` FOREIGN KEY (`permission_id`) REFERENCES `auth_permission` (`id`); (params ())
DEBUG 2024-08-21 10:08:46,662 schema ALTER TABLE `auth_user_groups` ADD CONSTRAINT `auth_user_groups_user_id_group_id_94350c0c_uniq` UNIQUE (`user_id`, `group_id`); (params ())
DEBUG 2024-08-21 10:08:46,680 schema ALTER TABLE `auth_user_groups` ADD CONSTRAINT `auth_user_groups_user_id_6a12ed8b_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); (params ())
DEBUG 2024-08-21 10:08:46,704 schema ALTER TABLE `auth_user_groups` ADD CONSTRAINT `auth_user_groups_group_id_97559544_fk_auth_group_id` FOREIGN KEY (`group_id`) REFERENCES `auth_group` (`id`); (params ())
DEBUG 2024-08-21 10:08:46,730 schema ALTER TABLE `auth_user_user_permissions` ADD CONSTRAINT `auth_user_user_permissions_user_id_permission_id_14a6b632_uniq` UNIQUE (`user_id`, `permission_id`); (params ())
DEBUG 2024-08-21 10:08:46,748 schema ALTER TABLE `auth_user_user_permissions` ADD CONSTRAINT `auth_user_user_permissions_user_id_a95ead1b_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); (params ())
DEBUG 2024-08-21 10:08:46,771 schema ALTER TABLE `auth_user_user_permissions` ADD CONSTRAINT `auth_user_user_permi_permission_id_1fbb5f2c_fk_auth_perm` FOREIGN KEY (`permission_id`) REFERENCES `auth_permission` (`id`); (params ())
DEBUG 2024-08-21 10:08:46,827 schema CREATE TABLE `django_admin_log` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `action_time` datetime(6) NOT NULL, `object_id` longtext NULL, `object_repr` varchar(200) NOT NULL, `action_flag` smallint UNSIGNED NOT NULL CHECK (`action_flag` >= 0), `change_message` longtext NOT NULL, `content_type_id` integer NULL, `user_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 10:08:46,874 schema ALTER TABLE `django_admin_log` ADD CONSTRAINT `django_admin_log_content_type_id_c4bce8eb_fk_django_co` FOREIGN KEY (`content_type_id`) REFERENCES `django_content_type` (`id`); (params ())
DEBUG 2024-08-21 10:08:46,907 schema ALTER TABLE `django_admin_log` ADD CONSTRAINT `django_admin_log_user_id_c564eba6_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); (params ())
DEBUG 2024-08-21 10:08:47,018 schema CREATE TABLE `app01_doctors` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `identity_num` varchar(64) NOT NULL, `name` varchar(20) NOT NULL, `title` varchar(50) NOT NULL, `department` varchar(20) NOT NULL, `research` varchar(150) NULL, `cost` numeric(5, 2) NOT NULL, `avatar` varchar(100) NULL, `avatar_name` varchar(128) NOT NULL); (params None)
DEBUG 2024-08-21 10:08:47,038 schema CREATE TABLE `app01_medicine` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(50) NOT NULL, `medicine_type` smallint NOT NULL, `symptom` varchar(200) NOT NULL, `price` numeric(5, 2) NOT NULL, `quantity` integer NOT NULL, `photo_name` varchar(128) NOT NULL); (params None)
DEBUG 2024-08-21 10:08:47,055 schema CREATE TABLE `app01_patients` (`identity` smallint NOT NULL, `identity_num` varchar(64) NOT NULL PRIMARY KEY, `name` varchar(20) NOT NULL, `health_insurance` smallint NOT NULL, `gender` smallint NOT NULL, `birthday` date NOT NULL, `phone_num` varchar(15) NOT NULL, `address` varchar(128) NOT NULL); (params None)
DEBUG 2024-08-21 10:08:47,074 schema CREATE TABLE `app01_user` (`type` smallint NOT NULL, `identity_num` varchar(64) NOT NULL PRIMARY KEY, `password` varchar(64) NOT NULL); (params None)
DEBUG 2024-08-21 10:08:47,092 schema CREATE TABLE `app01_treatment` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `queue_id` integer NOT NULL, `time` datetime(6) NOT NULL, `advice` varchar(256) NOT NULL, `medicine` longtext NOT NULL, `price` numeric(5, 2) NOT NULL, `doctor_id` bigint NOT NULL, `patient_id` varchar(64) NOT NULL); (params None)
DEBUG 2024-08-21 10:08:47,140 schema CREATE TABLE `app01_register` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `queue_id` integer NOT NULL, `time` datetime(6) NOT NULL, `position` varchar(128) NOT NULL, `doctor_id` bigint NOT NULL, `patient_id` varchar(64) NOT NULL, `register_id` varchar(64) NOT NULL); (params None)
DEBUG 2024-08-21 10:08:47,195 schema CREATE TABLE `app01_onduty` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `date` date NOT NULL, `time` smallint NOT NULL, `state` integer NOT NULL, `doctor_id` bigint NOT NULL); (params None)
DEBUG 2024-08-21 10:08:47,227 schema CREATE TABLE `app01_notice` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `msg_type` smallint NOT NULL, `time` datetime(6) NOT NULL, `isRead` bool NOT NULL, `doctor_id` bigint NOT NULL, `patient_id` varchar(64) NOT NULL, `register_id` bigint NULL, `registerMan_id` varchar(64) NULL, `treatment_id` bigint NULL); (params None)
DEBUG 2024-08-21 10:08:47,327 schema CREATE TABLE `app01_bill` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `type` smallint NOT NULL, `state` bool NOT NULL, `price` numeric(5, 2) NOT NULL, `patient_id` varchar(64) NULL, `register_id` bigint NULL, `treatment_id` bigint NULL); (params None)
DEBUG 2024-08-21 10:08:47,385 schema ALTER TABLE `app01_treatment` ADD CONSTRAINT `app01_treatment_doctor_id_a47beada_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 10:08:47,412 schema ALTER TABLE `app01_treatment` ADD CONSTRAINT `app01_treatment_patient_id_52a8e1e5_fk_app01_pat` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 10:08:47,453 schema ALTER TABLE `app01_register` ADD CONSTRAINT `app01_register_doctor_id_e0ea61dc_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 10:08:47,478 schema ALTER TABLE `app01_register` ADD CONSTRAINT `app01_register_patient_id_4a065a29_fk_app01_pat` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 10:08:47,504 schema ALTER TABLE `app01_register` ADD CONSTRAINT `app01_register_register_id_e85a8e5b_fk_app01_pat` FOREIGN KEY (`register_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 10:08:47,532 schema ALTER TABLE `app01_onduty` ADD CONSTRAINT `app01_onduty_doctor_id_9b012eb7_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 10:08:47,557 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_doctor_id_2d7f7104_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 10:08:47,582 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_patient_id_74974826_fk_app01_patients_identity_num` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 10:08:47,609 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_register_id_6c54784c_fk_app01_register_id` FOREIGN KEY (`register_id`) REFERENCES `app01_register` (`id`); (params ())
DEBUG 2024-08-21 10:08:47,637 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_registerMan_id_1bd9adce_fk_app01_pat` FOREIGN KEY (`registerMan_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 10:08:47,665 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_treatment_id_596ea92a_fk_app01_treatment_id` FOREIGN KEY (`treatment_id`) REFERENCES `app01_treatment` (`id`); (params ())
DEBUG 2024-08-21 10:08:47,695 schema ALTER TABLE `app01_bill` ADD CONSTRAINT `app01_bill_patient_id_96fe396a_fk_app01_patients_identity_num` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 10:08:47,718 schema ALTER TABLE `app01_bill` ADD CONSTRAINT `app01_bill_register_id_cf59300e_fk_app01_register_id` FOREIGN KEY (`register_id`) REFERENCES `app01_register` (`id`); (params ())
DEBUG 2024-08-21 10:08:47,743 schema ALTER TABLE `app01_bill` ADD CONSTRAINT `app01_bill_treatment_id_73ef4d98_fk_app01_treatment_id` FOREIGN KEY (`treatment_id`) REFERENCES `app01_treatment` (`id`); (params ())
DEBUG 2024-08-21 10:08:47,797 schema ALTER TABLE `django_content_type` MODIFY `name` varchar(100) NULL; (params [])
DEBUG 2024-08-21 10:08:47,862 schema ALTER TABLE `django_content_type` DROP COLUMN `name`; (params ())
DEBUG 2024-08-21 10:08:47,915 schema ALTER TABLE `auth_permission` MODIFY `name` varchar(255) NOT NULL; (params [])
DEBUG 2024-08-21 10:08:47,970 schema ALTER TABLE `auth_user` MODIFY `email` varchar(254) NOT NULL; (params [])
DEBUG 2024-08-21 10:08:48,052 schema ALTER TABLE `auth_user` MODIFY `last_login` datetime(6) NULL; (params [])
DEBUG 2024-08-21 10:08:48,168 schema ALTER TABLE `auth_user` MODIFY `username` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 10:08:48,236 schema ALTER TABLE `auth_user` MODIFY `last_name` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 10:08:48,294 schema ALTER TABLE `auth_group` MODIFY `name` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 10:08:48,419 schema ALTER TABLE `auth_user` MODIFY `first_name` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 10:08:48,481 schema CREATE TABLE `django_session` (`session_key` varchar(40) NOT NULL PRIMARY KEY, `session_data` longtext NOT NULL, `expire_date` datetime(6) NOT NULL); (params None)
DEBUG 2024-08-21 10:08:48,510 schema CREATE INDEX `django_session_expire_date_a5c62663` ON `django_session` (`expire_date`); (params ())
WARNING 2024-08-21 10:08:49,827 log Bad Request: /api/doctors/setData/
WARNING 2024-08-21 10:08:50,090 log Bad Request: /api/doctors/delete/
WARNING 2024-08-21 10:08:51,245 log Bad Request: /api/registers/list/
WARNING 2024-08-21 10:08:51,571 log Bad Request: /api/treatments/list/
WARNING 2024-08-21 10:08:51,842 log Bad Request: /api/treatments/list/
DEBUG 2024-08-21 10:29:05,266 schema CREATE TABLE `django_migrations` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `app` varchar(255) NOT NULL, `name` varchar(255) NOT NULL, `applied` datetime(6) NOT NULL); (params None)
DEBUG 2024-08-21 10:29:05,292 schema CREATE TABLE `django_content_type` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(100) NOT NULL, `app_label` varchar(100) NOT NULL, `model` varchar(100) NOT NULL); (params None)
DEBUG 2024-08-21 10:29:05,315 schema ALTER TABLE `django_content_type` ADD CONSTRAINT `django_content_type_app_label_model_76bd3d3b_uniq` UNIQUE (`app_label`, `model`); (params ())
DEBUG 2024-08-21 10:29:05,380 schema CREATE TABLE `auth_permission` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(50) NOT NULL, `content_type_id` integer NOT NULL, `codename` varchar(100) NOT NULL); (params None)
DEBUG 2024-08-21 10:29:05,428 schema CREATE TABLE `auth_group` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(80) NOT NULL UNIQUE); (params None)
DEBUG 2024-08-21 10:29:05,453 schema CREATE TABLE `auth_group_permissions` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `group_id` integer NOT NULL, `permission_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 10:29:05,518 schema CREATE TABLE `auth_user` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `password` varchar(128) NOT NULL, `last_login` datetime(6) NOT NULL, `is_superuser` bool NOT NULL, `username` varchar(30) NOT NULL UNIQUE, `first_name` varchar(30) NOT NULL, `last_name` varchar(30) NOT NULL, `email` varchar(75) NOT NULL, `is_staff` bool NOT NULL, `is_active` bool NOT NULL, `date_joined` datetime(6) NOT NULL); (params None)
DEBUG 2024-08-21 10:29:05,538 schema CREATE TABLE `auth_user_groups` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `user_id` integer NOT NULL, `group_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 10:29:05,610 schema CREATE TABLE `auth_user_user_permissions` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `user_id` integer NOT NULL, `permission_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 10:29:05,674 schema ALTER TABLE `auth_permission` ADD CONSTRAINT `auth_permission_content_type_id_codename_01ab375a_uniq` UNIQUE (`content_type_id`, `codename`); (params ())
DEBUG 2024-08-21 10:29:05,701 schema ALTER TABLE `auth_permission` ADD CONSTRAINT `auth_permission_content_type_id_2f476e4b_fk_django_co` FOREIGN KEY (`content_type_id`) REFERENCES `django_content_type` (`id`); (params ())
DEBUG 2024-08-21 10:29:05,740 schema ALTER TABLE `auth_group_permissions` ADD CONSTRAINT `auth_group_permissions_group_id_permission_id_0cd325b0_uniq` UNIQUE (`group_id`, `permission_id`); (params ())
DEBUG 2024-08-21 10:29:05,764 schema ALTER TABLE `auth_group_permissions` ADD CONSTRAINT `auth_group_permissions_group_id_b120cbf9_fk_auth_group_id` FOREIGN KEY (`group_id`) REFERENCES `auth_group` (`id`); (params ())
DEBUG 2024-08-21 10:29:05,795 schema ALTER TABLE `auth_group_permissions` ADD CONSTRAINT `auth_group_permissio_permission_id_84c5c92e_fk_auth_perm` FOREIGN KEY (`permission_id`) REFERENCES `auth_permission` (`id`); (params ())
DEBUG 2024-08-21 10:29:05,828 schema ALTER TABLE `auth_user_groups` ADD CONSTRAINT `auth_user_groups_user_id_group_id_94350c0c_uniq` UNIQUE (`user_id`, `group_id`); (params ())
DEBUG 2024-08-21 10:29:05,855 schema ALTER TABLE `auth_user_groups` ADD CONSTRAINT `auth_user_groups_user_id_6a12ed8b_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); (params ())
DEBUG 2024-08-21 10:29:05,896 schema ALTER TABLE `auth_user_groups` ADD CONSTRAINT `auth_user_groups_group_id_97559544_fk_auth_group_id` FOREIGN KEY (`group_id`) REFERENCES `auth_group` (`id`); (params ())
DEBUG 2024-08-21 10:29:05,932 schema ALTER TABLE `auth_user_user_permissions` ADD CONSTRAINT `auth_user_user_permissions_user_id_permission_id_14a6b632_uniq` UNIQUE (`user_id`, `permission_id`); (params ())
DEBUG 2024-08-21 10:29:05,954 schema ALTER TABLE `auth_user_user_permissions` ADD CONSTRAINT `auth_user_user_permissions_user_id_a95ead1b_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); (params ())
DEBUG 2024-08-21 10:29:05,980 schema ALTER TABLE `auth_user_user_permissions` ADD CONSTRAINT `auth_user_user_permi_permission_id_1fbb5f2c_fk_auth_perm` FOREIGN KEY (`permission_id`) REFERENCES `auth_permission` (`id`); (params ())
DEBUG 2024-08-21 10:29:06,065 schema CREATE TABLE `django_admin_log` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `action_time` datetime(6) NOT NULL, `object_id` longtext NULL, `object_repr` varchar(200) NOT NULL, `action_flag` smallint UNSIGNED NOT NULL CHECK (`action_flag` >= 0), `change_message` longtext NOT NULL, `content_type_id` integer NULL, `user_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 10:29:06,153 schema ALTER TABLE `django_admin_log` ADD CONSTRAINT `django_admin_log_content_type_id_c4bce8eb_fk_django_co` FOREIGN KEY (`content_type_id`) REFERENCES `django_content_type` (`id`); (params ())
DEBUG 2024-08-21 10:29:06,191 schema ALTER TABLE `django_admin_log` ADD CONSTRAINT `django_admin_log_user_id_c564eba6_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); (params ())
DEBUG 2024-08-21 10:29:06,382 schema CREATE TABLE `app01_doctors` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `identity_num` varchar(64) NOT NULL, `name` varchar(20) NOT NULL, `title` varchar(50) NOT NULL, `department` varchar(20) NOT NULL, `research` varchar(150) NULL, `cost` numeric(5, 2) NOT NULL, `avatar` varchar(100) NULL, `avatar_name` varchar(128) NOT NULL); (params None)
DEBUG 2024-08-21 10:29:06,415 schema CREATE TABLE `app01_medicine` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(50) NOT NULL, `medicine_type` smallint NOT NULL, `symptom` varchar(200) NOT NULL, `price` numeric(5, 2) NOT NULL, `quantity` integer NOT NULL, `photo_name` varchar(128) NOT NULL); (params None)
DEBUG 2024-08-21 10:29:06,442 schema CREATE TABLE `app01_patients` (`identity` smallint NOT NULL, `identity_num` varchar(64) NOT NULL PRIMARY KEY, `name` varchar(20) NOT NULL, `health_insurance` smallint NOT NULL, `gender` smallint NOT NULL, `birthday` date NOT NULL, `phone_num` varchar(15) NOT NULL, `address` varchar(128) NOT NULL); (params None)
DEBUG 2024-08-21 10:29:06,466 schema CREATE TABLE `app01_user` (`type` smallint NOT NULL, `identity_num` varchar(64) NOT NULL PRIMARY KEY, `password` varchar(64) NOT NULL); (params None)
DEBUG 2024-08-21 10:29:06,491 schema CREATE TABLE `app01_treatment` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `queue_id` integer NOT NULL, `time` datetime(6) NOT NULL, `advice` varchar(256) NOT NULL, `medicine` longtext NOT NULL, `price` numeric(5, 2) NOT NULL, `doctor_id` bigint NOT NULL, `patient_id` varchar(64) NOT NULL); (params None)
DEBUG 2024-08-21 10:29:06,568 schema CREATE TABLE `app01_register` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `queue_id` integer NOT NULL, `time` datetime(6) NOT NULL, `position` varchar(128) NOT NULL, `doctor_id` bigint NOT NULL, `patient_id` varchar(64) NOT NULL, `register_id` varchar(64) NOT NULL); (params None)
DEBUG 2024-08-21 10:29:06,667 schema CREATE TABLE `app01_onduty` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `date` date NOT NULL, `time` smallint NOT NULL, `state` integer NOT NULL, `doctor_id` bigint NOT NULL); (params None)
DEBUG 2024-08-21 10:29:06,715 schema CREATE TABLE `app01_notice` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `msg_type` smallint NOT NULL, `time` datetime(6) NOT NULL, `isRead` bool NOT NULL, `doctor_id` bigint NOT NULL, `patient_id` varchar(64) NOT NULL, `register_id` bigint NULL, `registerMan_id` varchar(64) NULL, `treatment_id` bigint NULL); (params None)
DEBUG 2024-08-21 10:29:06,844 schema CREATE TABLE `app01_bill` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `type` smallint NOT NULL, `state` bool NOT NULL, `price` numeric(5, 2) NOT NULL, `patient_id` varchar(64) NULL, `register_id` bigint NULL, `treatment_id` bigint NULL); (params None)
DEBUG 2024-08-21 10:29:06,910 schema ALTER TABLE `app01_treatment` ADD CONSTRAINT `app01_treatment_doctor_id_a47beada_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 10:29:06,938 schema ALTER TABLE `app01_treatment` ADD CONSTRAINT `app01_treatment_patient_id_52a8e1e5_fk_app01_pat` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 10:29:06,966 schema ALTER TABLE `app01_register` ADD CONSTRAINT `app01_register_doctor_id_e0ea61dc_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 10:29:06,990 schema ALTER TABLE `app01_register` ADD CONSTRAINT `app01_register_patient_id_4a065a29_fk_app01_pat` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 10:29:07,015 schema ALTER TABLE `app01_register` ADD CONSTRAINT `app01_register_register_id_e85a8e5b_fk_app01_pat` FOREIGN KEY (`register_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 10:29:07,045 schema ALTER TABLE `app01_onduty` ADD CONSTRAINT `app01_onduty_doctor_id_9b012eb7_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 10:29:07,069 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_doctor_id_2d7f7104_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 10:29:07,093 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_patient_id_74974826_fk_app01_patients_identity_num` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 10:29:07,117 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_register_id_6c54784c_fk_app01_register_id` FOREIGN KEY (`register_id`) REFERENCES `app01_register` (`id`); (params ())
DEBUG 2024-08-21 10:29:07,144 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_registerMan_id_1bd9adce_fk_app01_pat` FOREIGN KEY (`registerMan_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 10:29:07,172 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_treatment_id_596ea92a_fk_app01_treatment_id` FOREIGN KEY (`treatment_id`) REFERENCES `app01_treatment` (`id`); (params ())
DEBUG 2024-08-21 10:29:07,200 schema ALTER TABLE `app01_bill` ADD CONSTRAINT `app01_bill_patient_id_96fe396a_fk_app01_patients_identity_num` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 10:29:07,227 schema ALTER TABLE `app01_bill` ADD CONSTRAINT `app01_bill_register_id_cf59300e_fk_app01_register_id` FOREIGN KEY (`register_id`) REFERENCES `app01_register` (`id`); (params ())
DEBUG 2024-08-21 10:29:07,261 schema ALTER TABLE `app01_bill` ADD CONSTRAINT `app01_bill_treatment_id_73ef4d98_fk_app01_treatment_id` FOREIGN KEY (`treatment_id`) REFERENCES `app01_treatment` (`id`); (params ())
DEBUG 2024-08-21 10:29:07,314 schema ALTER TABLE `django_content_type` MODIFY `name` varchar(100) NULL; (params [])
DEBUG 2024-08-21 10:29:07,378 schema ALTER TABLE `django_content_type` DROP COLUMN `name`; (params ())
DEBUG 2024-08-21 10:29:07,432 schema ALTER TABLE `auth_permission` MODIFY `name` varchar(255) NOT NULL; (params [])
DEBUG 2024-08-21 10:29:07,495 schema ALTER TABLE `auth_user` MODIFY `email` varchar(254) NOT NULL; (params [])
DEBUG 2024-08-21 10:29:07,583 schema ALTER TABLE `auth_user` MODIFY `last_login` datetime(6) NULL; (params [])
DEBUG 2024-08-21 10:29:07,687 schema ALTER TABLE `auth_user` MODIFY `username` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 10:29:07,743 schema ALTER TABLE `auth_user` MODIFY `last_name` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 10:29:07,799 schema ALTER TABLE `auth_group` MODIFY `name` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 10:29:07,919 schema ALTER TABLE `auth_user` MODIFY `first_name` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 10:29:07,977 schema CREATE TABLE `django_session` (`session_key` varchar(40) NOT NULL PRIMARY KEY, `session_data` longtext NOT NULL, `expire_date` datetime(6) NOT NULL); (params None)
DEBUG 2024-08-21 10:29:08,014 schema CREATE INDEX `django_session_expire_date_a5c62663` ON `django_session` (`expire_date`); (params ())
DEBUG 2024-08-21 10:31:11,071 schema CREATE TABLE `django_migrations` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `app` varchar(255) NOT NULL, `name` varchar(255) NOT NULL, `applied` datetime(6) NOT NULL); (params None)
DEBUG 2024-08-21 10:31:11,089 schema CREATE TABLE `django_content_type` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(100) NOT NULL, `app_label` varchar(100) NOT NULL, `model` varchar(100) NOT NULL); (params None)
DEBUG 2024-08-21 10:31:11,108 schema ALTER TABLE `django_content_type` ADD CONSTRAINT `django_content_type_app_label_model_76bd3d3b_uniq` UNIQUE (`app_label`, `model`); (params ())
DEBUG 2024-08-21 10:31:11,153 schema CREATE TABLE `auth_permission` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(50) NOT NULL, `content_type_id` integer NOT NULL, `codename` varchar(100) NOT NULL); (params None)
DEBUG 2024-08-21 10:31:11,194 schema CREATE TABLE `auth_group` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(80) NOT NULL UNIQUE); (params None)
DEBUG 2024-08-21 10:31:11,211 schema CREATE TABLE `auth_group_permissions` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `group_id` integer NOT NULL, `permission_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 10:31:11,263 schema CREATE TABLE `auth_user` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `password` varchar(128) NOT NULL, `last_login` datetime(6) NOT NULL, `is_superuser` bool NOT NULL, `username` varchar(30) NOT NULL UNIQUE, `first_name` varchar(30) NOT NULL, `last_name` varchar(30) NOT NULL, `email` varchar(75) NOT NULL, `is_staff` bool NOT NULL, `is_active` bool NOT NULL, `date_joined` datetime(6) NOT NULL); (params None)
DEBUG 2024-08-21 10:31:11,286 schema CREATE TABLE `auth_user_groups` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `user_id` integer NOT NULL, `group_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 10:31:11,351 schema CREATE TABLE `auth_user_user_permissions` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `user_id` integer NOT NULL, `permission_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 10:31:11,417 schema ALTER TABLE `auth_permission` ADD CONSTRAINT `auth_permission_content_type_id_codename_01ab375a_uniq` UNIQUE (`content_type_id`, `codename`); (params ())
DEBUG 2024-08-21 10:31:11,446 schema ALTER TABLE `auth_permission` ADD CONSTRAINT `auth_permission_content_type_id_2f476e4b_fk_django_co` FOREIGN KEY (`content_type_id`) REFERENCES `django_content_type` (`id`); (params ())
DEBUG 2024-08-21 10:31:11,481 schema ALTER TABLE `auth_group_permissions` ADD CONSTRAINT `auth_group_permissions_group_id_permission_id_0cd325b0_uniq` UNIQUE (`group_id`, `permission_id`); (params ())
DEBUG 2024-08-21 10:31:11,503 schema ALTER TABLE `auth_group_permissions` ADD CONSTRAINT `auth_group_permissions_group_id_b120cbf9_fk_auth_group_id` FOREIGN KEY (`group_id`) REFERENCES `auth_group` (`id`); (params ())
DEBUG 2024-08-21 10:31:11,539 schema ALTER TABLE `auth_group_permissions` ADD CONSTRAINT `auth_group_permissio_permission_id_84c5c92e_fk_auth_perm` FOREIGN KEY (`permission_id`) REFERENCES `auth_permission` (`id`); (params ())
DEBUG 2024-08-21 10:31:11,569 schema ALTER TABLE `auth_user_groups` ADD CONSTRAINT `auth_user_groups_user_id_group_id_94350c0c_uniq` UNIQUE (`user_id`, `group_id`); (params ())
DEBUG 2024-08-21 10:31:11,588 schema ALTER TABLE `auth_user_groups` ADD CONSTRAINT `auth_user_groups_user_id_6a12ed8b_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); (params ())
DEBUG 2024-08-21 10:31:11,620 schema ALTER TABLE `auth_user_groups` ADD CONSTRAINT `auth_user_groups_group_id_97559544_fk_auth_group_id` FOREIGN KEY (`group_id`) REFERENCES `auth_group` (`id`); (params ())
DEBUG 2024-08-21 10:31:11,644 schema ALTER TABLE `auth_user_user_permissions` ADD CONSTRAINT `auth_user_user_permissions_user_id_permission_id_14a6b632_uniq` UNIQUE (`user_id`, `permission_id`); (params ())
DEBUG 2024-08-21 10:31:11,663 schema ALTER TABLE `auth_user_user_permissions` ADD CONSTRAINT `auth_user_user_permissions_user_id_a95ead1b_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); (params ())
DEBUG 2024-08-21 10:31:11,690 schema ALTER TABLE `auth_user_user_permissions` ADD CONSTRAINT `auth_user_user_permi_permission_id_1fbb5f2c_fk_auth_perm` FOREIGN KEY (`permission_id`) REFERENCES `auth_permission` (`id`); (params ())
DEBUG 2024-08-21 10:31:11,752 schema CREATE TABLE `django_admin_log` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `action_time` datetime(6) NOT NULL, `object_id` longtext NULL, `object_repr` varchar(200) NOT NULL, `action_flag` smallint UNSIGNED NOT NULL CHECK (`action_flag` >= 0), `change_message` longtext NOT NULL, `content_type_id` integer NULL, `user_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 10:31:11,802 schema ALTER TABLE `django_admin_log` ADD CONSTRAINT `django_admin_log_content_type_id_c4bce8eb_fk_django_co` FOREIGN KEY (`content_type_id`) REFERENCES `django_content_type` (`id`); (params ())
DEBUG 2024-08-21 10:31:11,833 schema ALTER TABLE `django_admin_log` ADD CONSTRAINT `django_admin_log_user_id_c564eba6_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); (params ())
DEBUG 2024-08-21 10:31:11,948 schema CREATE TABLE `app01_doctors` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `identity_num` varchar(64) NOT NULL, `name` varchar(20) NOT NULL, `title` varchar(50) NOT NULL, `department` varchar(20) NOT NULL, `research` varchar(150) NULL, `cost` numeric(5, 2) NOT NULL, `avatar` varchar(100) NULL, `avatar_name` varchar(128) NOT NULL); (params None)
DEBUG 2024-08-21 10:31:11,964 schema CREATE TABLE `app01_medicine` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(50) NOT NULL, `medicine_type` smallint NOT NULL, `symptom` varchar(200) NOT NULL, `price` numeric(5, 2) NOT NULL, `quantity` integer NOT NULL, `photo_name` varchar(128) NOT NULL); (params None)
DEBUG 2024-08-21 10:31:11,982 schema CREATE TABLE `app01_patients` (`identity` smallint NOT NULL, `identity_num` varchar(64) NOT NULL PRIMARY KEY, `name` varchar(20) NOT NULL, `health_insurance` smallint NOT NULL, `gender` smallint NOT NULL, `birthday` date NOT NULL, `phone_num` varchar(15) NOT NULL, `address` varchar(128) NOT NULL); (params None)
DEBUG 2024-08-21 10:31:12,000 schema CREATE TABLE `app01_user` (`type` smallint NOT NULL, `identity_num` varchar(64) NOT NULL PRIMARY KEY, `password` varchar(64) NOT NULL); (params None)
DEBUG 2024-08-21 10:31:12,017 schema CREATE TABLE `app01_treatment` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `queue_id` integer NOT NULL, `time` datetime(6) NOT NULL, `advice` varchar(256) NOT NULL, `medicine` longtext NOT NULL, `price` numeric(5, 2) NOT NULL, `doctor_id` bigint NOT NULL, `patient_id` varchar(64) NOT NULL); (params None)
DEBUG 2024-08-21 10:31:12,063 schema CREATE TABLE `app01_register` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `queue_id` integer NOT NULL, `time` datetime(6) NOT NULL, `position` varchar(128) NOT NULL, `doctor_id` bigint NOT NULL, `patient_id` varchar(64) NOT NULL, `register_id` varchar(64) NOT NULL); (params None)
DEBUG 2024-08-21 10:31:12,122 schema CREATE TABLE `app01_onduty` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `date` date NOT NULL, `time` smallint NOT NULL, `state` integer NOT NULL, `doctor_id` bigint NOT NULL); (params None)
DEBUG 2024-08-21 10:31:12,155 schema CREATE TABLE `app01_notice` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `msg_type` smallint NOT NULL, `time` datetime(6) NOT NULL, `isRead` bool NOT NULL, `doctor_id` bigint NOT NULL, `patient_id` varchar(64) NOT NULL, `register_id` bigint NULL, `registerMan_id` varchar(64) NULL, `treatment_id` bigint NULL); (params None)
DEBUG 2024-08-21 10:31:12,245 schema CREATE TABLE `app01_bill` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `type` smallint NOT NULL, `state` bool NOT NULL, `price` numeric(5, 2) NOT NULL, `patient_id` varchar(64) NULL, `register_id` bigint NULL, `treatment_id` bigint NULL); (params None)
DEBUG 2024-08-21 10:31:12,303 schema ALTER TABLE `app01_treatment` ADD CONSTRAINT `app01_treatment_doctor_id_a47beada_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 10:31:12,327 schema ALTER TABLE `app01_treatment` ADD CONSTRAINT `app01_treatment_patient_id_52a8e1e5_fk_app01_pat` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 10:31:12,358 schema ALTER TABLE `app01_register` ADD CONSTRAINT `app01_register_doctor_id_e0ea61dc_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 10:31:12,388 schema ALTER TABLE `app01_register` ADD CONSTRAINT `app01_register_patient_id_4a065a29_fk_app01_pat` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 10:31:12,420 schema ALTER TABLE `app01_register` ADD CONSTRAINT `app01_register_register_id_e85a8e5b_fk_app01_pat` FOREIGN KEY (`register_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 10:31:12,459 schema ALTER TABLE `app01_onduty` ADD CONSTRAINT `app01_onduty_doctor_id_9b012eb7_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 10:31:12,488 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_doctor_id_2d7f7104_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 10:31:12,518 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_patient_id_74974826_fk_app01_patients_identity_num` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 10:31:12,547 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_register_id_6c54784c_fk_app01_register_id` FOREIGN KEY (`register_id`) REFERENCES `app01_register` (`id`); (params ())
DEBUG 2024-08-21 10:31:12,577 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_registerMan_id_1bd9adce_fk_app01_pat` FOREIGN KEY (`registerMan_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 10:31:12,611 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_treatment_id_596ea92a_fk_app01_treatment_id` FOREIGN KEY (`treatment_id`) REFERENCES `app01_treatment` (`id`); (params ())
DEBUG 2024-08-21 10:31:12,643 schema ALTER TABLE `app01_bill` ADD CONSTRAINT `app01_bill_patient_id_96fe396a_fk_app01_patients_identity_num` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 10:31:12,668 schema ALTER TABLE `app01_bill` ADD CONSTRAINT `app01_bill_register_id_cf59300e_fk_app01_register_id` FOREIGN KEY (`register_id`) REFERENCES `app01_register` (`id`); (params ())
DEBUG 2024-08-21 10:31:12,695 schema ALTER TABLE `app01_bill` ADD CONSTRAINT `app01_bill_treatment_id_73ef4d98_fk_app01_treatment_id` FOREIGN KEY (`treatment_id`) REFERENCES `app01_treatment` (`id`); (params ())
DEBUG 2024-08-21 10:31:12,757 schema ALTER TABLE `django_content_type` MODIFY `name` varchar(100) NULL; (params [])
DEBUG 2024-08-21 10:31:12,832 schema ALTER TABLE `django_content_type` DROP COLUMN `name`; (params ())
DEBUG 2024-08-21 10:31:12,894 schema ALTER TABLE `auth_permission` MODIFY `name` varchar(255) NOT NULL; (params [])
DEBUG 2024-08-21 10:31:12,959 schema ALTER TABLE `auth_user` MODIFY `email` varchar(254) NOT NULL; (params [])
DEBUG 2024-08-21 10:31:13,050 schema ALTER TABLE `auth_user` MODIFY `last_login` datetime(6) NULL; (params [])
DEBUG 2024-08-21 10:31:13,164 schema ALTER TABLE `auth_user` MODIFY `username` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 10:31:13,223 schema ALTER TABLE `auth_user` MODIFY `last_name` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 10:31:13,289 schema ALTER TABLE `auth_group` MODIFY `name` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 10:31:13,428 schema ALTER TABLE `auth_user` MODIFY `first_name` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 10:31:13,503 schema CREATE TABLE `django_session` (`session_key` varchar(40) NOT NULL PRIMARY KEY, `session_data` longtext NOT NULL, `expire_date` datetime(6) NOT NULL); (params None)
DEBUG 2024-08-21 10:31:13,538 schema CREATE INDEX `django_session_expire_date_a5c62663` ON `django_session` (`expire_date`); (params ())
WARNING 2024-08-21 10:31:14,858 log Bad Request: /api/duty/all_next_seven_days/
ERROR 2024-08-21 10:31:15,028 log Internal Server Error: /api/duty/next_seven_days/
Traceback (most recent call last):
  File "D:\anacoda\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\views\decorators\csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\views\generic\base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 509, in dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 480, in raise_uncaught_exception
    raise exc
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\86185\Desktop\SEGroup6\Ã¨Ã¨¾ÍÕï\Project\app01\views.py", line 652, in post
    return self.getNextSevenDaysDuty(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\86185\Desktop\SEGroup6\Ã¨Ã¨¾ÍÕï\Project\app01\views.py", line 663, in getNextSevenDaysDuty
    department = json.loads(request.body)['department']
                 ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^
KeyError: 'department'
DEBUG 2024-08-21 10:35:50,816 schema CREATE TABLE `django_migrations` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `app` varchar(255) NOT NULL, `name` varchar(255) NOT NULL, `applied` datetime(6) NOT NULL); (params None)
DEBUG 2024-08-21 10:35:50,834 schema CREATE TABLE `django_content_type` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(100) NOT NULL, `app_label` varchar(100) NOT NULL, `model` varchar(100) NOT NULL); (params None)
DEBUG 2024-08-21 10:35:50,854 schema ALTER TABLE `django_content_type` ADD CONSTRAINT `django_content_type_app_label_model_76bd3d3b_uniq` UNIQUE (`app_label`, `model`); (params ())
DEBUG 2024-08-21 10:35:50,897 schema CREATE TABLE `auth_permission` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(50) NOT NULL, `content_type_id` integer NOT NULL, `codename` varchar(100) NOT NULL); (params None)
DEBUG 2024-08-21 10:35:50,928 schema CREATE TABLE `auth_group` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(80) NOT NULL UNIQUE); (params None)
DEBUG 2024-08-21 10:35:50,944 schema CREATE TABLE `auth_group_permissions` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `group_id` integer NOT NULL, `permission_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 10:35:50,987 schema CREATE TABLE `auth_user` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `password` varchar(128) NOT NULL, `last_login` datetime(6) NOT NULL, `is_superuser` bool NOT NULL, `username` varchar(30) NOT NULL UNIQUE, `first_name` varchar(30) NOT NULL, `last_name` varchar(30) NOT NULL, `email` varchar(75) NOT NULL, `is_staff` bool NOT NULL, `is_active` bool NOT NULL, `date_joined` datetime(6) NOT NULL); (params None)
DEBUG 2024-08-21 10:35:51,004 schema CREATE TABLE `auth_user_groups` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `user_id` integer NOT NULL, `group_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 10:35:51,049 schema CREATE TABLE `auth_user_user_permissions` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `user_id` integer NOT NULL, `permission_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 10:35:51,090 schema ALTER TABLE `auth_permission` ADD CONSTRAINT `auth_permission_content_type_id_codename_01ab375a_uniq` UNIQUE (`content_type_id`, `codename`); (params ())
DEBUG 2024-08-21 10:35:51,110 schema ALTER TABLE `auth_permission` ADD CONSTRAINT `auth_permission_content_type_id_2f476e4b_fk_django_co` FOREIGN KEY (`content_type_id`) REFERENCES `django_content_type` (`id`); (params ())
DEBUG 2024-08-21 10:35:51,134 schema ALTER TABLE `auth_group_permissions` ADD CONSTRAINT `auth_group_permissions_group_id_permission_id_0cd325b0_uniq` UNIQUE (`group_id`, `permission_id`); (params ())
DEBUG 2024-08-21 10:35:51,152 schema ALTER TABLE `auth_group_permissions` ADD CONSTRAINT `auth_group_permissions_group_id_b120cbf9_fk_auth_group_id` FOREIGN KEY (`group_id`) REFERENCES `auth_group` (`id`); (params ())
DEBUG 2024-08-21 10:35:51,178 schema ALTER TABLE `auth_group_permissions` ADD CONSTRAINT `auth_group_permissio_permission_id_84c5c92e_fk_auth_perm` FOREIGN KEY (`permission_id`) REFERENCES `auth_permission` (`id`); (params ())
DEBUG 2024-08-21 10:35:51,202 schema ALTER TABLE `auth_user_groups` ADD CONSTRAINT `auth_user_groups_user_id_group_id_94350c0c_uniq` UNIQUE (`user_id`, `group_id`); (params ())
DEBUG 2024-08-21 10:35:51,221 schema ALTER TABLE `auth_user_groups` ADD CONSTRAINT `auth_user_groups_user_id_6a12ed8b_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); (params ())
DEBUG 2024-08-21 10:35:51,250 schema ALTER TABLE `auth_user_groups` ADD CONSTRAINT `auth_user_groups_group_id_97559544_fk_auth_group_id` FOREIGN KEY (`group_id`) REFERENCES `auth_group` (`id`); (params ())
DEBUG 2024-08-21 10:35:51,274 schema ALTER TABLE `auth_user_user_permissions` ADD CONSTRAINT `auth_user_user_permissions_user_id_permission_id_14a6b632_uniq` UNIQUE (`user_id`, `permission_id`); (params ())
DEBUG 2024-08-21 10:35:51,294 schema ALTER TABLE `auth_user_user_permissions` ADD CONSTRAINT `auth_user_user_permissions_user_id_a95ead1b_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); (params ())
DEBUG 2024-08-21 10:35:51,319 schema ALTER TABLE `auth_user_user_permissions` ADD CONSTRAINT `auth_user_user_permi_permission_id_1fbb5f2c_fk_auth_perm` FOREIGN KEY (`permission_id`) REFERENCES `auth_permission` (`id`); (params ())
DEBUG 2024-08-21 10:35:51,369 schema CREATE TABLE `django_admin_log` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `action_time` datetime(6) NOT NULL, `object_id` longtext NULL, `object_repr` varchar(200) NOT NULL, `action_flag` smallint UNSIGNED NOT NULL CHECK (`action_flag` >= 0), `change_message` longtext NOT NULL, `content_type_id` integer NULL, `user_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 10:35:51,413 schema ALTER TABLE `django_admin_log` ADD CONSTRAINT `django_admin_log_content_type_id_c4bce8eb_fk_django_co` FOREIGN KEY (`content_type_id`) REFERENCES `django_content_type` (`id`); (params ())
DEBUG 2024-08-21 10:35:51,452 schema ALTER TABLE `django_admin_log` ADD CONSTRAINT `django_admin_log_user_id_c564eba6_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); (params ())
DEBUG 2024-08-21 10:35:51,576 schema CREATE TABLE `app01_doctors` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `identity_num` varchar(64) NOT NULL, `name` varchar(20) NOT NULL, `title` varchar(50) NOT NULL, `department` varchar(20) NOT NULL, `research` varchar(150) NULL, `cost` numeric(5, 2) NOT NULL, `avatar` varchar(100) NULL, `avatar_name` varchar(128) NOT NULL); (params None)
DEBUG 2024-08-21 10:35:51,594 schema CREATE TABLE `app01_medicine` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(50) NOT NULL, `medicine_type` smallint NOT NULL, `symptom` varchar(200) NOT NULL, `price` numeric(5, 2) NOT NULL, `quantity` integer NOT NULL, `photo_name` varchar(128) NOT NULL); (params None)
DEBUG 2024-08-21 10:35:51,612 schema CREATE TABLE `app01_patients` (`identity` smallint NOT NULL, `identity_num` varchar(64) NOT NULL PRIMARY KEY, `name` varchar(20) NOT NULL, `health_insurance` smallint NOT NULL, `gender` smallint NOT NULL, `birthday` date NOT NULL, `phone_num` varchar(15) NOT NULL, `address` varchar(128) NOT NULL); (params None)
DEBUG 2024-08-21 10:35:51,630 schema CREATE TABLE `app01_user` (`type` smallint NOT NULL, `identity_num` varchar(64) NOT NULL PRIMARY KEY, `password` varchar(64) NOT NULL); (params None)
DEBUG 2024-08-21 10:35:51,647 schema CREATE TABLE `app01_treatment` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `queue_id` integer NOT NULL, `time` datetime(6) NOT NULL, `advice` varchar(256) NOT NULL, `medicine` longtext NOT NULL, `price` numeric(5, 2) NOT NULL, `doctor_id` bigint NOT NULL, `patient_id` varchar(64) NOT NULL); (params None)
DEBUG 2024-08-21 10:35:51,691 schema CREATE TABLE `app01_register` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `queue_id` integer NOT NULL, `time` datetime(6) NOT NULL, `position` varchar(128) NOT NULL, `doctor_id` bigint NOT NULL, `patient_id` varchar(64) NOT NULL, `register_id` varchar(64) NOT NULL); (params None)
DEBUG 2024-08-21 10:35:51,754 schema CREATE TABLE `app01_onduty` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `date` date NOT NULL, `time` smallint NOT NULL, `state` integer NOT NULL, `doctor_id` bigint NOT NULL); (params None)
DEBUG 2024-08-21 10:35:51,788 schema CREATE TABLE `app01_notice` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `msg_type` smallint NOT NULL, `time` datetime(6) NOT NULL, `isRead` bool NOT NULL, `doctor_id` bigint NOT NULL, `patient_id` varchar(64) NOT NULL, `register_id` bigint NULL, `registerMan_id` varchar(64) NULL, `treatment_id` bigint NULL); (params None)
DEBUG 2024-08-21 10:35:51,870 schema CREATE TABLE `app01_bill` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `type` smallint NOT NULL, `state` bool NOT NULL, `price` numeric(5, 2) NOT NULL, `patient_id` varchar(64) NULL, `register_id` bigint NULL, `treatment_id` bigint NULL); (params None)
DEBUG 2024-08-21 10:35:51,921 schema ALTER TABLE `app01_treatment` ADD CONSTRAINT `app01_treatment_doctor_id_a47beada_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 10:35:51,946 schema ALTER TABLE `app01_treatment` ADD CONSTRAINT `app01_treatment_patient_id_52a8e1e5_fk_app01_pat` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 10:35:51,973 schema ALTER TABLE `app01_register` ADD CONSTRAINT `app01_register_doctor_id_e0ea61dc_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 10:35:51,996 schema ALTER TABLE `app01_register` ADD CONSTRAINT `app01_register_patient_id_4a065a29_fk_app01_pat` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 10:35:52,022 schema ALTER TABLE `app01_register` ADD CONSTRAINT `app01_register_register_id_e85a8e5b_fk_app01_pat` FOREIGN KEY (`register_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 10:35:52,053 schema ALTER TABLE `app01_onduty` ADD CONSTRAINT `app01_onduty_doctor_id_9b012eb7_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 10:35:52,082 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_doctor_id_2d7f7104_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 10:35:52,109 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_patient_id_74974826_fk_app01_patients_identity_num` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 10:35:52,139 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_register_id_6c54784c_fk_app01_register_id` FOREIGN KEY (`register_id`) REFERENCES `app01_register` (`id`); (params ())
DEBUG 2024-08-21 10:35:52,173 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_registerMan_id_1bd9adce_fk_app01_pat` FOREIGN KEY (`registerMan_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 10:35:52,204 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_treatment_id_596ea92a_fk_app01_treatment_id` FOREIGN KEY (`treatment_id`) REFERENCES `app01_treatment` (`id`); (params ())
DEBUG 2024-08-21 10:35:52,234 schema ALTER TABLE `app01_bill` ADD CONSTRAINT `app01_bill_patient_id_96fe396a_fk_app01_patients_identity_num` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 10:35:52,256 schema ALTER TABLE `app01_bill` ADD CONSTRAINT `app01_bill_register_id_cf59300e_fk_app01_register_id` FOREIGN KEY (`register_id`) REFERENCES `app01_register` (`id`); (params ())
DEBUG 2024-08-21 10:35:52,282 schema ALTER TABLE `app01_bill` ADD CONSTRAINT `app01_bill_treatment_id_73ef4d98_fk_app01_treatment_id` FOREIGN KEY (`treatment_id`) REFERENCES `app01_treatment` (`id`); (params ())
DEBUG 2024-08-21 10:35:52,335 schema ALTER TABLE `django_content_type` MODIFY `name` varchar(100) NULL; (params [])
DEBUG 2024-08-21 10:35:52,398 schema ALTER TABLE `django_content_type` DROP COLUMN `name`; (params ())
DEBUG 2024-08-21 10:35:52,465 schema ALTER TABLE `auth_permission` MODIFY `name` varchar(255) NOT NULL; (params [])
DEBUG 2024-08-21 10:35:52,528 schema ALTER TABLE `auth_user` MODIFY `email` varchar(254) NOT NULL; (params [])
DEBUG 2024-08-21 10:35:52,624 schema ALTER TABLE `auth_user` MODIFY `last_login` datetime(6) NULL; (params [])
DEBUG 2024-08-21 10:35:52,746 schema ALTER TABLE `auth_user` MODIFY `username` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 10:35:52,801 schema ALTER TABLE `auth_user` MODIFY `last_name` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 10:35:52,860 schema ALTER TABLE `auth_group` MODIFY `name` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 10:35:53,028 schema ALTER TABLE `auth_user` MODIFY `first_name` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 10:35:53,104 schema CREATE TABLE `django_session` (`session_key` varchar(40) NOT NULL PRIMARY KEY, `session_data` longtext NOT NULL, `expire_date` datetime(6) NOT NULL); (params None)
DEBUG 2024-08-21 10:35:53,142 schema CREATE INDEX `django_session_expire_date_a5c62663` ON `django_session` (`expire_date`); (params ())
WARNING 2024-08-21 10:35:54,415 log Bad Request: /api/duty/all_next_seven_days/
ERROR 2024-08-21 10:35:54,559 log Internal Server Error: /api/duty/next_seven_days/
Traceback (most recent call last):
  File "D:\anacoda\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\views\decorators\csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\views\generic\base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 509, in dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 480, in raise_uncaught_exception
    raise exc
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\86185\Desktop\SEGroup6\Ã¨Ã¨¾ÍÕï\Project\app01\views.py", line 652, in post
    return self.getNextSevenDaysDuty(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\86185\Desktop\SEGroup6\Ã¨Ã¨¾ÍÕï\Project\app01\views.py", line 663, in getNextSevenDaysDuty
    department = json.loads(request.body)['department']
                 ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^
KeyError: 'department'
DEBUG 2024-08-21 10:55:43,748 schema CREATE TABLE `django_migrations` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `app` varchar(255) NOT NULL, `name` varchar(255) NOT NULL, `applied` datetime(6) NOT NULL); (params None)
DEBUG 2024-08-21 10:55:43,767 schema CREATE TABLE `django_content_type` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(100) NOT NULL, `app_label` varchar(100) NOT NULL, `model` varchar(100) NOT NULL); (params None)
DEBUG 2024-08-21 10:55:43,788 schema ALTER TABLE `django_content_type` ADD CONSTRAINT `django_content_type_app_label_model_76bd3d3b_uniq` UNIQUE (`app_label`, `model`); (params ())
DEBUG 2024-08-21 10:55:43,837 schema CREATE TABLE `auth_permission` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(50) NOT NULL, `content_type_id` integer NOT NULL, `codename` varchar(100) NOT NULL); (params None)
DEBUG 2024-08-21 10:55:43,871 schema CREATE TABLE `auth_group` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(80) NOT NULL UNIQUE); (params None)
DEBUG 2024-08-21 10:55:43,891 schema CREATE TABLE `auth_group_permissions` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `group_id` integer NOT NULL, `permission_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 10:55:43,944 schema CREATE TABLE `auth_user` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `password` varchar(128) NOT NULL, `last_login` datetime(6) NOT NULL, `is_superuser` bool NOT NULL, `username` varchar(30) NOT NULL UNIQUE, `first_name` varchar(30) NOT NULL, `last_name` varchar(30) NOT NULL, `email` varchar(75) NOT NULL, `is_staff` bool NOT NULL, `is_active` bool NOT NULL, `date_joined` datetime(6) NOT NULL); (params None)
DEBUG 2024-08-21 10:55:43,963 schema CREATE TABLE `auth_user_groups` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `user_id` integer NOT NULL, `group_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 10:55:44,004 schema CREATE TABLE `auth_user_user_permissions` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `user_id` integer NOT NULL, `permission_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 10:55:44,052 schema ALTER TABLE `auth_permission` ADD CONSTRAINT `auth_permission_content_type_id_codename_01ab375a_uniq` UNIQUE (`content_type_id`, `codename`); (params ())
DEBUG 2024-08-21 10:55:44,072 schema ALTER TABLE `auth_permission` ADD CONSTRAINT `auth_permission_content_type_id_2f476e4b_fk_django_co` FOREIGN KEY (`content_type_id`) REFERENCES `django_content_type` (`id`); (params ())
DEBUG 2024-08-21 10:55:44,096 schema ALTER TABLE `auth_group_permissions` ADD CONSTRAINT `auth_group_permissions_group_id_permission_id_0cd325b0_uniq` UNIQUE (`group_id`, `permission_id`); (params ())
DEBUG 2024-08-21 10:55:44,117 schema ALTER TABLE `auth_group_permissions` ADD CONSTRAINT `auth_group_permissions_group_id_b120cbf9_fk_auth_group_id` FOREIGN KEY (`group_id`) REFERENCES `auth_group` (`id`); (params ())
DEBUG 2024-08-21 10:55:44,142 schema ALTER TABLE `auth_group_permissions` ADD CONSTRAINT `auth_group_permissio_permission_id_84c5c92e_fk_auth_perm` FOREIGN KEY (`permission_id`) REFERENCES `auth_permission` (`id`); (params ())
DEBUG 2024-08-21 10:55:44,168 schema ALTER TABLE `auth_user_groups` ADD CONSTRAINT `auth_user_groups_user_id_group_id_94350c0c_uniq` UNIQUE (`user_id`, `group_id`); (params ())
DEBUG 2024-08-21 10:55:44,190 schema ALTER TABLE `auth_user_groups` ADD CONSTRAINT `auth_user_groups_user_id_6a12ed8b_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); (params ())
DEBUG 2024-08-21 10:55:44,217 schema ALTER TABLE `auth_user_groups` ADD CONSTRAINT `auth_user_groups_group_id_97559544_fk_auth_group_id` FOREIGN KEY (`group_id`) REFERENCES `auth_group` (`id`); (params ())
DEBUG 2024-08-21 10:55:44,244 schema ALTER TABLE `auth_user_user_permissions` ADD CONSTRAINT `auth_user_user_permissions_user_id_permission_id_14a6b632_uniq` UNIQUE (`user_id`, `permission_id`); (params ())
DEBUG 2024-08-21 10:55:44,263 schema ALTER TABLE `auth_user_user_permissions` ADD CONSTRAINT `auth_user_user_permissions_user_id_a95ead1b_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); (params ())
DEBUG 2024-08-21 10:55:44,287 schema ALTER TABLE `auth_user_user_permissions` ADD CONSTRAINT `auth_user_user_permi_permission_id_1fbb5f2c_fk_auth_perm` FOREIGN KEY (`permission_id`) REFERENCES `auth_permission` (`id`); (params ())
DEBUG 2024-08-21 10:55:44,350 schema CREATE TABLE `django_admin_log` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `action_time` datetime(6) NOT NULL, `object_id` longtext NULL, `object_repr` varchar(200) NOT NULL, `action_flag` smallint UNSIGNED NOT NULL CHECK (`action_flag` >= 0), `change_message` longtext NOT NULL, `content_type_id` integer NULL, `user_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 10:55:44,406 schema ALTER TABLE `django_admin_log` ADD CONSTRAINT `django_admin_log_content_type_id_c4bce8eb_fk_django_co` FOREIGN KEY (`content_type_id`) REFERENCES `django_content_type` (`id`); (params ())
DEBUG 2024-08-21 10:55:44,438 schema ALTER TABLE `django_admin_log` ADD CONSTRAINT `django_admin_log_user_id_c564eba6_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); (params ())
DEBUG 2024-08-21 10:55:44,565 schema CREATE TABLE `app01_doctors` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `identity_num` varchar(64) NOT NULL, `name` varchar(20) NOT NULL, `title` varchar(50) NOT NULL, `department` varchar(20) NOT NULL, `research` varchar(150) NULL, `cost` numeric(5, 2) NOT NULL, `avatar` varchar(100) NULL, `avatar_name` varchar(128) NOT NULL); (params None)
DEBUG 2024-08-21 10:55:44,584 schema CREATE TABLE `app01_medicine` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(50) NOT NULL, `medicine_type` smallint NOT NULL, `symptom` varchar(200) NOT NULL, `price` numeric(5, 2) NOT NULL, `quantity` integer NOT NULL, `photo_name` varchar(128) NOT NULL); (params None)
DEBUG 2024-08-21 10:55:44,602 schema CREATE TABLE `app01_patients` (`identity` smallint NOT NULL, `identity_num` varchar(64) NOT NULL PRIMARY KEY, `name` varchar(20) NOT NULL, `health_insurance` smallint NOT NULL, `gender` smallint NOT NULL, `birthday` date NOT NULL, `phone_num` varchar(15) NOT NULL, `address` varchar(128) NOT NULL); (params None)
DEBUG 2024-08-21 10:55:44,621 schema CREATE TABLE `app01_user` (`type` smallint NOT NULL, `identity_num` varchar(64) NOT NULL PRIMARY KEY, `password` varchar(64) NOT NULL); (params None)
DEBUG 2024-08-21 10:55:44,639 schema CREATE TABLE `app01_treatment` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `queue_id` integer NOT NULL, `time` datetime(6) NOT NULL, `advice` varchar(256) NOT NULL, `medicine` longtext NOT NULL, `price` numeric(5, 2) NOT NULL, `doctor_id` bigint NOT NULL, `patient_id` varchar(64) NOT NULL); (params None)
DEBUG 2024-08-21 10:55:44,688 schema CREATE TABLE `app01_register` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `queue_id` integer NOT NULL, `time` datetime(6) NOT NULL, `position` varchar(128) NOT NULL, `doctor_id` bigint NOT NULL, `patient_id` varchar(64) NOT NULL, `register_id` varchar(64) NOT NULL); (params None)
DEBUG 2024-08-21 10:55:44,773 schema CREATE TABLE `app01_onduty` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `date` date NOT NULL, `time` smallint NOT NULL, `state` integer NOT NULL, `doctor_id` bigint NOT NULL); (params None)
DEBUG 2024-08-21 10:55:44,805 schema CREATE TABLE `app01_notice` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `msg_type` smallint NOT NULL, `time` datetime(6) NOT NULL, `isRead` bool NOT NULL, `doctor_id` bigint NOT NULL, `patient_id` varchar(64) NOT NULL, `register_id` bigint NULL, `registerMan_id` varchar(64) NULL, `treatment_id` bigint NULL); (params None)
DEBUG 2024-08-21 10:55:44,915 schema CREATE TABLE `app01_bill` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `type` smallint NOT NULL, `state` bool NOT NULL, `price` numeric(5, 2) NOT NULL, `patient_id` varchar(64) NULL, `register_id` bigint NULL, `treatment_id` bigint NULL); (params None)
DEBUG 2024-08-21 10:55:44,984 schema ALTER TABLE `app01_treatment` ADD CONSTRAINT `app01_treatment_doctor_id_a47beada_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 10:55:45,012 schema ALTER TABLE `app01_treatment` ADD CONSTRAINT `app01_treatment_patient_id_52a8e1e5_fk_app01_pat` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 10:55:45,043 schema ALTER TABLE `app01_register` ADD CONSTRAINT `app01_register_doctor_id_e0ea61dc_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 10:55:45,069 schema ALTER TABLE `app01_register` ADD CONSTRAINT `app01_register_patient_id_4a065a29_fk_app01_pat` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 10:55:45,098 schema ALTER TABLE `app01_register` ADD CONSTRAINT `app01_register_register_id_e85a8e5b_fk_app01_pat` FOREIGN KEY (`register_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 10:55:45,127 schema ALTER TABLE `app01_onduty` ADD CONSTRAINT `app01_onduty_doctor_id_9b012eb7_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 10:55:45,152 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_doctor_id_2d7f7104_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 10:55:45,180 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_patient_id_74974826_fk_app01_patients_identity_num` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 10:55:45,208 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_register_id_6c54784c_fk_app01_register_id` FOREIGN KEY (`register_id`) REFERENCES `app01_register` (`id`); (params ())
DEBUG 2024-08-21 10:55:45,236 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_registerMan_id_1bd9adce_fk_app01_pat` FOREIGN KEY (`registerMan_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 10:55:45,266 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_treatment_id_596ea92a_fk_app01_treatment_id` FOREIGN KEY (`treatment_id`) REFERENCES `app01_treatment` (`id`); (params ())
DEBUG 2024-08-21 10:55:45,296 schema ALTER TABLE `app01_bill` ADD CONSTRAINT `app01_bill_patient_id_96fe396a_fk_app01_patients_identity_num` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 10:55:45,323 schema ALTER TABLE `app01_bill` ADD CONSTRAINT `app01_bill_register_id_cf59300e_fk_app01_register_id` FOREIGN KEY (`register_id`) REFERENCES `app01_register` (`id`); (params ())
DEBUG 2024-08-21 10:55:45,351 schema ALTER TABLE `app01_bill` ADD CONSTRAINT `app01_bill_treatment_id_73ef4d98_fk_app01_treatment_id` FOREIGN KEY (`treatment_id`) REFERENCES `app01_treatment` (`id`); (params ())
DEBUG 2024-08-21 10:55:45,411 schema ALTER TABLE `django_content_type` MODIFY `name` varchar(100) NULL; (params [])
DEBUG 2024-08-21 10:55:45,502 schema ALTER TABLE `django_content_type` DROP COLUMN `name`; (params ())
DEBUG 2024-08-21 10:55:45,563 schema ALTER TABLE `auth_permission` MODIFY `name` varchar(255) NOT NULL; (params [])
DEBUG 2024-08-21 10:55:45,625 schema ALTER TABLE `auth_user` MODIFY `email` varchar(254) NOT NULL; (params [])
DEBUG 2024-08-21 10:55:45,722 schema ALTER TABLE `auth_user` MODIFY `last_login` datetime(6) NULL; (params [])
DEBUG 2024-08-21 10:55:45,850 schema ALTER TABLE `auth_user` MODIFY `username` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 10:55:45,914 schema ALTER TABLE `auth_user` MODIFY `last_name` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 10:55:45,984 schema ALTER TABLE `auth_group` MODIFY `name` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 10:55:46,117 schema ALTER TABLE `auth_user` MODIFY `first_name` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 10:55:46,177 schema CREATE TABLE `django_session` (`session_key` varchar(40) NOT NULL PRIMARY KEY, `session_data` longtext NOT NULL, `expire_date` datetime(6) NOT NULL); (params None)
DEBUG 2024-08-21 10:55:46,206 schema CREATE INDEX `django_session_expire_date_a5c62663` ON `django_session` (`expire_date`); (params ())
WARNING 2024-08-21 10:55:47,513 log Bad Request: /api/duty/all_next_seven_days/
WARNING 2024-08-21 10:55:47,663 log Bad Request: /api/duty/next_seven_days/
DEBUG 2024-08-21 10:55:57,195 schema CREATE TABLE `django_migrations` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `app` varchar(255) NOT NULL, `name` varchar(255) NOT NULL, `applied` datetime(6) NOT NULL); (params None)
DEBUG 2024-08-21 10:55:57,214 schema CREATE TABLE `django_content_type` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(100) NOT NULL, `app_label` varchar(100) NOT NULL, `model` varchar(100) NOT NULL); (params None)
DEBUG 2024-08-21 10:55:57,233 schema ALTER TABLE `django_content_type` ADD CONSTRAINT `django_content_type_app_label_model_76bd3d3b_uniq` UNIQUE (`app_label`, `model`); (params ())
DEBUG 2024-08-21 10:55:57,281 schema CREATE TABLE `auth_permission` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(50) NOT NULL, `content_type_id` integer NOT NULL, `codename` varchar(100) NOT NULL); (params None)
DEBUG 2024-08-21 10:55:57,319 schema CREATE TABLE `auth_group` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(80) NOT NULL UNIQUE); (params None)
DEBUG 2024-08-21 10:55:57,335 schema CREATE TABLE `auth_group_permissions` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `group_id` integer NOT NULL, `permission_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 10:55:57,402 schema CREATE TABLE `auth_user` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `password` varchar(128) NOT NULL, `last_login` datetime(6) NOT NULL, `is_superuser` bool NOT NULL, `username` varchar(30) NOT NULL UNIQUE, `first_name` varchar(30) NOT NULL, `last_name` varchar(30) NOT NULL, `email` varchar(75) NOT NULL, `is_staff` bool NOT NULL, `is_active` bool NOT NULL, `date_joined` datetime(6) NOT NULL); (params None)
DEBUG 2024-08-21 10:55:57,420 schema CREATE TABLE `auth_user_groups` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `user_id` integer NOT NULL, `group_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 10:55:57,466 schema CREATE TABLE `auth_user_user_permissions` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `user_id` integer NOT NULL, `permission_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 10:55:57,515 schema ALTER TABLE `auth_permission` ADD CONSTRAINT `auth_permission_content_type_id_codename_01ab375a_uniq` UNIQUE (`content_type_id`, `codename`); (params ())
DEBUG 2024-08-21 10:55:57,539 schema ALTER TABLE `auth_permission` ADD CONSTRAINT `auth_permission_content_type_id_2f476e4b_fk_django_co` FOREIGN KEY (`content_type_id`) REFERENCES `django_content_type` (`id`); (params ())
DEBUG 2024-08-21 10:55:57,567 schema ALTER TABLE `auth_group_permissions` ADD CONSTRAINT `auth_group_permissions_group_id_permission_id_0cd325b0_uniq` UNIQUE (`group_id`, `permission_id`); (params ())
DEBUG 2024-08-21 10:55:57,588 schema ALTER TABLE `auth_group_permissions` ADD CONSTRAINT `auth_group_permissions_group_id_b120cbf9_fk_auth_group_id` FOREIGN KEY (`group_id`) REFERENCES `auth_group` (`id`); (params ())
DEBUG 2024-08-21 10:55:57,628 schema ALTER TABLE `auth_group_permissions` ADD CONSTRAINT `auth_group_permissio_permission_id_84c5c92e_fk_auth_perm` FOREIGN KEY (`permission_id`) REFERENCES `auth_permission` (`id`); (params ())
DEBUG 2024-08-21 10:55:57,656 schema ALTER TABLE `auth_user_groups` ADD CONSTRAINT `auth_user_groups_user_id_group_id_94350c0c_uniq` UNIQUE (`user_id`, `group_id`); (params ())
DEBUG 2024-08-21 10:55:57,673 schema ALTER TABLE `auth_user_groups` ADD CONSTRAINT `auth_user_groups_user_id_6a12ed8b_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); (params ())
DEBUG 2024-08-21 10:55:57,700 schema ALTER TABLE `auth_user_groups` ADD CONSTRAINT `auth_user_groups_group_id_97559544_fk_auth_group_id` FOREIGN KEY (`group_id`) REFERENCES `auth_group` (`id`); (params ())
DEBUG 2024-08-21 10:55:57,727 schema ALTER TABLE `auth_user_user_permissions` ADD CONSTRAINT `auth_user_user_permissions_user_id_permission_id_14a6b632_uniq` UNIQUE (`user_id`, `permission_id`); (params ())
DEBUG 2024-08-21 10:55:57,746 schema ALTER TABLE `auth_user_user_permissions` ADD CONSTRAINT `auth_user_user_permissions_user_id_a95ead1b_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); (params ())
DEBUG 2024-08-21 10:55:57,771 schema ALTER TABLE `auth_user_user_permissions` ADD CONSTRAINT `auth_user_user_permi_permission_id_1fbb5f2c_fk_auth_perm` FOREIGN KEY (`permission_id`) REFERENCES `auth_permission` (`id`); (params ())
DEBUG 2024-08-21 10:55:57,827 schema CREATE TABLE `django_admin_log` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `action_time` datetime(6) NOT NULL, `object_id` longtext NULL, `object_repr` varchar(200) NOT NULL, `action_flag` smallint UNSIGNED NOT NULL CHECK (`action_flag` >= 0), `change_message` longtext NOT NULL, `content_type_id` integer NULL, `user_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 10:55:57,877 schema ALTER TABLE `django_admin_log` ADD CONSTRAINT `django_admin_log_content_type_id_c4bce8eb_fk_django_co` FOREIGN KEY (`content_type_id`) REFERENCES `django_content_type` (`id`); (params ())
DEBUG 2024-08-21 10:55:57,905 schema ALTER TABLE `django_admin_log` ADD CONSTRAINT `django_admin_log_user_id_c564eba6_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); (params ())
DEBUG 2024-08-21 10:55:58,021 schema CREATE TABLE `app01_doctors` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `identity_num` varchar(64) NOT NULL, `name` varchar(20) NOT NULL, `title` varchar(50) NOT NULL, `department` varchar(20) NOT NULL, `research` varchar(150) NULL, `cost` numeric(5, 2) NOT NULL, `avatar` varchar(100) NULL, `avatar_name` varchar(128) NOT NULL); (params None)
DEBUG 2024-08-21 10:55:58,041 schema CREATE TABLE `app01_medicine` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(50) NOT NULL, `medicine_type` smallint NOT NULL, `symptom` varchar(200) NOT NULL, `price` numeric(5, 2) NOT NULL, `quantity` integer NOT NULL, `photo_name` varchar(128) NOT NULL); (params None)
DEBUG 2024-08-21 10:55:58,058 schema CREATE TABLE `app01_patients` (`identity` smallint NOT NULL, `identity_num` varchar(64) NOT NULL PRIMARY KEY, `name` varchar(20) NOT NULL, `health_insurance` smallint NOT NULL, `gender` smallint NOT NULL, `birthday` date NOT NULL, `phone_num` varchar(15) NOT NULL, `address` varchar(128) NOT NULL); (params None)
DEBUG 2024-08-21 10:55:58,089 schema CREATE TABLE `app01_user` (`type` smallint NOT NULL, `identity_num` varchar(64) NOT NULL PRIMARY KEY, `password` varchar(64) NOT NULL); (params None)
DEBUG 2024-08-21 10:55:58,113 schema CREATE TABLE `app01_treatment` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `queue_id` integer NOT NULL, `time` datetime(6) NOT NULL, `advice` varchar(256) NOT NULL, `medicine` longtext NOT NULL, `price` numeric(5, 2) NOT NULL, `doctor_id` bigint NOT NULL, `patient_id` varchar(64) NOT NULL); (params None)
DEBUG 2024-08-21 10:55:58,154 schema CREATE TABLE `app01_register` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `queue_id` integer NOT NULL, `time` datetime(6) NOT NULL, `position` varchar(128) NOT NULL, `doctor_id` bigint NOT NULL, `patient_id` varchar(64) NOT NULL, `register_id` varchar(64) NOT NULL); (params None)
DEBUG 2024-08-21 10:55:58,216 schema CREATE TABLE `app01_onduty` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `date` date NOT NULL, `time` smallint NOT NULL, `state` integer NOT NULL, `doctor_id` bigint NOT NULL); (params None)
DEBUG 2024-08-21 10:55:58,247 schema CREATE TABLE `app01_notice` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `msg_type` smallint NOT NULL, `time` datetime(6) NOT NULL, `isRead` bool NOT NULL, `doctor_id` bigint NOT NULL, `patient_id` varchar(64) NOT NULL, `register_id` bigint NULL, `registerMan_id` varchar(64) NULL, `treatment_id` bigint NULL); (params None)
DEBUG 2024-08-21 10:55:58,328 schema CREATE TABLE `app01_bill` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `type` smallint NOT NULL, `state` bool NOT NULL, `price` numeric(5, 2) NOT NULL, `patient_id` varchar(64) NULL, `register_id` bigint NULL, `treatment_id` bigint NULL); (params None)
DEBUG 2024-08-21 10:55:58,387 schema ALTER TABLE `app01_treatment` ADD CONSTRAINT `app01_treatment_doctor_id_a47beada_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 10:55:58,411 schema ALTER TABLE `app01_treatment` ADD CONSTRAINT `app01_treatment_patient_id_52a8e1e5_fk_app01_pat` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 10:55:58,445 schema ALTER TABLE `app01_register` ADD CONSTRAINT `app01_register_doctor_id_e0ea61dc_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 10:55:58,474 schema ALTER TABLE `app01_register` ADD CONSTRAINT `app01_register_patient_id_4a065a29_fk_app01_pat` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 10:55:58,504 schema ALTER TABLE `app01_register` ADD CONSTRAINT `app01_register_register_id_e85a8e5b_fk_app01_pat` FOREIGN KEY (`register_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 10:55:58,533 schema ALTER TABLE `app01_onduty` ADD CONSTRAINT `app01_onduty_doctor_id_9b012eb7_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 10:55:58,557 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_doctor_id_2d7f7104_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 10:55:58,584 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_patient_id_74974826_fk_app01_patients_identity_num` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 10:55:58,611 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_register_id_6c54784c_fk_app01_register_id` FOREIGN KEY (`register_id`) REFERENCES `app01_register` (`id`); (params ())
DEBUG 2024-08-21 10:55:58,639 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_registerMan_id_1bd9adce_fk_app01_pat` FOREIGN KEY (`registerMan_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 10:55:58,665 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_treatment_id_596ea92a_fk_app01_treatment_id` FOREIGN KEY (`treatment_id`) REFERENCES `app01_treatment` (`id`); (params ())
DEBUG 2024-08-21 10:55:58,696 schema ALTER TABLE `app01_bill` ADD CONSTRAINT `app01_bill_patient_id_96fe396a_fk_app01_patients_identity_num` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 10:55:58,720 schema ALTER TABLE `app01_bill` ADD CONSTRAINT `app01_bill_register_id_cf59300e_fk_app01_register_id` FOREIGN KEY (`register_id`) REFERENCES `app01_register` (`id`); (params ())
DEBUG 2024-08-21 10:55:58,747 schema ALTER TABLE `app01_bill` ADD CONSTRAINT `app01_bill_treatment_id_73ef4d98_fk_app01_treatment_id` FOREIGN KEY (`treatment_id`) REFERENCES `app01_treatment` (`id`); (params ())
DEBUG 2024-08-21 10:55:58,804 schema ALTER TABLE `django_content_type` MODIFY `name` varchar(100) NULL; (params [])
DEBUG 2024-08-21 10:55:58,882 schema ALTER TABLE `django_content_type` DROP COLUMN `name`; (params ())
DEBUG 2024-08-21 10:55:58,934 schema ALTER TABLE `auth_permission` MODIFY `name` varchar(255) NOT NULL; (params [])
DEBUG 2024-08-21 10:55:58,990 schema ALTER TABLE `auth_user` MODIFY `email` varchar(254) NOT NULL; (params [])
DEBUG 2024-08-21 10:55:59,078 schema ALTER TABLE `auth_user` MODIFY `last_login` datetime(6) NULL; (params [])
DEBUG 2024-08-21 10:55:59,222 schema ALTER TABLE `auth_user` MODIFY `username` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 10:55:59,282 schema ALTER TABLE `auth_user` MODIFY `last_name` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 10:55:59,346 schema ALTER TABLE `auth_group` MODIFY `name` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 10:55:59,492 schema ALTER TABLE `auth_user` MODIFY `first_name` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 10:55:59,558 schema CREATE TABLE `django_session` (`session_key` varchar(40) NOT NULL PRIMARY KEY, `session_data` longtext NOT NULL, `expire_date` datetime(6) NOT NULL); (params None)
DEBUG 2024-08-21 10:55:59,600 schema CREATE INDEX `django_session_expire_date_a5c62663` ON `django_session` (`expire_date`); (params ())
WARNING 2024-08-21 10:56:01,033 log Bad Request: /api/duty/all_next_seven_days/
WARNING 2024-08-21 10:56:01,188 log Bad Request: /api/duty/next_seven_days/
DEBUG 2024-08-21 10:56:14,926 schema CREATE TABLE `django_migrations` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `app` varchar(255) NOT NULL, `name` varchar(255) NOT NULL, `applied` datetime(6) NOT NULL); (params None)
DEBUG 2024-08-21 10:56:14,947 schema CREATE TABLE `django_content_type` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(100) NOT NULL, `app_label` varchar(100) NOT NULL, `model` varchar(100) NOT NULL); (params None)
DEBUG 2024-08-21 10:56:14,966 schema ALTER TABLE `django_content_type` ADD CONSTRAINT `django_content_type_app_label_model_76bd3d3b_uniq` UNIQUE (`app_label`, `model`); (params ())
DEBUG 2024-08-21 10:56:15,013 schema CREATE TABLE `auth_permission` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(50) NOT NULL, `content_type_id` integer NOT NULL, `codename` varchar(100) NOT NULL); (params None)
DEBUG 2024-08-21 10:56:15,045 schema CREATE TABLE `auth_group` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(80) NOT NULL UNIQUE); (params None)
DEBUG 2024-08-21 10:56:15,064 schema CREATE TABLE `auth_group_permissions` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `group_id` integer NOT NULL, `permission_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 10:56:15,108 schema CREATE TABLE `auth_user` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `password` varchar(128) NOT NULL, `last_login` datetime(6) NOT NULL, `is_superuser` bool NOT NULL, `username` varchar(30) NOT NULL UNIQUE, `first_name` varchar(30) NOT NULL, `last_name` varchar(30) NOT NULL, `email` varchar(75) NOT NULL, `is_staff` bool NOT NULL, `is_active` bool NOT NULL, `date_joined` datetime(6) NOT NULL); (params None)
DEBUG 2024-08-21 10:56:15,125 schema CREATE TABLE `auth_user_groups` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `user_id` integer NOT NULL, `group_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 10:56:15,168 schema CREATE TABLE `auth_user_user_permissions` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `user_id` integer NOT NULL, `permission_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 10:56:15,214 schema ALTER TABLE `auth_permission` ADD CONSTRAINT `auth_permission_content_type_id_codename_01ab375a_uniq` UNIQUE (`content_type_id`, `codename`); (params ())
DEBUG 2024-08-21 10:56:15,233 schema ALTER TABLE `auth_permission` ADD CONSTRAINT `auth_permission_content_type_id_2f476e4b_fk_django_co` FOREIGN KEY (`content_type_id`) REFERENCES `django_content_type` (`id`); (params ())
DEBUG 2024-08-21 10:56:15,259 schema ALTER TABLE `auth_group_permissions` ADD CONSTRAINT `auth_group_permissions_group_id_permission_id_0cd325b0_uniq` UNIQUE (`group_id`, `permission_id`); (params ())
DEBUG 2024-08-21 10:56:15,276 schema ALTER TABLE `auth_group_permissions` ADD CONSTRAINT `auth_group_permissions_group_id_b120cbf9_fk_auth_group_id` FOREIGN KEY (`group_id`) REFERENCES `auth_group` (`id`); (params ())
DEBUG 2024-08-21 10:56:15,300 schema ALTER TABLE `auth_group_permissions` ADD CONSTRAINT `auth_group_permissio_permission_id_84c5c92e_fk_auth_perm` FOREIGN KEY (`permission_id`) REFERENCES `auth_permission` (`id`); (params ())
DEBUG 2024-08-21 10:56:15,328 schema ALTER TABLE `auth_user_groups` ADD CONSTRAINT `auth_user_groups_user_id_group_id_94350c0c_uniq` UNIQUE (`user_id`, `group_id`); (params ())
DEBUG 2024-08-21 10:56:15,347 schema ALTER TABLE `auth_user_groups` ADD CONSTRAINT `auth_user_groups_user_id_6a12ed8b_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); (params ())
DEBUG 2024-08-21 10:56:15,370 schema ALTER TABLE `auth_user_groups` ADD CONSTRAINT `auth_user_groups_group_id_97559544_fk_auth_group_id` FOREIGN KEY (`group_id`) REFERENCES `auth_group` (`id`); (params ())
DEBUG 2024-08-21 10:56:15,401 schema ALTER TABLE `auth_user_user_permissions` ADD CONSTRAINT `auth_user_user_permissions_user_id_permission_id_14a6b632_uniq` UNIQUE (`user_id`, `permission_id`); (params ())
DEBUG 2024-08-21 10:56:15,423 schema ALTER TABLE `auth_user_user_permissions` ADD CONSTRAINT `auth_user_user_permissions_user_id_a95ead1b_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); (params ())
DEBUG 2024-08-21 10:56:15,447 schema ALTER TABLE `auth_user_user_permissions` ADD CONSTRAINT `auth_user_user_permi_permission_id_1fbb5f2c_fk_auth_perm` FOREIGN KEY (`permission_id`) REFERENCES `auth_permission` (`id`); (params ())
DEBUG 2024-08-21 10:56:15,513 schema CREATE TABLE `django_admin_log` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `action_time` datetime(6) NOT NULL, `object_id` longtext NULL, `object_repr` varchar(200) NOT NULL, `action_flag` smallint UNSIGNED NOT NULL CHECK (`action_flag` >= 0), `change_message` longtext NOT NULL, `content_type_id` integer NULL, `user_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 10:56:15,558 schema ALTER TABLE `django_admin_log` ADD CONSTRAINT `django_admin_log_content_type_id_c4bce8eb_fk_django_co` FOREIGN KEY (`content_type_id`) REFERENCES `django_content_type` (`id`); (params ())
DEBUG 2024-08-21 10:56:15,587 schema ALTER TABLE `django_admin_log` ADD CONSTRAINT `django_admin_log_user_id_c564eba6_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); (params ())
DEBUG 2024-08-21 10:56:15,714 schema CREATE TABLE `app01_doctors` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `identity_num` varchar(64) NOT NULL, `name` varchar(20) NOT NULL, `title` varchar(50) NOT NULL, `department` varchar(20) NOT NULL, `research` varchar(150) NULL, `cost` numeric(5, 2) NOT NULL, `avatar` varchar(100) NULL, `avatar_name` varchar(128) NOT NULL); (params None)
DEBUG 2024-08-21 10:56:15,731 schema CREATE TABLE `app01_medicine` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(50) NOT NULL, `medicine_type` smallint NOT NULL, `symptom` varchar(200) NOT NULL, `price` numeric(5, 2) NOT NULL, `quantity` integer NOT NULL, `photo_name` varchar(128) NOT NULL); (params None)
DEBUG 2024-08-21 10:56:15,754 schema CREATE TABLE `app01_patients` (`identity` smallint NOT NULL, `identity_num` varchar(64) NOT NULL PRIMARY KEY, `name` varchar(20) NOT NULL, `health_insurance` smallint NOT NULL, `gender` smallint NOT NULL, `birthday` date NOT NULL, `phone_num` varchar(15) NOT NULL, `address` varchar(128) NOT NULL); (params None)
DEBUG 2024-08-21 10:56:15,771 schema CREATE TABLE `app01_user` (`type` smallint NOT NULL, `identity_num` varchar(64) NOT NULL PRIMARY KEY, `password` varchar(64) NOT NULL); (params None)
DEBUG 2024-08-21 10:56:15,791 schema CREATE TABLE `app01_treatment` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `queue_id` integer NOT NULL, `time` datetime(6) NOT NULL, `advice` varchar(256) NOT NULL, `medicine` longtext NOT NULL, `price` numeric(5, 2) NOT NULL, `doctor_id` bigint NOT NULL, `patient_id` varchar(64) NOT NULL); (params None)
DEBUG 2024-08-21 10:56:15,841 schema CREATE TABLE `app01_register` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `queue_id` integer NOT NULL, `time` datetime(6) NOT NULL, `position` varchar(128) NOT NULL, `doctor_id` bigint NOT NULL, `patient_id` varchar(64) NOT NULL, `register_id` varchar(64) NOT NULL); (params None)
DEBUG 2024-08-21 10:56:15,906 schema CREATE TABLE `app01_onduty` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `date` date NOT NULL, `time` smallint NOT NULL, `state` integer NOT NULL, `doctor_id` bigint NOT NULL); (params None)
DEBUG 2024-08-21 10:56:15,939 schema CREATE TABLE `app01_notice` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `msg_type` smallint NOT NULL, `time` datetime(6) NOT NULL, `isRead` bool NOT NULL, `doctor_id` bigint NOT NULL, `patient_id` varchar(64) NOT NULL, `register_id` bigint NULL, `registerMan_id` varchar(64) NULL, `treatment_id` bigint NULL); (params None)
DEBUG 2024-08-21 10:56:16,024 schema CREATE TABLE `app01_bill` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `type` smallint NOT NULL, `state` bool NOT NULL, `price` numeric(5, 2) NOT NULL, `patient_id` varchar(64) NULL, `register_id` bigint NULL, `treatment_id` bigint NULL); (params None)
DEBUG 2024-08-21 10:56:16,078 schema ALTER TABLE `app01_treatment` ADD CONSTRAINT `app01_treatment_doctor_id_a47beada_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 10:56:16,104 schema ALTER TABLE `app01_treatment` ADD CONSTRAINT `app01_treatment_patient_id_52a8e1e5_fk_app01_pat` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 10:56:16,131 schema ALTER TABLE `app01_register` ADD CONSTRAINT `app01_register_doctor_id_e0ea61dc_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 10:56:16,155 schema ALTER TABLE `app01_register` ADD CONSTRAINT `app01_register_patient_id_4a065a29_fk_app01_pat` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 10:56:16,184 schema ALTER TABLE `app01_register` ADD CONSTRAINT `app01_register_register_id_e85a8e5b_fk_app01_pat` FOREIGN KEY (`register_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 10:56:16,217 schema ALTER TABLE `app01_onduty` ADD CONSTRAINT `app01_onduty_doctor_id_9b012eb7_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 10:56:16,240 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_doctor_id_2d7f7104_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 10:56:16,265 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_patient_id_74974826_fk_app01_patients_identity_num` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 10:56:16,290 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_register_id_6c54784c_fk_app01_register_id` FOREIGN KEY (`register_id`) REFERENCES `app01_register` (`id`); (params ())
DEBUG 2024-08-21 10:56:16,325 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_registerMan_id_1bd9adce_fk_app01_pat` FOREIGN KEY (`registerMan_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 10:56:16,361 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_treatment_id_596ea92a_fk_app01_treatment_id` FOREIGN KEY (`treatment_id`) REFERENCES `app01_treatment` (`id`); (params ())
DEBUG 2024-08-21 10:56:16,390 schema ALTER TABLE `app01_bill` ADD CONSTRAINT `app01_bill_patient_id_96fe396a_fk_app01_patients_identity_num` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 10:56:16,416 schema ALTER TABLE `app01_bill` ADD CONSTRAINT `app01_bill_register_id_cf59300e_fk_app01_register_id` FOREIGN KEY (`register_id`) REFERENCES `app01_register` (`id`); (params ())
DEBUG 2024-08-21 10:56:16,453 schema ALTER TABLE `app01_bill` ADD CONSTRAINT `app01_bill_treatment_id_73ef4d98_fk_app01_treatment_id` FOREIGN KEY (`treatment_id`) REFERENCES `app01_treatment` (`id`); (params ())
DEBUG 2024-08-21 10:56:16,530 schema ALTER TABLE `django_content_type` MODIFY `name` varchar(100) NULL; (params [])
DEBUG 2024-08-21 10:56:16,603 schema ALTER TABLE `django_content_type` DROP COLUMN `name`; (params ())
DEBUG 2024-08-21 10:56:16,672 schema ALTER TABLE `auth_permission` MODIFY `name` varchar(255) NOT NULL; (params [])
DEBUG 2024-08-21 10:56:16,739 schema ALTER TABLE `auth_user` MODIFY `email` varchar(254) NOT NULL; (params [])
DEBUG 2024-08-21 10:56:16,838 schema ALTER TABLE `auth_user` MODIFY `last_login` datetime(6) NULL; (params [])
DEBUG 2024-08-21 10:56:16,954 schema ALTER TABLE `auth_user` MODIFY `username` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 10:56:17,011 schema ALTER TABLE `auth_user` MODIFY `last_name` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 10:56:17,073 schema ALTER TABLE `auth_group` MODIFY `name` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 10:56:17,207 schema ALTER TABLE `auth_user` MODIFY `first_name` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 10:56:17,260 schema CREATE TABLE `django_session` (`session_key` varchar(40) NOT NULL PRIMARY KEY, `session_data` longtext NOT NULL, `expire_date` datetime(6) NOT NULL); (params None)
DEBUG 2024-08-21 10:56:17,295 schema CREATE INDEX `django_session_expire_date_a5c62663` ON `django_session` (`expire_date`); (params ())
WARNING 2024-08-21 10:56:18,477 log Bad Request: /api/doctors/setData/
WARNING 2024-08-21 10:56:18,715 log Bad Request: /api/doctors/delete/
WARNING 2024-08-21 10:56:19,325 log Bad Request: /api/duty/all_next_seven_days/
WARNING 2024-08-21 10:56:19,479 log Bad Request: /api/duty/next_seven_days/
WARNING 2024-08-21 10:56:20,255 log Bad Request: /api/registers/list/
WARNING 2024-08-21 10:56:20,584 log Bad Request: /api/treatments/list/
WARNING 2024-08-21 10:56:20,890 log Bad Request: /api/treatments/list/
DEBUG 2024-08-21 11:05:42,750 schema CREATE TABLE `django_migrations` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `app` varchar(255) NOT NULL, `name` varchar(255) NOT NULL, `applied` datetime(6) NOT NULL); (params None)
DEBUG 2024-08-21 11:05:42,779 schema CREATE TABLE `django_content_type` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(100) NOT NULL, `app_label` varchar(100) NOT NULL, `model` varchar(100) NOT NULL); (params None)
DEBUG 2024-08-21 11:05:42,806 schema ALTER TABLE `django_content_type` ADD CONSTRAINT `django_content_type_app_label_model_76bd3d3b_uniq` UNIQUE (`app_label`, `model`); (params ())
DEBUG 2024-08-21 11:05:42,875 schema CREATE TABLE `auth_permission` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(50) NOT NULL, `content_type_id` integer NOT NULL, `codename` varchar(100) NOT NULL); (params None)
DEBUG 2024-08-21 11:05:42,918 schema CREATE TABLE `auth_group` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(80) NOT NULL UNIQUE); (params None)
DEBUG 2024-08-21 11:05:42,944 schema CREATE TABLE `auth_group_permissions` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `group_id` integer NOT NULL, `permission_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 11:05:42,991 schema CREATE TABLE `auth_user` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `password` varchar(128) NOT NULL, `last_login` datetime(6) NOT NULL, `is_superuser` bool NOT NULL, `username` varchar(30) NOT NULL UNIQUE, `first_name` varchar(30) NOT NULL, `last_name` varchar(30) NOT NULL, `email` varchar(75) NOT NULL, `is_staff` bool NOT NULL, `is_active` bool NOT NULL, `date_joined` datetime(6) NOT NULL); (params None)
DEBUG 2024-08-21 11:05:43,009 schema CREATE TABLE `auth_user_groups` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `user_id` integer NOT NULL, `group_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 11:05:43,068 schema CREATE TABLE `auth_user_user_permissions` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `user_id` integer NOT NULL, `permission_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 11:05:43,113 schema ALTER TABLE `auth_permission` ADD CONSTRAINT `auth_permission_content_type_id_codename_01ab375a_uniq` UNIQUE (`content_type_id`, `codename`); (params ())
DEBUG 2024-08-21 11:05:43,135 schema ALTER TABLE `auth_permission` ADD CONSTRAINT `auth_permission_content_type_id_2f476e4b_fk_django_co` FOREIGN KEY (`content_type_id`) REFERENCES `django_content_type` (`id`); (params ())
DEBUG 2024-08-21 11:05:43,162 schema ALTER TABLE `auth_group_permissions` ADD CONSTRAINT `auth_group_permissions_group_id_permission_id_0cd325b0_uniq` UNIQUE (`group_id`, `permission_id`); (params ())
DEBUG 2024-08-21 11:05:43,181 schema ALTER TABLE `auth_group_permissions` ADD CONSTRAINT `auth_group_permissions_group_id_b120cbf9_fk_auth_group_id` FOREIGN KEY (`group_id`) REFERENCES `auth_group` (`id`); (params ())
DEBUG 2024-08-21 11:05:43,210 schema ALTER TABLE `auth_group_permissions` ADD CONSTRAINT `auth_group_permissio_permission_id_84c5c92e_fk_auth_perm` FOREIGN KEY (`permission_id`) REFERENCES `auth_permission` (`id`); (params ())
DEBUG 2024-08-21 11:05:43,238 schema ALTER TABLE `auth_user_groups` ADD CONSTRAINT `auth_user_groups_user_id_group_id_94350c0c_uniq` UNIQUE (`user_id`, `group_id`); (params ())
DEBUG 2024-08-21 11:05:43,256 schema ALTER TABLE `auth_user_groups` ADD CONSTRAINT `auth_user_groups_user_id_6a12ed8b_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); (params ())
DEBUG 2024-08-21 11:05:43,284 schema ALTER TABLE `auth_user_groups` ADD CONSTRAINT `auth_user_groups_group_id_97559544_fk_auth_group_id` FOREIGN KEY (`group_id`) REFERENCES `auth_group` (`id`); (params ())
DEBUG 2024-08-21 11:05:43,310 schema ALTER TABLE `auth_user_user_permissions` ADD CONSTRAINT `auth_user_user_permissions_user_id_permission_id_14a6b632_uniq` UNIQUE (`user_id`, `permission_id`); (params ())
DEBUG 2024-08-21 11:05:43,328 schema ALTER TABLE `auth_user_user_permissions` ADD CONSTRAINT `auth_user_user_permissions_user_id_a95ead1b_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); (params ())
DEBUG 2024-08-21 11:05:43,360 schema ALTER TABLE `auth_user_user_permissions` ADD CONSTRAINT `auth_user_user_permi_permission_id_1fbb5f2c_fk_auth_perm` FOREIGN KEY (`permission_id`) REFERENCES `auth_permission` (`id`); (params ())
DEBUG 2024-08-21 11:05:43,446 schema CREATE TABLE `django_admin_log` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `action_time` datetime(6) NOT NULL, `object_id` longtext NULL, `object_repr` varchar(200) NOT NULL, `action_flag` smallint UNSIGNED NOT NULL CHECK (`action_flag` >= 0), `change_message` longtext NOT NULL, `content_type_id` integer NULL, `user_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 11:05:43,498 schema ALTER TABLE `django_admin_log` ADD CONSTRAINT `django_admin_log_content_type_id_c4bce8eb_fk_django_co` FOREIGN KEY (`content_type_id`) REFERENCES `django_content_type` (`id`); (params ())
DEBUG 2024-08-21 11:05:43,528 schema ALTER TABLE `django_admin_log` ADD CONSTRAINT `django_admin_log_user_id_c564eba6_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); (params ())
DEBUG 2024-08-21 11:05:43,673 schema CREATE TABLE `app01_doctors` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `identity_num` varchar(64) NOT NULL, `name` varchar(20) NOT NULL, `title` varchar(50) NOT NULL, `department` varchar(20) NOT NULL, `research` varchar(150) NULL, `cost` numeric(5, 2) NOT NULL, `avatar` varchar(100) NULL, `avatar_name` varchar(128) NOT NULL); (params None)
DEBUG 2024-08-21 11:05:43,695 schema CREATE TABLE `app01_medicine` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(50) NOT NULL, `medicine_type` smallint NOT NULL, `symptom` varchar(200) NOT NULL, `price` numeric(5, 2) NOT NULL, `quantity` integer NOT NULL, `photo_name` varchar(128) NOT NULL); (params None)
DEBUG 2024-08-21 11:05:43,714 schema CREATE TABLE `app01_patients` (`identity` smallint NOT NULL, `identity_num` varchar(64) NOT NULL PRIMARY KEY, `name` varchar(20) NOT NULL, `health_insurance` smallint NOT NULL, `gender` smallint NOT NULL, `birthday` date NOT NULL, `phone_num` varchar(15) NOT NULL, `address` varchar(128) NOT NULL); (params None)
DEBUG 2024-08-21 11:05:43,732 schema CREATE TABLE `app01_user` (`type` smallint NOT NULL, `identity_num` varchar(64) NOT NULL PRIMARY KEY, `password` varchar(64) NOT NULL); (params None)
DEBUG 2024-08-21 11:05:43,752 schema CREATE TABLE `app01_treatment` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `queue_id` integer NOT NULL, `time` datetime(6) NOT NULL, `advice` varchar(256) NOT NULL, `medicine` longtext NOT NULL, `price` numeric(5, 2) NOT NULL, `doctor_id` bigint NOT NULL, `patient_id` varchar(64) NOT NULL); (params None)
DEBUG 2024-08-21 11:05:43,803 schema CREATE TABLE `app01_register` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `queue_id` integer NOT NULL, `time` datetime(6) NOT NULL, `position` varchar(128) NOT NULL, `doctor_id` bigint NOT NULL, `patient_id` varchar(64) NOT NULL, `register_id` varchar(64) NOT NULL); (params None)
DEBUG 2024-08-21 11:05:43,885 schema CREATE TABLE `app01_onduty` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `date` date NOT NULL, `time` smallint NOT NULL, `state` integer NOT NULL, `doctor_id` bigint NOT NULL); (params None)
DEBUG 2024-08-21 11:05:43,938 schema CREATE TABLE `app01_notice` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `msg_type` smallint NOT NULL, `time` datetime(6) NOT NULL, `isRead` bool NOT NULL, `doctor_id` bigint NOT NULL, `patient_id` varchar(64) NOT NULL, `register_id` bigint NULL, `registerMan_id` varchar(64) NULL, `treatment_id` bigint NULL); (params None)
DEBUG 2024-08-21 11:05:44,031 schema CREATE TABLE `app01_bill` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `type` smallint NOT NULL, `state` bool NOT NULL, `price` numeric(5, 2) NOT NULL, `patient_id` varchar(64) NULL, `register_id` bigint NULL, `treatment_id` bigint NULL); (params None)
DEBUG 2024-08-21 11:05:44,087 schema ALTER TABLE `app01_treatment` ADD CONSTRAINT `app01_treatment_doctor_id_a47beada_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 11:05:44,117 schema ALTER TABLE `app01_treatment` ADD CONSTRAINT `app01_treatment_patient_id_52a8e1e5_fk_app01_pat` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 11:05:44,145 schema ALTER TABLE `app01_register` ADD CONSTRAINT `app01_register_doctor_id_e0ea61dc_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 11:05:44,174 schema ALTER TABLE `app01_register` ADD CONSTRAINT `app01_register_patient_id_4a065a29_fk_app01_pat` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 11:05:44,207 schema ALTER TABLE `app01_register` ADD CONSTRAINT `app01_register_register_id_e85a8e5b_fk_app01_pat` FOREIGN KEY (`register_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 11:05:44,237 schema ALTER TABLE `app01_onduty` ADD CONSTRAINT `app01_onduty_doctor_id_9b012eb7_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 11:05:44,262 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_doctor_id_2d7f7104_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 11:05:44,292 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_patient_id_74974826_fk_app01_patients_identity_num` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 11:05:44,325 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_register_id_6c54784c_fk_app01_register_id` FOREIGN KEY (`register_id`) REFERENCES `app01_register` (`id`); (params ())
DEBUG 2024-08-21 11:05:44,360 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_registerMan_id_1bd9adce_fk_app01_pat` FOREIGN KEY (`registerMan_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 11:05:44,393 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_treatment_id_596ea92a_fk_app01_treatment_id` FOREIGN KEY (`treatment_id`) REFERENCES `app01_treatment` (`id`); (params ())
DEBUG 2024-08-21 11:05:44,433 schema ALTER TABLE `app01_bill` ADD CONSTRAINT `app01_bill_patient_id_96fe396a_fk_app01_patients_identity_num` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 11:05:44,462 schema ALTER TABLE `app01_bill` ADD CONSTRAINT `app01_bill_register_id_cf59300e_fk_app01_register_id` FOREIGN KEY (`register_id`) REFERENCES `app01_register` (`id`); (params ())
DEBUG 2024-08-21 11:05:44,498 schema ALTER TABLE `app01_bill` ADD CONSTRAINT `app01_bill_treatment_id_73ef4d98_fk_app01_treatment_id` FOREIGN KEY (`treatment_id`) REFERENCES `app01_treatment` (`id`); (params ())
DEBUG 2024-08-21 11:05:44,563 schema ALTER TABLE `django_content_type` MODIFY `name` varchar(100) NULL; (params [])
DEBUG 2024-08-21 11:05:44,640 schema ALTER TABLE `django_content_type` DROP COLUMN `name`; (params ())
DEBUG 2024-08-21 11:05:44,696 schema ALTER TABLE `auth_permission` MODIFY `name` varchar(255) NOT NULL; (params [])
DEBUG 2024-08-21 11:05:44,763 schema ALTER TABLE `auth_user` MODIFY `email` varchar(254) NOT NULL; (params [])
DEBUG 2024-08-21 11:05:44,862 schema ALTER TABLE `auth_user` MODIFY `last_login` datetime(6) NULL; (params [])
DEBUG 2024-08-21 11:05:44,983 schema ALTER TABLE `auth_user` MODIFY `username` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 11:05:45,047 schema ALTER TABLE `auth_user` MODIFY `last_name` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 11:05:45,106 schema ALTER TABLE `auth_group` MODIFY `name` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 11:05:45,277 schema ALTER TABLE `auth_user` MODIFY `first_name` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 11:05:45,418 schema CREATE TABLE `django_session` (`session_key` varchar(40) NOT NULL PRIMARY KEY, `session_data` longtext NOT NULL, `expire_date` datetime(6) NOT NULL); (params None)
DEBUG 2024-08-21 11:05:45,458 schema CREATE INDEX `django_session_expire_date_a5c62663` ON `django_session` (`expire_date`); (params ())
WARNING 2024-08-21 11:05:46,994 log Bad Request: /api/doctors/setData/
WARNING 2024-08-21 11:05:47,343 log Bad Request: /api/doctors/delete/
WARNING 2024-08-21 11:05:48,298 log Bad Request: /api/duty/all_next_seven_days/
WARNING 2024-08-21 11:05:48,474 log Bad Request: /api/duty/next_seven_days/
WARNING 2024-08-21 11:05:49,347 log Bad Request: /api/registers/list/
WARNING 2024-08-21 11:05:49,698 log Bad Request: /api/treatments/list/
WARNING 2024-08-21 11:05:49,969 log Bad Request: /api/treatments/list/
DEBUG 2024-08-21 11:24:00,989 schema CREATE TABLE `django_migrations` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `app` varchar(255) NOT NULL, `name` varchar(255) NOT NULL, `applied` datetime(6) NOT NULL); (params None)
DEBUG 2024-08-21 11:24:01,016 schema CREATE TABLE `django_content_type` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(100) NOT NULL, `app_label` varchar(100) NOT NULL, `model` varchar(100) NOT NULL); (params None)
DEBUG 2024-08-21 11:24:01,037 schema ALTER TABLE `django_content_type` ADD CONSTRAINT `django_content_type_app_label_model_76bd3d3b_uniq` UNIQUE (`app_label`, `model`); (params ())
DEBUG 2024-08-21 11:24:01,085 schema CREATE TABLE `auth_permission` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(50) NOT NULL, `content_type_id` integer NOT NULL, `codename` varchar(100) NOT NULL); (params None)
DEBUG 2024-08-21 11:24:01,114 schema CREATE TABLE `auth_group` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(80) NOT NULL UNIQUE); (params None)
DEBUG 2024-08-21 11:24:01,134 schema CREATE TABLE `auth_group_permissions` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `group_id` integer NOT NULL, `permission_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 11:24:01,177 schema CREATE TABLE `auth_user` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `password` varchar(128) NOT NULL, `last_login` datetime(6) NOT NULL, `is_superuser` bool NOT NULL, `username` varchar(30) NOT NULL UNIQUE, `first_name` varchar(30) NOT NULL, `last_name` varchar(30) NOT NULL, `email` varchar(75) NOT NULL, `is_staff` bool NOT NULL, `is_active` bool NOT NULL, `date_joined` datetime(6) NOT NULL); (params None)
DEBUG 2024-08-21 11:24:01,195 schema CREATE TABLE `auth_user_groups` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `user_id` integer NOT NULL, `group_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 11:24:01,250 schema CREATE TABLE `auth_user_user_permissions` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `user_id` integer NOT NULL, `permission_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 11:24:01,312 schema ALTER TABLE `auth_permission` ADD CONSTRAINT `auth_permission_content_type_id_codename_01ab375a_uniq` UNIQUE (`content_type_id`, `codename`); (params ())
DEBUG 2024-08-21 11:24:01,331 schema ALTER TABLE `auth_permission` ADD CONSTRAINT `auth_permission_content_type_id_2f476e4b_fk_django_co` FOREIGN KEY (`content_type_id`) REFERENCES `django_content_type` (`id`); (params ())
DEBUG 2024-08-21 11:24:01,355 schema ALTER TABLE `auth_group_permissions` ADD CONSTRAINT `auth_group_permissions_group_id_permission_id_0cd325b0_uniq` UNIQUE (`group_id`, `permission_id`); (params ())
DEBUG 2024-08-21 11:24:01,374 schema ALTER TABLE `auth_group_permissions` ADD CONSTRAINT `auth_group_permissions_group_id_b120cbf9_fk_auth_group_id` FOREIGN KEY (`group_id`) REFERENCES `auth_group` (`id`); (params ())
DEBUG 2024-08-21 11:24:01,398 schema ALTER TABLE `auth_group_permissions` ADD CONSTRAINT `auth_group_permissio_permission_id_84c5c92e_fk_auth_perm` FOREIGN KEY (`permission_id`) REFERENCES `auth_permission` (`id`); (params ())
DEBUG 2024-08-21 11:24:01,442 schema ALTER TABLE `auth_user_groups` ADD CONSTRAINT `auth_user_groups_user_id_group_id_94350c0c_uniq` UNIQUE (`user_id`, `group_id`); (params ())
DEBUG 2024-08-21 11:24:01,467 schema ALTER TABLE `auth_user_groups` ADD CONSTRAINT `auth_user_groups_user_id_6a12ed8b_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); (params ())
DEBUG 2024-08-21 11:24:01,495 schema ALTER TABLE `auth_user_groups` ADD CONSTRAINT `auth_user_groups_group_id_97559544_fk_auth_group_id` FOREIGN KEY (`group_id`) REFERENCES `auth_group` (`id`); (params ())
DEBUG 2024-08-21 11:24:01,527 schema ALTER TABLE `auth_user_user_permissions` ADD CONSTRAINT `auth_user_user_permissions_user_id_permission_id_14a6b632_uniq` UNIQUE (`user_id`, `permission_id`); (params ())
DEBUG 2024-08-21 11:24:01,550 schema ALTER TABLE `auth_user_user_permissions` ADD CONSTRAINT `auth_user_user_permissions_user_id_a95ead1b_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); (params ())
DEBUG 2024-08-21 11:24:01,579 schema ALTER TABLE `auth_user_user_permissions` ADD CONSTRAINT `auth_user_user_permi_permission_id_1fbb5f2c_fk_auth_perm` FOREIGN KEY (`permission_id`) REFERENCES `auth_permission` (`id`); (params ())
DEBUG 2024-08-21 11:24:01,630 schema CREATE TABLE `django_admin_log` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `action_time` datetime(6) NOT NULL, `object_id` longtext NULL, `object_repr` varchar(200) NOT NULL, `action_flag` smallint UNSIGNED NOT NULL CHECK (`action_flag` >= 0), `change_message` longtext NOT NULL, `content_type_id` integer NULL, `user_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 11:24:01,670 schema ALTER TABLE `django_admin_log` ADD CONSTRAINT `django_admin_log_content_type_id_c4bce8eb_fk_django_co` FOREIGN KEY (`content_type_id`) REFERENCES `django_content_type` (`id`); (params ())
DEBUG 2024-08-21 11:24:01,696 schema ALTER TABLE `django_admin_log` ADD CONSTRAINT `django_admin_log_user_id_c564eba6_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); (params ())
DEBUG 2024-08-21 11:24:01,807 schema CREATE TABLE `app01_doctors` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `identity_num` varchar(64) NOT NULL, `name` varchar(20) NOT NULL, `title` varchar(50) NOT NULL, `department` varchar(20) NOT NULL, `research` varchar(150) NULL, `cost` numeric(5, 2) NOT NULL, `avatar` varchar(100) NULL, `avatar_name` varchar(128) NOT NULL); (params None)
DEBUG 2024-08-21 11:24:01,824 schema CREATE TABLE `app01_medicine` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(50) NOT NULL, `medicine_type` smallint NOT NULL, `symptom` varchar(200) NOT NULL, `price` numeric(5, 2) NOT NULL, `quantity` integer NOT NULL, `photo_name` varchar(128) NOT NULL); (params None)
DEBUG 2024-08-21 11:24:01,843 schema CREATE TABLE `app01_patients` (`identity` smallint NOT NULL, `identity_num` varchar(64) NOT NULL PRIMARY KEY, `name` varchar(20) NOT NULL, `health_insurance` smallint NOT NULL, `gender` smallint NOT NULL, `birthday` date NOT NULL, `phone_num` varchar(15) NOT NULL, `address` varchar(128) NOT NULL); (params None)
DEBUG 2024-08-21 11:24:01,861 schema CREATE TABLE `app01_user` (`type` smallint NOT NULL, `identity_num` varchar(64) NOT NULL PRIMARY KEY, `password` varchar(64) NOT NULL); (params None)
DEBUG 2024-08-21 11:24:01,880 schema CREATE TABLE `app01_treatment` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `queue_id` integer NOT NULL, `time` datetime(6) NOT NULL, `advice` varchar(256) NOT NULL, `medicine` longtext NOT NULL, `price` numeric(5, 2) NOT NULL, `doctor_id` bigint NOT NULL, `patient_id` varchar(64) NOT NULL); (params None)
DEBUG 2024-08-21 11:24:01,940 schema CREATE TABLE `app01_register` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `queue_id` integer NOT NULL, `time` datetime(6) NOT NULL, `position` varchar(128) NOT NULL, `doctor_id` bigint NOT NULL, `patient_id` varchar(64) NOT NULL, `register_id` varchar(64) NOT NULL); (params None)
DEBUG 2024-08-21 11:24:02,029 schema CREATE TABLE `app01_onduty` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `date` date NOT NULL, `time` smallint NOT NULL, `state` integer NOT NULL, `doctor_id` bigint NOT NULL); (params None)
DEBUG 2024-08-21 11:24:02,071 schema CREATE TABLE `app01_notice` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `msg_type` smallint NOT NULL, `time` datetime(6) NOT NULL, `isRead` bool NOT NULL, `doctor_id` bigint NOT NULL, `patient_id` varchar(64) NOT NULL, `register_id` bigint NULL, `registerMan_id` varchar(64) NULL, `treatment_id` bigint NULL); (params None)
DEBUG 2024-08-21 11:24:02,149 schema CREATE TABLE `app01_bill` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `type` smallint NOT NULL, `state` bool NOT NULL, `price` numeric(5, 2) NOT NULL, `patient_id` varchar(64) NULL, `register_id` bigint NULL, `treatment_id` bigint NULL); (params None)
DEBUG 2024-08-21 11:24:02,205 schema ALTER TABLE `app01_treatment` ADD CONSTRAINT `app01_treatment_doctor_id_a47beada_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 11:24:02,230 schema ALTER TABLE `app01_treatment` ADD CONSTRAINT `app01_treatment_patient_id_52a8e1e5_fk_app01_pat` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 11:24:02,255 schema ALTER TABLE `app01_register` ADD CONSTRAINT `app01_register_doctor_id_e0ea61dc_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 11:24:02,304 schema ALTER TABLE `app01_register` ADD CONSTRAINT `app01_register_patient_id_4a065a29_fk_app01_pat` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 11:24:02,333 schema ALTER TABLE `app01_register` ADD CONSTRAINT `app01_register_register_id_e85a8e5b_fk_app01_pat` FOREIGN KEY (`register_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 11:24:02,362 schema ALTER TABLE `app01_onduty` ADD CONSTRAINT `app01_onduty_doctor_id_9b012eb7_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 11:24:02,388 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_doctor_id_2d7f7104_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 11:24:02,420 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_patient_id_74974826_fk_app01_patients_identity_num` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 11:24:02,448 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_register_id_6c54784c_fk_app01_register_id` FOREIGN KEY (`register_id`) REFERENCES `app01_register` (`id`); (params ())
DEBUG 2024-08-21 11:24:02,482 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_registerMan_id_1bd9adce_fk_app01_pat` FOREIGN KEY (`registerMan_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 11:24:02,530 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_treatment_id_596ea92a_fk_app01_treatment_id` FOREIGN KEY (`treatment_id`) REFERENCES `app01_treatment` (`id`); (params ())
DEBUG 2024-08-21 11:24:02,563 schema ALTER TABLE `app01_bill` ADD CONSTRAINT `app01_bill_patient_id_96fe396a_fk_app01_patients_identity_num` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 11:24:02,593 schema ALTER TABLE `app01_bill` ADD CONSTRAINT `app01_bill_register_id_cf59300e_fk_app01_register_id` FOREIGN KEY (`register_id`) REFERENCES `app01_register` (`id`); (params ())
DEBUG 2024-08-21 11:24:02,623 schema ALTER TABLE `app01_bill` ADD CONSTRAINT `app01_bill_treatment_id_73ef4d98_fk_app01_treatment_id` FOREIGN KEY (`treatment_id`) REFERENCES `app01_treatment` (`id`); (params ())
DEBUG 2024-08-21 11:24:02,683 schema ALTER TABLE `django_content_type` MODIFY `name` varchar(100) NULL; (params [])
DEBUG 2024-08-21 11:24:02,782 schema ALTER TABLE `django_content_type` DROP COLUMN `name`; (params ())
DEBUG 2024-08-21 11:24:02,834 schema ALTER TABLE `auth_permission` MODIFY `name` varchar(255) NOT NULL; (params [])
DEBUG 2024-08-21 11:24:02,910 schema ALTER TABLE `auth_user` MODIFY `email` varchar(254) NOT NULL; (params [])
DEBUG 2024-08-21 11:24:02,998 schema ALTER TABLE `auth_user` MODIFY `last_login` datetime(6) NULL; (params [])
DEBUG 2024-08-21 11:24:03,120 schema ALTER TABLE `auth_user` MODIFY `username` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 11:24:03,182 schema ALTER TABLE `auth_user` MODIFY `last_name` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 11:24:03,242 schema ALTER TABLE `auth_group` MODIFY `name` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 11:24:03,363 schema ALTER TABLE `auth_user` MODIFY `first_name` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 11:24:03,433 schema CREATE TABLE `django_session` (`session_key` varchar(40) NOT NULL PRIMARY KEY, `session_data` longtext NOT NULL, `expire_date` datetime(6) NOT NULL); (params None)
DEBUG 2024-08-21 11:24:03,464 schema CREATE INDEX `django_session_expire_date_a5c62663` ON `django_session` (`expire_date`); (params ())
WARNING 2024-08-21 11:24:05,375 log Bad Request: /api/doctors/setData/
WARNING 2024-08-21 11:24:05,618 log Bad Request: /api/doctors/delete/
WARNING 2024-08-21 11:24:06,271 log Bad Request: /api/duty/all_next_seven_days/
WARNING 2024-08-21 11:24:06,421 log Bad Request: /api/duty/next_seven_days/
WARNING 2024-08-21 11:24:07,196 log Bad Request: /api/registers/list/
WARNING 2024-08-21 11:24:07,524 log Bad Request: /api/treatments/list/
WARNING 2024-08-21 11:24:07,794 log Bad Request: /api/treatments/list/
DEBUG 2024-08-21 11:24:15,726 schema CREATE TABLE `django_migrations` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `app` varchar(255) NOT NULL, `name` varchar(255) NOT NULL, `applied` datetime(6) NOT NULL); (params None)
DEBUG 2024-08-21 11:24:15,742 schema CREATE TABLE `django_content_type` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(100) NOT NULL, `app_label` varchar(100) NOT NULL, `model` varchar(100) NOT NULL); (params None)
DEBUG 2024-08-21 11:24:15,765 schema ALTER TABLE `django_content_type` ADD CONSTRAINT `django_content_type_app_label_model_76bd3d3b_uniq` UNIQUE (`app_label`, `model`); (params ())
DEBUG 2024-08-21 11:24:15,817 schema CREATE TABLE `auth_permission` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(50) NOT NULL, `content_type_id` integer NOT NULL, `codename` varchar(100) NOT NULL); (params None)
DEBUG 2024-08-21 11:24:15,848 schema CREATE TABLE `auth_group` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(80) NOT NULL UNIQUE); (params None)
DEBUG 2024-08-21 11:24:15,864 schema CREATE TABLE `auth_group_permissions` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `group_id` integer NOT NULL, `permission_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 11:24:15,907 schema CREATE TABLE `auth_user` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `password` varchar(128) NOT NULL, `last_login` datetime(6) NOT NULL, `is_superuser` bool NOT NULL, `username` varchar(30) NOT NULL UNIQUE, `first_name` varchar(30) NOT NULL, `last_name` varchar(30) NOT NULL, `email` varchar(75) NOT NULL, `is_staff` bool NOT NULL, `is_active` bool NOT NULL, `date_joined` datetime(6) NOT NULL); (params None)
DEBUG 2024-08-21 11:24:15,924 schema CREATE TABLE `auth_user_groups` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `user_id` integer NOT NULL, `group_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 11:24:15,971 schema CREATE TABLE `auth_user_user_permissions` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `user_id` integer NOT NULL, `permission_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 11:24:16,011 schema ALTER TABLE `auth_permission` ADD CONSTRAINT `auth_permission_content_type_id_codename_01ab375a_uniq` UNIQUE (`content_type_id`, `codename`); (params ())
DEBUG 2024-08-21 11:24:16,030 schema ALTER TABLE `auth_permission` ADD CONSTRAINT `auth_permission_content_type_id_2f476e4b_fk_django_co` FOREIGN KEY (`content_type_id`) REFERENCES `django_content_type` (`id`); (params ())
DEBUG 2024-08-21 11:24:16,054 schema ALTER TABLE `auth_group_permissions` ADD CONSTRAINT `auth_group_permissions_group_id_permission_id_0cd325b0_uniq` UNIQUE (`group_id`, `permission_id`); (params ())
DEBUG 2024-08-21 11:24:16,073 schema ALTER TABLE `auth_group_permissions` ADD CONSTRAINT `auth_group_permissions_group_id_b120cbf9_fk_auth_group_id` FOREIGN KEY (`group_id`) REFERENCES `auth_group` (`id`); (params ())
DEBUG 2024-08-21 11:24:16,100 schema ALTER TABLE `auth_group_permissions` ADD CONSTRAINT `auth_group_permissio_permission_id_84c5c92e_fk_auth_perm` FOREIGN KEY (`permission_id`) REFERENCES `auth_permission` (`id`); (params ())
DEBUG 2024-08-21 11:24:16,129 schema ALTER TABLE `auth_user_groups` ADD CONSTRAINT `auth_user_groups_user_id_group_id_94350c0c_uniq` UNIQUE (`user_id`, `group_id`); (params ())
DEBUG 2024-08-21 11:24:16,146 schema ALTER TABLE `auth_user_groups` ADD CONSTRAINT `auth_user_groups_user_id_6a12ed8b_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); (params ())
DEBUG 2024-08-21 11:24:16,188 schema ALTER TABLE `auth_user_groups` ADD CONSTRAINT `auth_user_groups_group_id_97559544_fk_auth_group_id` FOREIGN KEY (`group_id`) REFERENCES `auth_group` (`id`); (params ())
DEBUG 2024-08-21 11:24:16,215 schema ALTER TABLE `auth_user_user_permissions` ADD CONSTRAINT `auth_user_user_permissions_user_id_permission_id_14a6b632_uniq` UNIQUE (`user_id`, `permission_id`); (params ())
DEBUG 2024-08-21 11:24:16,232 schema ALTER TABLE `auth_user_user_permissions` ADD CONSTRAINT `auth_user_user_permissions_user_id_a95ead1b_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); (params ())
DEBUG 2024-08-21 11:24:16,255 schema ALTER TABLE `auth_user_user_permissions` ADD CONSTRAINT `auth_user_user_permi_permission_id_1fbb5f2c_fk_auth_perm` FOREIGN KEY (`permission_id`) REFERENCES `auth_permission` (`id`); (params ())
DEBUG 2024-08-21 11:24:16,311 schema CREATE TABLE `django_admin_log` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `action_time` datetime(6) NOT NULL, `object_id` longtext NULL, `object_repr` varchar(200) NOT NULL, `action_flag` smallint UNSIGNED NOT NULL CHECK (`action_flag` >= 0), `change_message` longtext NOT NULL, `content_type_id` integer NULL, `user_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 11:24:16,357 schema ALTER TABLE `django_admin_log` ADD CONSTRAINT `django_admin_log_content_type_id_c4bce8eb_fk_django_co` FOREIGN KEY (`content_type_id`) REFERENCES `django_content_type` (`id`); (params ())
DEBUG 2024-08-21 11:24:16,384 schema ALTER TABLE `django_admin_log` ADD CONSTRAINT `django_admin_log_user_id_c564eba6_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); (params ())
DEBUG 2024-08-21 11:24:16,500 schema CREATE TABLE `app01_doctors` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `identity_num` varchar(64) NOT NULL, `name` varchar(20) NOT NULL, `title` varchar(50) NOT NULL, `department` varchar(20) NOT NULL, `research` varchar(150) NULL, `cost` numeric(5, 2) NOT NULL, `avatar` varchar(100) NULL, `avatar_name` varchar(128) NOT NULL); (params None)
DEBUG 2024-08-21 11:24:16,524 schema CREATE TABLE `app01_medicine` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(50) NOT NULL, `medicine_type` smallint NOT NULL, `symptom` varchar(200) NOT NULL, `price` numeric(5, 2) NOT NULL, `quantity` integer NOT NULL, `photo_name` varchar(128) NOT NULL); (params None)
DEBUG 2024-08-21 11:24:16,543 schema CREATE TABLE `app01_patients` (`identity` smallint NOT NULL, `identity_num` varchar(64) NOT NULL PRIMARY KEY, `name` varchar(20) NOT NULL, `health_insurance` smallint NOT NULL, `gender` smallint NOT NULL, `birthday` date NOT NULL, `phone_num` varchar(15) NOT NULL, `address` varchar(128) NOT NULL); (params None)
DEBUG 2024-08-21 11:24:16,566 schema CREATE TABLE `app01_user` (`type` smallint NOT NULL, `identity_num` varchar(64) NOT NULL PRIMARY KEY, `password` varchar(64) NOT NULL); (params None)
DEBUG 2024-08-21 11:24:16,585 schema CREATE TABLE `app01_treatment` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `queue_id` integer NOT NULL, `time` datetime(6) NOT NULL, `advice` varchar(256) NOT NULL, `medicine` longtext NOT NULL, `price` numeric(5, 2) NOT NULL, `doctor_id` bigint NOT NULL, `patient_id` varchar(64) NOT NULL); (params None)
DEBUG 2024-08-21 11:24:16,637 schema CREATE TABLE `app01_register` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `queue_id` integer NOT NULL, `time` datetime(6) NOT NULL, `position` varchar(128) NOT NULL, `doctor_id` bigint NOT NULL, `patient_id` varchar(64) NOT NULL, `register_id` varchar(64) NOT NULL); (params None)
DEBUG 2024-08-21 11:24:16,697 schema CREATE TABLE `app01_onduty` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `date` date NOT NULL, `time` smallint NOT NULL, `state` integer NOT NULL, `doctor_id` bigint NOT NULL); (params None)
DEBUG 2024-08-21 11:24:16,732 schema CREATE TABLE `app01_notice` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `msg_type` smallint NOT NULL, `time` datetime(6) NOT NULL, `isRead` bool NOT NULL, `doctor_id` bigint NOT NULL, `patient_id` varchar(64) NOT NULL, `register_id` bigint NULL, `registerMan_id` varchar(64) NULL, `treatment_id` bigint NULL); (params None)
DEBUG 2024-08-21 11:24:16,833 schema CREATE TABLE `app01_bill` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `type` smallint NOT NULL, `state` bool NOT NULL, `price` numeric(5, 2) NOT NULL, `patient_id` varchar(64) NULL, `register_id` bigint NULL, `treatment_id` bigint NULL); (params None)
DEBUG 2024-08-21 11:24:16,891 schema ALTER TABLE `app01_treatment` ADD CONSTRAINT `app01_treatment_doctor_id_a47beada_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 11:24:16,921 schema ALTER TABLE `app01_treatment` ADD CONSTRAINT `app01_treatment_patient_id_52a8e1e5_fk_app01_pat` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 11:24:16,948 schema ALTER TABLE `app01_register` ADD CONSTRAINT `app01_register_doctor_id_e0ea61dc_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 11:24:16,973 schema ALTER TABLE `app01_register` ADD CONSTRAINT `app01_register_patient_id_4a065a29_fk_app01_pat` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 11:24:17,000 schema ALTER TABLE `app01_register` ADD CONSTRAINT `app01_register_register_id_e85a8e5b_fk_app01_pat` FOREIGN KEY (`register_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 11:24:17,027 schema ALTER TABLE `app01_onduty` ADD CONSTRAINT `app01_onduty_doctor_id_9b012eb7_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 11:24:17,052 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_doctor_id_2d7f7104_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 11:24:17,078 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_patient_id_74974826_fk_app01_patients_identity_num` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 11:24:17,106 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_register_id_6c54784c_fk_app01_register_id` FOREIGN KEY (`register_id`) REFERENCES `app01_register` (`id`); (params ())
DEBUG 2024-08-21 11:24:17,137 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_registerMan_id_1bd9adce_fk_app01_pat` FOREIGN KEY (`registerMan_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 11:24:17,169 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_treatment_id_596ea92a_fk_app01_treatment_id` FOREIGN KEY (`treatment_id`) REFERENCES `app01_treatment` (`id`); (params ())
DEBUG 2024-08-21 11:24:17,209 schema ALTER TABLE `app01_bill` ADD CONSTRAINT `app01_bill_patient_id_96fe396a_fk_app01_patients_identity_num` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 11:24:17,239 schema ALTER TABLE `app01_bill` ADD CONSTRAINT `app01_bill_register_id_cf59300e_fk_app01_register_id` FOREIGN KEY (`register_id`) REFERENCES `app01_register` (`id`); (params ())
DEBUG 2024-08-21 11:24:17,266 schema ALTER TABLE `app01_bill` ADD CONSTRAINT `app01_bill_treatment_id_73ef4d98_fk_app01_treatment_id` FOREIGN KEY (`treatment_id`) REFERENCES `app01_treatment` (`id`); (params ())
DEBUG 2024-08-21 11:24:17,347 schema ALTER TABLE `django_content_type` MODIFY `name` varchar(100) NULL; (params [])
DEBUG 2024-08-21 11:24:17,418 schema ALTER TABLE `django_content_type` DROP COLUMN `name`; (params ())
DEBUG 2024-08-21 11:24:17,490 schema ALTER TABLE `auth_permission` MODIFY `name` varchar(255) NOT NULL; (params [])
DEBUG 2024-08-21 11:24:17,553 schema ALTER TABLE `auth_user` MODIFY `email` varchar(254) NOT NULL; (params [])
DEBUG 2024-08-21 11:24:17,665 schema ALTER TABLE `auth_user` MODIFY `last_login` datetime(6) NULL; (params [])
DEBUG 2024-08-21 11:24:17,812 schema ALTER TABLE `auth_user` MODIFY `username` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 11:24:17,901 schema ALTER TABLE `auth_user` MODIFY `last_name` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 11:24:17,984 schema ALTER TABLE `auth_group` MODIFY `name` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 11:24:18,117 schema ALTER TABLE `auth_user` MODIFY `first_name` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 11:24:18,176 schema CREATE TABLE `django_session` (`session_key` varchar(40) NOT NULL PRIMARY KEY, `session_data` longtext NOT NULL, `expire_date` datetime(6) NOT NULL); (params None)
DEBUG 2024-08-21 11:24:18,214 schema CREATE INDEX `django_session_expire_date_a5c62663` ON `django_session` (`expire_date`); (params ())
DEBUG 2024-08-21 11:26:50,246 schema CREATE TABLE `django_migrations` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `app` varchar(255) NOT NULL, `name` varchar(255) NOT NULL, `applied` datetime(6) NOT NULL); (params None)
DEBUG 2024-08-21 11:26:50,272 schema CREATE TABLE `django_content_type` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(100) NOT NULL, `app_label` varchar(100) NOT NULL, `model` varchar(100) NOT NULL); (params None)
DEBUG 2024-08-21 11:26:50,310 schema ALTER TABLE `django_content_type` ADD CONSTRAINT `django_content_type_app_label_model_76bd3d3b_uniq` UNIQUE (`app_label`, `model`); (params ())
DEBUG 2024-08-21 11:26:50,384 schema CREATE TABLE `auth_permission` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(50) NOT NULL, `content_type_id` integer NOT NULL, `codename` varchar(100) NOT NULL); (params None)
DEBUG 2024-08-21 11:26:50,419 schema CREATE TABLE `auth_group` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(80) NOT NULL UNIQUE); (params None)
DEBUG 2024-08-21 11:26:50,442 schema CREATE TABLE `auth_group_permissions` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `group_id` integer NOT NULL, `permission_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 11:26:50,502 schema CREATE TABLE `auth_user` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `password` varchar(128) NOT NULL, `last_login` datetime(6) NOT NULL, `is_superuser` bool NOT NULL, `username` varchar(30) NOT NULL UNIQUE, `first_name` varchar(30) NOT NULL, `last_name` varchar(30) NOT NULL, `email` varchar(75) NOT NULL, `is_staff` bool NOT NULL, `is_active` bool NOT NULL, `date_joined` datetime(6) NOT NULL); (params None)
DEBUG 2024-08-21 11:26:50,525 schema CREATE TABLE `auth_user_groups` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `user_id` integer NOT NULL, `group_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 11:26:50,600 schema CREATE TABLE `auth_user_user_permissions` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `user_id` integer NOT NULL, `permission_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 11:26:50,651 schema ALTER TABLE `auth_permission` ADD CONSTRAINT `auth_permission_content_type_id_codename_01ab375a_uniq` UNIQUE (`content_type_id`, `codename`); (params ())
DEBUG 2024-08-21 11:26:50,670 schema ALTER TABLE `auth_permission` ADD CONSTRAINT `auth_permission_content_type_id_2f476e4b_fk_django_co` FOREIGN KEY (`content_type_id`) REFERENCES `django_content_type` (`id`); (params ())
DEBUG 2024-08-21 11:26:50,695 schema ALTER TABLE `auth_group_permissions` ADD CONSTRAINT `auth_group_permissions_group_id_permission_id_0cd325b0_uniq` UNIQUE (`group_id`, `permission_id`); (params ())
DEBUG 2024-08-21 11:26:50,719 schema ALTER TABLE `auth_group_permissions` ADD CONSTRAINT `auth_group_permissions_group_id_b120cbf9_fk_auth_group_id` FOREIGN KEY (`group_id`) REFERENCES `auth_group` (`id`); (params ())
DEBUG 2024-08-21 11:26:50,757 schema ALTER TABLE `auth_group_permissions` ADD CONSTRAINT `auth_group_permissio_permission_id_84c5c92e_fk_auth_perm` FOREIGN KEY (`permission_id`) REFERENCES `auth_permission` (`id`); (params ())
DEBUG 2024-08-21 11:26:50,789 schema ALTER TABLE `auth_user_groups` ADD CONSTRAINT `auth_user_groups_user_id_group_id_94350c0c_uniq` UNIQUE (`user_id`, `group_id`); (params ())
DEBUG 2024-08-21 11:26:50,819 schema ALTER TABLE `auth_user_groups` ADD CONSTRAINT `auth_user_groups_user_id_6a12ed8b_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); (params ())
DEBUG 2024-08-21 11:26:50,844 schema ALTER TABLE `auth_user_groups` ADD CONSTRAINT `auth_user_groups_group_id_97559544_fk_auth_group_id` FOREIGN KEY (`group_id`) REFERENCES `auth_group` (`id`); (params ())
DEBUG 2024-08-21 11:26:50,873 schema ALTER TABLE `auth_user_user_permissions` ADD CONSTRAINT `auth_user_user_permissions_user_id_permission_id_14a6b632_uniq` UNIQUE (`user_id`, `permission_id`); (params ())
DEBUG 2024-08-21 11:26:50,890 schema ALTER TABLE `auth_user_user_permissions` ADD CONSTRAINT `auth_user_user_permissions_user_id_a95ead1b_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); (params ())
DEBUG 2024-08-21 11:26:50,914 schema ALTER TABLE `auth_user_user_permissions` ADD CONSTRAINT `auth_user_user_permi_permission_id_1fbb5f2c_fk_auth_perm` FOREIGN KEY (`permission_id`) REFERENCES `auth_permission` (`id`); (params ())
DEBUG 2024-08-21 11:26:51,000 schema CREATE TABLE `django_admin_log` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `action_time` datetime(6) NOT NULL, `object_id` longtext NULL, `object_repr` varchar(200) NOT NULL, `action_flag` smallint UNSIGNED NOT NULL CHECK (`action_flag` >= 0), `change_message` longtext NOT NULL, `content_type_id` integer NULL, `user_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 11:26:51,068 schema ALTER TABLE `django_admin_log` ADD CONSTRAINT `django_admin_log_content_type_id_c4bce8eb_fk_django_co` FOREIGN KEY (`content_type_id`) REFERENCES `django_content_type` (`id`); (params ())
DEBUG 2024-08-21 11:26:51,097 schema ALTER TABLE `django_admin_log` ADD CONSTRAINT `django_admin_log_user_id_c564eba6_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); (params ())
DEBUG 2024-08-21 11:26:51,256 schema CREATE TABLE `app01_doctors` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `identity_num` varchar(64) NOT NULL, `name` varchar(20) NOT NULL, `title` varchar(50) NOT NULL, `department` varchar(20) NOT NULL, `research` varchar(150) NULL, `cost` numeric(5, 2) NOT NULL, `avatar` varchar(100) NULL, `avatar_name` varchar(128) NOT NULL); (params None)
DEBUG 2024-08-21 11:26:51,280 schema CREATE TABLE `app01_medicine` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(50) NOT NULL, `medicine_type` smallint NOT NULL, `symptom` varchar(200) NOT NULL, `price` numeric(5, 2) NOT NULL, `quantity` integer NOT NULL, `photo_name` varchar(128) NOT NULL); (params None)
DEBUG 2024-08-21 11:26:51,302 schema CREATE TABLE `app01_patients` (`identity` smallint NOT NULL, `identity_num` varchar(64) NOT NULL PRIMARY KEY, `name` varchar(20) NOT NULL, `health_insurance` smallint NOT NULL, `gender` smallint NOT NULL, `birthday` date NOT NULL, `phone_num` varchar(15) NOT NULL, `address` varchar(128) NOT NULL); (params None)
DEBUG 2024-08-21 11:26:51,327 schema CREATE TABLE `app01_user` (`type` smallint NOT NULL, `identity_num` varchar(64) NOT NULL PRIMARY KEY, `password` varchar(64) NOT NULL); (params None)
DEBUG 2024-08-21 11:26:51,347 schema CREATE TABLE `app01_treatment` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `queue_id` integer NOT NULL, `time` datetime(6) NOT NULL, `advice` varchar(256) NOT NULL, `medicine` longtext NOT NULL, `price` numeric(5, 2) NOT NULL, `doctor_id` bigint NOT NULL, `patient_id` varchar(64) NOT NULL); (params None)
DEBUG 2024-08-21 11:26:51,390 schema CREATE TABLE `app01_register` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `queue_id` integer NOT NULL, `time` datetime(6) NOT NULL, `position` varchar(128) NOT NULL, `doctor_id` bigint NOT NULL, `patient_id` varchar(64) NOT NULL, `register_id` varchar(64) NOT NULL); (params None)
DEBUG 2024-08-21 11:26:51,519 schema CREATE TABLE `app01_onduty` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `date` date NOT NULL, `time` smallint NOT NULL, `state` integer NOT NULL, `doctor_id` bigint NOT NULL); (params None)
DEBUG 2024-08-21 11:26:51,561 schema CREATE TABLE `app01_notice` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `msg_type` smallint NOT NULL, `time` datetime(6) NOT NULL, `isRead` bool NOT NULL, `doctor_id` bigint NOT NULL, `patient_id` varchar(64) NOT NULL, `register_id` bigint NULL, `registerMan_id` varchar(64) NULL, `treatment_id` bigint NULL); (params None)
DEBUG 2024-08-21 11:26:51,675 schema CREATE TABLE `app01_bill` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `type` smallint NOT NULL, `state` bool NOT NULL, `price` numeric(5, 2) NOT NULL, `patient_id` varchar(64) NULL, `register_id` bigint NULL, `treatment_id` bigint NULL); (params None)
DEBUG 2024-08-21 11:26:51,782 schema ALTER TABLE `app01_treatment` ADD CONSTRAINT `app01_treatment_doctor_id_a47beada_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 11:26:51,810 schema ALTER TABLE `app01_treatment` ADD CONSTRAINT `app01_treatment_patient_id_52a8e1e5_fk_app01_pat` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 11:26:51,840 schema ALTER TABLE `app01_register` ADD CONSTRAINT `app01_register_doctor_id_e0ea61dc_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 11:26:51,872 schema ALTER TABLE `app01_register` ADD CONSTRAINT `app01_register_patient_id_4a065a29_fk_app01_pat` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 11:26:51,902 schema ALTER TABLE `app01_register` ADD CONSTRAINT `app01_register_register_id_e85a8e5b_fk_app01_pat` FOREIGN KEY (`register_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 11:26:51,936 schema ALTER TABLE `app01_onduty` ADD CONSTRAINT `app01_onduty_doctor_id_9b012eb7_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 11:26:51,983 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_doctor_id_2d7f7104_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 11:26:52,011 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_patient_id_74974826_fk_app01_patients_identity_num` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 11:26:52,039 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_register_id_6c54784c_fk_app01_register_id` FOREIGN KEY (`register_id`) REFERENCES `app01_register` (`id`); (params ())
DEBUG 2024-08-21 11:26:52,067 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_registerMan_id_1bd9adce_fk_app01_pat` FOREIGN KEY (`registerMan_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 11:26:52,100 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_treatment_id_596ea92a_fk_app01_treatment_id` FOREIGN KEY (`treatment_id`) REFERENCES `app01_treatment` (`id`); (params ())
DEBUG 2024-08-21 11:26:52,147 schema ALTER TABLE `app01_bill` ADD CONSTRAINT `app01_bill_patient_id_96fe396a_fk_app01_patients_identity_num` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 11:26:52,187 schema ALTER TABLE `app01_bill` ADD CONSTRAINT `app01_bill_register_id_cf59300e_fk_app01_register_id` FOREIGN KEY (`register_id`) REFERENCES `app01_register` (`id`); (params ())
DEBUG 2024-08-21 11:26:52,227 schema ALTER TABLE `app01_bill` ADD CONSTRAINT `app01_bill_treatment_id_73ef4d98_fk_app01_treatment_id` FOREIGN KEY (`treatment_id`) REFERENCES `app01_treatment` (`id`); (params ())
DEBUG 2024-08-21 11:26:52,293 schema ALTER TABLE `django_content_type` MODIFY `name` varchar(100) NULL; (params [])
DEBUG 2024-08-21 11:26:52,387 schema ALTER TABLE `django_content_type` DROP COLUMN `name`; (params ())
DEBUG 2024-08-21 11:26:52,502 schema ALTER TABLE `auth_permission` MODIFY `name` varchar(255) NOT NULL; (params [])
DEBUG 2024-08-21 11:26:52,570 schema ALTER TABLE `auth_user` MODIFY `email` varchar(254) NOT NULL; (params [])
DEBUG 2024-08-21 11:26:52,717 schema ALTER TABLE `auth_user` MODIFY `last_login` datetime(6) NULL; (params [])
DEBUG 2024-08-21 11:26:52,874 schema ALTER TABLE `auth_user` MODIFY `username` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 11:26:52,948 schema ALTER TABLE `auth_user` MODIFY `last_name` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 11:26:53,006 schema ALTER TABLE `auth_group` MODIFY `name` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 11:26:53,165 schema ALTER TABLE `auth_user` MODIFY `first_name` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 11:26:53,224 schema CREATE TABLE `django_session` (`session_key` varchar(40) NOT NULL PRIMARY KEY, `session_data` longtext NOT NULL, `expire_date` datetime(6) NOT NULL); (params None)
DEBUG 2024-08-21 11:26:53,256 schema CREATE INDEX `django_session_expire_date_a5c62663` ON `django_session` (`expire_date`); (params ())
DEBUG 2024-08-21 11:27:31,605 schema CREATE TABLE `django_migrations` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `app` varchar(255) NOT NULL, `name` varchar(255) NOT NULL, `applied` datetime(6) NOT NULL); (params None)
DEBUG 2024-08-21 11:27:31,621 schema CREATE TABLE `django_content_type` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(100) NOT NULL, `app_label` varchar(100) NOT NULL, `model` varchar(100) NOT NULL); (params None)
DEBUG 2024-08-21 11:27:31,641 schema ALTER TABLE `django_content_type` ADD CONSTRAINT `django_content_type_app_label_model_76bd3d3b_uniq` UNIQUE (`app_label`, `model`); (params ())
DEBUG 2024-08-21 11:27:31,712 schema CREATE TABLE `auth_permission` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(50) NOT NULL, `content_type_id` integer NOT NULL, `codename` varchar(100) NOT NULL); (params None)
DEBUG 2024-08-21 11:27:31,763 schema CREATE TABLE `auth_group` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(80) NOT NULL UNIQUE); (params None)
DEBUG 2024-08-21 11:27:31,787 schema CREATE TABLE `auth_group_permissions` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `group_id` integer NOT NULL, `permission_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 11:27:31,842 schema CREATE TABLE `auth_user` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `password` varchar(128) NOT NULL, `last_login` datetime(6) NOT NULL, `is_superuser` bool NOT NULL, `username` varchar(30) NOT NULL UNIQUE, `first_name` varchar(30) NOT NULL, `last_name` varchar(30) NOT NULL, `email` varchar(75) NOT NULL, `is_staff` bool NOT NULL, `is_active` bool NOT NULL, `date_joined` datetime(6) NOT NULL); (params None)
DEBUG 2024-08-21 11:27:31,862 schema CREATE TABLE `auth_user_groups` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `user_id` integer NOT NULL, `group_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 11:27:31,939 schema CREATE TABLE `auth_user_user_permissions` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `user_id` integer NOT NULL, `permission_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 11:27:31,997 schema ALTER TABLE `auth_permission` ADD CONSTRAINT `auth_permission_content_type_id_codename_01ab375a_uniq` UNIQUE (`content_type_id`, `codename`); (params ())
DEBUG 2024-08-21 11:27:32,026 schema ALTER TABLE `auth_permission` ADD CONSTRAINT `auth_permission_content_type_id_2f476e4b_fk_django_co` FOREIGN KEY (`content_type_id`) REFERENCES `django_content_type` (`id`); (params ())
DEBUG 2024-08-21 11:27:32,055 schema ALTER TABLE `auth_group_permissions` ADD CONSTRAINT `auth_group_permissions_group_id_permission_id_0cd325b0_uniq` UNIQUE (`group_id`, `permission_id`); (params ())
DEBUG 2024-08-21 11:27:32,073 schema ALTER TABLE `auth_group_permissions` ADD CONSTRAINT `auth_group_permissions_group_id_b120cbf9_fk_auth_group_id` FOREIGN KEY (`group_id`) REFERENCES `auth_group` (`id`); (params ())
DEBUG 2024-08-21 11:27:32,097 schema ALTER TABLE `auth_group_permissions` ADD CONSTRAINT `auth_group_permissio_permission_id_84c5c92e_fk_auth_perm` FOREIGN KEY (`permission_id`) REFERENCES `auth_permission` (`id`); (params ())
DEBUG 2024-08-21 11:27:32,123 schema ALTER TABLE `auth_user_groups` ADD CONSTRAINT `auth_user_groups_user_id_group_id_94350c0c_uniq` UNIQUE (`user_id`, `group_id`); (params ())
DEBUG 2024-08-21 11:27:32,144 schema ALTER TABLE `auth_user_groups` ADD CONSTRAINT `auth_user_groups_user_id_6a12ed8b_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); (params ())
DEBUG 2024-08-21 11:27:32,180 schema ALTER TABLE `auth_user_groups` ADD CONSTRAINT `auth_user_groups_group_id_97559544_fk_auth_group_id` FOREIGN KEY (`group_id`) REFERENCES `auth_group` (`id`); (params ())
DEBUG 2024-08-21 11:27:32,213 schema ALTER TABLE `auth_user_user_permissions` ADD CONSTRAINT `auth_user_user_permissions_user_id_permission_id_14a6b632_uniq` UNIQUE (`user_id`, `permission_id`); (params ())
DEBUG 2024-08-21 11:27:32,246 schema ALTER TABLE `auth_user_user_permissions` ADD CONSTRAINT `auth_user_user_permissions_user_id_a95ead1b_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); (params ())
DEBUG 2024-08-21 11:27:32,275 schema ALTER TABLE `auth_user_user_permissions` ADD CONSTRAINT `auth_user_user_permi_permission_id_1fbb5f2c_fk_auth_perm` FOREIGN KEY (`permission_id`) REFERENCES `auth_permission` (`id`); (params ())
DEBUG 2024-08-21 11:27:32,332 schema CREATE TABLE `django_admin_log` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `action_time` datetime(6) NOT NULL, `object_id` longtext NULL, `object_repr` varchar(200) NOT NULL, `action_flag` smallint UNSIGNED NOT NULL CHECK (`action_flag` >= 0), `change_message` longtext NOT NULL, `content_type_id` integer NULL, `user_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 11:27:32,376 schema ALTER TABLE `django_admin_log` ADD CONSTRAINT `django_admin_log_content_type_id_c4bce8eb_fk_django_co` FOREIGN KEY (`content_type_id`) REFERENCES `django_content_type` (`id`); (params ())
DEBUG 2024-08-21 11:27:32,409 schema ALTER TABLE `django_admin_log` ADD CONSTRAINT `django_admin_log_user_id_c564eba6_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); (params ())
DEBUG 2024-08-21 11:27:32,573 schema CREATE TABLE `app01_doctors` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `identity_num` varchar(64) NOT NULL, `name` varchar(20) NOT NULL, `title` varchar(50) NOT NULL, `department` varchar(20) NOT NULL, `research` varchar(150) NULL, `cost` numeric(5, 2) NOT NULL, `avatar` varchar(100) NULL, `avatar_name` varchar(128) NOT NULL); (params None)
DEBUG 2024-08-21 11:27:32,591 schema CREATE TABLE `app01_medicine` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(50) NOT NULL, `medicine_type` smallint NOT NULL, `symptom` varchar(200) NOT NULL, `price` numeric(5, 2) NOT NULL, `quantity` integer NOT NULL, `photo_name` varchar(128) NOT NULL); (params None)
DEBUG 2024-08-21 11:27:32,614 schema CREATE TABLE `app01_patients` (`identity` smallint NOT NULL, `identity_num` varchar(64) NOT NULL PRIMARY KEY, `name` varchar(20) NOT NULL, `health_insurance` smallint NOT NULL, `gender` smallint NOT NULL, `birthday` date NOT NULL, `phone_num` varchar(15) NOT NULL, `address` varchar(128) NOT NULL); (params None)
DEBUG 2024-08-21 11:27:32,636 schema CREATE TABLE `app01_user` (`type` smallint NOT NULL, `identity_num` varchar(64) NOT NULL PRIMARY KEY, `password` varchar(64) NOT NULL); (params None)
DEBUG 2024-08-21 11:27:32,660 schema CREATE TABLE `app01_treatment` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `queue_id` integer NOT NULL, `time` datetime(6) NOT NULL, `advice` varchar(256) NOT NULL, `medicine` longtext NOT NULL, `price` numeric(5, 2) NOT NULL, `doctor_id` bigint NOT NULL, `patient_id` varchar(64) NOT NULL); (params None)
DEBUG 2024-08-21 11:27:32,741 schema CREATE TABLE `app01_register` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `queue_id` integer NOT NULL, `time` datetime(6) NOT NULL, `position` varchar(128) NOT NULL, `doctor_id` bigint NOT NULL, `patient_id` varchar(64) NOT NULL, `register_id` varchar(64) NOT NULL); (params None)
DEBUG 2024-08-21 11:27:32,796 schema CREATE TABLE `app01_onduty` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `date` date NOT NULL, `time` smallint NOT NULL, `state` integer NOT NULL, `doctor_id` bigint NOT NULL); (params None)
DEBUG 2024-08-21 11:27:32,827 schema CREATE TABLE `app01_notice` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `msg_type` smallint NOT NULL, `time` datetime(6) NOT NULL, `isRead` bool NOT NULL, `doctor_id` bigint NOT NULL, `patient_id` varchar(64) NOT NULL, `register_id` bigint NULL, `registerMan_id` varchar(64) NULL, `treatment_id` bigint NULL); (params None)
DEBUG 2024-08-21 11:27:32,914 schema CREATE TABLE `app01_bill` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `type` smallint NOT NULL, `state` bool NOT NULL, `price` numeric(5, 2) NOT NULL, `patient_id` varchar(64) NULL, `register_id` bigint NULL, `treatment_id` bigint NULL); (params None)
DEBUG 2024-08-21 11:27:32,963 schema ALTER TABLE `app01_treatment` ADD CONSTRAINT `app01_treatment_doctor_id_a47beada_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 11:27:32,989 schema ALTER TABLE `app01_treatment` ADD CONSTRAINT `app01_treatment_patient_id_52a8e1e5_fk_app01_pat` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 11:27:33,020 schema ALTER TABLE `app01_register` ADD CONSTRAINT `app01_register_doctor_id_e0ea61dc_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 11:27:33,044 schema ALTER TABLE `app01_register` ADD CONSTRAINT `app01_register_patient_id_4a065a29_fk_app01_pat` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 11:27:33,073 schema ALTER TABLE `app01_register` ADD CONSTRAINT `app01_register_register_id_e85a8e5b_fk_app01_pat` FOREIGN KEY (`register_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 11:27:33,105 schema ALTER TABLE `app01_onduty` ADD CONSTRAINT `app01_onduty_doctor_id_9b012eb7_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 11:27:33,133 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_doctor_id_2d7f7104_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 11:27:33,161 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_patient_id_74974826_fk_app01_patients_identity_num` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 11:27:33,186 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_register_id_6c54784c_fk_app01_register_id` FOREIGN KEY (`register_id`) REFERENCES `app01_register` (`id`); (params ())
DEBUG 2024-08-21 11:27:33,214 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_registerMan_id_1bd9adce_fk_app01_pat` FOREIGN KEY (`registerMan_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 11:27:33,244 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_treatment_id_596ea92a_fk_app01_treatment_id` FOREIGN KEY (`treatment_id`) REFERENCES `app01_treatment` (`id`); (params ())
DEBUG 2024-08-21 11:27:33,275 schema ALTER TABLE `app01_bill` ADD CONSTRAINT `app01_bill_patient_id_96fe396a_fk_app01_patients_identity_num` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 11:27:33,303 schema ALTER TABLE `app01_bill` ADD CONSTRAINT `app01_bill_register_id_cf59300e_fk_app01_register_id` FOREIGN KEY (`register_id`) REFERENCES `app01_register` (`id`); (params ())
DEBUG 2024-08-21 11:27:33,331 schema ALTER TABLE `app01_bill` ADD CONSTRAINT `app01_bill_treatment_id_73ef4d98_fk_app01_treatment_id` FOREIGN KEY (`treatment_id`) REFERENCES `app01_treatment` (`id`); (params ())
DEBUG 2024-08-21 11:27:33,396 schema ALTER TABLE `django_content_type` MODIFY `name` varchar(100) NULL; (params [])
DEBUG 2024-08-21 11:27:33,466 schema ALTER TABLE `django_content_type` DROP COLUMN `name`; (params ())
DEBUG 2024-08-21 11:27:33,524 schema ALTER TABLE `auth_permission` MODIFY `name` varchar(255) NOT NULL; (params [])
DEBUG 2024-08-21 11:27:33,578 schema ALTER TABLE `auth_user` MODIFY `email` varchar(254) NOT NULL; (params [])
DEBUG 2024-08-21 11:27:33,680 schema ALTER TABLE `auth_user` MODIFY `last_login` datetime(6) NULL; (params [])
DEBUG 2024-08-21 11:27:33,802 schema ALTER TABLE `auth_user` MODIFY `username` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 11:27:33,857 schema ALTER TABLE `auth_user` MODIFY `last_name` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 11:27:33,921 schema ALTER TABLE `auth_group` MODIFY `name` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 11:27:34,057 schema ALTER TABLE `auth_user` MODIFY `first_name` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 11:27:34,120 schema CREATE TABLE `django_session` (`session_key` varchar(40) NOT NULL PRIMARY KEY, `session_data` longtext NOT NULL, `expire_date` datetime(6) NOT NULL); (params None)
DEBUG 2024-08-21 11:27:34,154 schema CREATE INDEX `django_session_expire_date_a5c62663` ON `django_session` (`expire_date`); (params ())
DEBUG 2024-08-21 11:28:40,855 schema CREATE TABLE `django_migrations` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `app` varchar(255) NOT NULL, `name` varchar(255) NOT NULL, `applied` datetime(6) NOT NULL); (params None)
DEBUG 2024-08-21 11:28:40,873 schema CREATE TABLE `django_content_type` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(100) NOT NULL, `app_label` varchar(100) NOT NULL, `model` varchar(100) NOT NULL); (params None)
DEBUG 2024-08-21 11:28:40,892 schema ALTER TABLE `django_content_type` ADD CONSTRAINT `django_content_type_app_label_model_76bd3d3b_uniq` UNIQUE (`app_label`, `model`); (params ())
DEBUG 2024-08-21 11:28:40,939 schema CREATE TABLE `auth_permission` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(50) NOT NULL, `content_type_id` integer NOT NULL, `codename` varchar(100) NOT NULL); (params None)
DEBUG 2024-08-21 11:28:40,973 schema CREATE TABLE `auth_group` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(80) NOT NULL UNIQUE); (params None)
DEBUG 2024-08-21 11:28:40,988 schema CREATE TABLE `auth_group_permissions` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `group_id` integer NOT NULL, `permission_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 11:28:41,034 schema CREATE TABLE `auth_user` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `password` varchar(128) NOT NULL, `last_login` datetime(6) NOT NULL, `is_superuser` bool NOT NULL, `username` varchar(30) NOT NULL UNIQUE, `first_name` varchar(30) NOT NULL, `last_name` varchar(30) NOT NULL, `email` varchar(75) NOT NULL, `is_staff` bool NOT NULL, `is_active` bool NOT NULL, `date_joined` datetime(6) NOT NULL); (params None)
DEBUG 2024-08-21 11:28:41,061 schema CREATE TABLE `auth_user_groups` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `user_id` integer NOT NULL, `group_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 11:28:41,110 schema CREATE TABLE `auth_user_user_permissions` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `user_id` integer NOT NULL, `permission_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 11:28:41,159 schema ALTER TABLE `auth_permission` ADD CONSTRAINT `auth_permission_content_type_id_codename_01ab375a_uniq` UNIQUE (`content_type_id`, `codename`); (params ())
DEBUG 2024-08-21 11:28:41,180 schema ALTER TABLE `auth_permission` ADD CONSTRAINT `auth_permission_content_type_id_2f476e4b_fk_django_co` FOREIGN KEY (`content_type_id`) REFERENCES `django_content_type` (`id`); (params ())
DEBUG 2024-08-21 11:28:41,204 schema ALTER TABLE `auth_group_permissions` ADD CONSTRAINT `auth_group_permissions_group_id_permission_id_0cd325b0_uniq` UNIQUE (`group_id`, `permission_id`); (params ())
DEBUG 2024-08-21 11:28:41,222 schema ALTER TABLE `auth_group_permissions` ADD CONSTRAINT `auth_group_permissions_group_id_b120cbf9_fk_auth_group_id` FOREIGN KEY (`group_id`) REFERENCES `auth_group` (`id`); (params ())
DEBUG 2024-08-21 11:28:41,246 schema ALTER TABLE `auth_group_permissions` ADD CONSTRAINT `auth_group_permissio_permission_id_84c5c92e_fk_auth_perm` FOREIGN KEY (`permission_id`) REFERENCES `auth_permission` (`id`); (params ())
DEBUG 2024-08-21 11:28:41,273 schema ALTER TABLE `auth_user_groups` ADD CONSTRAINT `auth_user_groups_user_id_group_id_94350c0c_uniq` UNIQUE (`user_id`, `group_id`); (params ())
DEBUG 2024-08-21 11:28:41,290 schema ALTER TABLE `auth_user_groups` ADD CONSTRAINT `auth_user_groups_user_id_6a12ed8b_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); (params ())
DEBUG 2024-08-21 11:28:41,330 schema ALTER TABLE `auth_user_groups` ADD CONSTRAINT `auth_user_groups_group_id_97559544_fk_auth_group_id` FOREIGN KEY (`group_id`) REFERENCES `auth_group` (`id`); (params ())
DEBUG 2024-08-21 11:28:41,357 schema ALTER TABLE `auth_user_user_permissions` ADD CONSTRAINT `auth_user_user_permissions_user_id_permission_id_14a6b632_uniq` UNIQUE (`user_id`, `permission_id`); (params ())
DEBUG 2024-08-21 11:28:41,376 schema ALTER TABLE `auth_user_user_permissions` ADD CONSTRAINT `auth_user_user_permissions_user_id_a95ead1b_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); (params ())
DEBUG 2024-08-21 11:28:41,403 schema ALTER TABLE `auth_user_user_permissions` ADD CONSTRAINT `auth_user_user_permi_permission_id_1fbb5f2c_fk_auth_perm` FOREIGN KEY (`permission_id`) REFERENCES `auth_permission` (`id`); (params ())
DEBUG 2024-08-21 11:28:41,464 schema CREATE TABLE `django_admin_log` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `action_time` datetime(6) NOT NULL, `object_id` longtext NULL, `object_repr` varchar(200) NOT NULL, `action_flag` smallint UNSIGNED NOT NULL CHECK (`action_flag` >= 0), `change_message` longtext NOT NULL, `content_type_id` integer NULL, `user_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 11:28:41,532 schema ALTER TABLE `django_admin_log` ADD CONSTRAINT `django_admin_log_content_type_id_c4bce8eb_fk_django_co` FOREIGN KEY (`content_type_id`) REFERENCES `django_content_type` (`id`); (params ())
DEBUG 2024-08-21 11:28:41,564 schema ALTER TABLE `django_admin_log` ADD CONSTRAINT `django_admin_log_user_id_c564eba6_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); (params ())
DEBUG 2024-08-21 11:28:41,678 schema CREATE TABLE `app01_doctors` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `identity_num` varchar(64) NOT NULL, `name` varchar(20) NOT NULL, `title` varchar(50) NOT NULL, `department` varchar(20) NOT NULL, `research` varchar(150) NULL, `cost` numeric(5, 2) NOT NULL, `avatar` varchar(100) NULL, `avatar_name` varchar(128) NOT NULL); (params None)
DEBUG 2024-08-21 11:28:41,695 schema CREATE TABLE `app01_medicine` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(50) NOT NULL, `medicine_type` smallint NOT NULL, `symptom` varchar(200) NOT NULL, `price` numeric(5, 2) NOT NULL, `quantity` integer NOT NULL, `photo_name` varchar(128) NOT NULL); (params None)
DEBUG 2024-08-21 11:28:41,709 schema CREATE TABLE `app01_patients` (`identity` smallint NOT NULL, `identity_num` varchar(64) NOT NULL PRIMARY KEY, `name` varchar(20) NOT NULL, `health_insurance` smallint NOT NULL, `gender` smallint NOT NULL, `birthday` date NOT NULL, `phone_num` varchar(15) NOT NULL, `address` varchar(128) NOT NULL); (params None)
DEBUG 2024-08-21 11:28:41,727 schema CREATE TABLE `app01_user` (`type` smallint NOT NULL, `identity_num` varchar(64) NOT NULL PRIMARY KEY, `password` varchar(64) NOT NULL); (params None)
DEBUG 2024-08-21 11:28:41,746 schema CREATE TABLE `app01_treatment` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `queue_id` integer NOT NULL, `time` datetime(6) NOT NULL, `advice` varchar(256) NOT NULL, `medicine` longtext NOT NULL, `price` numeric(5, 2) NOT NULL, `doctor_id` bigint NOT NULL, `patient_id` varchar(64) NOT NULL); (params None)
DEBUG 2024-08-21 11:28:41,798 schema CREATE TABLE `app01_register` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `queue_id` integer NOT NULL, `time` datetime(6) NOT NULL, `position` varchar(128) NOT NULL, `doctor_id` bigint NOT NULL, `patient_id` varchar(64) NOT NULL, `register_id` varchar(64) NOT NULL); (params None)
DEBUG 2024-08-21 11:28:41,853 schema CREATE TABLE `app01_onduty` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `date` date NOT NULL, `time` smallint NOT NULL, `state` integer NOT NULL, `doctor_id` bigint NOT NULL); (params None)
DEBUG 2024-08-21 11:28:41,885 schema CREATE TABLE `app01_notice` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `msg_type` smallint NOT NULL, `time` datetime(6) NOT NULL, `isRead` bool NOT NULL, `doctor_id` bigint NOT NULL, `patient_id` varchar(64) NOT NULL, `register_id` bigint NULL, `registerMan_id` varchar(64) NULL, `treatment_id` bigint NULL); (params None)
DEBUG 2024-08-21 11:28:41,974 schema CREATE TABLE `app01_bill` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `type` smallint NOT NULL, `state` bool NOT NULL, `price` numeric(5, 2) NOT NULL, `patient_id` varchar(64) NULL, `register_id` bigint NULL, `treatment_id` bigint NULL); (params None)
DEBUG 2024-08-21 11:28:42,031 schema ALTER TABLE `app01_treatment` ADD CONSTRAINT `app01_treatment_doctor_id_a47beada_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 11:28:42,058 schema ALTER TABLE `app01_treatment` ADD CONSTRAINT `app01_treatment_patient_id_52a8e1e5_fk_app01_pat` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 11:28:42,083 schema ALTER TABLE `app01_register` ADD CONSTRAINT `app01_register_doctor_id_e0ea61dc_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 11:28:42,111 schema ALTER TABLE `app01_register` ADD CONSTRAINT `app01_register_patient_id_4a065a29_fk_app01_pat` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 11:28:42,137 schema ALTER TABLE `app01_register` ADD CONSTRAINT `app01_register_register_id_e85a8e5b_fk_app01_pat` FOREIGN KEY (`register_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 11:28:42,167 schema ALTER TABLE `app01_onduty` ADD CONSTRAINT `app01_onduty_doctor_id_9b012eb7_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 11:28:42,192 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_doctor_id_2d7f7104_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 11:28:42,222 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_patient_id_74974826_fk_app01_patients_identity_num` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 11:28:42,248 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_register_id_6c54784c_fk_app01_register_id` FOREIGN KEY (`register_id`) REFERENCES `app01_register` (`id`); (params ())
DEBUG 2024-08-21 11:28:42,277 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_registerMan_id_1bd9adce_fk_app01_pat` FOREIGN KEY (`registerMan_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 11:28:42,311 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_treatment_id_596ea92a_fk_app01_treatment_id` FOREIGN KEY (`treatment_id`) REFERENCES `app01_treatment` (`id`); (params ())
DEBUG 2024-08-21 11:28:42,341 schema ALTER TABLE `app01_bill` ADD CONSTRAINT `app01_bill_patient_id_96fe396a_fk_app01_patients_identity_num` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 11:28:42,368 schema ALTER TABLE `app01_bill` ADD CONSTRAINT `app01_bill_register_id_cf59300e_fk_app01_register_id` FOREIGN KEY (`register_id`) REFERENCES `app01_register` (`id`); (params ())
DEBUG 2024-08-21 11:28:42,398 schema ALTER TABLE `app01_bill` ADD CONSTRAINT `app01_bill_treatment_id_73ef4d98_fk_app01_treatment_id` FOREIGN KEY (`treatment_id`) REFERENCES `app01_treatment` (`id`); (params ())
DEBUG 2024-08-21 11:28:42,454 schema ALTER TABLE `django_content_type` MODIFY `name` varchar(100) NULL; (params [])
DEBUG 2024-08-21 11:28:42,523 schema ALTER TABLE `django_content_type` DROP COLUMN `name`; (params ())
DEBUG 2024-08-21 11:28:42,583 schema ALTER TABLE `auth_permission` MODIFY `name` varchar(255) NOT NULL; (params [])
DEBUG 2024-08-21 11:28:42,646 schema ALTER TABLE `auth_user` MODIFY `email` varchar(254) NOT NULL; (params [])
DEBUG 2024-08-21 11:28:42,730 schema ALTER TABLE `auth_user` MODIFY `last_login` datetime(6) NULL; (params [])
DEBUG 2024-08-21 11:28:42,840 schema ALTER TABLE `auth_user` MODIFY `username` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 11:28:42,895 schema ALTER TABLE `auth_user` MODIFY `last_name` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 11:28:42,947 schema ALTER TABLE `auth_group` MODIFY `name` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 11:28:43,068 schema ALTER TABLE `auth_user` MODIFY `first_name` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 11:28:43,124 schema CREATE TABLE `django_session` (`session_key` varchar(40) NOT NULL PRIMARY KEY, `session_data` longtext NOT NULL, `expire_date` datetime(6) NOT NULL); (params None)
DEBUG 2024-08-21 11:28:43,155 schema CREATE INDEX `django_session_expire_date_a5c62663` ON `django_session` (`expire_date`); (params ())
ERROR 2024-08-21 11:28:44,405 log Internal Server Error: /api/bills/list/
Traceback (most recent call last):
  File "D:\anacoda\Lib\site-packages\django\db\models\fields\__init__.py", line 2053, in get_prep_value
    return int(value)
           ^^^^^^^^^^
ValueError: invalid literal for int() with base 10: 'invalid_id'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\anacoda\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\views\decorators\csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\views\generic\base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 509, in dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 480, in raise_uncaught_exception
    raise exc
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\86185\Desktop\SEGroup6\Ã¨Ã¨¾ÍÕï\Project\app01\views.py", line 791, in post
    return self.changeBillStatus(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\86185\Desktop\SEGroup6\Ã¨Ã¨¾ÍÕï\Project\app01\views.py", line 816, in changeBillStatus
    bill=Bill.objects.filter(id=data['item_id']).first()
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\manager.py", line 87, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\query.py", line 1436, in filter
    return self._filter_or_exclude(False, args, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\query.py", line 1454, in _filter_or_exclude
    clone._filter_or_exclude_inplace(negate, args, kwargs)
  File "D:\anacoda\Lib\site-packages\django\db\models\query.py", line 1461, in _filter_or_exclude_inplace
    self._query.add_q(Q(*args, **kwargs))
  File "D:\anacoda\Lib\site-packages\django\db\models\sql\query.py", line 1545, in add_q
    clause, _ = self._add_q(q_object, self.used_aliases)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\sql\query.py", line 1576, in _add_q
    child_clause, needed_inner = self.build_filter(
                                 ^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\sql\query.py", line 1491, in build_filter
    condition = self.build_lookup(lookups, col, value)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\sql\query.py", line 1318, in build_lookup
    lookup = lookup_class(lhs, rhs)
             ^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\lookups.py", line 27, in __init__
    self.rhs = self.get_prep_lookup()
               ^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\lookups.py", line 341, in get_prep_lookup
    return super().get_prep_lookup()
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\lookups.py", line 85, in get_prep_lookup
    return self.lhs.output_field.get_prep_value(self.rhs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\fields\__init__.py", line 2055, in get_prep_value
    raise e.__class__(
ValueError: Field 'id' expected a number but got 'invalid_id'.
ERROR 2024-08-21 11:28:44,552 log Internal Server Error: /api/bills/list/
Traceback (most recent call last):
  File "D:\anacoda\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\views\decorators\csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\views\generic\base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 509, in dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 480, in raise_uncaught_exception
    raise exc
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\86185\Desktop\SEGroup6\Ã¨Ã¨¾ÍÕï\Project\app01\views.py", line 791, in post
    return self.changeBillStatus(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\86185\Desktop\SEGroup6\Ã¨Ã¨¾ÍÕï\Project\app01\views.py", line 824, in changeBillStatus
    notice.patient = treatment.patient
                     ^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'patient'
ERROR 2024-08-21 11:28:44,656 log Internal Server Error: /api/bills/list/
Traceback (most recent call last):
  File "D:\anacoda\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\views\decorators\csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\views\generic\base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 509, in dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 480, in raise_uncaught_exception
    raise exc
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\86185\Desktop\SEGroup6\Ã¨Ã¨¾ÍÕï\Project\app01\views.py", line 789, in post
    return self.getBillsData(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\86185\Desktop\SEGroup6\Ã¨Ã¨¾ÍÕï\Project\app01\views.py", line 799, in getBillsData
    return JsonResponse(status=400)
           ^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: JsonResponse.__init__() missing 1 required positional argument: 'data'
WARNING 2024-08-21 11:28:44,895 log Bad Request: /api/bills/list/
DEBUG 2024-08-21 11:31:12,875 schema CREATE TABLE `django_migrations` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `app` varchar(255) NOT NULL, `name` varchar(255) NOT NULL, `applied` datetime(6) NOT NULL); (params None)
DEBUG 2024-08-21 11:31:12,894 schema CREATE TABLE `django_content_type` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(100) NOT NULL, `app_label` varchar(100) NOT NULL, `model` varchar(100) NOT NULL); (params None)
DEBUG 2024-08-21 11:31:12,912 schema ALTER TABLE `django_content_type` ADD CONSTRAINT `django_content_type_app_label_model_76bd3d3b_uniq` UNIQUE (`app_label`, `model`); (params ())
DEBUG 2024-08-21 11:31:12,956 schema CREATE TABLE `auth_permission` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(50) NOT NULL, `content_type_id` integer NOT NULL, `codename` varchar(100) NOT NULL); (params None)
DEBUG 2024-08-21 11:31:12,986 schema CREATE TABLE `auth_group` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(80) NOT NULL UNIQUE); (params None)
DEBUG 2024-08-21 11:31:13,002 schema CREATE TABLE `auth_group_permissions` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `group_id` integer NOT NULL, `permission_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 11:31:13,039 schema CREATE TABLE `auth_user` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `password` varchar(128) NOT NULL, `last_login` datetime(6) NOT NULL, `is_superuser` bool NOT NULL, `username` varchar(30) NOT NULL UNIQUE, `first_name` varchar(30) NOT NULL, `last_name` varchar(30) NOT NULL, `email` varchar(75) NOT NULL, `is_staff` bool NOT NULL, `is_active` bool NOT NULL, `date_joined` datetime(6) NOT NULL); (params None)
DEBUG 2024-08-21 11:31:13,057 schema CREATE TABLE `auth_user_groups` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `user_id` integer NOT NULL, `group_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 11:31:13,112 schema CREATE TABLE `auth_user_user_permissions` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `user_id` integer NOT NULL, `permission_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 11:31:13,155 schema ALTER TABLE `auth_permission` ADD CONSTRAINT `auth_permission_content_type_id_codename_01ab375a_uniq` UNIQUE (`content_type_id`, `codename`); (params ())
DEBUG 2024-08-21 11:31:13,171 schema ALTER TABLE `auth_permission` ADD CONSTRAINT `auth_permission_content_type_id_2f476e4b_fk_django_co` FOREIGN KEY (`content_type_id`) REFERENCES `django_content_type` (`id`); (params ())
DEBUG 2024-08-21 11:31:13,194 schema ALTER TABLE `auth_group_permissions` ADD CONSTRAINT `auth_group_permissions_group_id_permission_id_0cd325b0_uniq` UNIQUE (`group_id`, `permission_id`); (params ())
DEBUG 2024-08-21 11:31:13,211 schema ALTER TABLE `auth_group_permissions` ADD CONSTRAINT `auth_group_permissions_group_id_b120cbf9_fk_auth_group_id` FOREIGN KEY (`group_id`) REFERENCES `auth_group` (`id`); (params ())
DEBUG 2024-08-21 11:31:13,236 schema ALTER TABLE `auth_group_permissions` ADD CONSTRAINT `auth_group_permissio_permission_id_84c5c92e_fk_auth_perm` FOREIGN KEY (`permission_id`) REFERENCES `auth_permission` (`id`); (params ())
DEBUG 2024-08-21 11:31:13,263 schema ALTER TABLE `auth_user_groups` ADD CONSTRAINT `auth_user_groups_user_id_group_id_94350c0c_uniq` UNIQUE (`user_id`, `group_id`); (params ())
DEBUG 2024-08-21 11:31:13,279 schema ALTER TABLE `auth_user_groups` ADD CONSTRAINT `auth_user_groups_user_id_6a12ed8b_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); (params ())
DEBUG 2024-08-21 11:31:13,301 schema ALTER TABLE `auth_user_groups` ADD CONSTRAINT `auth_user_groups_group_id_97559544_fk_auth_group_id` FOREIGN KEY (`group_id`) REFERENCES `auth_group` (`id`); (params ())
DEBUG 2024-08-21 11:31:13,327 schema ALTER TABLE `auth_user_user_permissions` ADD CONSTRAINT `auth_user_user_permissions_user_id_permission_id_14a6b632_uniq` UNIQUE (`user_id`, `permission_id`); (params ())
DEBUG 2024-08-21 11:31:13,346 schema ALTER TABLE `auth_user_user_permissions` ADD CONSTRAINT `auth_user_user_permissions_user_id_a95ead1b_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); (params ())
DEBUG 2024-08-21 11:31:13,369 schema ALTER TABLE `auth_user_user_permissions` ADD CONSTRAINT `auth_user_user_permi_permission_id_1fbb5f2c_fk_auth_perm` FOREIGN KEY (`permission_id`) REFERENCES `auth_permission` (`id`); (params ())
DEBUG 2024-08-21 11:31:13,429 schema CREATE TABLE `django_admin_log` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `action_time` datetime(6) NOT NULL, `object_id` longtext NULL, `object_repr` varchar(200) NOT NULL, `action_flag` smallint UNSIGNED NOT NULL CHECK (`action_flag` >= 0), `change_message` longtext NOT NULL, `content_type_id` integer NULL, `user_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 11:31:13,471 schema ALTER TABLE `django_admin_log` ADD CONSTRAINT `django_admin_log_content_type_id_c4bce8eb_fk_django_co` FOREIGN KEY (`content_type_id`) REFERENCES `django_content_type` (`id`); (params ())
DEBUG 2024-08-21 11:31:13,513 schema ALTER TABLE `django_admin_log` ADD CONSTRAINT `django_admin_log_user_id_c564eba6_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); (params ())
DEBUG 2024-08-21 11:31:13,637 schema CREATE TABLE `app01_doctors` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `identity_num` varchar(64) NOT NULL, `name` varchar(20) NOT NULL, `title` varchar(50) NOT NULL, `department` varchar(20) NOT NULL, `research` varchar(150) NULL, `cost` numeric(5, 2) NOT NULL, `avatar` varchar(100) NULL, `avatar_name` varchar(128) NOT NULL); (params None)
DEBUG 2024-08-21 11:31:13,657 schema CREATE TABLE `app01_medicine` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(50) NOT NULL, `medicine_type` smallint NOT NULL, `symptom` varchar(200) NOT NULL, `price` numeric(5, 2) NOT NULL, `quantity` integer NOT NULL, `photo_name` varchar(128) NOT NULL); (params None)
DEBUG 2024-08-21 11:31:13,675 schema CREATE TABLE `app01_patients` (`identity` smallint NOT NULL, `identity_num` varchar(64) NOT NULL PRIMARY KEY, `name` varchar(20) NOT NULL, `health_insurance` smallint NOT NULL, `gender` smallint NOT NULL, `birthday` date NOT NULL, `phone_num` varchar(15) NOT NULL, `address` varchar(128) NOT NULL); (params None)
DEBUG 2024-08-21 11:31:13,690 schema CREATE TABLE `app01_user` (`type` smallint NOT NULL, `identity_num` varchar(64) NOT NULL PRIMARY KEY, `password` varchar(64) NOT NULL); (params None)
DEBUG 2024-08-21 11:31:13,706 schema CREATE TABLE `app01_treatment` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `queue_id` integer NOT NULL, `time` datetime(6) NOT NULL, `advice` varchar(256) NOT NULL, `medicine` longtext NOT NULL, `price` numeric(5, 2) NOT NULL, `doctor_id` bigint NOT NULL, `patient_id` varchar(64) NOT NULL); (params None)
DEBUG 2024-08-21 11:31:13,750 schema CREATE TABLE `app01_register` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `queue_id` integer NOT NULL, `time` datetime(6) NOT NULL, `position` varchar(128) NOT NULL, `doctor_id` bigint NOT NULL, `patient_id` varchar(64) NOT NULL, `register_id` varchar(64) NOT NULL); (params None)
DEBUG 2024-08-21 11:31:13,804 schema CREATE TABLE `app01_onduty` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `date` date NOT NULL, `time` smallint NOT NULL, `state` integer NOT NULL, `doctor_id` bigint NOT NULL); (params None)
DEBUG 2024-08-21 11:31:13,844 schema CREATE TABLE `app01_notice` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `msg_type` smallint NOT NULL, `time` datetime(6) NOT NULL, `isRead` bool NOT NULL, `doctor_id` bigint NOT NULL, `patient_id` varchar(64) NOT NULL, `register_id` bigint NULL, `registerMan_id` varchar(64) NULL, `treatment_id` bigint NULL); (params None)
DEBUG 2024-08-21 11:31:13,939 schema CREATE TABLE `app01_bill` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `type` smallint NOT NULL, `state` bool NOT NULL, `price` numeric(5, 2) NOT NULL, `patient_id` varchar(64) NULL, `register_id` bigint NULL, `treatment_id` bigint NULL); (params None)
DEBUG 2024-08-21 11:31:13,993 schema ALTER TABLE `app01_treatment` ADD CONSTRAINT `app01_treatment_doctor_id_a47beada_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 11:31:14,019 schema ALTER TABLE `app01_treatment` ADD CONSTRAINT `app01_treatment_patient_id_52a8e1e5_fk_app01_pat` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 11:31:14,046 schema ALTER TABLE `app01_register` ADD CONSTRAINT `app01_register_doctor_id_e0ea61dc_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 11:31:14,073 schema ALTER TABLE `app01_register` ADD CONSTRAINT `app01_register_patient_id_4a065a29_fk_app01_pat` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 11:31:14,097 schema ALTER TABLE `app01_register` ADD CONSTRAINT `app01_register_register_id_e85a8e5b_fk_app01_pat` FOREIGN KEY (`register_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 11:31:14,123 schema ALTER TABLE `app01_onduty` ADD CONSTRAINT `app01_onduty_doctor_id_9b012eb7_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 11:31:14,146 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_doctor_id_2d7f7104_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 11:31:14,170 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_patient_id_74974826_fk_app01_patients_identity_num` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 11:31:14,195 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_register_id_6c54784c_fk_app01_register_id` FOREIGN KEY (`register_id`) REFERENCES `app01_register` (`id`); (params ())
DEBUG 2024-08-21 11:31:14,224 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_registerMan_id_1bd9adce_fk_app01_pat` FOREIGN KEY (`registerMan_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 11:31:14,251 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_treatment_id_596ea92a_fk_app01_treatment_id` FOREIGN KEY (`treatment_id`) REFERENCES `app01_treatment` (`id`); (params ())
DEBUG 2024-08-21 11:31:14,281 schema ALTER TABLE `app01_bill` ADD CONSTRAINT `app01_bill_patient_id_96fe396a_fk_app01_patients_identity_num` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 11:31:14,308 schema ALTER TABLE `app01_bill` ADD CONSTRAINT `app01_bill_register_id_cf59300e_fk_app01_register_id` FOREIGN KEY (`register_id`) REFERENCES `app01_register` (`id`); (params ())
DEBUG 2024-08-21 11:31:14,335 schema ALTER TABLE `app01_bill` ADD CONSTRAINT `app01_bill_treatment_id_73ef4d98_fk_app01_treatment_id` FOREIGN KEY (`treatment_id`) REFERENCES `app01_treatment` (`id`); (params ())
DEBUG 2024-08-21 11:31:14,410 schema ALTER TABLE `django_content_type` MODIFY `name` varchar(100) NULL; (params [])
DEBUG 2024-08-21 11:31:14,481 schema ALTER TABLE `django_content_type` DROP COLUMN `name`; (params ())
DEBUG 2024-08-21 11:31:14,538 schema ALTER TABLE `auth_permission` MODIFY `name` varchar(255) NOT NULL; (params [])
DEBUG 2024-08-21 11:31:14,594 schema ALTER TABLE `auth_user` MODIFY `email` varchar(254) NOT NULL; (params [])
DEBUG 2024-08-21 11:31:14,683 schema ALTER TABLE `auth_user` MODIFY `last_login` datetime(6) NULL; (params [])
DEBUG 2024-08-21 11:31:14,791 schema ALTER TABLE `auth_user` MODIFY `username` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 11:31:14,859 schema ALTER TABLE `auth_user` MODIFY `last_name` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 11:31:14,914 schema ALTER TABLE `auth_group` MODIFY `name` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 11:31:15,050 schema ALTER TABLE `auth_user` MODIFY `first_name` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 11:31:15,105 schema CREATE TABLE `django_session` (`session_key` varchar(40) NOT NULL PRIMARY KEY, `session_data` longtext NOT NULL, `expire_date` datetime(6) NOT NULL); (params None)
DEBUG 2024-08-21 11:31:15,133 schema CREATE INDEX `django_session_expire_date_a5c62663` ON `django_session` (`expire_date`); (params ())
ERROR 2024-08-21 11:31:16,322 log Internal Server Error: /api/bills/list/
Traceback (most recent call last):
  File "D:\anacoda\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\views\decorators\csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\views\generic\base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 509, in dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 480, in raise_uncaught_exception
    raise exc
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\86185\Desktop\SEGroup6\Ã¨Ã¨¾ÍÕï\Project\app01\views.py", line 791, in post
    return self.changeBillStatus(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\86185\Desktop\SEGroup6\Ã¨Ã¨¾ÍÕï\Project\app01\views.py", line 817, in changeBillStatus
    return JsonResponse(status=400)
           ^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: JsonResponse.__init__() missing 1 required positional argument: 'data'
ERROR 2024-08-21 11:31:16,453 log Internal Server Error: /api/bills/list/
Traceback (most recent call last):
  File "D:\anacoda\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\views\decorators\csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\views\generic\base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 509, in dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 480, in raise_uncaught_exception
    raise exc
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\86185\Desktop\SEGroup6\Ã¨Ã¨¾ÍÕï\Project\app01\views.py", line 791, in post
    return self.changeBillStatus(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\86185\Desktop\SEGroup6\Ã¨Ã¨¾ÍÕï\Project\app01\views.py", line 824, in changeBillStatus
    notice.patient = treatment.patient
                     ^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'patient'
ERROR 2024-08-21 11:31:16,551 log Internal Server Error: /api/bills/list/
Traceback (most recent call last):
  File "D:\anacoda\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\views\decorators\csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\views\generic\base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 509, in dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 480, in raise_uncaught_exception
    raise exc
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\86185\Desktop\SEGroup6\Ã¨Ã¨¾ÍÕï\Project\app01\views.py", line 789, in post
    return self.getBillsData(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\86185\Desktop\SEGroup6\Ã¨Ã¨¾ÍÕï\Project\app01\views.py", line 799, in getBillsData
    return JsonResponse(status=400)
           ^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: JsonResponse.__init__() missing 1 required positional argument: 'data'
WARNING 2024-08-21 11:31:16,792 log Bad Request: /api/bills/list/
DEBUG 2024-08-21 11:32:04,007 schema CREATE TABLE `django_migrations` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `app` varchar(255) NOT NULL, `name` varchar(255) NOT NULL, `applied` datetime(6) NOT NULL); (params None)
DEBUG 2024-08-21 11:32:04,024 schema CREATE TABLE `django_content_type` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(100) NOT NULL, `app_label` varchar(100) NOT NULL, `model` varchar(100) NOT NULL); (params None)
DEBUG 2024-08-21 11:32:04,044 schema ALTER TABLE `django_content_type` ADD CONSTRAINT `django_content_type_app_label_model_76bd3d3b_uniq` UNIQUE (`app_label`, `model`); (params ())
DEBUG 2024-08-21 11:32:04,089 schema CREATE TABLE `auth_permission` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(50) NOT NULL, `content_type_id` integer NOT NULL, `codename` varchar(100) NOT NULL); (params None)
DEBUG 2024-08-21 11:32:04,117 schema CREATE TABLE `auth_group` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(80) NOT NULL UNIQUE); (params None)
DEBUG 2024-08-21 11:32:04,135 schema CREATE TABLE `auth_group_permissions` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `group_id` integer NOT NULL, `permission_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 11:32:04,174 schema CREATE TABLE `auth_user` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `password` varchar(128) NOT NULL, `last_login` datetime(6) NOT NULL, `is_superuser` bool NOT NULL, `username` varchar(30) NOT NULL UNIQUE, `first_name` varchar(30) NOT NULL, `last_name` varchar(30) NOT NULL, `email` varchar(75) NOT NULL, `is_staff` bool NOT NULL, `is_active` bool NOT NULL, `date_joined` datetime(6) NOT NULL); (params None)
DEBUG 2024-08-21 11:32:04,190 schema CREATE TABLE `auth_user_groups` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `user_id` integer NOT NULL, `group_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 11:32:04,234 schema CREATE TABLE `auth_user_user_permissions` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `user_id` integer NOT NULL, `permission_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 11:32:04,278 schema ALTER TABLE `auth_permission` ADD CONSTRAINT `auth_permission_content_type_id_codename_01ab375a_uniq` UNIQUE (`content_type_id`, `codename`); (params ())
DEBUG 2024-08-21 11:32:04,296 schema ALTER TABLE `auth_permission` ADD CONSTRAINT `auth_permission_content_type_id_2f476e4b_fk_django_co` FOREIGN KEY (`content_type_id`) REFERENCES `django_content_type` (`id`); (params ())
DEBUG 2024-08-21 11:32:04,318 schema ALTER TABLE `auth_group_permissions` ADD CONSTRAINT `auth_group_permissions_group_id_permission_id_0cd325b0_uniq` UNIQUE (`group_id`, `permission_id`); (params ())
DEBUG 2024-08-21 11:32:04,335 schema ALTER TABLE `auth_group_permissions` ADD CONSTRAINT `auth_group_permissions_group_id_b120cbf9_fk_auth_group_id` FOREIGN KEY (`group_id`) REFERENCES `auth_group` (`id`); (params ())
DEBUG 2024-08-21 11:32:04,359 schema ALTER TABLE `auth_group_permissions` ADD CONSTRAINT `auth_group_permissio_permission_id_84c5c92e_fk_auth_perm` FOREIGN KEY (`permission_id`) REFERENCES `auth_permission` (`id`); (params ())
DEBUG 2024-08-21 11:32:04,386 schema ALTER TABLE `auth_user_groups` ADD CONSTRAINT `auth_user_groups_user_id_group_id_94350c0c_uniq` UNIQUE (`user_id`, `group_id`); (params ())
DEBUG 2024-08-21 11:32:04,403 schema ALTER TABLE `auth_user_groups` ADD CONSTRAINT `auth_user_groups_user_id_6a12ed8b_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); (params ())
DEBUG 2024-08-21 11:32:04,432 schema ALTER TABLE `auth_user_groups` ADD CONSTRAINT `auth_user_groups_group_id_97559544_fk_auth_group_id` FOREIGN KEY (`group_id`) REFERENCES `auth_group` (`id`); (params ())
DEBUG 2024-08-21 11:32:04,459 schema ALTER TABLE `auth_user_user_permissions` ADD CONSTRAINT `auth_user_user_permissions_user_id_permission_id_14a6b632_uniq` UNIQUE (`user_id`, `permission_id`); (params ())
DEBUG 2024-08-21 11:32:04,477 schema ALTER TABLE `auth_user_user_permissions` ADD CONSTRAINT `auth_user_user_permissions_user_id_a95ead1b_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); (params ())
DEBUG 2024-08-21 11:32:04,507 schema ALTER TABLE `auth_user_user_permissions` ADD CONSTRAINT `auth_user_user_permi_permission_id_1fbb5f2c_fk_auth_perm` FOREIGN KEY (`permission_id`) REFERENCES `auth_permission` (`id`); (params ())
DEBUG 2024-08-21 11:32:04,568 schema CREATE TABLE `django_admin_log` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `action_time` datetime(6) NOT NULL, `object_id` longtext NULL, `object_repr` varchar(200) NOT NULL, `action_flag` smallint UNSIGNED NOT NULL CHECK (`action_flag` >= 0), `change_message` longtext NOT NULL, `content_type_id` integer NULL, `user_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 11:32:04,609 schema ALTER TABLE `django_admin_log` ADD CONSTRAINT `django_admin_log_content_type_id_c4bce8eb_fk_django_co` FOREIGN KEY (`content_type_id`) REFERENCES `django_content_type` (`id`); (params ())
DEBUG 2024-08-21 11:32:04,638 schema ALTER TABLE `django_admin_log` ADD CONSTRAINT `django_admin_log_user_id_c564eba6_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); (params ())
DEBUG 2024-08-21 11:32:04,747 schema CREATE TABLE `app01_doctors` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `identity_num` varchar(64) NOT NULL, `name` varchar(20) NOT NULL, `title` varchar(50) NOT NULL, `department` varchar(20) NOT NULL, `research` varchar(150) NULL, `cost` numeric(5, 2) NOT NULL, `avatar` varchar(100) NULL, `avatar_name` varchar(128) NOT NULL); (params None)
DEBUG 2024-08-21 11:32:04,764 schema CREATE TABLE `app01_medicine` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(50) NOT NULL, `medicine_type` smallint NOT NULL, `symptom` varchar(200) NOT NULL, `price` numeric(5, 2) NOT NULL, `quantity` integer NOT NULL, `photo_name` varchar(128) NOT NULL); (params None)
DEBUG 2024-08-21 11:32:04,787 schema CREATE TABLE `app01_patients` (`identity` smallint NOT NULL, `identity_num` varchar(64) NOT NULL PRIMARY KEY, `name` varchar(20) NOT NULL, `health_insurance` smallint NOT NULL, `gender` smallint NOT NULL, `birthday` date NOT NULL, `phone_num` varchar(15) NOT NULL, `address` varchar(128) NOT NULL); (params None)
DEBUG 2024-08-21 11:32:04,802 schema CREATE TABLE `app01_user` (`type` smallint NOT NULL, `identity_num` varchar(64) NOT NULL PRIMARY KEY, `password` varchar(64) NOT NULL); (params None)
DEBUG 2024-08-21 11:32:04,820 schema CREATE TABLE `app01_treatment` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `queue_id` integer NOT NULL, `time` datetime(6) NOT NULL, `advice` varchar(256) NOT NULL, `medicine` longtext NOT NULL, `price` numeric(5, 2) NOT NULL, `doctor_id` bigint NOT NULL, `patient_id` varchar(64) NOT NULL); (params None)
DEBUG 2024-08-21 11:32:04,865 schema CREATE TABLE `app01_register` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `queue_id` integer NOT NULL, `time` datetime(6) NOT NULL, `position` varchar(128) NOT NULL, `doctor_id` bigint NOT NULL, `patient_id` varchar(64) NOT NULL, `register_id` varchar(64) NOT NULL); (params None)
DEBUG 2024-08-21 11:32:04,923 schema CREATE TABLE `app01_onduty` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `date` date NOT NULL, `time` smallint NOT NULL, `state` integer NOT NULL, `doctor_id` bigint NOT NULL); (params None)
DEBUG 2024-08-21 11:32:04,954 schema CREATE TABLE `app01_notice` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `msg_type` smallint NOT NULL, `time` datetime(6) NOT NULL, `isRead` bool NOT NULL, `doctor_id` bigint NOT NULL, `patient_id` varchar(64) NOT NULL, `register_id` bigint NULL, `registerMan_id` varchar(64) NULL, `treatment_id` bigint NULL); (params None)
DEBUG 2024-08-21 11:32:05,040 schema CREATE TABLE `app01_bill` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `type` smallint NOT NULL, `state` bool NOT NULL, `price` numeric(5, 2) NOT NULL, `patient_id` varchar(64) NULL, `register_id` bigint NULL, `treatment_id` bigint NULL); (params None)
DEBUG 2024-08-21 11:32:05,094 schema ALTER TABLE `app01_treatment` ADD CONSTRAINT `app01_treatment_doctor_id_a47beada_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 11:32:05,119 schema ALTER TABLE `app01_treatment` ADD CONSTRAINT `app01_treatment_patient_id_52a8e1e5_fk_app01_pat` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 11:32:05,145 schema ALTER TABLE `app01_register` ADD CONSTRAINT `app01_register_doctor_id_e0ea61dc_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 11:32:05,171 schema ALTER TABLE `app01_register` ADD CONSTRAINT `app01_register_patient_id_4a065a29_fk_app01_pat` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 11:32:05,199 schema ALTER TABLE `app01_register` ADD CONSTRAINT `app01_register_register_id_e85a8e5b_fk_app01_pat` FOREIGN KEY (`register_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 11:32:05,229 schema ALTER TABLE `app01_onduty` ADD CONSTRAINT `app01_onduty_doctor_id_9b012eb7_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 11:32:05,255 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_doctor_id_2d7f7104_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 11:32:05,283 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_patient_id_74974826_fk_app01_patients_identity_num` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 11:32:05,310 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_register_id_6c54784c_fk_app01_register_id` FOREIGN KEY (`register_id`) REFERENCES `app01_register` (`id`); (params ())
DEBUG 2024-08-21 11:32:05,339 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_registerMan_id_1bd9adce_fk_app01_pat` FOREIGN KEY (`registerMan_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 11:32:05,367 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_treatment_id_596ea92a_fk_app01_treatment_id` FOREIGN KEY (`treatment_id`) REFERENCES `app01_treatment` (`id`); (params ())
DEBUG 2024-08-21 11:32:05,396 schema ALTER TABLE `app01_bill` ADD CONSTRAINT `app01_bill_patient_id_96fe396a_fk_app01_patients_identity_num` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 11:32:05,421 schema ALTER TABLE `app01_bill` ADD CONSTRAINT `app01_bill_register_id_cf59300e_fk_app01_register_id` FOREIGN KEY (`register_id`) REFERENCES `app01_register` (`id`); (params ())
DEBUG 2024-08-21 11:32:05,453 schema ALTER TABLE `app01_bill` ADD CONSTRAINT `app01_bill_treatment_id_73ef4d98_fk_app01_treatment_id` FOREIGN KEY (`treatment_id`) REFERENCES `app01_treatment` (`id`); (params ())
DEBUG 2024-08-21 11:32:05,517 schema ALTER TABLE `django_content_type` MODIFY `name` varchar(100) NULL; (params [])
DEBUG 2024-08-21 11:32:05,588 schema ALTER TABLE `django_content_type` DROP COLUMN `name`; (params ())
DEBUG 2024-08-21 11:32:05,646 schema ALTER TABLE `auth_permission` MODIFY `name` varchar(255) NOT NULL; (params [])
DEBUG 2024-08-21 11:32:05,705 schema ALTER TABLE `auth_user` MODIFY `email` varchar(254) NOT NULL; (params [])
DEBUG 2024-08-21 11:32:05,802 schema ALTER TABLE `auth_user` MODIFY `last_login` datetime(6) NULL; (params [])
DEBUG 2024-08-21 11:32:05,924 schema ALTER TABLE `auth_user` MODIFY `username` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 11:32:05,986 schema ALTER TABLE `auth_user` MODIFY `last_name` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 11:32:06,048 schema ALTER TABLE `auth_group` MODIFY `name` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 11:32:06,171 schema ALTER TABLE `auth_user` MODIFY `first_name` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 11:32:06,227 schema CREATE TABLE `django_session` (`session_key` varchar(40) NOT NULL PRIMARY KEY, `session_data` longtext NOT NULL, `expire_date` datetime(6) NOT NULL); (params None)
DEBUG 2024-08-21 11:32:06,257 schema CREATE INDEX `django_session_expire_date_a5c62663` ON `django_session` (`expire_date`); (params ())
WARNING 2024-08-21 11:32:07,533 log Bad Request: /api/bills/list/
ERROR 2024-08-21 11:32:07,672 log Internal Server Error: /api/bills/list/
Traceback (most recent call last):
  File "D:\anacoda\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\views\decorators\csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\views\generic\base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 509, in dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 480, in raise_uncaught_exception
    raise exc
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\86185\Desktop\SEGroup6\Ã¨Ã¨¾ÍÕï\Project\app01\views.py", line 791, in post
    return self.changeBillStatus(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\86185\Desktop\SEGroup6\Ã¨Ã¨¾ÍÕï\Project\app01\views.py", line 824, in changeBillStatus
    notice.patient = treatment.patient
                     ^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'patient'
ERROR 2024-08-21 11:32:07,776 log Internal Server Error: /api/bills/list/
Traceback (most recent call last):
  File "D:\anacoda\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\views\decorators\csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\views\generic\base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 509, in dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 480, in raise_uncaught_exception
    raise exc
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\86185\Desktop\SEGroup6\Ã¨Ã¨¾ÍÕï\Project\app01\views.py", line 789, in post
    return self.getBillsData(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\86185\Desktop\SEGroup6\Ã¨Ã¨¾ÍÕï\Project\app01\views.py", line 799, in getBillsData
    return JsonResponse(status=400)
           ^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: JsonResponse.__init__() missing 1 required positional argument: 'data'
WARNING 2024-08-21 11:32:08,026 log Bad Request: /api/bills/list/
DEBUG 2024-08-21 11:32:42,016 schema CREATE TABLE `django_migrations` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `app` varchar(255) NOT NULL, `name` varchar(255) NOT NULL, `applied` datetime(6) NOT NULL); (params None)
DEBUG 2024-08-21 11:32:42,035 schema CREATE TABLE `django_content_type` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(100) NOT NULL, `app_label` varchar(100) NOT NULL, `model` varchar(100) NOT NULL); (params None)
DEBUG 2024-08-21 11:32:42,052 schema ALTER TABLE `django_content_type` ADD CONSTRAINT `django_content_type_app_label_model_76bd3d3b_uniq` UNIQUE (`app_label`, `model`); (params ())
DEBUG 2024-08-21 11:32:42,098 schema CREATE TABLE `auth_permission` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(50) NOT NULL, `content_type_id` integer NOT NULL, `codename` varchar(100) NOT NULL); (params None)
DEBUG 2024-08-21 11:32:42,127 schema CREATE TABLE `auth_group` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(80) NOT NULL UNIQUE); (params None)
DEBUG 2024-08-21 11:32:42,143 schema CREATE TABLE `auth_group_permissions` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `group_id` integer NOT NULL, `permission_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 11:32:42,186 schema CREATE TABLE `auth_user` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `password` varchar(128) NOT NULL, `last_login` datetime(6) NOT NULL, `is_superuser` bool NOT NULL, `username` varchar(30) NOT NULL UNIQUE, `first_name` varchar(30) NOT NULL, `last_name` varchar(30) NOT NULL, `email` varchar(75) NOT NULL, `is_staff` bool NOT NULL, `is_active` bool NOT NULL, `date_joined` datetime(6) NOT NULL); (params None)
DEBUG 2024-08-21 11:32:42,204 schema CREATE TABLE `auth_user_groups` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `user_id` integer NOT NULL, `group_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 11:32:42,241 schema CREATE TABLE `auth_user_user_permissions` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `user_id` integer NOT NULL, `permission_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 11:32:42,283 schema ALTER TABLE `auth_permission` ADD CONSTRAINT `auth_permission_content_type_id_codename_01ab375a_uniq` UNIQUE (`content_type_id`, `codename`); (params ())
DEBUG 2024-08-21 11:32:42,300 schema ALTER TABLE `auth_permission` ADD CONSTRAINT `auth_permission_content_type_id_2f476e4b_fk_django_co` FOREIGN KEY (`content_type_id`) REFERENCES `django_content_type` (`id`); (params ())
DEBUG 2024-08-21 11:32:42,323 schema ALTER TABLE `auth_group_permissions` ADD CONSTRAINT `auth_group_permissions_group_id_permission_id_0cd325b0_uniq` UNIQUE (`group_id`, `permission_id`); (params ())
DEBUG 2024-08-21 11:32:42,343 schema ALTER TABLE `auth_group_permissions` ADD CONSTRAINT `auth_group_permissions_group_id_b120cbf9_fk_auth_group_id` FOREIGN KEY (`group_id`) REFERENCES `auth_group` (`id`); (params ())
DEBUG 2024-08-21 11:32:42,371 schema ALTER TABLE `auth_group_permissions` ADD CONSTRAINT `auth_group_permissio_permission_id_84c5c92e_fk_auth_perm` FOREIGN KEY (`permission_id`) REFERENCES `auth_permission` (`id`); (params ())
DEBUG 2024-08-21 11:32:42,399 schema ALTER TABLE `auth_user_groups` ADD CONSTRAINT `auth_user_groups_user_id_group_id_94350c0c_uniq` UNIQUE (`user_id`, `group_id`); (params ())
DEBUG 2024-08-21 11:32:42,426 schema ALTER TABLE `auth_user_groups` ADD CONSTRAINT `auth_user_groups_user_id_6a12ed8b_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); (params ())
DEBUG 2024-08-21 11:32:42,455 schema ALTER TABLE `auth_user_groups` ADD CONSTRAINT `auth_user_groups_group_id_97559544_fk_auth_group_id` FOREIGN KEY (`group_id`) REFERENCES `auth_group` (`id`); (params ())
DEBUG 2024-08-21 11:32:42,480 schema ALTER TABLE `auth_user_user_permissions` ADD CONSTRAINT `auth_user_user_permissions_user_id_permission_id_14a6b632_uniq` UNIQUE (`user_id`, `permission_id`); (params ())
DEBUG 2024-08-21 11:32:42,503 schema ALTER TABLE `auth_user_user_permissions` ADD CONSTRAINT `auth_user_user_permissions_user_id_a95ead1b_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); (params ())
DEBUG 2024-08-21 11:32:42,531 schema ALTER TABLE `auth_user_user_permissions` ADD CONSTRAINT `auth_user_user_permi_permission_id_1fbb5f2c_fk_auth_perm` FOREIGN KEY (`permission_id`) REFERENCES `auth_permission` (`id`); (params ())
DEBUG 2024-08-21 11:32:42,597 schema CREATE TABLE `django_admin_log` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `action_time` datetime(6) NOT NULL, `object_id` longtext NULL, `object_repr` varchar(200) NOT NULL, `action_flag` smallint UNSIGNED NOT NULL CHECK (`action_flag` >= 0), `change_message` longtext NOT NULL, `content_type_id` integer NULL, `user_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 11:32:42,647 schema ALTER TABLE `django_admin_log` ADD CONSTRAINT `django_admin_log_content_type_id_c4bce8eb_fk_django_co` FOREIGN KEY (`content_type_id`) REFERENCES `django_content_type` (`id`); (params ())
DEBUG 2024-08-21 11:32:42,680 schema ALTER TABLE `django_admin_log` ADD CONSTRAINT `django_admin_log_user_id_c564eba6_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); (params ())
DEBUG 2024-08-21 11:32:42,814 schema CREATE TABLE `app01_doctors` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `identity_num` varchar(64) NOT NULL, `name` varchar(20) NOT NULL, `title` varchar(50) NOT NULL, `department` varchar(20) NOT NULL, `research` varchar(150) NULL, `cost` numeric(5, 2) NOT NULL, `avatar` varchar(100) NULL, `avatar_name` varchar(128) NOT NULL); (params None)
DEBUG 2024-08-21 11:32:42,833 schema CREATE TABLE `app01_medicine` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(50) NOT NULL, `medicine_type` smallint NOT NULL, `symptom` varchar(200) NOT NULL, `price` numeric(5, 2) NOT NULL, `quantity` integer NOT NULL, `photo_name` varchar(128) NOT NULL); (params None)
DEBUG 2024-08-21 11:32:42,851 schema CREATE TABLE `app01_patients` (`identity` smallint NOT NULL, `identity_num` varchar(64) NOT NULL PRIMARY KEY, `name` varchar(20) NOT NULL, `health_insurance` smallint NOT NULL, `gender` smallint NOT NULL, `birthday` date NOT NULL, `phone_num` varchar(15) NOT NULL, `address` varchar(128) NOT NULL); (params None)
DEBUG 2024-08-21 11:32:42,872 schema CREATE TABLE `app01_user` (`type` smallint NOT NULL, `identity_num` varchar(64) NOT NULL PRIMARY KEY, `password` varchar(64) NOT NULL); (params None)
DEBUG 2024-08-21 11:32:42,892 schema CREATE TABLE `app01_treatment` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `queue_id` integer NOT NULL, `time` datetime(6) NOT NULL, `advice` varchar(256) NOT NULL, `medicine` longtext NOT NULL, `price` numeric(5, 2) NOT NULL, `doctor_id` bigint NOT NULL, `patient_id` varchar(64) NOT NULL); (params None)
DEBUG 2024-08-21 11:32:42,938 schema CREATE TABLE `app01_register` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `queue_id` integer NOT NULL, `time` datetime(6) NOT NULL, `position` varchar(128) NOT NULL, `doctor_id` bigint NOT NULL, `patient_id` varchar(64) NOT NULL, `register_id` varchar(64) NOT NULL); (params None)
DEBUG 2024-08-21 11:32:42,996 schema CREATE TABLE `app01_onduty` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `date` date NOT NULL, `time` smallint NOT NULL, `state` integer NOT NULL, `doctor_id` bigint NOT NULL); (params None)
DEBUG 2024-08-21 11:32:43,028 schema CREATE TABLE `app01_notice` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `msg_type` smallint NOT NULL, `time` datetime(6) NOT NULL, `isRead` bool NOT NULL, `doctor_id` bigint NOT NULL, `patient_id` varchar(64) NOT NULL, `register_id` bigint NULL, `registerMan_id` varchar(64) NULL, `treatment_id` bigint NULL); (params None)
DEBUG 2024-08-21 11:32:43,127 schema CREATE TABLE `app01_bill` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `type` smallint NOT NULL, `state` bool NOT NULL, `price` numeric(5, 2) NOT NULL, `patient_id` varchar(64) NULL, `register_id` bigint NULL, `treatment_id` bigint NULL); (params None)
DEBUG 2024-08-21 11:32:43,183 schema ALTER TABLE `app01_treatment` ADD CONSTRAINT `app01_treatment_doctor_id_a47beada_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 11:32:43,208 schema ALTER TABLE `app01_treatment` ADD CONSTRAINT `app01_treatment_patient_id_52a8e1e5_fk_app01_pat` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 11:32:43,235 schema ALTER TABLE `app01_register` ADD CONSTRAINT `app01_register_doctor_id_e0ea61dc_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 11:32:43,262 schema ALTER TABLE `app01_register` ADD CONSTRAINT `app01_register_patient_id_4a065a29_fk_app01_pat` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 11:32:43,289 schema ALTER TABLE `app01_register` ADD CONSTRAINT `app01_register_register_id_e85a8e5b_fk_app01_pat` FOREIGN KEY (`register_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 11:32:43,319 schema ALTER TABLE `app01_onduty` ADD CONSTRAINT `app01_onduty_doctor_id_9b012eb7_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 11:32:43,343 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_doctor_id_2d7f7104_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 11:32:43,368 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_patient_id_74974826_fk_app01_patients_identity_num` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 11:32:43,395 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_register_id_6c54784c_fk_app01_register_id` FOREIGN KEY (`register_id`) REFERENCES `app01_register` (`id`); (params ())
DEBUG 2024-08-21 11:32:43,447 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_registerMan_id_1bd9adce_fk_app01_pat` FOREIGN KEY (`registerMan_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 11:32:43,478 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_treatment_id_596ea92a_fk_app01_treatment_id` FOREIGN KEY (`treatment_id`) REFERENCES `app01_treatment` (`id`); (params ())
DEBUG 2024-08-21 11:32:43,510 schema ALTER TABLE `app01_bill` ADD CONSTRAINT `app01_bill_patient_id_96fe396a_fk_app01_patients_identity_num` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 11:32:43,538 schema ALTER TABLE `app01_bill` ADD CONSTRAINT `app01_bill_register_id_cf59300e_fk_app01_register_id` FOREIGN KEY (`register_id`) REFERENCES `app01_register` (`id`); (params ())
DEBUG 2024-08-21 11:32:43,563 schema ALTER TABLE `app01_bill` ADD CONSTRAINT `app01_bill_treatment_id_73ef4d98_fk_app01_treatment_id` FOREIGN KEY (`treatment_id`) REFERENCES `app01_treatment` (`id`); (params ())
DEBUG 2024-08-21 11:32:43,637 schema ALTER TABLE `django_content_type` MODIFY `name` varchar(100) NULL; (params [])
DEBUG 2024-08-21 11:32:43,718 schema ALTER TABLE `django_content_type` DROP COLUMN `name`; (params ())
DEBUG 2024-08-21 11:32:43,768 schema ALTER TABLE `auth_permission` MODIFY `name` varchar(255) NOT NULL; (params [])
DEBUG 2024-08-21 11:32:43,824 schema ALTER TABLE `auth_user` MODIFY `email` varchar(254) NOT NULL; (params [])
DEBUG 2024-08-21 11:32:43,916 schema ALTER TABLE `auth_user` MODIFY `last_login` datetime(6) NULL; (params [])
DEBUG 2024-08-21 11:32:44,047 schema ALTER TABLE `auth_user` MODIFY `username` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 11:32:44,106 schema ALTER TABLE `auth_user` MODIFY `last_name` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 11:32:44,169 schema ALTER TABLE `auth_group` MODIFY `name` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 11:32:44,295 schema ALTER TABLE `auth_user` MODIFY `first_name` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 11:32:44,349 schema CREATE TABLE `django_session` (`session_key` varchar(40) NOT NULL PRIMARY KEY, `session_data` longtext NOT NULL, `expire_date` datetime(6) NOT NULL); (params None)
DEBUG 2024-08-21 11:32:44,381 schema CREATE INDEX `django_session_expire_date_a5c62663` ON `django_session` (`expire_date`); (params ())
WARNING 2024-08-21 11:32:45,639 log Bad Request: /api/bills/list/
ERROR 2024-08-21 11:32:45,776 log Internal Server Error: /api/bills/list/
Traceback (most recent call last):
  File "D:\anacoda\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\views\decorators\csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\views\generic\base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 509, in dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 480, in raise_uncaught_exception
    raise exc
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\86185\Desktop\SEGroup6\Ã¨Ã¨¾ÍÕï\Project\app01\views.py", line 791, in post
    return self.changeBillStatus(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\86185\Desktop\SEGroup6\Ã¨Ã¨¾ÍÕï\Project\app01\views.py", line 824, in changeBillStatus
    notice.patient = treatment.patient
                     ^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'patient'
WARNING 2024-08-21 11:32:45,891 log Bad Request: /api/bills/list/
WARNING 2024-08-21 11:32:46,156 log Bad Request: /api/bills/list/
DEBUG 2024-08-21 11:34:04,100 schema CREATE TABLE `django_migrations` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `app` varchar(255) NOT NULL, `name` varchar(255) NOT NULL, `applied` datetime(6) NOT NULL); (params None)
DEBUG 2024-08-21 11:34:04,118 schema CREATE TABLE `django_content_type` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(100) NOT NULL, `app_label` varchar(100) NOT NULL, `model` varchar(100) NOT NULL); (params None)
DEBUG 2024-08-21 11:34:04,143 schema ALTER TABLE `django_content_type` ADD CONSTRAINT `django_content_type_app_label_model_76bd3d3b_uniq` UNIQUE (`app_label`, `model`); (params ())
DEBUG 2024-08-21 11:34:04,195 schema CREATE TABLE `auth_permission` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(50) NOT NULL, `content_type_id` integer NOT NULL, `codename` varchar(100) NOT NULL); (params None)
DEBUG 2024-08-21 11:34:04,226 schema CREATE TABLE `auth_group` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(80) NOT NULL UNIQUE); (params None)
DEBUG 2024-08-21 11:34:04,242 schema CREATE TABLE `auth_group_permissions` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `group_id` integer NOT NULL, `permission_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 11:34:04,290 schema CREATE TABLE `auth_user` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `password` varchar(128) NOT NULL, `last_login` datetime(6) NOT NULL, `is_superuser` bool NOT NULL, `username` varchar(30) NOT NULL UNIQUE, `first_name` varchar(30) NOT NULL, `last_name` varchar(30) NOT NULL, `email` varchar(75) NOT NULL, `is_staff` bool NOT NULL, `is_active` bool NOT NULL, `date_joined` datetime(6) NOT NULL); (params None)
DEBUG 2024-08-21 11:34:04,308 schema CREATE TABLE `auth_user_groups` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `user_id` integer NOT NULL, `group_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 11:34:04,358 schema CREATE TABLE `auth_user_user_permissions` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `user_id` integer NOT NULL, `permission_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 11:34:04,399 schema ALTER TABLE `auth_permission` ADD CONSTRAINT `auth_permission_content_type_id_codename_01ab375a_uniq` UNIQUE (`content_type_id`, `codename`); (params ())
DEBUG 2024-08-21 11:34:04,415 schema ALTER TABLE `auth_permission` ADD CONSTRAINT `auth_permission_content_type_id_2f476e4b_fk_django_co` FOREIGN KEY (`content_type_id`) REFERENCES `django_content_type` (`id`); (params ())
DEBUG 2024-08-21 11:34:04,443 schema ALTER TABLE `auth_group_permissions` ADD CONSTRAINT `auth_group_permissions_group_id_permission_id_0cd325b0_uniq` UNIQUE (`group_id`, `permission_id`); (params ())
DEBUG 2024-08-21 11:34:04,460 schema ALTER TABLE `auth_group_permissions` ADD CONSTRAINT `auth_group_permissions_group_id_b120cbf9_fk_auth_group_id` FOREIGN KEY (`group_id`) REFERENCES `auth_group` (`id`); (params ())
DEBUG 2024-08-21 11:34:04,485 schema ALTER TABLE `auth_group_permissions` ADD CONSTRAINT `auth_group_permissio_permission_id_84c5c92e_fk_auth_perm` FOREIGN KEY (`permission_id`) REFERENCES `auth_permission` (`id`); (params ())
DEBUG 2024-08-21 11:34:04,521 schema ALTER TABLE `auth_user_groups` ADD CONSTRAINT `auth_user_groups_user_id_group_id_94350c0c_uniq` UNIQUE (`user_id`, `group_id`); (params ())
DEBUG 2024-08-21 11:34:04,537 schema ALTER TABLE `auth_user_groups` ADD CONSTRAINT `auth_user_groups_user_id_6a12ed8b_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); (params ())
DEBUG 2024-08-21 11:34:04,565 schema ALTER TABLE `auth_user_groups` ADD CONSTRAINT `auth_user_groups_group_id_97559544_fk_auth_group_id` FOREIGN KEY (`group_id`) REFERENCES `auth_group` (`id`); (params ())
DEBUG 2024-08-21 11:34:04,595 schema ALTER TABLE `auth_user_user_permissions` ADD CONSTRAINT `auth_user_user_permissions_user_id_permission_id_14a6b632_uniq` UNIQUE (`user_id`, `permission_id`); (params ())
DEBUG 2024-08-21 11:34:04,614 schema ALTER TABLE `auth_user_user_permissions` ADD CONSTRAINT `auth_user_user_permissions_user_id_a95ead1b_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); (params ())
DEBUG 2024-08-21 11:34:04,640 schema ALTER TABLE `auth_user_user_permissions` ADD CONSTRAINT `auth_user_user_permi_permission_id_1fbb5f2c_fk_auth_perm` FOREIGN KEY (`permission_id`) REFERENCES `auth_permission` (`id`); (params ())
DEBUG 2024-08-21 11:34:04,694 schema CREATE TABLE `django_admin_log` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `action_time` datetime(6) NOT NULL, `object_id` longtext NULL, `object_repr` varchar(200) NOT NULL, `action_flag` smallint UNSIGNED NOT NULL CHECK (`action_flag` >= 0), `change_message` longtext NOT NULL, `content_type_id` integer NULL, `user_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 11:34:04,738 schema ALTER TABLE `django_admin_log` ADD CONSTRAINT `django_admin_log_content_type_id_c4bce8eb_fk_django_co` FOREIGN KEY (`content_type_id`) REFERENCES `django_content_type` (`id`); (params ())
DEBUG 2024-08-21 11:34:04,766 schema ALTER TABLE `django_admin_log` ADD CONSTRAINT `django_admin_log_user_id_c564eba6_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); (params ())
DEBUG 2024-08-21 11:34:04,888 schema CREATE TABLE `app01_doctors` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `identity_num` varchar(64) NOT NULL, `name` varchar(20) NOT NULL, `title` varchar(50) NOT NULL, `department` varchar(20) NOT NULL, `research` varchar(150) NULL, `cost` numeric(5, 2) NOT NULL, `avatar` varchar(100) NULL, `avatar_name` varchar(128) NOT NULL); (params None)
DEBUG 2024-08-21 11:34:04,911 schema CREATE TABLE `app01_medicine` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(50) NOT NULL, `medicine_type` smallint NOT NULL, `symptom` varchar(200) NOT NULL, `price` numeric(5, 2) NOT NULL, `quantity` integer NOT NULL, `photo_name` varchar(128) NOT NULL); (params None)
DEBUG 2024-08-21 11:34:04,930 schema CREATE TABLE `app01_patients` (`identity` smallint NOT NULL, `identity_num` varchar(64) NOT NULL PRIMARY KEY, `name` varchar(20) NOT NULL, `health_insurance` smallint NOT NULL, `gender` smallint NOT NULL, `birthday` date NOT NULL, `phone_num` varchar(15) NOT NULL, `address` varchar(128) NOT NULL); (params None)
DEBUG 2024-08-21 11:34:04,952 schema CREATE TABLE `app01_user` (`type` smallint NOT NULL, `identity_num` varchar(64) NOT NULL PRIMARY KEY, `password` varchar(64) NOT NULL); (params None)
DEBUG 2024-08-21 11:34:04,974 schema CREATE TABLE `app01_treatment` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `queue_id` integer NOT NULL, `time` datetime(6) NOT NULL, `advice` varchar(256) NOT NULL, `medicine` longtext NOT NULL, `price` numeric(5, 2) NOT NULL, `doctor_id` bigint NOT NULL, `patient_id` varchar(64) NOT NULL); (params None)
DEBUG 2024-08-21 11:34:05,023 schema CREATE TABLE `app01_register` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `queue_id` integer NOT NULL, `time` datetime(6) NOT NULL, `position` varchar(128) NOT NULL, `doctor_id` bigint NOT NULL, `patient_id` varchar(64) NOT NULL, `register_id` varchar(64) NOT NULL); (params None)
DEBUG 2024-08-21 11:34:05,087 schema CREATE TABLE `app01_onduty` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `date` date NOT NULL, `time` smallint NOT NULL, `state` integer NOT NULL, `doctor_id` bigint NOT NULL); (params None)
DEBUG 2024-08-21 11:34:05,132 schema CREATE TABLE `app01_notice` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `msg_type` smallint NOT NULL, `time` datetime(6) NOT NULL, `isRead` bool NOT NULL, `doctor_id` bigint NOT NULL, `patient_id` varchar(64) NOT NULL, `register_id` bigint NULL, `registerMan_id` varchar(64) NULL, `treatment_id` bigint NULL); (params None)
DEBUG 2024-08-21 11:34:05,219 schema CREATE TABLE `app01_bill` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `type` smallint NOT NULL, `state` bool NOT NULL, `price` numeric(5, 2) NOT NULL, `patient_id` varchar(64) NULL, `register_id` bigint NULL, `treatment_id` bigint NULL); (params None)
DEBUG 2024-08-21 11:34:05,277 schema ALTER TABLE `app01_treatment` ADD CONSTRAINT `app01_treatment_doctor_id_a47beada_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 11:34:05,303 schema ALTER TABLE `app01_treatment` ADD CONSTRAINT `app01_treatment_patient_id_52a8e1e5_fk_app01_pat` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 11:34:05,331 schema ALTER TABLE `app01_register` ADD CONSTRAINT `app01_register_doctor_id_e0ea61dc_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 11:34:05,358 schema ALTER TABLE `app01_register` ADD CONSTRAINT `app01_register_patient_id_4a065a29_fk_app01_pat` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 11:34:05,390 schema ALTER TABLE `app01_register` ADD CONSTRAINT `app01_register_register_id_e85a8e5b_fk_app01_pat` FOREIGN KEY (`register_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 11:34:05,419 schema ALTER TABLE `app01_onduty` ADD CONSTRAINT `app01_onduty_doctor_id_9b012eb7_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 11:34:05,446 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_doctor_id_2d7f7104_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 11:34:05,472 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_patient_id_74974826_fk_app01_patients_identity_num` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 11:34:05,509 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_register_id_6c54784c_fk_app01_register_id` FOREIGN KEY (`register_id`) REFERENCES `app01_register` (`id`); (params ())
DEBUG 2024-08-21 11:34:05,539 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_registerMan_id_1bd9adce_fk_app01_pat` FOREIGN KEY (`registerMan_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 11:34:05,577 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_treatment_id_596ea92a_fk_app01_treatment_id` FOREIGN KEY (`treatment_id`) REFERENCES `app01_treatment` (`id`); (params ())
DEBUG 2024-08-21 11:34:05,611 schema ALTER TABLE `app01_bill` ADD CONSTRAINT `app01_bill_patient_id_96fe396a_fk_app01_patients_identity_num` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 11:34:05,646 schema ALTER TABLE `app01_bill` ADD CONSTRAINT `app01_bill_register_id_cf59300e_fk_app01_register_id` FOREIGN KEY (`register_id`) REFERENCES `app01_register` (`id`); (params ())
DEBUG 2024-08-21 11:34:05,676 schema ALTER TABLE `app01_bill` ADD CONSTRAINT `app01_bill_treatment_id_73ef4d98_fk_app01_treatment_id` FOREIGN KEY (`treatment_id`) REFERENCES `app01_treatment` (`id`); (params ())
DEBUG 2024-08-21 11:34:05,743 schema ALTER TABLE `django_content_type` MODIFY `name` varchar(100) NULL; (params [])
DEBUG 2024-08-21 11:34:05,826 schema ALTER TABLE `django_content_type` DROP COLUMN `name`; (params ())
DEBUG 2024-08-21 11:34:05,878 schema ALTER TABLE `auth_permission` MODIFY `name` varchar(255) NOT NULL; (params [])
DEBUG 2024-08-21 11:34:05,933 schema ALTER TABLE `auth_user` MODIFY `email` varchar(254) NOT NULL; (params [])
DEBUG 2024-08-21 11:34:06,031 schema ALTER TABLE `auth_user` MODIFY `last_login` datetime(6) NULL; (params [])
DEBUG 2024-08-21 11:34:06,148 schema ALTER TABLE `auth_user` MODIFY `username` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 11:34:06,205 schema ALTER TABLE `auth_user` MODIFY `last_name` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 11:34:06,262 schema ALTER TABLE `auth_group` MODIFY `name` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 11:34:06,403 schema ALTER TABLE `auth_user` MODIFY `first_name` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 11:34:06,467 schema CREATE TABLE `django_session` (`session_key` varchar(40) NOT NULL PRIMARY KEY, `session_data` longtext NOT NULL, `expire_date` datetime(6) NOT NULL); (params None)
DEBUG 2024-08-21 11:34:06,505 schema CREATE INDEX `django_session_expire_date_a5c62663` ON `django_session` (`expire_date`); (params ())
WARNING 2024-08-21 11:34:07,806 log Bad Request: /api/bills/list/
ERROR 2024-08-21 11:34:07,961 log Internal Server Error: /api/bills/list/
Traceback (most recent call last):
  File "D:\anacoda\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\views\decorators\csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\views\generic\base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 509, in dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 480, in raise_uncaught_exception
    raise exc
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\86185\Desktop\SEGroup6\Ã¨Ã¨¾ÍÕï\Project\app01\views.py", line 791, in post
    return self.changeBillStatus(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\86185\Desktop\SEGroup6\Ã¨Ã¨¾ÍÕï\Project\app01\views.py", line 824, in changeBillStatus
    notice.patient = treatment.patient
                     ^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'patient'
WARNING 2024-08-21 11:34:08,076 log Bad Request: /api/bills/list/
WARNING 2024-08-21 11:34:08,368 log Bad Request: /api/bills/list/
DEBUG 2024-08-21 11:35:06,704 schema CREATE TABLE `django_migrations` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `app` varchar(255) NOT NULL, `name` varchar(255) NOT NULL, `applied` datetime(6) NOT NULL); (params None)
DEBUG 2024-08-21 11:35:06,722 schema CREATE TABLE `django_content_type` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(100) NOT NULL, `app_label` varchar(100) NOT NULL, `model` varchar(100) NOT NULL); (params None)
DEBUG 2024-08-21 11:35:06,739 schema ALTER TABLE `django_content_type` ADD CONSTRAINT `django_content_type_app_label_model_76bd3d3b_uniq` UNIQUE (`app_label`, `model`); (params ())
DEBUG 2024-08-21 11:35:06,782 schema CREATE TABLE `auth_permission` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(50) NOT NULL, `content_type_id` integer NOT NULL, `codename` varchar(100) NOT NULL); (params None)
DEBUG 2024-08-21 11:35:06,814 schema CREATE TABLE `auth_group` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(80) NOT NULL UNIQUE); (params None)
DEBUG 2024-08-21 11:35:06,829 schema CREATE TABLE `auth_group_permissions` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `group_id` integer NOT NULL, `permission_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 11:35:06,873 schema CREATE TABLE `auth_user` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `password` varchar(128) NOT NULL, `last_login` datetime(6) NOT NULL, `is_superuser` bool NOT NULL, `username` varchar(30) NOT NULL UNIQUE, `first_name` varchar(30) NOT NULL, `last_name` varchar(30) NOT NULL, `email` varchar(75) NOT NULL, `is_staff` bool NOT NULL, `is_active` bool NOT NULL, `date_joined` datetime(6) NOT NULL); (params None)
DEBUG 2024-08-21 11:35:06,889 schema CREATE TABLE `auth_user_groups` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `user_id` integer NOT NULL, `group_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 11:35:06,931 schema CREATE TABLE `auth_user_user_permissions` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `user_id` integer NOT NULL, `permission_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 11:35:06,970 schema ALTER TABLE `auth_permission` ADD CONSTRAINT `auth_permission_content_type_id_codename_01ab375a_uniq` UNIQUE (`content_type_id`, `codename`); (params ())
DEBUG 2024-08-21 11:35:06,989 schema ALTER TABLE `auth_permission` ADD CONSTRAINT `auth_permission_content_type_id_2f476e4b_fk_django_co` FOREIGN KEY (`content_type_id`) REFERENCES `django_content_type` (`id`); (params ())
DEBUG 2024-08-21 11:35:07,011 schema ALTER TABLE `auth_group_permissions` ADD CONSTRAINT `auth_group_permissions_group_id_permission_id_0cd325b0_uniq` UNIQUE (`group_id`, `permission_id`); (params ())
DEBUG 2024-08-21 11:35:07,029 schema ALTER TABLE `auth_group_permissions` ADD CONSTRAINT `auth_group_permissions_group_id_b120cbf9_fk_auth_group_id` FOREIGN KEY (`group_id`) REFERENCES `auth_group` (`id`); (params ())
DEBUG 2024-08-21 11:35:07,052 schema ALTER TABLE `auth_group_permissions` ADD CONSTRAINT `auth_group_permissio_permission_id_84c5c92e_fk_auth_perm` FOREIGN KEY (`permission_id`) REFERENCES `auth_permission` (`id`); (params ())
DEBUG 2024-08-21 11:35:07,077 schema ALTER TABLE `auth_user_groups` ADD CONSTRAINT `auth_user_groups_user_id_group_id_94350c0c_uniq` UNIQUE (`user_id`, `group_id`); (params ())
DEBUG 2024-08-21 11:35:07,094 schema ALTER TABLE `auth_user_groups` ADD CONSTRAINT `auth_user_groups_user_id_6a12ed8b_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); (params ())
DEBUG 2024-08-21 11:35:07,118 schema ALTER TABLE `auth_user_groups` ADD CONSTRAINT `auth_user_groups_group_id_97559544_fk_auth_group_id` FOREIGN KEY (`group_id`) REFERENCES `auth_group` (`id`); (params ())
DEBUG 2024-08-21 11:35:07,143 schema ALTER TABLE `auth_user_user_permissions` ADD CONSTRAINT `auth_user_user_permissions_user_id_permission_id_14a6b632_uniq` UNIQUE (`user_id`, `permission_id`); (params ())
DEBUG 2024-08-21 11:35:07,162 schema ALTER TABLE `auth_user_user_permissions` ADD CONSTRAINT `auth_user_user_permissions_user_id_a95ead1b_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); (params ())
DEBUG 2024-08-21 11:35:07,193 schema ALTER TABLE `auth_user_user_permissions` ADD CONSTRAINT `auth_user_user_permi_permission_id_1fbb5f2c_fk_auth_perm` FOREIGN KEY (`permission_id`) REFERENCES `auth_permission` (`id`); (params ())
DEBUG 2024-08-21 11:35:07,249 schema CREATE TABLE `django_admin_log` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `action_time` datetime(6) NOT NULL, `object_id` longtext NULL, `object_repr` varchar(200) NOT NULL, `action_flag` smallint UNSIGNED NOT NULL CHECK (`action_flag` >= 0), `change_message` longtext NOT NULL, `content_type_id` integer NULL, `user_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 11:35:07,291 schema ALTER TABLE `django_admin_log` ADD CONSTRAINT `django_admin_log_content_type_id_c4bce8eb_fk_django_co` FOREIGN KEY (`content_type_id`) REFERENCES `django_content_type` (`id`); (params ())
DEBUG 2024-08-21 11:35:07,317 schema ALTER TABLE `django_admin_log` ADD CONSTRAINT `django_admin_log_user_id_c564eba6_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); (params ())
DEBUG 2024-08-21 11:35:07,428 schema CREATE TABLE `app01_doctors` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `identity_num` varchar(64) NOT NULL, `name` varchar(20) NOT NULL, `title` varchar(50) NOT NULL, `department` varchar(20) NOT NULL, `research` varchar(150) NULL, `cost` numeric(5, 2) NOT NULL, `avatar` varchar(100) NULL, `avatar_name` varchar(128) NOT NULL); (params None)
DEBUG 2024-08-21 11:35:07,445 schema CREATE TABLE `app01_medicine` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(50) NOT NULL, `medicine_type` smallint NOT NULL, `symptom` varchar(200) NOT NULL, `price` numeric(5, 2) NOT NULL, `quantity` integer NOT NULL, `photo_name` varchar(128) NOT NULL); (params None)
DEBUG 2024-08-21 11:35:07,464 schema CREATE TABLE `app01_patients` (`identity` smallint NOT NULL, `identity_num` varchar(64) NOT NULL PRIMARY KEY, `name` varchar(20) NOT NULL, `health_insurance` smallint NOT NULL, `gender` smallint NOT NULL, `birthday` date NOT NULL, `phone_num` varchar(15) NOT NULL, `address` varchar(128) NOT NULL); (params None)
DEBUG 2024-08-21 11:35:07,480 schema CREATE TABLE `app01_user` (`type` smallint NOT NULL, `identity_num` varchar(64) NOT NULL PRIMARY KEY, `password` varchar(64) NOT NULL); (params None)
DEBUG 2024-08-21 11:35:07,502 schema CREATE TABLE `app01_treatment` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `queue_id` integer NOT NULL, `time` datetime(6) NOT NULL, `advice` varchar(256) NOT NULL, `medicine` longtext NOT NULL, `price` numeric(5, 2) NOT NULL, `doctor_id` bigint NOT NULL, `patient_id` varchar(64) NOT NULL); (params None)
DEBUG 2024-08-21 11:35:07,545 schema CREATE TABLE `app01_register` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `queue_id` integer NOT NULL, `time` datetime(6) NOT NULL, `position` varchar(128) NOT NULL, `doctor_id` bigint NOT NULL, `patient_id` varchar(64) NOT NULL, `register_id` varchar(64) NOT NULL); (params None)
DEBUG 2024-08-21 11:35:07,603 schema CREATE TABLE `app01_onduty` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `date` date NOT NULL, `time` smallint NOT NULL, `state` integer NOT NULL, `doctor_id` bigint NOT NULL); (params None)
DEBUG 2024-08-21 11:35:07,631 schema CREATE TABLE `app01_notice` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `msg_type` smallint NOT NULL, `time` datetime(6) NOT NULL, `isRead` bool NOT NULL, `doctor_id` bigint NOT NULL, `patient_id` varchar(64) NOT NULL, `register_id` bigint NULL, `registerMan_id` varchar(64) NULL, `treatment_id` bigint NULL); (params None)
DEBUG 2024-08-21 11:35:07,716 schema CREATE TABLE `app01_bill` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `type` smallint NOT NULL, `state` bool NOT NULL, `price` numeric(5, 2) NOT NULL, `patient_id` varchar(64) NULL, `register_id` bigint NULL, `treatment_id` bigint NULL); (params None)
DEBUG 2024-08-21 11:35:07,766 schema ALTER TABLE `app01_treatment` ADD CONSTRAINT `app01_treatment_doctor_id_a47beada_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 11:35:07,793 schema ALTER TABLE `app01_treatment` ADD CONSTRAINT `app01_treatment_patient_id_52a8e1e5_fk_app01_pat` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 11:35:07,819 schema ALTER TABLE `app01_register` ADD CONSTRAINT `app01_register_doctor_id_e0ea61dc_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 11:35:07,844 schema ALTER TABLE `app01_register` ADD CONSTRAINT `app01_register_patient_id_4a065a29_fk_app01_pat` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 11:35:07,869 schema ALTER TABLE `app01_register` ADD CONSTRAINT `app01_register_register_id_e85a8e5b_fk_app01_pat` FOREIGN KEY (`register_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 11:35:07,896 schema ALTER TABLE `app01_onduty` ADD CONSTRAINT `app01_onduty_doctor_id_9b012eb7_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 11:35:07,922 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_doctor_id_2d7f7104_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 11:35:07,947 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_patient_id_74974826_fk_app01_patients_identity_num` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 11:35:07,973 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_register_id_6c54784c_fk_app01_register_id` FOREIGN KEY (`register_id`) REFERENCES `app01_register` (`id`); (params ())
DEBUG 2024-08-21 11:35:08,011 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_registerMan_id_1bd9adce_fk_app01_pat` FOREIGN KEY (`registerMan_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 11:35:08,043 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_treatment_id_596ea92a_fk_app01_treatment_id` FOREIGN KEY (`treatment_id`) REFERENCES `app01_treatment` (`id`); (params ())
DEBUG 2024-08-21 11:35:08,072 schema ALTER TABLE `app01_bill` ADD CONSTRAINT `app01_bill_patient_id_96fe396a_fk_app01_patients_identity_num` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 11:35:08,097 schema ALTER TABLE `app01_bill` ADD CONSTRAINT `app01_bill_register_id_cf59300e_fk_app01_register_id` FOREIGN KEY (`register_id`) REFERENCES `app01_register` (`id`); (params ())
DEBUG 2024-08-21 11:35:08,120 schema ALTER TABLE `app01_bill` ADD CONSTRAINT `app01_bill_treatment_id_73ef4d98_fk_app01_treatment_id` FOREIGN KEY (`treatment_id`) REFERENCES `app01_treatment` (`id`); (params ())
DEBUG 2024-08-21 11:35:08,175 schema ALTER TABLE `django_content_type` MODIFY `name` varchar(100) NULL; (params [])
DEBUG 2024-08-21 11:35:08,243 schema ALTER TABLE `django_content_type` DROP COLUMN `name`; (params ())
DEBUG 2024-08-21 11:35:08,293 schema ALTER TABLE `auth_permission` MODIFY `name` varchar(255) NOT NULL; (params [])
DEBUG 2024-08-21 11:35:08,349 schema ALTER TABLE `auth_user` MODIFY `email` varchar(254) NOT NULL; (params [])
DEBUG 2024-08-21 11:35:08,434 schema ALTER TABLE `auth_user` MODIFY `last_login` datetime(6) NULL; (params [])
DEBUG 2024-08-21 11:35:08,543 schema ALTER TABLE `auth_user` MODIFY `username` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 11:35:08,602 schema ALTER TABLE `auth_user` MODIFY `last_name` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 11:35:08,659 schema ALTER TABLE `auth_group` MODIFY `name` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 11:35:08,778 schema ALTER TABLE `auth_user` MODIFY `first_name` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 11:35:08,832 schema CREATE TABLE `django_session` (`session_key` varchar(40) NOT NULL PRIMARY KEY, `session_data` longtext NOT NULL, `expire_date` datetime(6) NOT NULL); (params None)
DEBUG 2024-08-21 11:35:08,858 schema CREATE INDEX `django_session_expire_date_a5c62663` ON `django_session` (`expire_date`); (params ())
WARNING 2024-08-21 11:35:10,056 log Bad Request: /api/bills/list/
WARNING 2024-08-21 11:35:10,255 log Bad Request: /api/bills/list/
WARNING 2024-08-21 11:35:10,387 log Bad Request: /api/bills/list/
WARNING 2024-08-21 11:35:10,659 log Bad Request: /api/bills/list/
DEBUG 2024-08-21 11:35:38,348 schema CREATE TABLE `django_migrations` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `app` varchar(255) NOT NULL, `name` varchar(255) NOT NULL, `applied` datetime(6) NOT NULL); (params None)
DEBUG 2024-08-21 11:35:38,366 schema CREATE TABLE `django_content_type` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(100) NOT NULL, `app_label` varchar(100) NOT NULL, `model` varchar(100) NOT NULL); (params None)
DEBUG 2024-08-21 11:35:38,383 schema ALTER TABLE `django_content_type` ADD CONSTRAINT `django_content_type_app_label_model_76bd3d3b_uniq` UNIQUE (`app_label`, `model`); (params ())
DEBUG 2024-08-21 11:35:38,426 schema CREATE TABLE `auth_permission` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(50) NOT NULL, `content_type_id` integer NOT NULL, `codename` varchar(100) NOT NULL); (params None)
DEBUG 2024-08-21 11:35:38,459 schema CREATE TABLE `auth_group` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(80) NOT NULL UNIQUE); (params None)
DEBUG 2024-08-21 11:35:38,480 schema CREATE TABLE `auth_group_permissions` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `group_id` integer NOT NULL, `permission_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 11:35:38,526 schema CREATE TABLE `auth_user` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `password` varchar(128) NOT NULL, `last_login` datetime(6) NOT NULL, `is_superuser` bool NOT NULL, `username` varchar(30) NOT NULL UNIQUE, `first_name` varchar(30) NOT NULL, `last_name` varchar(30) NOT NULL, `email` varchar(75) NOT NULL, `is_staff` bool NOT NULL, `is_active` bool NOT NULL, `date_joined` datetime(6) NOT NULL); (params None)
DEBUG 2024-08-21 11:35:38,543 schema CREATE TABLE `auth_user_groups` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `user_id` integer NOT NULL, `group_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 11:35:38,587 schema CREATE TABLE `auth_user_user_permissions` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `user_id` integer NOT NULL, `permission_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 11:35:38,642 schema ALTER TABLE `auth_permission` ADD CONSTRAINT `auth_permission_content_type_id_codename_01ab375a_uniq` UNIQUE (`content_type_id`, `codename`); (params ())
DEBUG 2024-08-21 11:35:38,661 schema ALTER TABLE `auth_permission` ADD CONSTRAINT `auth_permission_content_type_id_2f476e4b_fk_django_co` FOREIGN KEY (`content_type_id`) REFERENCES `django_content_type` (`id`); (params ())
DEBUG 2024-08-21 11:35:38,685 schema ALTER TABLE `auth_group_permissions` ADD CONSTRAINT `auth_group_permissions_group_id_permission_id_0cd325b0_uniq` UNIQUE (`group_id`, `permission_id`); (params ())
DEBUG 2024-08-21 11:35:38,701 schema ALTER TABLE `auth_group_permissions` ADD CONSTRAINT `auth_group_permissions_group_id_b120cbf9_fk_auth_group_id` FOREIGN KEY (`group_id`) REFERENCES `auth_group` (`id`); (params ())
DEBUG 2024-08-21 11:35:38,730 schema ALTER TABLE `auth_group_permissions` ADD CONSTRAINT `auth_group_permissio_permission_id_84c5c92e_fk_auth_perm` FOREIGN KEY (`permission_id`) REFERENCES `auth_permission` (`id`); (params ())
DEBUG 2024-08-21 11:35:38,759 schema ALTER TABLE `auth_user_groups` ADD CONSTRAINT `auth_user_groups_user_id_group_id_94350c0c_uniq` UNIQUE (`user_id`, `group_id`); (params ())
DEBUG 2024-08-21 11:35:38,779 schema ALTER TABLE `auth_user_groups` ADD CONSTRAINT `auth_user_groups_user_id_6a12ed8b_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); (params ())
DEBUG 2024-08-21 11:35:38,805 schema ALTER TABLE `auth_user_groups` ADD CONSTRAINT `auth_user_groups_group_id_97559544_fk_auth_group_id` FOREIGN KEY (`group_id`) REFERENCES `auth_group` (`id`); (params ())
DEBUG 2024-08-21 11:35:38,830 schema ALTER TABLE `auth_user_user_permissions` ADD CONSTRAINT `auth_user_user_permissions_user_id_permission_id_14a6b632_uniq` UNIQUE (`user_id`, `permission_id`); (params ())
DEBUG 2024-08-21 11:35:38,850 schema ALTER TABLE `auth_user_user_permissions` ADD CONSTRAINT `auth_user_user_permissions_user_id_a95ead1b_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); (params ())
DEBUG 2024-08-21 11:35:38,876 schema ALTER TABLE `auth_user_user_permissions` ADD CONSTRAINT `auth_user_user_permi_permission_id_1fbb5f2c_fk_auth_perm` FOREIGN KEY (`permission_id`) REFERENCES `auth_permission` (`id`); (params ())
DEBUG 2024-08-21 11:35:38,934 schema CREATE TABLE `django_admin_log` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `action_time` datetime(6) NOT NULL, `object_id` longtext NULL, `object_repr` varchar(200) NOT NULL, `action_flag` smallint UNSIGNED NOT NULL CHECK (`action_flag` >= 0), `change_message` longtext NOT NULL, `content_type_id` integer NULL, `user_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 11:35:38,977 schema ALTER TABLE `django_admin_log` ADD CONSTRAINT `django_admin_log_content_type_id_c4bce8eb_fk_django_co` FOREIGN KEY (`content_type_id`) REFERENCES `django_content_type` (`id`); (params ())
DEBUG 2024-08-21 11:35:39,005 schema ALTER TABLE `django_admin_log` ADD CONSTRAINT `django_admin_log_user_id_c564eba6_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); (params ())
DEBUG 2024-08-21 11:35:39,123 schema CREATE TABLE `app01_doctors` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `identity_num` varchar(64) NOT NULL, `name` varchar(20) NOT NULL, `title` varchar(50) NOT NULL, `department` varchar(20) NOT NULL, `research` varchar(150) NULL, `cost` numeric(5, 2) NOT NULL, `avatar` varchar(100) NULL, `avatar_name` varchar(128) NOT NULL); (params None)
DEBUG 2024-08-21 11:35:39,141 schema CREATE TABLE `app01_medicine` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(50) NOT NULL, `medicine_type` smallint NOT NULL, `symptom` varchar(200) NOT NULL, `price` numeric(5, 2) NOT NULL, `quantity` integer NOT NULL, `photo_name` varchar(128) NOT NULL); (params None)
DEBUG 2024-08-21 11:35:39,156 schema CREATE TABLE `app01_patients` (`identity` smallint NOT NULL, `identity_num` varchar(64) NOT NULL PRIMARY KEY, `name` varchar(20) NOT NULL, `health_insurance` smallint NOT NULL, `gender` smallint NOT NULL, `birthday` date NOT NULL, `phone_num` varchar(15) NOT NULL, `address` varchar(128) NOT NULL); (params None)
DEBUG 2024-08-21 11:35:39,174 schema CREATE TABLE `app01_user` (`type` smallint NOT NULL, `identity_num` varchar(64) NOT NULL PRIMARY KEY, `password` varchar(64) NOT NULL); (params None)
DEBUG 2024-08-21 11:35:39,191 schema CREATE TABLE `app01_treatment` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `queue_id` integer NOT NULL, `time` datetime(6) NOT NULL, `advice` varchar(256) NOT NULL, `medicine` longtext NOT NULL, `price` numeric(5, 2) NOT NULL, `doctor_id` bigint NOT NULL, `patient_id` varchar(64) NOT NULL); (params None)
DEBUG 2024-08-21 11:35:39,240 schema CREATE TABLE `app01_register` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `queue_id` integer NOT NULL, `time` datetime(6) NOT NULL, `position` varchar(128) NOT NULL, `doctor_id` bigint NOT NULL, `patient_id` varchar(64) NOT NULL, `register_id` varchar(64) NOT NULL); (params None)
DEBUG 2024-08-21 11:35:39,301 schema CREATE TABLE `app01_onduty` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `date` date NOT NULL, `time` smallint NOT NULL, `state` integer NOT NULL, `doctor_id` bigint NOT NULL); (params None)
DEBUG 2024-08-21 11:35:39,335 schema CREATE TABLE `app01_notice` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `msg_type` smallint NOT NULL, `time` datetime(6) NOT NULL, `isRead` bool NOT NULL, `doctor_id` bigint NOT NULL, `patient_id` varchar(64) NOT NULL, `register_id` bigint NULL, `registerMan_id` varchar(64) NULL, `treatment_id` bigint NULL); (params None)
DEBUG 2024-08-21 11:35:39,421 schema CREATE TABLE `app01_bill` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `type` smallint NOT NULL, `state` bool NOT NULL, `price` numeric(5, 2) NOT NULL, `patient_id` varchar(64) NULL, `register_id` bigint NULL, `treatment_id` bigint NULL); (params None)
DEBUG 2024-08-21 11:35:39,482 schema ALTER TABLE `app01_treatment` ADD CONSTRAINT `app01_treatment_doctor_id_a47beada_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 11:35:39,517 schema ALTER TABLE `app01_treatment` ADD CONSTRAINT `app01_treatment_patient_id_52a8e1e5_fk_app01_pat` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 11:35:39,543 schema ALTER TABLE `app01_register` ADD CONSTRAINT `app01_register_doctor_id_e0ea61dc_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 11:35:39,574 schema ALTER TABLE `app01_register` ADD CONSTRAINT `app01_register_patient_id_4a065a29_fk_app01_pat` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 11:35:39,600 schema ALTER TABLE `app01_register` ADD CONSTRAINT `app01_register_register_id_e85a8e5b_fk_app01_pat` FOREIGN KEY (`register_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 11:35:39,644 schema ALTER TABLE `app01_onduty` ADD CONSTRAINT `app01_onduty_doctor_id_9b012eb7_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 11:35:39,670 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_doctor_id_2d7f7104_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 11:35:39,701 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_patient_id_74974826_fk_app01_patients_identity_num` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 11:35:39,736 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_register_id_6c54784c_fk_app01_register_id` FOREIGN KEY (`register_id`) REFERENCES `app01_register` (`id`); (params ())
DEBUG 2024-08-21 11:35:39,766 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_registerMan_id_1bd9adce_fk_app01_pat` FOREIGN KEY (`registerMan_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 11:35:39,796 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_treatment_id_596ea92a_fk_app01_treatment_id` FOREIGN KEY (`treatment_id`) REFERENCES `app01_treatment` (`id`); (params ())
DEBUG 2024-08-21 11:35:39,835 schema ALTER TABLE `app01_bill` ADD CONSTRAINT `app01_bill_patient_id_96fe396a_fk_app01_patients_identity_num` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 11:35:39,867 schema ALTER TABLE `app01_bill` ADD CONSTRAINT `app01_bill_register_id_cf59300e_fk_app01_register_id` FOREIGN KEY (`register_id`) REFERENCES `app01_register` (`id`); (params ())
DEBUG 2024-08-21 11:35:39,898 schema ALTER TABLE `app01_bill` ADD CONSTRAINT `app01_bill_treatment_id_73ef4d98_fk_app01_treatment_id` FOREIGN KEY (`treatment_id`) REFERENCES `app01_treatment` (`id`); (params ())
DEBUG 2024-08-21 11:35:39,951 schema ALTER TABLE `django_content_type` MODIFY `name` varchar(100) NULL; (params [])
DEBUG 2024-08-21 11:35:40,019 schema ALTER TABLE `django_content_type` DROP COLUMN `name`; (params ())
DEBUG 2024-08-21 11:35:40,071 schema ALTER TABLE `auth_permission` MODIFY `name` varchar(255) NOT NULL; (params [])
DEBUG 2024-08-21 11:35:40,126 schema ALTER TABLE `auth_user` MODIFY `email` varchar(254) NOT NULL; (params [])
DEBUG 2024-08-21 11:35:40,213 schema ALTER TABLE `auth_user` MODIFY `last_login` datetime(6) NULL; (params [])
DEBUG 2024-08-21 11:35:40,320 schema ALTER TABLE `auth_user` MODIFY `username` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 11:35:40,377 schema ALTER TABLE `auth_user` MODIFY `last_name` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 11:35:40,439 schema ALTER TABLE `auth_group` MODIFY `name` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 11:35:40,574 schema ALTER TABLE `auth_user` MODIFY `first_name` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 11:35:40,633 schema CREATE TABLE `django_session` (`session_key` varchar(40) NOT NULL PRIMARY KEY, `session_data` longtext NOT NULL, `expire_date` datetime(6) NOT NULL); (params None)
DEBUG 2024-08-21 11:35:40,661 schema CREATE INDEX `django_session_expire_date_a5c62663` ON `django_session` (`expire_date`); (params ())
WARNING 2024-08-21 11:35:41,893 log Bad Request: /api/bills/list/
WARNING 2024-08-21 11:35:42,062 log Bad Request: /api/bills/list/
WARNING 2024-08-21 11:35:42,171 log Bad Request: /api/bills/list/
WARNING 2024-08-21 11:35:42,403 log Bad Request: /api/bills/list/
WARNING 2024-08-21 11:35:42,570 log Bad Request: /api/doctors/setData/
WARNING 2024-08-21 11:35:42,760 log Bad Request: /api/doctors/delete/
WARNING 2024-08-21 11:35:43,335 log Bad Request: /api/duty/all_next_seven_days/
WARNING 2024-08-21 11:35:43,496 log Bad Request: /api/duty/next_seven_days/
WARNING 2024-08-21 11:35:44,288 log Bad Request: /api/registers/list/
WARNING 2024-08-21 11:35:44,604 log Bad Request: /api/treatments/list/
WARNING 2024-08-21 11:35:44,844 log Bad Request: /api/treatments/list/
DEBUG 2024-08-21 11:38:07,128 schema CREATE TABLE `django_migrations` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `app` varchar(255) NOT NULL, `name` varchar(255) NOT NULL, `applied` datetime(6) NOT NULL); (params None)
DEBUG 2024-08-21 11:38:07,147 schema CREATE TABLE `django_content_type` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(100) NOT NULL, `app_label` varchar(100) NOT NULL, `model` varchar(100) NOT NULL); (params None)
DEBUG 2024-08-21 11:38:07,173 schema ALTER TABLE `django_content_type` ADD CONSTRAINT `django_content_type_app_label_model_76bd3d3b_uniq` UNIQUE (`app_label`, `model`); (params ())
DEBUG 2024-08-21 11:38:07,222 schema CREATE TABLE `auth_permission` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(50) NOT NULL, `content_type_id` integer NOT NULL, `codename` varchar(100) NOT NULL); (params None)
DEBUG 2024-08-21 11:38:07,253 schema CREATE TABLE `auth_group` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(80) NOT NULL UNIQUE); (params None)
DEBUG 2024-08-21 11:38:07,275 schema CREATE TABLE `auth_group_permissions` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `group_id` integer NOT NULL, `permission_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 11:38:07,323 schema CREATE TABLE `auth_user` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `password` varchar(128) NOT NULL, `last_login` datetime(6) NOT NULL, `is_superuser` bool NOT NULL, `username` varchar(30) NOT NULL UNIQUE, `first_name` varchar(30) NOT NULL, `last_name` varchar(30) NOT NULL, `email` varchar(75) NOT NULL, `is_staff` bool NOT NULL, `is_active` bool NOT NULL, `date_joined` datetime(6) NOT NULL); (params None)
DEBUG 2024-08-21 11:38:07,353 schema CREATE TABLE `auth_user_groups` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `user_id` integer NOT NULL, `group_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 11:38:07,405 schema CREATE TABLE `auth_user_user_permissions` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `user_id` integer NOT NULL, `permission_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 11:38:07,453 schema ALTER TABLE `auth_permission` ADD CONSTRAINT `auth_permission_content_type_id_codename_01ab375a_uniq` UNIQUE (`content_type_id`, `codename`); (params ())
DEBUG 2024-08-21 11:38:07,473 schema ALTER TABLE `auth_permission` ADD CONSTRAINT `auth_permission_content_type_id_2f476e4b_fk_django_co` FOREIGN KEY (`content_type_id`) REFERENCES `django_content_type` (`id`); (params ())
DEBUG 2024-08-21 11:38:07,507 schema ALTER TABLE `auth_group_permissions` ADD CONSTRAINT `auth_group_permissions_group_id_permission_id_0cd325b0_uniq` UNIQUE (`group_id`, `permission_id`); (params ())
DEBUG 2024-08-21 11:38:07,524 schema ALTER TABLE `auth_group_permissions` ADD CONSTRAINT `auth_group_permissions_group_id_b120cbf9_fk_auth_group_id` FOREIGN KEY (`group_id`) REFERENCES `auth_group` (`id`); (params ())
DEBUG 2024-08-21 11:38:07,551 schema ALTER TABLE `auth_group_permissions` ADD CONSTRAINT `auth_group_permissio_permission_id_84c5c92e_fk_auth_perm` FOREIGN KEY (`permission_id`) REFERENCES `auth_permission` (`id`); (params ())
DEBUG 2024-08-21 11:38:07,580 schema ALTER TABLE `auth_user_groups` ADD CONSTRAINT `auth_user_groups_user_id_group_id_94350c0c_uniq` UNIQUE (`user_id`, `group_id`); (params ())
DEBUG 2024-08-21 11:38:07,596 schema ALTER TABLE `auth_user_groups` ADD CONSTRAINT `auth_user_groups_user_id_6a12ed8b_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); (params ())
DEBUG 2024-08-21 11:38:07,621 schema ALTER TABLE `auth_user_groups` ADD CONSTRAINT `auth_user_groups_group_id_97559544_fk_auth_group_id` FOREIGN KEY (`group_id`) REFERENCES `auth_group` (`id`); (params ())
DEBUG 2024-08-21 11:38:07,649 schema ALTER TABLE `auth_user_user_permissions` ADD CONSTRAINT `auth_user_user_permissions_user_id_permission_id_14a6b632_uniq` UNIQUE (`user_id`, `permission_id`); (params ())
DEBUG 2024-08-21 11:38:07,665 schema ALTER TABLE `auth_user_user_permissions` ADD CONSTRAINT `auth_user_user_permissions_user_id_a95ead1b_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); (params ())
DEBUG 2024-08-21 11:38:07,694 schema ALTER TABLE `auth_user_user_permissions` ADD CONSTRAINT `auth_user_user_permi_permission_id_1fbb5f2c_fk_auth_perm` FOREIGN KEY (`permission_id`) REFERENCES `auth_permission` (`id`); (params ())
DEBUG 2024-08-21 11:38:07,751 schema CREATE TABLE `django_admin_log` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `action_time` datetime(6) NOT NULL, `object_id` longtext NULL, `object_repr` varchar(200) NOT NULL, `action_flag` smallint UNSIGNED NOT NULL CHECK (`action_flag` >= 0), `change_message` longtext NOT NULL, `content_type_id` integer NULL, `user_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 11:38:07,794 schema ALTER TABLE `django_admin_log` ADD CONSTRAINT `django_admin_log_content_type_id_c4bce8eb_fk_django_co` FOREIGN KEY (`content_type_id`) REFERENCES `django_content_type` (`id`); (params ())
DEBUG 2024-08-21 11:38:07,824 schema ALTER TABLE `django_admin_log` ADD CONSTRAINT `django_admin_log_user_id_c564eba6_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); (params ())
DEBUG 2024-08-21 11:38:07,937 schema CREATE TABLE `app01_doctors` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `identity_num` varchar(64) NOT NULL, `name` varchar(20) NOT NULL, `title` varchar(50) NOT NULL, `department` varchar(20) NOT NULL, `research` varchar(150) NULL, `cost` numeric(5, 2) NOT NULL, `avatar` varchar(100) NULL, `avatar_name` varchar(128) NOT NULL); (params None)
DEBUG 2024-08-21 11:38:07,954 schema CREATE TABLE `app01_medicine` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(50) NOT NULL, `medicine_type` smallint NOT NULL, `symptom` varchar(200) NOT NULL, `price` numeric(5, 2) NOT NULL, `quantity` integer NOT NULL, `photo_name` varchar(128) NOT NULL); (params None)
DEBUG 2024-08-21 11:38:07,971 schema CREATE TABLE `app01_patients` (`identity` smallint NOT NULL, `identity_num` varchar(64) NOT NULL PRIMARY KEY, `name` varchar(20) NOT NULL, `health_insurance` smallint NOT NULL, `gender` smallint NOT NULL, `birthday` date NOT NULL, `phone_num` varchar(15) NOT NULL, `address` varchar(128) NOT NULL); (params None)
DEBUG 2024-08-21 11:38:07,986 schema CREATE TABLE `app01_user` (`type` smallint NOT NULL, `identity_num` varchar(64) NOT NULL PRIMARY KEY, `password` varchar(64) NOT NULL); (params None)
DEBUG 2024-08-21 11:38:08,003 schema CREATE TABLE `app01_treatment` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `queue_id` integer NOT NULL, `time` datetime(6) NOT NULL, `advice` varchar(256) NOT NULL, `medicine` longtext NOT NULL, `price` numeric(5, 2) NOT NULL, `doctor_id` bigint NOT NULL, `patient_id` varchar(64) NOT NULL); (params None)
DEBUG 2024-08-21 11:38:08,046 schema CREATE TABLE `app01_register` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `queue_id` integer NOT NULL, `time` datetime(6) NOT NULL, `position` varchar(128) NOT NULL, `doctor_id` bigint NOT NULL, `patient_id` varchar(64) NOT NULL, `register_id` varchar(64) NOT NULL); (params None)
DEBUG 2024-08-21 11:38:08,104 schema CREATE TABLE `app01_onduty` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `date` date NOT NULL, `time` smallint NOT NULL, `state` integer NOT NULL, `doctor_id` bigint NOT NULL); (params None)
DEBUG 2024-08-21 11:38:08,140 schema CREATE TABLE `app01_notice` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `msg_type` smallint NOT NULL, `time` datetime(6) NOT NULL, `isRead` bool NOT NULL, `doctor_id` bigint NOT NULL, `patient_id` varchar(64) NOT NULL, `register_id` bigint NULL, `registerMan_id` varchar(64) NULL, `treatment_id` bigint NULL); (params None)
DEBUG 2024-08-21 11:38:08,221 schema CREATE TABLE `app01_bill` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `type` smallint NOT NULL, `state` bool NOT NULL, `price` numeric(5, 2) NOT NULL, `patient_id` varchar(64) NULL, `register_id` bigint NULL, `treatment_id` bigint NULL); (params None)
DEBUG 2024-08-21 11:38:08,292 schema ALTER TABLE `app01_treatment` ADD CONSTRAINT `app01_treatment_doctor_id_a47beada_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 11:38:08,333 schema ALTER TABLE `app01_treatment` ADD CONSTRAINT `app01_treatment_patient_id_52a8e1e5_fk_app01_pat` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 11:38:08,365 schema ALTER TABLE `app01_register` ADD CONSTRAINT `app01_register_doctor_id_e0ea61dc_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 11:38:08,397 schema ALTER TABLE `app01_register` ADD CONSTRAINT `app01_register_patient_id_4a065a29_fk_app01_pat` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 11:38:08,424 schema ALTER TABLE `app01_register` ADD CONSTRAINT `app01_register_register_id_e85a8e5b_fk_app01_pat` FOREIGN KEY (`register_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 11:38:08,458 schema ALTER TABLE `app01_onduty` ADD CONSTRAINT `app01_onduty_doctor_id_9b012eb7_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 11:38:08,485 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_doctor_id_2d7f7104_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 11:38:08,518 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_patient_id_74974826_fk_app01_patients_identity_num` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 11:38:08,550 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_register_id_6c54784c_fk_app01_register_id` FOREIGN KEY (`register_id`) REFERENCES `app01_register` (`id`); (params ())
DEBUG 2024-08-21 11:38:08,583 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_registerMan_id_1bd9adce_fk_app01_pat` FOREIGN KEY (`registerMan_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 11:38:08,613 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_treatment_id_596ea92a_fk_app01_treatment_id` FOREIGN KEY (`treatment_id`) REFERENCES `app01_treatment` (`id`); (params ())
DEBUG 2024-08-21 11:38:08,653 schema ALTER TABLE `app01_bill` ADD CONSTRAINT `app01_bill_patient_id_96fe396a_fk_app01_patients_identity_num` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 11:38:08,679 schema ALTER TABLE `app01_bill` ADD CONSTRAINT `app01_bill_register_id_cf59300e_fk_app01_register_id` FOREIGN KEY (`register_id`) REFERENCES `app01_register` (`id`); (params ())
DEBUG 2024-08-21 11:38:08,707 schema ALTER TABLE `app01_bill` ADD CONSTRAINT `app01_bill_treatment_id_73ef4d98_fk_app01_treatment_id` FOREIGN KEY (`treatment_id`) REFERENCES `app01_treatment` (`id`); (params ())
DEBUG 2024-08-21 11:38:08,780 schema ALTER TABLE `django_content_type` MODIFY `name` varchar(100) NULL; (params [])
DEBUG 2024-08-21 11:38:08,850 schema ALTER TABLE `django_content_type` DROP COLUMN `name`; (params ())
DEBUG 2024-08-21 11:38:08,904 schema ALTER TABLE `auth_permission` MODIFY `name` varchar(255) NOT NULL; (params [])
DEBUG 2024-08-21 11:38:08,959 schema ALTER TABLE `auth_user` MODIFY `email` varchar(254) NOT NULL; (params [])
DEBUG 2024-08-21 11:38:09,039 schema ALTER TABLE `auth_user` MODIFY `last_login` datetime(6) NULL; (params [])
DEBUG 2024-08-21 11:38:09,159 schema ALTER TABLE `auth_user` MODIFY `username` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 11:38:09,219 schema ALTER TABLE `auth_user` MODIFY `last_name` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 11:38:09,291 schema ALTER TABLE `auth_group` MODIFY `name` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 11:38:09,420 schema ALTER TABLE `auth_user` MODIFY `first_name` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 11:38:09,478 schema CREATE TABLE `django_session` (`session_key` varchar(40) NOT NULL PRIMARY KEY, `session_data` longtext NOT NULL, `expire_date` datetime(6) NOT NULL); (params None)
DEBUG 2024-08-21 11:38:09,514 schema CREATE INDEX `django_session_expire_date_a5c62663` ON `django_session` (`expire_date`); (params ())
WARNING 2024-08-21 11:38:10,755 log Bad Request: /api/bills/list/
WARNING 2024-08-21 11:38:10,942 log Bad Request: /api/bills/list/
WARNING 2024-08-21 11:38:11,062 log Bad Request: /api/bills/list/
WARNING 2024-08-21 11:38:11,312 log Bad Request: /api/bills/list/
WARNING 2024-08-21 11:38:11,510 log Bad Request: /api/doctors/setData/
WARNING 2024-08-21 11:38:11,763 log Bad Request: /api/doctors/delete/
WARNING 2024-08-21 11:38:12,364 log Bad Request: /api/duty/all_next_seven_days/
WARNING 2024-08-21 11:38:12,494 log Bad Request: /api/duty/next_seven_days/
WARNING 2024-08-21 11:38:13,296 log Bad Request: /api/registers/list/
WARNING 2024-08-21 11:38:13,628 log Bad Request: /api/treatments/list/
WARNING 2024-08-21 11:38:13,926 log Bad Request: /api/treatments/list/
DEBUG 2024-08-21 11:47:21,700 schema CREATE TABLE `django_migrations` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `app` varchar(255) NOT NULL, `name` varchar(255) NOT NULL, `applied` datetime(6) NOT NULL); (params None)
DEBUG 2024-08-21 11:47:21,717 schema CREATE TABLE `django_content_type` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(100) NOT NULL, `app_label` varchar(100) NOT NULL, `model` varchar(100) NOT NULL); (params None)
DEBUG 2024-08-21 11:47:21,738 schema ALTER TABLE `django_content_type` ADD CONSTRAINT `django_content_type_app_label_model_76bd3d3b_uniq` UNIQUE (`app_label`, `model`); (params ())
DEBUG 2024-08-21 11:47:21,789 schema CREATE TABLE `auth_permission` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(50) NOT NULL, `content_type_id` integer NOT NULL, `codename` varchar(100) NOT NULL); (params None)
DEBUG 2024-08-21 11:47:21,818 schema CREATE TABLE `auth_group` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(80) NOT NULL UNIQUE); (params None)
DEBUG 2024-08-21 11:47:21,836 schema CREATE TABLE `auth_group_permissions` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `group_id` integer NOT NULL, `permission_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 11:47:21,885 schema CREATE TABLE `auth_user` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `password` varchar(128) NOT NULL, `last_login` datetime(6) NOT NULL, `is_superuser` bool NOT NULL, `username` varchar(30) NOT NULL UNIQUE, `first_name` varchar(30) NOT NULL, `last_name` varchar(30) NOT NULL, `email` varchar(75) NOT NULL, `is_staff` bool NOT NULL, `is_active` bool NOT NULL, `date_joined` datetime(6) NOT NULL); (params None)
DEBUG 2024-08-21 11:47:21,903 schema CREATE TABLE `auth_user_groups` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `user_id` integer NOT NULL, `group_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 11:47:21,947 schema CREATE TABLE `auth_user_user_permissions` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `user_id` integer NOT NULL, `permission_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 11:47:22,000 schema ALTER TABLE `auth_permission` ADD CONSTRAINT `auth_permission_content_type_id_codename_01ab375a_uniq` UNIQUE (`content_type_id`, `codename`); (params ())
DEBUG 2024-08-21 11:47:22,018 schema ALTER TABLE `auth_permission` ADD CONSTRAINT `auth_permission_content_type_id_2f476e4b_fk_django_co` FOREIGN KEY (`content_type_id`) REFERENCES `django_content_type` (`id`); (params ())
DEBUG 2024-08-21 11:47:22,044 schema ALTER TABLE `auth_group_permissions` ADD CONSTRAINT `auth_group_permissions_group_id_permission_id_0cd325b0_uniq` UNIQUE (`group_id`, `permission_id`); (params ())
DEBUG 2024-08-21 11:47:22,062 schema ALTER TABLE `auth_group_permissions` ADD CONSTRAINT `auth_group_permissions_group_id_b120cbf9_fk_auth_group_id` FOREIGN KEY (`group_id`) REFERENCES `auth_group` (`id`); (params ())
DEBUG 2024-08-21 11:47:22,087 schema ALTER TABLE `auth_group_permissions` ADD CONSTRAINT `auth_group_permissio_permission_id_84c5c92e_fk_auth_perm` FOREIGN KEY (`permission_id`) REFERENCES `auth_permission` (`id`); (params ())
DEBUG 2024-08-21 11:47:22,112 schema ALTER TABLE `auth_user_groups` ADD CONSTRAINT `auth_user_groups_user_id_group_id_94350c0c_uniq` UNIQUE (`user_id`, `group_id`); (params ())
DEBUG 2024-08-21 11:47:22,131 schema ALTER TABLE `auth_user_groups` ADD CONSTRAINT `auth_user_groups_user_id_6a12ed8b_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); (params ())
DEBUG 2024-08-21 11:47:22,155 schema ALTER TABLE `auth_user_groups` ADD CONSTRAINT `auth_user_groups_group_id_97559544_fk_auth_group_id` FOREIGN KEY (`group_id`) REFERENCES `auth_group` (`id`); (params ())
DEBUG 2024-08-21 11:47:22,182 schema ALTER TABLE `auth_user_user_permissions` ADD CONSTRAINT `auth_user_user_permissions_user_id_permission_id_14a6b632_uniq` UNIQUE (`user_id`, `permission_id`); (params ())
DEBUG 2024-08-21 11:47:22,201 schema ALTER TABLE `auth_user_user_permissions` ADD CONSTRAINT `auth_user_user_permissions_user_id_a95ead1b_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); (params ())
DEBUG 2024-08-21 11:47:22,226 schema ALTER TABLE `auth_user_user_permissions` ADD CONSTRAINT `auth_user_user_permi_permission_id_1fbb5f2c_fk_auth_perm` FOREIGN KEY (`permission_id`) REFERENCES `auth_permission` (`id`); (params ())
DEBUG 2024-08-21 11:47:22,285 schema CREATE TABLE `django_admin_log` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `action_time` datetime(6) NOT NULL, `object_id` longtext NULL, `object_repr` varchar(200) NOT NULL, `action_flag` smallint UNSIGNED NOT NULL CHECK (`action_flag` >= 0), `change_message` longtext NOT NULL, `content_type_id` integer NULL, `user_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 11:47:22,330 schema ALTER TABLE `django_admin_log` ADD CONSTRAINT `django_admin_log_content_type_id_c4bce8eb_fk_django_co` FOREIGN KEY (`content_type_id`) REFERENCES `django_content_type` (`id`); (params ())
DEBUG 2024-08-21 11:47:22,357 schema ALTER TABLE `django_admin_log` ADD CONSTRAINT `django_admin_log_user_id_c564eba6_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); (params ())
DEBUG 2024-08-21 11:47:22,478 schema CREATE TABLE `app01_doctors` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `identity_num` varchar(64) NOT NULL, `name` varchar(20) NOT NULL, `title` varchar(50) NOT NULL, `department` varchar(20) NOT NULL, `research` varchar(150) NULL, `cost` numeric(5, 2) NOT NULL, `avatar` varchar(100) NULL, `avatar_name` varchar(128) NOT NULL); (params None)
DEBUG 2024-08-21 11:47:22,496 schema CREATE TABLE `app01_medicine` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(50) NOT NULL, `medicine_type` smallint NOT NULL, `symptom` varchar(200) NOT NULL, `price` numeric(5, 2) NOT NULL, `quantity` integer NOT NULL, `photo_name` varchar(128) NOT NULL); (params None)
DEBUG 2024-08-21 11:47:22,513 schema CREATE TABLE `app01_patients` (`identity` smallint NOT NULL, `identity_num` varchar(64) NOT NULL PRIMARY KEY, `name` varchar(20) NOT NULL, `health_insurance` smallint NOT NULL, `gender` smallint NOT NULL, `birthday` date NOT NULL, `phone_num` varchar(15) NOT NULL, `address` varchar(128) NOT NULL); (params None)
DEBUG 2024-08-21 11:47:22,532 schema CREATE TABLE `app01_user` (`type` smallint NOT NULL, `identity_num` varchar(64) NOT NULL PRIMARY KEY, `password` varchar(64) NOT NULL); (params None)
DEBUG 2024-08-21 11:47:22,549 schema CREATE TABLE `app01_treatment` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `queue_id` integer NOT NULL, `time` datetime(6) NOT NULL, `advice` varchar(256) NOT NULL, `medicine` longtext NOT NULL, `price` numeric(5, 2) NOT NULL, `doctor_id` bigint NOT NULL, `patient_id` varchar(64) NOT NULL); (params None)
DEBUG 2024-08-21 11:47:22,595 schema CREATE TABLE `app01_register` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `queue_id` integer NOT NULL, `time` datetime(6) NOT NULL, `position` varchar(128) NOT NULL, `doctor_id` bigint NOT NULL, `patient_id` varchar(64) NOT NULL, `register_id` varchar(64) NOT NULL); (params None)
DEBUG 2024-08-21 11:47:22,650 schema CREATE TABLE `app01_onduty` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `date` date NOT NULL, `time` smallint NOT NULL, `state` integer NOT NULL, `doctor_id` bigint NOT NULL); (params None)
DEBUG 2024-08-21 11:47:22,683 schema CREATE TABLE `app01_notice` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `msg_type` smallint NOT NULL, `time` datetime(6) NOT NULL, `isRead` bool NOT NULL, `doctor_id` bigint NOT NULL, `patient_id` varchar(64) NOT NULL, `register_id` bigint NULL, `registerMan_id` varchar(64) NULL, `treatment_id` bigint NULL); (params None)
DEBUG 2024-08-21 11:47:22,784 schema CREATE TABLE `app01_bill` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `type` smallint NOT NULL, `state` bool NOT NULL, `price` numeric(5, 2) NOT NULL, `patient_id` varchar(64) NULL, `register_id` bigint NULL, `treatment_id` bigint NULL); (params None)
DEBUG 2024-08-21 11:47:22,863 schema ALTER TABLE `app01_treatment` ADD CONSTRAINT `app01_treatment_doctor_id_a47beada_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 11:47:22,890 schema ALTER TABLE `app01_treatment` ADD CONSTRAINT `app01_treatment_patient_id_52a8e1e5_fk_app01_pat` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 11:47:22,918 schema ALTER TABLE `app01_register` ADD CONSTRAINT `app01_register_doctor_id_e0ea61dc_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 11:47:22,946 schema ALTER TABLE `app01_register` ADD CONSTRAINT `app01_register_patient_id_4a065a29_fk_app01_pat` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 11:47:22,973 schema ALTER TABLE `app01_register` ADD CONSTRAINT `app01_register_register_id_e85a8e5b_fk_app01_pat` FOREIGN KEY (`register_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 11:47:23,001 schema ALTER TABLE `app01_onduty` ADD CONSTRAINT `app01_onduty_doctor_id_9b012eb7_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 11:47:23,031 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_doctor_id_2d7f7104_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 11:47:23,056 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_patient_id_74974826_fk_app01_patients_identity_num` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 11:47:23,085 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_register_id_6c54784c_fk_app01_register_id` FOREIGN KEY (`register_id`) REFERENCES `app01_register` (`id`); (params ())
DEBUG 2024-08-21 11:47:23,112 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_registerMan_id_1bd9adce_fk_app01_pat` FOREIGN KEY (`registerMan_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 11:47:23,143 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_treatment_id_596ea92a_fk_app01_treatment_id` FOREIGN KEY (`treatment_id`) REFERENCES `app01_treatment` (`id`); (params ())
DEBUG 2024-08-21 11:47:23,174 schema ALTER TABLE `app01_bill` ADD CONSTRAINT `app01_bill_patient_id_96fe396a_fk_app01_patients_identity_num` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 11:47:23,197 schema ALTER TABLE `app01_bill` ADD CONSTRAINT `app01_bill_register_id_cf59300e_fk_app01_register_id` FOREIGN KEY (`register_id`) REFERENCES `app01_register` (`id`); (params ())
DEBUG 2024-08-21 11:47:23,226 schema ALTER TABLE `app01_bill` ADD CONSTRAINT `app01_bill_treatment_id_73ef4d98_fk_app01_treatment_id` FOREIGN KEY (`treatment_id`) REFERENCES `app01_treatment` (`id`); (params ())
DEBUG 2024-08-21 11:47:23,286 schema ALTER TABLE `django_content_type` MODIFY `name` varchar(100) NULL; (params [])
DEBUG 2024-08-21 11:47:23,354 schema ALTER TABLE `django_content_type` DROP COLUMN `name`; (params ())
DEBUG 2024-08-21 11:47:23,410 schema ALTER TABLE `auth_permission` MODIFY `name` varchar(255) NOT NULL; (params [])
DEBUG 2024-08-21 11:47:23,472 schema ALTER TABLE `auth_user` MODIFY `email` varchar(254) NOT NULL; (params [])
DEBUG 2024-08-21 11:47:23,583 schema ALTER TABLE `auth_user` MODIFY `last_login` datetime(6) NULL; (params [])
DEBUG 2024-08-21 11:47:23,704 schema ALTER TABLE `auth_user` MODIFY `username` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 11:47:23,767 schema ALTER TABLE `auth_user` MODIFY `last_name` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 11:47:23,829 schema ALTER TABLE `auth_group` MODIFY `name` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 11:47:23,966 schema ALTER TABLE `auth_user` MODIFY `first_name` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 11:47:24,022 schema CREATE TABLE `django_session` (`session_key` varchar(40) NOT NULL PRIMARY KEY, `session_data` longtext NOT NULL, `expire_date` datetime(6) NOT NULL); (params None)
DEBUG 2024-08-21 11:47:24,051 schema CREATE INDEX `django_session_expire_date_a5c62663` ON `django_session` (`expire_date`); (params ())
WARNING 2024-08-21 11:47:25,320 log Bad Request: /api/notice/list/
WARNING 2024-08-21 11:47:25,616 log Bad Request: /api/notice/list/
ERROR 2024-08-21 11:47:25,751 log Internal Server Error: /api/notice/list/
Traceback (most recent call last):
  File "D:\anacoda\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\views\decorators\csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\views\generic\base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 509, in dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 480, in raise_uncaught_exception
    raise exc
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\86185\Desktop\SEGroup6\Ã¨Ã¨¾ÍÕï\Project\app01\views.py", line 840, in post
    return self.readNotice(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\86185\Desktop\SEGroup6\Ã¨Ã¨¾ÍÕï\Project\app01\views.py", line 896, in readNotice
    if item<0:
       ^^^^
UnboundLocalError: cannot access local variable 'item' where it is not associated with a value
ERROR 2024-08-21 11:47:25,894 log Internal Server Error: /api/notice/list/
Traceback (most recent call last):
  File "D:\anacoda\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\views\decorators\csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\views\generic\base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 509, in dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 480, in raise_uncaught_exception
    raise exc
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\86185\Desktop\SEGroup6\Ã¨Ã¨¾ÍÕï\Project\app01\views.py", line 840, in post
    return self.readNotice(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\86185\Desktop\SEGroup6\Ã¨Ã¨¾ÍÕï\Project\app01\views.py", line 896, in readNotice
    if item<0:
       ^^^^
UnboundLocalError: cannot access local variable 'item' where it is not associated with a value
DEBUG 2024-08-21 11:49:33,933 schema CREATE TABLE `django_migrations` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `app` varchar(255) NOT NULL, `name` varchar(255) NOT NULL, `applied` datetime(6) NOT NULL); (params None)
DEBUG 2024-08-21 11:49:33,951 schema CREATE TABLE `django_content_type` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(100) NOT NULL, `app_label` varchar(100) NOT NULL, `model` varchar(100) NOT NULL); (params None)
DEBUG 2024-08-21 11:49:33,971 schema ALTER TABLE `django_content_type` ADD CONSTRAINT `django_content_type_app_label_model_76bd3d3b_uniq` UNIQUE (`app_label`, `model`); (params ())
DEBUG 2024-08-21 11:49:34,014 schema CREATE TABLE `auth_permission` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(50) NOT NULL, `content_type_id` integer NOT NULL, `codename` varchar(100) NOT NULL); (params None)
DEBUG 2024-08-21 11:49:34,042 schema CREATE TABLE `auth_group` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(80) NOT NULL UNIQUE); (params None)
DEBUG 2024-08-21 11:49:34,058 schema CREATE TABLE `auth_group_permissions` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `group_id` integer NOT NULL, `permission_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 11:49:34,097 schema CREATE TABLE `auth_user` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `password` varchar(128) NOT NULL, `last_login` datetime(6) NOT NULL, `is_superuser` bool NOT NULL, `username` varchar(30) NOT NULL UNIQUE, `first_name` varchar(30) NOT NULL, `last_name` varchar(30) NOT NULL, `email` varchar(75) NOT NULL, `is_staff` bool NOT NULL, `is_active` bool NOT NULL, `date_joined` datetime(6) NOT NULL); (params None)
DEBUG 2024-08-21 11:49:34,114 schema CREATE TABLE `auth_user_groups` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `user_id` integer NOT NULL, `group_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 11:49:34,154 schema CREATE TABLE `auth_user_user_permissions` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `user_id` integer NOT NULL, `permission_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 11:49:34,192 schema ALTER TABLE `auth_permission` ADD CONSTRAINT `auth_permission_content_type_id_codename_01ab375a_uniq` UNIQUE (`content_type_id`, `codename`); (params ())
DEBUG 2024-08-21 11:49:34,213 schema ALTER TABLE `auth_permission` ADD CONSTRAINT `auth_permission_content_type_id_2f476e4b_fk_django_co` FOREIGN KEY (`content_type_id`) REFERENCES `django_content_type` (`id`); (params ())
DEBUG 2024-08-21 11:49:34,236 schema ALTER TABLE `auth_group_permissions` ADD CONSTRAINT `auth_group_permissions_group_id_permission_id_0cd325b0_uniq` UNIQUE (`group_id`, `permission_id`); (params ())
DEBUG 2024-08-21 11:49:34,253 schema ALTER TABLE `auth_group_permissions` ADD CONSTRAINT `auth_group_permissions_group_id_b120cbf9_fk_auth_group_id` FOREIGN KEY (`group_id`) REFERENCES `auth_group` (`id`); (params ())
DEBUG 2024-08-21 11:49:34,276 schema ALTER TABLE `auth_group_permissions` ADD CONSTRAINT `auth_group_permissio_permission_id_84c5c92e_fk_auth_perm` FOREIGN KEY (`permission_id`) REFERENCES `auth_permission` (`id`); (params ())
DEBUG 2024-08-21 11:49:34,298 schema ALTER TABLE `auth_user_groups` ADD CONSTRAINT `auth_user_groups_user_id_group_id_94350c0c_uniq` UNIQUE (`user_id`, `group_id`); (params ())
DEBUG 2024-08-21 11:49:34,315 schema ALTER TABLE `auth_user_groups` ADD CONSTRAINT `auth_user_groups_user_id_6a12ed8b_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); (params ())
DEBUG 2024-08-21 11:49:34,338 schema ALTER TABLE `auth_user_groups` ADD CONSTRAINT `auth_user_groups_group_id_97559544_fk_auth_group_id` FOREIGN KEY (`group_id`) REFERENCES `auth_group` (`id`); (params ())
DEBUG 2024-08-21 11:49:34,360 schema ALTER TABLE `auth_user_user_permissions` ADD CONSTRAINT `auth_user_user_permissions_user_id_permission_id_14a6b632_uniq` UNIQUE (`user_id`, `permission_id`); (params ())
DEBUG 2024-08-21 11:49:34,378 schema ALTER TABLE `auth_user_user_permissions` ADD CONSTRAINT `auth_user_user_permissions_user_id_a95ead1b_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); (params ())
DEBUG 2024-08-21 11:49:34,400 schema ALTER TABLE `auth_user_user_permissions` ADD CONSTRAINT `auth_user_user_permi_permission_id_1fbb5f2c_fk_auth_perm` FOREIGN KEY (`permission_id`) REFERENCES `auth_permission` (`id`); (params ())
DEBUG 2024-08-21 11:49:34,455 schema CREATE TABLE `django_admin_log` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `action_time` datetime(6) NOT NULL, `object_id` longtext NULL, `object_repr` varchar(200) NOT NULL, `action_flag` smallint UNSIGNED NOT NULL CHECK (`action_flag` >= 0), `change_message` longtext NOT NULL, `content_type_id` integer NULL, `user_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 11:49:34,500 schema ALTER TABLE `django_admin_log` ADD CONSTRAINT `django_admin_log_content_type_id_c4bce8eb_fk_django_co` FOREIGN KEY (`content_type_id`) REFERENCES `django_content_type` (`id`); (params ())
DEBUG 2024-08-21 11:49:34,533 schema ALTER TABLE `django_admin_log` ADD CONSTRAINT `django_admin_log_user_id_c564eba6_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); (params ())
DEBUG 2024-08-21 11:49:34,645 schema CREATE TABLE `app01_doctors` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `identity_num` varchar(64) NOT NULL, `name` varchar(20) NOT NULL, `title` varchar(50) NOT NULL, `department` varchar(20) NOT NULL, `research` varchar(150) NULL, `cost` numeric(5, 2) NOT NULL, `avatar` varchar(100) NULL, `avatar_name` varchar(128) NOT NULL); (params None)
DEBUG 2024-08-21 11:49:34,661 schema CREATE TABLE `app01_medicine` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(50) NOT NULL, `medicine_type` smallint NOT NULL, `symptom` varchar(200) NOT NULL, `price` numeric(5, 2) NOT NULL, `quantity` integer NOT NULL, `photo_name` varchar(128) NOT NULL); (params None)
DEBUG 2024-08-21 11:49:34,675 schema CREATE TABLE `app01_patients` (`identity` smallint NOT NULL, `identity_num` varchar(64) NOT NULL PRIMARY KEY, `name` varchar(20) NOT NULL, `health_insurance` smallint NOT NULL, `gender` smallint NOT NULL, `birthday` date NOT NULL, `phone_num` varchar(15) NOT NULL, `address` varchar(128) NOT NULL); (params None)
DEBUG 2024-08-21 11:49:34,691 schema CREATE TABLE `app01_user` (`type` smallint NOT NULL, `identity_num` varchar(64) NOT NULL PRIMARY KEY, `password` varchar(64) NOT NULL); (params None)
DEBUG 2024-08-21 11:49:34,706 schema CREATE TABLE `app01_treatment` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `queue_id` integer NOT NULL, `time` datetime(6) NOT NULL, `advice` varchar(256) NOT NULL, `medicine` longtext NOT NULL, `price` numeric(5, 2) NOT NULL, `doctor_id` bigint NOT NULL, `patient_id` varchar(64) NOT NULL); (params None)
DEBUG 2024-08-21 11:49:34,747 schema CREATE TABLE `app01_register` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `queue_id` integer NOT NULL, `time` datetime(6) NOT NULL, `position` varchar(128) NOT NULL, `doctor_id` bigint NOT NULL, `patient_id` varchar(64) NOT NULL, `register_id` varchar(64) NOT NULL); (params None)
DEBUG 2024-08-21 11:49:34,803 schema CREATE TABLE `app01_onduty` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `date` date NOT NULL, `time` smallint NOT NULL, `state` integer NOT NULL, `doctor_id` bigint NOT NULL); (params None)
DEBUG 2024-08-21 11:49:34,835 schema CREATE TABLE `app01_notice` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `msg_type` smallint NOT NULL, `time` datetime(6) NOT NULL, `isRead` bool NOT NULL, `doctor_id` bigint NOT NULL, `patient_id` varchar(64) NOT NULL, `register_id` bigint NULL, `registerMan_id` varchar(64) NULL, `treatment_id` bigint NULL); (params None)
DEBUG 2024-08-21 11:49:34,913 schema CREATE TABLE `app01_bill` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `type` smallint NOT NULL, `state` bool NOT NULL, `price` numeric(5, 2) NOT NULL, `patient_id` varchar(64) NULL, `register_id` bigint NULL, `treatment_id` bigint NULL); (params None)
DEBUG 2024-08-21 11:49:34,970 schema ALTER TABLE `app01_treatment` ADD CONSTRAINT `app01_treatment_doctor_id_a47beada_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 11:49:34,998 schema ALTER TABLE `app01_treatment` ADD CONSTRAINT `app01_treatment_patient_id_52a8e1e5_fk_app01_pat` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 11:49:35,025 schema ALTER TABLE `app01_register` ADD CONSTRAINT `app01_register_doctor_id_e0ea61dc_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 11:49:35,048 schema ALTER TABLE `app01_register` ADD CONSTRAINT `app01_register_patient_id_4a065a29_fk_app01_pat` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 11:49:35,075 schema ALTER TABLE `app01_register` ADD CONSTRAINT `app01_register_register_id_e85a8e5b_fk_app01_pat` FOREIGN KEY (`register_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 11:49:35,105 schema ALTER TABLE `app01_onduty` ADD CONSTRAINT `app01_onduty_doctor_id_9b012eb7_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 11:49:35,132 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_doctor_id_2d7f7104_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 11:49:35,159 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_patient_id_74974826_fk_app01_patients_identity_num` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 11:49:35,190 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_register_id_6c54784c_fk_app01_register_id` FOREIGN KEY (`register_id`) REFERENCES `app01_register` (`id`); (params ())
DEBUG 2024-08-21 11:49:35,219 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_registerMan_id_1bd9adce_fk_app01_pat` FOREIGN KEY (`registerMan_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 11:49:35,250 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_treatment_id_596ea92a_fk_app01_treatment_id` FOREIGN KEY (`treatment_id`) REFERENCES `app01_treatment` (`id`); (params ())
DEBUG 2024-08-21 11:49:35,283 schema ALTER TABLE `app01_bill` ADD CONSTRAINT `app01_bill_patient_id_96fe396a_fk_app01_patients_identity_num` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 11:49:35,313 schema ALTER TABLE `app01_bill` ADD CONSTRAINT `app01_bill_register_id_cf59300e_fk_app01_register_id` FOREIGN KEY (`register_id`) REFERENCES `app01_register` (`id`); (params ())
DEBUG 2024-08-21 11:49:35,340 schema ALTER TABLE `app01_bill` ADD CONSTRAINT `app01_bill_treatment_id_73ef4d98_fk_app01_treatment_id` FOREIGN KEY (`treatment_id`) REFERENCES `app01_treatment` (`id`); (params ())
DEBUG 2024-08-21 11:49:35,406 schema ALTER TABLE `django_content_type` MODIFY `name` varchar(100) NULL; (params [])
DEBUG 2024-08-21 11:49:35,475 schema ALTER TABLE `django_content_type` DROP COLUMN `name`; (params ())
DEBUG 2024-08-21 11:49:35,528 schema ALTER TABLE `auth_permission` MODIFY `name` varchar(255) NOT NULL; (params [])
DEBUG 2024-08-21 11:49:35,588 schema ALTER TABLE `auth_user` MODIFY `email` varchar(254) NOT NULL; (params [])
DEBUG 2024-08-21 11:49:35,680 schema ALTER TABLE `auth_user` MODIFY `last_login` datetime(6) NULL; (params [])
DEBUG 2024-08-21 11:49:35,785 schema ALTER TABLE `auth_user` MODIFY `username` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 11:49:35,845 schema ALTER TABLE `auth_user` MODIFY `last_name` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 11:49:35,910 schema ALTER TABLE `auth_group` MODIFY `name` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 11:49:36,020 schema ALTER TABLE `auth_user` MODIFY `first_name` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 11:49:36,078 schema CREATE TABLE `django_session` (`session_key` varchar(40) NOT NULL PRIMARY KEY, `session_data` longtext NOT NULL, `expire_date` datetime(6) NOT NULL); (params None)
DEBUG 2024-08-21 11:49:36,106 schema CREATE INDEX `django_session_expire_date_a5c62663` ON `django_session` (`expire_date`); (params ())
WARNING 2024-08-21 11:49:37,297 log Bad Request: /api/notice/list/
WARNING 2024-08-21 11:49:37,608 log Bad Request: /api/notice/list/
ERROR 2024-08-21 11:49:37,789 log Internal Server Error: /api/notice/list/
Traceback (most recent call last):
  File "D:\anacoda\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\views\decorators\csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\views\generic\base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 509, in dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 480, in raise_uncaught_exception
    raise exc
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\86185\Desktop\SEGroup6\Ã¨Ã¨¾ÍÕï\Project\app01\views.py", line 840, in post
    return self.readNotice(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\86185\Desktop\SEGroup6\Ã¨Ã¨¾ÍÕï\Project\app01\views.py", line 896, in readNotice
    if item<0:
       ^^^^
UnboundLocalError: cannot access local variable 'item' where it is not associated with a value
ERROR 2024-08-21 11:49:37,999 log Internal Server Error: /api/notice/list/
Traceback (most recent call last):
  File "D:\anacoda\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\views\decorators\csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\views\generic\base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 509, in dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 480, in raise_uncaught_exception
    raise exc
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\86185\Desktop\SEGroup6\Ã¨Ã¨¾ÍÕï\Project\app01\views.py", line 840, in post
    return self.readNotice(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\86185\Desktop\SEGroup6\Ã¨Ã¨¾ÍÕï\Project\app01\views.py", line 896, in readNotice
    if item<0:
       ^^^^
UnboundLocalError: cannot access local variable 'item' where it is not associated with a value
DEBUG 2024-08-21 11:51:18,244 schema CREATE TABLE `django_migrations` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `app` varchar(255) NOT NULL, `name` varchar(255) NOT NULL, `applied` datetime(6) NOT NULL); (params None)
DEBUG 2024-08-21 11:51:18,262 schema CREATE TABLE `django_content_type` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(100) NOT NULL, `app_label` varchar(100) NOT NULL, `model` varchar(100) NOT NULL); (params None)
DEBUG 2024-08-21 11:51:18,280 schema ALTER TABLE `django_content_type` ADD CONSTRAINT `django_content_type_app_label_model_76bd3d3b_uniq` UNIQUE (`app_label`, `model`); (params ())
DEBUG 2024-08-21 11:51:18,340 schema CREATE TABLE `auth_permission` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(50) NOT NULL, `content_type_id` integer NOT NULL, `codename` varchar(100) NOT NULL); (params None)
DEBUG 2024-08-21 11:51:18,378 schema CREATE TABLE `auth_group` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(80) NOT NULL UNIQUE); (params None)
DEBUG 2024-08-21 11:51:18,395 schema CREATE TABLE `auth_group_permissions` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `group_id` integer NOT NULL, `permission_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 11:51:18,445 schema CREATE TABLE `auth_user` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `password` varchar(128) NOT NULL, `last_login` datetime(6) NOT NULL, `is_superuser` bool NOT NULL, `username` varchar(30) NOT NULL UNIQUE, `first_name` varchar(30) NOT NULL, `last_name` varchar(30) NOT NULL, `email` varchar(75) NOT NULL, `is_staff` bool NOT NULL, `is_active` bool NOT NULL, `date_joined` datetime(6) NOT NULL); (params None)
DEBUG 2024-08-21 11:51:18,473 schema CREATE TABLE `auth_user_groups` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `user_id` integer NOT NULL, `group_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 11:51:18,519 schema CREATE TABLE `auth_user_user_permissions` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `user_id` integer NOT NULL, `permission_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 11:51:18,566 schema ALTER TABLE `auth_permission` ADD CONSTRAINT `auth_permission_content_type_id_codename_01ab375a_uniq` UNIQUE (`content_type_id`, `codename`); (params ())
DEBUG 2024-08-21 11:51:18,586 schema ALTER TABLE `auth_permission` ADD CONSTRAINT `auth_permission_content_type_id_2f476e4b_fk_django_co` FOREIGN KEY (`content_type_id`) REFERENCES `django_content_type` (`id`); (params ())
DEBUG 2024-08-21 11:51:18,613 schema ALTER TABLE `auth_group_permissions` ADD CONSTRAINT `auth_group_permissions_group_id_permission_id_0cd325b0_uniq` UNIQUE (`group_id`, `permission_id`); (params ())
DEBUG 2024-08-21 11:51:18,644 schema ALTER TABLE `auth_group_permissions` ADD CONSTRAINT `auth_group_permissions_group_id_b120cbf9_fk_auth_group_id` FOREIGN KEY (`group_id`) REFERENCES `auth_group` (`id`); (params ())
DEBUG 2024-08-21 11:51:18,679 schema ALTER TABLE `auth_group_permissions` ADD CONSTRAINT `auth_group_permissio_permission_id_84c5c92e_fk_auth_perm` FOREIGN KEY (`permission_id`) REFERENCES `auth_permission` (`id`); (params ())
DEBUG 2024-08-21 11:51:18,716 schema ALTER TABLE `auth_user_groups` ADD CONSTRAINT `auth_user_groups_user_id_group_id_94350c0c_uniq` UNIQUE (`user_id`, `group_id`); (params ())
DEBUG 2024-08-21 11:51:18,741 schema ALTER TABLE `auth_user_groups` ADD CONSTRAINT `auth_user_groups_user_id_6a12ed8b_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); (params ())
DEBUG 2024-08-21 11:51:18,771 schema ALTER TABLE `auth_user_groups` ADD CONSTRAINT `auth_user_groups_group_id_97559544_fk_auth_group_id` FOREIGN KEY (`group_id`) REFERENCES `auth_group` (`id`); (params ())
DEBUG 2024-08-21 11:51:18,800 schema ALTER TABLE `auth_user_user_permissions` ADD CONSTRAINT `auth_user_user_permissions_user_id_permission_id_14a6b632_uniq` UNIQUE (`user_id`, `permission_id`); (params ())
DEBUG 2024-08-21 11:51:18,822 schema ALTER TABLE `auth_user_user_permissions` ADD CONSTRAINT `auth_user_user_permissions_user_id_a95ead1b_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); (params ())
DEBUG 2024-08-21 11:51:18,848 schema ALTER TABLE `auth_user_user_permissions` ADD CONSTRAINT `auth_user_user_permi_permission_id_1fbb5f2c_fk_auth_perm` FOREIGN KEY (`permission_id`) REFERENCES `auth_permission` (`id`); (params ())
DEBUG 2024-08-21 11:51:18,908 schema CREATE TABLE `django_admin_log` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `action_time` datetime(6) NOT NULL, `object_id` longtext NULL, `object_repr` varchar(200) NOT NULL, `action_flag` smallint UNSIGNED NOT NULL CHECK (`action_flag` >= 0), `change_message` longtext NOT NULL, `content_type_id` integer NULL, `user_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 11:51:18,957 schema ALTER TABLE `django_admin_log` ADD CONSTRAINT `django_admin_log_content_type_id_c4bce8eb_fk_django_co` FOREIGN KEY (`content_type_id`) REFERENCES `django_content_type` (`id`); (params ())
DEBUG 2024-08-21 11:51:18,991 schema ALTER TABLE `django_admin_log` ADD CONSTRAINT `django_admin_log_user_id_c564eba6_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); (params ())
DEBUG 2024-08-21 11:51:19,123 schema CREATE TABLE `app01_doctors` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `identity_num` varchar(64) NOT NULL, `name` varchar(20) NOT NULL, `title` varchar(50) NOT NULL, `department` varchar(20) NOT NULL, `research` varchar(150) NULL, `cost` numeric(5, 2) NOT NULL, `avatar` varchar(100) NULL, `avatar_name` varchar(128) NOT NULL); (params None)
DEBUG 2024-08-21 11:51:19,142 schema CREATE TABLE `app01_medicine` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(50) NOT NULL, `medicine_type` smallint NOT NULL, `symptom` varchar(200) NOT NULL, `price` numeric(5, 2) NOT NULL, `quantity` integer NOT NULL, `photo_name` varchar(128) NOT NULL); (params None)
DEBUG 2024-08-21 11:51:19,159 schema CREATE TABLE `app01_patients` (`identity` smallint NOT NULL, `identity_num` varchar(64) NOT NULL PRIMARY KEY, `name` varchar(20) NOT NULL, `health_insurance` smallint NOT NULL, `gender` smallint NOT NULL, `birthday` date NOT NULL, `phone_num` varchar(15) NOT NULL, `address` varchar(128) NOT NULL); (params None)
DEBUG 2024-08-21 11:51:19,176 schema CREATE TABLE `app01_user` (`type` smallint NOT NULL, `identity_num` varchar(64) NOT NULL PRIMARY KEY, `password` varchar(64) NOT NULL); (params None)
DEBUG 2024-08-21 11:51:19,195 schema CREATE TABLE `app01_treatment` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `queue_id` integer NOT NULL, `time` datetime(6) NOT NULL, `advice` varchar(256) NOT NULL, `medicine` longtext NOT NULL, `price` numeric(5, 2) NOT NULL, `doctor_id` bigint NOT NULL, `patient_id` varchar(64) NOT NULL); (params None)
DEBUG 2024-08-21 11:51:19,240 schema CREATE TABLE `app01_register` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `queue_id` integer NOT NULL, `time` datetime(6) NOT NULL, `position` varchar(128) NOT NULL, `doctor_id` bigint NOT NULL, `patient_id` varchar(64) NOT NULL, `register_id` varchar(64) NOT NULL); (params None)
DEBUG 2024-08-21 11:51:19,299 schema CREATE TABLE `app01_onduty` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `date` date NOT NULL, `time` smallint NOT NULL, `state` integer NOT NULL, `doctor_id` bigint NOT NULL); (params None)
DEBUG 2024-08-21 11:51:19,336 schema CREATE TABLE `app01_notice` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `msg_type` smallint NOT NULL, `time` datetime(6) NOT NULL, `isRead` bool NOT NULL, `doctor_id` bigint NOT NULL, `patient_id` varchar(64) NOT NULL, `register_id` bigint NULL, `registerMan_id` varchar(64) NULL, `treatment_id` bigint NULL); (params None)
DEBUG 2024-08-21 11:51:19,437 schema CREATE TABLE `app01_bill` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `type` smallint NOT NULL, `state` bool NOT NULL, `price` numeric(5, 2) NOT NULL, `patient_id` varchar(64) NULL, `register_id` bigint NULL, `treatment_id` bigint NULL); (params None)
DEBUG 2024-08-21 11:51:19,497 schema ALTER TABLE `app01_treatment` ADD CONSTRAINT `app01_treatment_doctor_id_a47beada_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 11:51:19,536 schema ALTER TABLE `app01_treatment` ADD CONSTRAINT `app01_treatment_patient_id_52a8e1e5_fk_app01_pat` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 11:51:19,564 schema ALTER TABLE `app01_register` ADD CONSTRAINT `app01_register_doctor_id_e0ea61dc_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 11:51:19,591 schema ALTER TABLE `app01_register` ADD CONSTRAINT `app01_register_patient_id_4a065a29_fk_app01_pat` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 11:51:19,620 schema ALTER TABLE `app01_register` ADD CONSTRAINT `app01_register_register_id_e85a8e5b_fk_app01_pat` FOREIGN KEY (`register_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 11:51:19,652 schema ALTER TABLE `app01_onduty` ADD CONSTRAINT `app01_onduty_doctor_id_9b012eb7_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 11:51:19,679 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_doctor_id_2d7f7104_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 11:51:19,716 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_patient_id_74974826_fk_app01_patients_identity_num` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 11:51:19,752 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_register_id_6c54784c_fk_app01_register_id` FOREIGN KEY (`register_id`) REFERENCES `app01_register` (`id`); (params ())
DEBUG 2024-08-21 11:51:19,788 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_registerMan_id_1bd9adce_fk_app01_pat` FOREIGN KEY (`registerMan_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 11:51:19,822 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_treatment_id_596ea92a_fk_app01_treatment_id` FOREIGN KEY (`treatment_id`) REFERENCES `app01_treatment` (`id`); (params ())
DEBUG 2024-08-21 11:51:19,857 schema ALTER TABLE `app01_bill` ADD CONSTRAINT `app01_bill_patient_id_96fe396a_fk_app01_patients_identity_num` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 11:51:19,884 schema ALTER TABLE `app01_bill` ADD CONSTRAINT `app01_bill_register_id_cf59300e_fk_app01_register_id` FOREIGN KEY (`register_id`) REFERENCES `app01_register` (`id`); (params ())
DEBUG 2024-08-21 11:51:19,912 schema ALTER TABLE `app01_bill` ADD CONSTRAINT `app01_bill_treatment_id_73ef4d98_fk_app01_treatment_id` FOREIGN KEY (`treatment_id`) REFERENCES `app01_treatment` (`id`); (params ())
DEBUG 2024-08-21 11:51:19,968 schema ALTER TABLE `django_content_type` MODIFY `name` varchar(100) NULL; (params [])
DEBUG 2024-08-21 11:51:20,046 schema ALTER TABLE `django_content_type` DROP COLUMN `name`; (params ())
DEBUG 2024-08-21 11:51:20,107 schema ALTER TABLE `auth_permission` MODIFY `name` varchar(255) NOT NULL; (params [])
DEBUG 2024-08-21 11:51:20,168 schema ALTER TABLE `auth_user` MODIFY `email` varchar(254) NOT NULL; (params [])
DEBUG 2024-08-21 11:51:20,266 schema ALTER TABLE `auth_user` MODIFY `last_login` datetime(6) NULL; (params [])
DEBUG 2024-08-21 11:51:20,379 schema ALTER TABLE `auth_user` MODIFY `username` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 11:51:20,438 schema ALTER TABLE `auth_user` MODIFY `last_name` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 11:51:20,502 schema ALTER TABLE `auth_group` MODIFY `name` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 11:51:20,641 schema ALTER TABLE `auth_user` MODIFY `first_name` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 11:51:20,705 schema CREATE TABLE `django_session` (`session_key` varchar(40) NOT NULL PRIMARY KEY, `session_data` longtext NOT NULL, `expire_date` datetime(6) NOT NULL); (params None)
DEBUG 2024-08-21 11:51:20,752 schema CREATE INDEX `django_session_expire_date_a5c62663` ON `django_session` (`expire_date`); (params ())
WARNING 2024-08-21 11:51:22,629 log Bad Request: /api/notice/list/
WARNING 2024-08-21 11:51:23,071 log Bad Request: /api/notice/list/
WARNING 2024-08-21 11:51:23,249 log Bad Request: /api/notice/list/
DEBUG 2024-08-21 11:58:08,832 schema CREATE TABLE `django_migrations` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `app` varchar(255) NOT NULL, `name` varchar(255) NOT NULL, `applied` datetime(6) NOT NULL); (params None)
DEBUG 2024-08-21 11:58:08,851 schema CREATE TABLE `django_content_type` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(100) NOT NULL, `app_label` varchar(100) NOT NULL, `model` varchar(100) NOT NULL); (params None)
DEBUG 2024-08-21 11:58:08,884 schema ALTER TABLE `django_content_type` ADD CONSTRAINT `django_content_type_app_label_model_76bd3d3b_uniq` UNIQUE (`app_label`, `model`); (params ())
DEBUG 2024-08-21 11:58:08,930 schema CREATE TABLE `auth_permission` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(50) NOT NULL, `content_type_id` integer NOT NULL, `codename` varchar(100) NOT NULL); (params None)
DEBUG 2024-08-21 11:58:08,959 schema CREATE TABLE `auth_group` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(80) NOT NULL UNIQUE); (params None)
DEBUG 2024-08-21 11:58:08,974 schema CREATE TABLE `auth_group_permissions` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `group_id` integer NOT NULL, `permission_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 11:58:09,019 schema CREATE TABLE `auth_user` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `password` varchar(128) NOT NULL, `last_login` datetime(6) NOT NULL, `is_superuser` bool NOT NULL, `username` varchar(30) NOT NULL UNIQUE, `first_name` varchar(30) NOT NULL, `last_name` varchar(30) NOT NULL, `email` varchar(75) NOT NULL, `is_staff` bool NOT NULL, `is_active` bool NOT NULL, `date_joined` datetime(6) NOT NULL); (params None)
DEBUG 2024-08-21 11:58:09,037 schema CREATE TABLE `auth_user_groups` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `user_id` integer NOT NULL, `group_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 11:58:09,082 schema CREATE TABLE `auth_user_user_permissions` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `user_id` integer NOT NULL, `permission_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 11:58:09,163 schema ALTER TABLE `auth_permission` ADD CONSTRAINT `auth_permission_content_type_id_codename_01ab375a_uniq` UNIQUE (`content_type_id`, `codename`); (params ())
DEBUG 2024-08-21 11:58:09,191 schema ALTER TABLE `auth_permission` ADD CONSTRAINT `auth_permission_content_type_id_2f476e4b_fk_django_co` FOREIGN KEY (`content_type_id`) REFERENCES `django_content_type` (`id`); (params ())
DEBUG 2024-08-21 11:58:09,228 schema ALTER TABLE `auth_group_permissions` ADD CONSTRAINT `auth_group_permissions_group_id_permission_id_0cd325b0_uniq` UNIQUE (`group_id`, `permission_id`); (params ())
DEBUG 2024-08-21 11:58:09,249 schema ALTER TABLE `auth_group_permissions` ADD CONSTRAINT `auth_group_permissions_group_id_b120cbf9_fk_auth_group_id` FOREIGN KEY (`group_id`) REFERENCES `auth_group` (`id`); (params ())
DEBUG 2024-08-21 11:58:09,291 schema ALTER TABLE `auth_group_permissions` ADD CONSTRAINT `auth_group_permissio_permission_id_84c5c92e_fk_auth_perm` FOREIGN KEY (`permission_id`) REFERENCES `auth_permission` (`id`); (params ())
DEBUG 2024-08-21 11:58:09,321 schema ALTER TABLE `auth_user_groups` ADD CONSTRAINT `auth_user_groups_user_id_group_id_94350c0c_uniq` UNIQUE (`user_id`, `group_id`); (params ())
DEBUG 2024-08-21 11:58:09,353 schema ALTER TABLE `auth_user_groups` ADD CONSTRAINT `auth_user_groups_user_id_6a12ed8b_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); (params ())
DEBUG 2024-08-21 11:58:09,379 schema ALTER TABLE `auth_user_groups` ADD CONSTRAINT `auth_user_groups_group_id_97559544_fk_auth_group_id` FOREIGN KEY (`group_id`) REFERENCES `auth_group` (`id`); (params ())
DEBUG 2024-08-21 11:58:09,404 schema ALTER TABLE `auth_user_user_permissions` ADD CONSTRAINT `auth_user_user_permissions_user_id_permission_id_14a6b632_uniq` UNIQUE (`user_id`, `permission_id`); (params ())
DEBUG 2024-08-21 11:58:09,422 schema ALTER TABLE `auth_user_user_permissions` ADD CONSTRAINT `auth_user_user_permissions_user_id_a95ead1b_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); (params ())
DEBUG 2024-08-21 11:58:09,447 schema ALTER TABLE `auth_user_user_permissions` ADD CONSTRAINT `auth_user_user_permi_permission_id_1fbb5f2c_fk_auth_perm` FOREIGN KEY (`permission_id`) REFERENCES `auth_permission` (`id`); (params ())
DEBUG 2024-08-21 11:58:09,518 schema CREATE TABLE `django_admin_log` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `action_time` datetime(6) NOT NULL, `object_id` longtext NULL, `object_repr` varchar(200) NOT NULL, `action_flag` smallint UNSIGNED NOT NULL CHECK (`action_flag` >= 0), `change_message` longtext NOT NULL, `content_type_id` integer NULL, `user_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 11:58:09,566 schema ALTER TABLE `django_admin_log` ADD CONSTRAINT `django_admin_log_content_type_id_c4bce8eb_fk_django_co` FOREIGN KEY (`content_type_id`) REFERENCES `django_content_type` (`id`); (params ())
DEBUG 2024-08-21 11:58:09,596 schema ALTER TABLE `django_admin_log` ADD CONSTRAINT `django_admin_log_user_id_c564eba6_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); (params ())
DEBUG 2024-08-21 11:58:09,709 schema CREATE TABLE `app01_doctors` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `identity_num` varchar(64) NOT NULL, `name` varchar(20) NOT NULL, `title` varchar(50) NOT NULL, `department` varchar(20) NOT NULL, `research` varchar(150) NULL, `cost` numeric(5, 2) NOT NULL, `avatar` varchar(100) NULL, `avatar_name` varchar(128) NOT NULL); (params None)
DEBUG 2024-08-21 11:58:09,728 schema CREATE TABLE `app01_medicine` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(50) NOT NULL, `medicine_type` smallint NOT NULL, `symptom` varchar(200) NOT NULL, `price` numeric(5, 2) NOT NULL, `quantity` integer NOT NULL, `photo_name` varchar(128) NOT NULL); (params None)
DEBUG 2024-08-21 11:58:09,745 schema CREATE TABLE `app01_patients` (`identity` smallint NOT NULL, `identity_num` varchar(64) NOT NULL PRIMARY KEY, `name` varchar(20) NOT NULL, `health_insurance` smallint NOT NULL, `gender` smallint NOT NULL, `birthday` date NOT NULL, `phone_num` varchar(15) NOT NULL, `address` varchar(128) NOT NULL); (params None)
DEBUG 2024-08-21 11:58:09,764 schema CREATE TABLE `app01_user` (`type` smallint NOT NULL, `identity_num` varchar(64) NOT NULL PRIMARY KEY, `password` varchar(64) NOT NULL); (params None)
DEBUG 2024-08-21 11:58:09,780 schema CREATE TABLE `app01_treatment` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `queue_id` integer NOT NULL, `time` datetime(6) NOT NULL, `advice` varchar(256) NOT NULL, `medicine` longtext NOT NULL, `price` numeric(5, 2) NOT NULL, `doctor_id` bigint NOT NULL, `patient_id` varchar(64) NOT NULL); (params None)
DEBUG 2024-08-21 11:58:09,822 schema CREATE TABLE `app01_register` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `queue_id` integer NOT NULL, `time` datetime(6) NOT NULL, `position` varchar(128) NOT NULL, `doctor_id` bigint NOT NULL, `patient_id` varchar(64) NOT NULL, `register_id` varchar(64) NOT NULL); (params None)
DEBUG 2024-08-21 11:58:09,881 schema CREATE TABLE `app01_onduty` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `date` date NOT NULL, `time` smallint NOT NULL, `state` integer NOT NULL, `doctor_id` bigint NOT NULL); (params None)
DEBUG 2024-08-21 11:58:09,911 schema CREATE TABLE `app01_notice` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `msg_type` smallint NOT NULL, `time` datetime(6) NOT NULL, `isRead` bool NOT NULL, `doctor_id` bigint NOT NULL, `patient_id` varchar(64) NOT NULL, `register_id` bigint NULL, `registerMan_id` varchar(64) NULL, `treatment_id` bigint NULL); (params None)
DEBUG 2024-08-21 11:58:09,998 schema CREATE TABLE `app01_bill` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `type` smallint NOT NULL, `state` bool NOT NULL, `price` numeric(5, 2) NOT NULL, `patient_id` varchar(64) NULL, `register_id` bigint NULL, `treatment_id` bigint NULL); (params None)
DEBUG 2024-08-21 11:58:10,083 schema ALTER TABLE `app01_treatment` ADD CONSTRAINT `app01_treatment_doctor_id_a47beada_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 11:58:10,111 schema ALTER TABLE `app01_treatment` ADD CONSTRAINT `app01_treatment_patient_id_52a8e1e5_fk_app01_pat` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 11:58:10,138 schema ALTER TABLE `app01_register` ADD CONSTRAINT `app01_register_doctor_id_e0ea61dc_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 11:58:10,164 schema ALTER TABLE `app01_register` ADD CONSTRAINT `app01_register_patient_id_4a065a29_fk_app01_pat` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 11:58:10,193 schema ALTER TABLE `app01_register` ADD CONSTRAINT `app01_register_register_id_e85a8e5b_fk_app01_pat` FOREIGN KEY (`register_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 11:58:10,220 schema ALTER TABLE `app01_onduty` ADD CONSTRAINT `app01_onduty_doctor_id_9b012eb7_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 11:58:10,244 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_doctor_id_2d7f7104_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 11:58:10,268 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_patient_id_74974826_fk_app01_patients_identity_num` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 11:58:10,292 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_register_id_6c54784c_fk_app01_register_id` FOREIGN KEY (`register_id`) REFERENCES `app01_register` (`id`); (params ())
DEBUG 2024-08-21 11:58:10,318 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_registerMan_id_1bd9adce_fk_app01_pat` FOREIGN KEY (`registerMan_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 11:58:10,347 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_treatment_id_596ea92a_fk_app01_treatment_id` FOREIGN KEY (`treatment_id`) REFERENCES `app01_treatment` (`id`); (params ())
DEBUG 2024-08-21 11:58:10,378 schema ALTER TABLE `app01_bill` ADD CONSTRAINT `app01_bill_patient_id_96fe396a_fk_app01_patients_identity_num` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 11:58:10,403 schema ALTER TABLE `app01_bill` ADD CONSTRAINT `app01_bill_register_id_cf59300e_fk_app01_register_id` FOREIGN KEY (`register_id`) REFERENCES `app01_register` (`id`); (params ())
DEBUG 2024-08-21 11:58:10,429 schema ALTER TABLE `app01_bill` ADD CONSTRAINT `app01_bill_treatment_id_73ef4d98_fk_app01_treatment_id` FOREIGN KEY (`treatment_id`) REFERENCES `app01_treatment` (`id`); (params ())
DEBUG 2024-08-21 11:58:10,486 schema ALTER TABLE `django_content_type` MODIFY `name` varchar(100) NULL; (params [])
DEBUG 2024-08-21 11:58:10,551 schema ALTER TABLE `django_content_type` DROP COLUMN `name`; (params ())
DEBUG 2024-08-21 11:58:10,602 schema ALTER TABLE `auth_permission` MODIFY `name` varchar(255) NOT NULL; (params [])
DEBUG 2024-08-21 11:58:10,660 schema ALTER TABLE `auth_user` MODIFY `email` varchar(254) NOT NULL; (params [])
DEBUG 2024-08-21 11:58:10,745 schema ALTER TABLE `auth_user` MODIFY `last_login` datetime(6) NULL; (params [])
DEBUG 2024-08-21 11:58:10,855 schema ALTER TABLE `auth_user` MODIFY `username` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 11:58:10,911 schema ALTER TABLE `auth_user` MODIFY `last_name` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 11:58:10,968 schema ALTER TABLE `auth_group` MODIFY `name` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 11:58:11,106 schema ALTER TABLE `auth_user` MODIFY `first_name` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 11:58:11,167 schema CREATE TABLE `django_session` (`session_key` varchar(40) NOT NULL PRIMARY KEY, `session_data` longtext NOT NULL, `expire_date` datetime(6) NOT NULL); (params None)
DEBUG 2024-08-21 11:58:11,199 schema CREATE INDEX `django_session_expire_date_a5c62663` ON `django_session` (`expire_date`); (params ())
ERROR 2024-08-21 11:58:12,453 log Internal Server Error: /api/medicine/setData/
Traceback (most recent call last):
  File "D:\anacoda\Lib\site-packages\django\db\models\fields\__init__.py", line 2053, in get_prep_value
    return int(value)
           ^^^^^^^^^^
ValueError: invalid literal for int() with base 10: 'invalid_id'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\anacoda\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\views\decorators\csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\views\generic\base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 509, in dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 480, in raise_uncaught_exception
    raise exc
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\86185\Desktop\SEGroup6\Ã¨Ã¨¾ÍÕï\Project\app01\views.py", line 935, in post
    return self.alterMedicine(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\86185\Desktop\SEGroup6\Ã¨Ã¨¾ÍÕï\Project\app01\views.py", line 969, in alterMedicine
    medicine = Medicine.objects.get(id=data['id'])
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\manager.py", line 87, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\query.py", line 623, in get
    clone = self._chain() if self.query.combinator else self.filter(*args, **kwargs)
                                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\query.py", line 1436, in filter
    return self._filter_or_exclude(False, args, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\query.py", line 1454, in _filter_or_exclude
    clone._filter_or_exclude_inplace(negate, args, kwargs)
  File "D:\anacoda\Lib\site-packages\django\db\models\query.py", line 1461, in _filter_or_exclude_inplace
    self._query.add_q(Q(*args, **kwargs))
  File "D:\anacoda\Lib\site-packages\django\db\models\sql\query.py", line 1545, in add_q
    clause, _ = self._add_q(q_object, self.used_aliases)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\sql\query.py", line 1576, in _add_q
    child_clause, needed_inner = self.build_filter(
                                 ^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\sql\query.py", line 1491, in build_filter
    condition = self.build_lookup(lookups, col, value)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\sql\query.py", line 1318, in build_lookup
    lookup = lookup_class(lhs, rhs)
             ^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\lookups.py", line 27, in __init__
    self.rhs = self.get_prep_lookup()
               ^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\lookups.py", line 341, in get_prep_lookup
    return super().get_prep_lookup()
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\lookups.py", line 85, in get_prep_lookup
    return self.lhs.output_field.get_prep_value(self.rhs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\fields\__init__.py", line 2055, in get_prep_value
    raise e.__class__(
ValueError: Field 'id' expected a number but got 'invalid_id'.
ERROR 2024-08-21 11:58:12,527 log Internal Server Error: /api/medicine/setData/
Traceback (most recent call last):
  File "D:\anacoda\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\views\decorators\csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\views\generic\base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 509, in dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 480, in raise_uncaught_exception
    raise exc
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\86185\Desktop\SEGroup6\Ã¨Ã¨¾ÍÕï\Project\app01\views.py", line 935, in post
    return self.alterMedicine(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\86185\Desktop\SEGroup6\Ã¨Ã¨¾ÍÕï\Project\app01\views.py", line 971, in alterMedicine
    medicine.medicine_type = data['type']
                             ~~~~^^^^^^^^
KeyError: 'type'
ERROR 2024-08-21 11:58:12,583 log Internal Server Error: /api/medicine/delete/
Traceback (most recent call last):
  File "D:\anacoda\Lib\site-packages\django\db\models\fields\__init__.py", line 2053, in get_prep_value
    return int(value)
           ^^^^^^^^^^
ValueError: invalid literal for int() with base 10: 'invalid_id'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\anacoda\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\views\decorators\csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\views\generic\base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 509, in dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 480, in raise_uncaught_exception
    raise exc
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\86185\Desktop\SEGroup6\Ã¨Ã¨¾ÍÕï\Project\app01\views.py", line 929, in post
    return self.deleteMedicine(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\86185\Desktop\SEGroup6\Ã¨Ã¨¾ÍÕï\Project\app01\views.py", line 941, in deleteMedicine
    Medicine.objects.get(id=id).delete()
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\manager.py", line 87, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\query.py", line 623, in get
    clone = self._chain() if self.query.combinator else self.filter(*args, **kwargs)
                                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\query.py", line 1436, in filter
    return self._filter_or_exclude(False, args, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\query.py", line 1454, in _filter_or_exclude
    clone._filter_or_exclude_inplace(negate, args, kwargs)
  File "D:\anacoda\Lib\site-packages\django\db\models\query.py", line 1461, in _filter_or_exclude_inplace
    self._query.add_q(Q(*args, **kwargs))
  File "D:\anacoda\Lib\site-packages\django\db\models\sql\query.py", line 1545, in add_q
    clause, _ = self._add_q(q_object, self.used_aliases)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\sql\query.py", line 1576, in _add_q
    child_clause, needed_inner = self.build_filter(
                                 ^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\sql\query.py", line 1491, in build_filter
    condition = self.build_lookup(lookups, col, value)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\sql\query.py", line 1318, in build_lookup
    lookup = lookup_class(lhs, rhs)
             ^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\lookups.py", line 27, in __init__
    self.rhs = self.get_prep_lookup()
               ^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\lookups.py", line 341, in get_prep_lookup
    return super().get_prep_lookup()
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\lookups.py", line 85, in get_prep_lookup
    return self.lhs.output_field.get_prep_value(self.rhs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\fields\__init__.py", line 2055, in get_prep_value
    raise e.__class__(
ValueError: Field 'id' expected a number but got 'invalid_id'.
WARNING 2024-08-21 11:58:12,867 log Bad Request: /api/medicine/list/
DEBUG 2024-08-21 11:58:45,170 schema CREATE TABLE `django_migrations` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `app` varchar(255) NOT NULL, `name` varchar(255) NOT NULL, `applied` datetime(6) NOT NULL); (params None)
DEBUG 2024-08-21 11:58:45,189 schema CREATE TABLE `django_content_type` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(100) NOT NULL, `app_label` varchar(100) NOT NULL, `model` varchar(100) NOT NULL); (params None)
DEBUG 2024-08-21 11:58:45,209 schema ALTER TABLE `django_content_type` ADD CONSTRAINT `django_content_type_app_label_model_76bd3d3b_uniq` UNIQUE (`app_label`, `model`); (params ())
DEBUG 2024-08-21 11:58:45,283 schema CREATE TABLE `auth_permission` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(50) NOT NULL, `content_type_id` integer NOT NULL, `codename` varchar(100) NOT NULL); (params None)
DEBUG 2024-08-21 11:58:45,314 schema CREATE TABLE `auth_group` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(80) NOT NULL UNIQUE); (params None)
DEBUG 2024-08-21 11:58:45,329 schema CREATE TABLE `auth_group_permissions` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `group_id` integer NOT NULL, `permission_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 11:58:45,394 schema CREATE TABLE `auth_user` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `password` varchar(128) NOT NULL, `last_login` datetime(6) NOT NULL, `is_superuser` bool NOT NULL, `username` varchar(30) NOT NULL UNIQUE, `first_name` varchar(30) NOT NULL, `last_name` varchar(30) NOT NULL, `email` varchar(75) NOT NULL, `is_staff` bool NOT NULL, `is_active` bool NOT NULL, `date_joined` datetime(6) NOT NULL); (params None)
DEBUG 2024-08-21 11:58:45,413 schema CREATE TABLE `auth_user_groups` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `user_id` integer NOT NULL, `group_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 11:58:45,462 schema CREATE TABLE `auth_user_user_permissions` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `user_id` integer NOT NULL, `permission_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 11:58:45,509 schema ALTER TABLE `auth_permission` ADD CONSTRAINT `auth_permission_content_type_id_codename_01ab375a_uniq` UNIQUE (`content_type_id`, `codename`); (params ())
DEBUG 2024-08-21 11:58:45,527 schema ALTER TABLE `auth_permission` ADD CONSTRAINT `auth_permission_content_type_id_2f476e4b_fk_django_co` FOREIGN KEY (`content_type_id`) REFERENCES `django_content_type` (`id`); (params ())
DEBUG 2024-08-21 11:58:45,553 schema ALTER TABLE `auth_group_permissions` ADD CONSTRAINT `auth_group_permissions_group_id_permission_id_0cd325b0_uniq` UNIQUE (`group_id`, `permission_id`); (params ())
DEBUG 2024-08-21 11:58:45,576 schema ALTER TABLE `auth_group_permissions` ADD CONSTRAINT `auth_group_permissions_group_id_b120cbf9_fk_auth_group_id` FOREIGN KEY (`group_id`) REFERENCES `auth_group` (`id`); (params ())
DEBUG 2024-08-21 11:58:45,601 schema ALTER TABLE `auth_group_permissions` ADD CONSTRAINT `auth_group_permissio_permission_id_84c5c92e_fk_auth_perm` FOREIGN KEY (`permission_id`) REFERENCES `auth_permission` (`id`); (params ())
DEBUG 2024-08-21 11:58:45,630 schema ALTER TABLE `auth_user_groups` ADD CONSTRAINT `auth_user_groups_user_id_group_id_94350c0c_uniq` UNIQUE (`user_id`, `group_id`); (params ())
DEBUG 2024-08-21 11:58:45,651 schema ALTER TABLE `auth_user_groups` ADD CONSTRAINT `auth_user_groups_user_id_6a12ed8b_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); (params ())
DEBUG 2024-08-21 11:58:45,678 schema ALTER TABLE `auth_user_groups` ADD CONSTRAINT `auth_user_groups_group_id_97559544_fk_auth_group_id` FOREIGN KEY (`group_id`) REFERENCES `auth_group` (`id`); (params ())
DEBUG 2024-08-21 11:58:45,703 schema ALTER TABLE `auth_user_user_permissions` ADD CONSTRAINT `auth_user_user_permissions_user_id_permission_id_14a6b632_uniq` UNIQUE (`user_id`, `permission_id`); (params ())
DEBUG 2024-08-21 11:58:45,723 schema ALTER TABLE `auth_user_user_permissions` ADD CONSTRAINT `auth_user_user_permissions_user_id_a95ead1b_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); (params ())
DEBUG 2024-08-21 11:58:45,745 schema ALTER TABLE `auth_user_user_permissions` ADD CONSTRAINT `auth_user_user_permi_permission_id_1fbb5f2c_fk_auth_perm` FOREIGN KEY (`permission_id`) REFERENCES `auth_permission` (`id`); (params ())
DEBUG 2024-08-21 11:58:45,801 schema CREATE TABLE `django_admin_log` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `action_time` datetime(6) NOT NULL, `object_id` longtext NULL, `object_repr` varchar(200) NOT NULL, `action_flag` smallint UNSIGNED NOT NULL CHECK (`action_flag` >= 0), `change_message` longtext NOT NULL, `content_type_id` integer NULL, `user_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 11:58:45,851 schema ALTER TABLE `django_admin_log` ADD CONSTRAINT `django_admin_log_content_type_id_c4bce8eb_fk_django_co` FOREIGN KEY (`content_type_id`) REFERENCES `django_content_type` (`id`); (params ())
DEBUG 2024-08-21 11:58:45,884 schema ALTER TABLE `django_admin_log` ADD CONSTRAINT `django_admin_log_user_id_c564eba6_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); (params ())
DEBUG 2024-08-21 11:58:46,018 schema CREATE TABLE `app01_doctors` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `identity_num` varchar(64) NOT NULL, `name` varchar(20) NOT NULL, `title` varchar(50) NOT NULL, `department` varchar(20) NOT NULL, `research` varchar(150) NULL, `cost` numeric(5, 2) NOT NULL, `avatar` varchar(100) NULL, `avatar_name` varchar(128) NOT NULL); (params None)
DEBUG 2024-08-21 11:58:46,036 schema CREATE TABLE `app01_medicine` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(50) NOT NULL, `medicine_type` smallint NOT NULL, `symptom` varchar(200) NOT NULL, `price` numeric(5, 2) NOT NULL, `quantity` integer NOT NULL, `photo_name` varchar(128) NOT NULL); (params None)
DEBUG 2024-08-21 11:58:46,054 schema CREATE TABLE `app01_patients` (`identity` smallint NOT NULL, `identity_num` varchar(64) NOT NULL PRIMARY KEY, `name` varchar(20) NOT NULL, `health_insurance` smallint NOT NULL, `gender` smallint NOT NULL, `birthday` date NOT NULL, `phone_num` varchar(15) NOT NULL, `address` varchar(128) NOT NULL); (params None)
DEBUG 2024-08-21 11:58:46,071 schema CREATE TABLE `app01_user` (`type` smallint NOT NULL, `identity_num` varchar(64) NOT NULL PRIMARY KEY, `password` varchar(64) NOT NULL); (params None)
DEBUG 2024-08-21 11:58:46,089 schema CREATE TABLE `app01_treatment` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `queue_id` integer NOT NULL, `time` datetime(6) NOT NULL, `advice` varchar(256) NOT NULL, `medicine` longtext NOT NULL, `price` numeric(5, 2) NOT NULL, `doctor_id` bigint NOT NULL, `patient_id` varchar(64) NOT NULL); (params None)
DEBUG 2024-08-21 11:58:46,133 schema CREATE TABLE `app01_register` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `queue_id` integer NOT NULL, `time` datetime(6) NOT NULL, `position` varchar(128) NOT NULL, `doctor_id` bigint NOT NULL, `patient_id` varchar(64) NOT NULL, `register_id` varchar(64) NOT NULL); (params None)
DEBUG 2024-08-21 11:58:46,192 schema CREATE TABLE `app01_onduty` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `date` date NOT NULL, `time` smallint NOT NULL, `state` integer NOT NULL, `doctor_id` bigint NOT NULL); (params None)
DEBUG 2024-08-21 11:58:46,225 schema CREATE TABLE `app01_notice` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `msg_type` smallint NOT NULL, `time` datetime(6) NOT NULL, `isRead` bool NOT NULL, `doctor_id` bigint NOT NULL, `patient_id` varchar(64) NOT NULL, `register_id` bigint NULL, `registerMan_id` varchar(64) NULL, `treatment_id` bigint NULL); (params None)
DEBUG 2024-08-21 11:58:46,318 schema CREATE TABLE `app01_bill` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `type` smallint NOT NULL, `state` bool NOT NULL, `price` numeric(5, 2) NOT NULL, `patient_id` varchar(64) NULL, `register_id` bigint NULL, `treatment_id` bigint NULL); (params None)
DEBUG 2024-08-21 11:58:46,381 schema ALTER TABLE `app01_treatment` ADD CONSTRAINT `app01_treatment_doctor_id_a47beada_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 11:58:46,410 schema ALTER TABLE `app01_treatment` ADD CONSTRAINT `app01_treatment_patient_id_52a8e1e5_fk_app01_pat` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 11:58:46,439 schema ALTER TABLE `app01_register` ADD CONSTRAINT `app01_register_doctor_id_e0ea61dc_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 11:58:46,468 schema ALTER TABLE `app01_register` ADD CONSTRAINT `app01_register_patient_id_4a065a29_fk_app01_pat` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 11:58:46,497 schema ALTER TABLE `app01_register` ADD CONSTRAINT `app01_register_register_id_e85a8e5b_fk_app01_pat` FOREIGN KEY (`register_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 11:58:46,531 schema ALTER TABLE `app01_onduty` ADD CONSTRAINT `app01_onduty_doctor_id_9b012eb7_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 11:58:46,556 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_doctor_id_2d7f7104_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 11:58:46,585 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_patient_id_74974826_fk_app01_patients_identity_num` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 11:58:46,609 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_register_id_6c54784c_fk_app01_register_id` FOREIGN KEY (`register_id`) REFERENCES `app01_register` (`id`); (params ())
DEBUG 2024-08-21 11:58:46,640 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_registerMan_id_1bd9adce_fk_app01_pat` FOREIGN KEY (`registerMan_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 11:58:46,672 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_treatment_id_596ea92a_fk_app01_treatment_id` FOREIGN KEY (`treatment_id`) REFERENCES `app01_treatment` (`id`); (params ())
DEBUG 2024-08-21 11:58:46,709 schema ALTER TABLE `app01_bill` ADD CONSTRAINT `app01_bill_patient_id_96fe396a_fk_app01_patients_identity_num` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 11:58:46,739 schema ALTER TABLE `app01_bill` ADD CONSTRAINT `app01_bill_register_id_cf59300e_fk_app01_register_id` FOREIGN KEY (`register_id`) REFERENCES `app01_register` (`id`); (params ())
DEBUG 2024-08-21 11:58:46,779 schema ALTER TABLE `app01_bill` ADD CONSTRAINT `app01_bill_treatment_id_73ef4d98_fk_app01_treatment_id` FOREIGN KEY (`treatment_id`) REFERENCES `app01_treatment` (`id`); (params ())
DEBUG 2024-08-21 11:58:46,842 schema ALTER TABLE `django_content_type` MODIFY `name` varchar(100) NULL; (params [])
DEBUG 2024-08-21 11:58:46,911 schema ALTER TABLE `django_content_type` DROP COLUMN `name`; (params ())
DEBUG 2024-08-21 11:58:46,969 schema ALTER TABLE `auth_permission` MODIFY `name` varchar(255) NOT NULL; (params [])
DEBUG 2024-08-21 11:58:47,030 schema ALTER TABLE `auth_user` MODIFY `email` varchar(254) NOT NULL; (params [])
DEBUG 2024-08-21 11:58:47,124 schema ALTER TABLE `auth_user` MODIFY `last_login` datetime(6) NULL; (params [])
DEBUG 2024-08-21 11:58:47,246 schema ALTER TABLE `auth_user` MODIFY `username` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 11:58:47,308 schema ALTER TABLE `auth_user` MODIFY `last_name` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 11:58:47,374 schema ALTER TABLE `auth_group` MODIFY `name` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 11:58:47,511 schema ALTER TABLE `auth_user` MODIFY `first_name` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 11:58:47,578 schema CREATE TABLE `django_session` (`session_key` varchar(40) NOT NULL PRIMARY KEY, `session_data` longtext NOT NULL, `expire_date` datetime(6) NOT NULL); (params None)
DEBUG 2024-08-21 11:58:47,615 schema CREATE INDEX `django_session_expire_date_a5c62663` ON `django_session` (`expire_date`); (params ())
ERROR 2024-08-21 11:58:48,821 log Internal Server Error: /api/medicine/list/
Traceback (most recent call last):
  File "D:\anacoda\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\views\decorators\csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\views\generic\base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 509, in dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 480, in raise_uncaught_exception
    raise exc
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\86185\Desktop\SEGroup6\Ã¨Ã¨¾ÍÕï\Project\app01\views.py", line 927, in post
    action = json.loads(request.body)['action']
             ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
KeyError: 'action'
ERROR 2024-08-21 11:58:48,877 log Internal Server Error: /api/medicine/list/
Traceback (most recent call last):
  File "D:\anacoda\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\views\decorators\csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\views\generic\base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 509, in dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 480, in raise_uncaught_exception
    raise exc
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\86185\Desktop\SEGroup6\Ã¨Ã¨¾ÍÕï\Project\app01\views.py", line 927, in post
    action = json.loads(request.body)['action']
             ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
KeyError: 'action'
ERROR 2024-08-21 11:58:48,931 log Internal Server Error: /api/medicine/setData/
Traceback (most recent call last):
  File "D:\anacoda\Lib\site-packages\django\db\models\fields\__init__.py", line 2053, in get_prep_value
    return int(value)
           ^^^^^^^^^^
ValueError: invalid literal for int() with base 10: 'invalid_id'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\anacoda\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\views\decorators\csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\views\generic\base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 509, in dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 480, in raise_uncaught_exception
    raise exc
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\86185\Desktop\SEGroup6\Ã¨Ã¨¾ÍÕï\Project\app01\views.py", line 935, in post
    return self.alterMedicine(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\86185\Desktop\SEGroup6\Ã¨Ã¨¾ÍÕï\Project\app01\views.py", line 969, in alterMedicine
    medicine = Medicine.objects.get(id=data['id'])
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\manager.py", line 87, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\query.py", line 623, in get
    clone = self._chain() if self.query.combinator else self.filter(*args, **kwargs)
                                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\query.py", line 1436, in filter
    return self._filter_or_exclude(False, args, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\query.py", line 1454, in _filter_or_exclude
    clone._filter_or_exclude_inplace(negate, args, kwargs)
  File "D:\anacoda\Lib\site-packages\django\db\models\query.py", line 1461, in _filter_or_exclude_inplace
    self._query.add_q(Q(*args, **kwargs))
  File "D:\anacoda\Lib\site-packages\django\db\models\sql\query.py", line 1545, in add_q
    clause, _ = self._add_q(q_object, self.used_aliases)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\sql\query.py", line 1576, in _add_q
    child_clause, needed_inner = self.build_filter(
                                 ^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\sql\query.py", line 1491, in build_filter
    condition = self.build_lookup(lookups, col, value)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\sql\query.py", line 1318, in build_lookup
    lookup = lookup_class(lhs, rhs)
             ^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\lookups.py", line 27, in __init__
    self.rhs = self.get_prep_lookup()
               ^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\lookups.py", line 341, in get_prep_lookup
    return super().get_prep_lookup()
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\lookups.py", line 85, in get_prep_lookup
    return self.lhs.output_field.get_prep_value(self.rhs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\fields\__init__.py", line 2055, in get_prep_value
    raise e.__class__(
ValueError: Field 'id' expected a number but got 'invalid_id'.
ERROR 2024-08-21 11:58:49,010 log Internal Server Error: /api/medicine/setData/
Traceback (most recent call last):
  File "D:\anacoda\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\views\decorators\csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\views\generic\base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 509, in dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 480, in raise_uncaught_exception
    raise exc
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\86185\Desktop\SEGroup6\Ã¨Ã¨¾ÍÕï\Project\app01\views.py", line 935, in post
    return self.alterMedicine(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\86185\Desktop\SEGroup6\Ã¨Ã¨¾ÍÕï\Project\app01\views.py", line 971, in alterMedicine
    medicine.medicine_type = data['type']
                             ~~~~^^^^^^^^
KeyError: 'type'
ERROR 2024-08-21 11:58:49,075 log Internal Server Error: /api/medicine/delete/
Traceback (most recent call last):
  File "D:\anacoda\Lib\site-packages\django\db\models\fields\__init__.py", line 2053, in get_prep_value
    return int(value)
           ^^^^^^^^^^
ValueError: invalid literal for int() with base 10: 'invalid_id'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\anacoda\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\views\decorators\csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\views\generic\base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 509, in dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 480, in raise_uncaught_exception
    raise exc
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\86185\Desktop\SEGroup6\Ã¨Ã¨¾ÍÕï\Project\app01\views.py", line 929, in post
    return self.deleteMedicine(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\86185\Desktop\SEGroup6\Ã¨Ã¨¾ÍÕï\Project\app01\views.py", line 941, in deleteMedicine
    Medicine.objects.get(id=id).delete()
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\manager.py", line 87, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\query.py", line 623, in get
    clone = self._chain() if self.query.combinator else self.filter(*args, **kwargs)
                                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\query.py", line 1436, in filter
    return self._filter_or_exclude(False, args, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\query.py", line 1454, in _filter_or_exclude
    clone._filter_or_exclude_inplace(negate, args, kwargs)
  File "D:\anacoda\Lib\site-packages\django\db\models\query.py", line 1461, in _filter_or_exclude_inplace
    self._query.add_q(Q(*args, **kwargs))
  File "D:\anacoda\Lib\site-packages\django\db\models\sql\query.py", line 1545, in add_q
    clause, _ = self._add_q(q_object, self.used_aliases)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\sql\query.py", line 1576, in _add_q
    child_clause, needed_inner = self.build_filter(
                                 ^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\sql\query.py", line 1491, in build_filter
    condition = self.build_lookup(lookups, col, value)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\sql\query.py", line 1318, in build_lookup
    lookup = lookup_class(lhs, rhs)
             ^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\lookups.py", line 27, in __init__
    self.rhs = self.get_prep_lookup()
               ^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\lookups.py", line 341, in get_prep_lookup
    return super().get_prep_lookup()
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\lookups.py", line 85, in get_prep_lookup
    return self.lhs.output_field.get_prep_value(self.rhs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\fields\__init__.py", line 2055, in get_prep_value
    raise e.__class__(
ValueError: Field 'id' expected a number but got 'invalid_id'.
WARNING 2024-08-21 11:58:49,378 log Bad Request: /api/medicine/list/
DEBUG 2024-08-21 11:59:35,484 schema CREATE TABLE `django_migrations` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `app` varchar(255) NOT NULL, `name` varchar(255) NOT NULL, `applied` datetime(6) NOT NULL); (params None)
DEBUG 2024-08-21 11:59:35,511 schema CREATE TABLE `django_content_type` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(100) NOT NULL, `app_label` varchar(100) NOT NULL, `model` varchar(100) NOT NULL); (params None)
DEBUG 2024-08-21 11:59:35,534 schema ALTER TABLE `django_content_type` ADD CONSTRAINT `django_content_type_app_label_model_76bd3d3b_uniq` UNIQUE (`app_label`, `model`); (params ())
DEBUG 2024-08-21 11:59:35,595 schema CREATE TABLE `auth_permission` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(50) NOT NULL, `content_type_id` integer NOT NULL, `codename` varchar(100) NOT NULL); (params None)
DEBUG 2024-08-21 11:59:35,638 schema CREATE TABLE `auth_group` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(80) NOT NULL UNIQUE); (params None)
DEBUG 2024-08-21 11:59:35,663 schema CREATE TABLE `auth_group_permissions` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `group_id` integer NOT NULL, `permission_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 11:59:35,727 schema CREATE TABLE `auth_user` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `password` varchar(128) NOT NULL, `last_login` datetime(6) NOT NULL, `is_superuser` bool NOT NULL, `username` varchar(30) NOT NULL UNIQUE, `first_name` varchar(30) NOT NULL, `last_name` varchar(30) NOT NULL, `email` varchar(75) NOT NULL, `is_staff` bool NOT NULL, `is_active` bool NOT NULL, `date_joined` datetime(6) NOT NULL); (params None)
DEBUG 2024-08-21 11:59:35,749 schema CREATE TABLE `auth_user_groups` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `user_id` integer NOT NULL, `group_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 11:59:35,832 schema CREATE TABLE `auth_user_user_permissions` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `user_id` integer NOT NULL, `permission_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 11:59:35,897 schema ALTER TABLE `auth_permission` ADD CONSTRAINT `auth_permission_content_type_id_codename_01ab375a_uniq` UNIQUE (`content_type_id`, `codename`); (params ())
DEBUG 2024-08-21 11:59:35,924 schema ALTER TABLE `auth_permission` ADD CONSTRAINT `auth_permission_content_type_id_2f476e4b_fk_django_co` FOREIGN KEY (`content_type_id`) REFERENCES `django_content_type` (`id`); (params ())
DEBUG 2024-08-21 11:59:35,948 schema ALTER TABLE `auth_group_permissions` ADD CONSTRAINT `auth_group_permissions_group_id_permission_id_0cd325b0_uniq` UNIQUE (`group_id`, `permission_id`); (params ())
DEBUG 2024-08-21 11:59:35,963 schema ALTER TABLE `auth_group_permissions` ADD CONSTRAINT `auth_group_permissions_group_id_b120cbf9_fk_auth_group_id` FOREIGN KEY (`group_id`) REFERENCES `auth_group` (`id`); (params ())
DEBUG 2024-08-21 11:59:35,990 schema ALTER TABLE `auth_group_permissions` ADD CONSTRAINT `auth_group_permissio_permission_id_84c5c92e_fk_auth_perm` FOREIGN KEY (`permission_id`) REFERENCES `auth_permission` (`id`); (params ())
DEBUG 2024-08-21 11:59:36,019 schema ALTER TABLE `auth_user_groups` ADD CONSTRAINT `auth_user_groups_user_id_group_id_94350c0c_uniq` UNIQUE (`user_id`, `group_id`); (params ())
DEBUG 2024-08-21 11:59:36,039 schema ALTER TABLE `auth_user_groups` ADD CONSTRAINT `auth_user_groups_user_id_6a12ed8b_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); (params ())
DEBUG 2024-08-21 11:59:36,063 schema ALTER TABLE `auth_user_groups` ADD CONSTRAINT `auth_user_groups_group_id_97559544_fk_auth_group_id` FOREIGN KEY (`group_id`) REFERENCES `auth_group` (`id`); (params ())
DEBUG 2024-08-21 11:59:36,090 schema ALTER TABLE `auth_user_user_permissions` ADD CONSTRAINT `auth_user_user_permissions_user_id_permission_id_14a6b632_uniq` UNIQUE (`user_id`, `permission_id`); (params ())
DEBUG 2024-08-21 11:59:36,112 schema ALTER TABLE `auth_user_user_permissions` ADD CONSTRAINT `auth_user_user_permissions_user_id_a95ead1b_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); (params ())
DEBUG 2024-08-21 11:59:36,138 schema ALTER TABLE `auth_user_user_permissions` ADD CONSTRAINT `auth_user_user_permi_permission_id_1fbb5f2c_fk_auth_perm` FOREIGN KEY (`permission_id`) REFERENCES `auth_permission` (`id`); (params ())
DEBUG 2024-08-21 11:59:36,198 schema CREATE TABLE `django_admin_log` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `action_time` datetime(6) NOT NULL, `object_id` longtext NULL, `object_repr` varchar(200) NOT NULL, `action_flag` smallint UNSIGNED NOT NULL CHECK (`action_flag` >= 0), `change_message` longtext NOT NULL, `content_type_id` integer NULL, `user_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 11:59:36,247 schema ALTER TABLE `django_admin_log` ADD CONSTRAINT `django_admin_log_content_type_id_c4bce8eb_fk_django_co` FOREIGN KEY (`content_type_id`) REFERENCES `django_content_type` (`id`); (params ())
DEBUG 2024-08-21 11:59:36,279 schema ALTER TABLE `django_admin_log` ADD CONSTRAINT `django_admin_log_user_id_c564eba6_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); (params ())
DEBUG 2024-08-21 11:59:36,420 schema CREATE TABLE `app01_doctors` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `identity_num` varchar(64) NOT NULL, `name` varchar(20) NOT NULL, `title` varchar(50) NOT NULL, `department` varchar(20) NOT NULL, `research` varchar(150) NULL, `cost` numeric(5, 2) NOT NULL, `avatar` varchar(100) NULL, `avatar_name` varchar(128) NOT NULL); (params None)
DEBUG 2024-08-21 11:59:36,437 schema CREATE TABLE `app01_medicine` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(50) NOT NULL, `medicine_type` smallint NOT NULL, `symptom` varchar(200) NOT NULL, `price` numeric(5, 2) NOT NULL, `quantity` integer NOT NULL, `photo_name` varchar(128) NOT NULL); (params None)
DEBUG 2024-08-21 11:59:36,454 schema CREATE TABLE `app01_patients` (`identity` smallint NOT NULL, `identity_num` varchar(64) NOT NULL PRIMARY KEY, `name` varchar(20) NOT NULL, `health_insurance` smallint NOT NULL, `gender` smallint NOT NULL, `birthday` date NOT NULL, `phone_num` varchar(15) NOT NULL, `address` varchar(128) NOT NULL); (params None)
DEBUG 2024-08-21 11:59:36,471 schema CREATE TABLE `app01_user` (`type` smallint NOT NULL, `identity_num` varchar(64) NOT NULL PRIMARY KEY, `password` varchar(64) NOT NULL); (params None)
DEBUG 2024-08-21 11:59:36,496 schema CREATE TABLE `app01_treatment` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `queue_id` integer NOT NULL, `time` datetime(6) NOT NULL, `advice` varchar(256) NOT NULL, `medicine` longtext NOT NULL, `price` numeric(5, 2) NOT NULL, `doctor_id` bigint NOT NULL, `patient_id` varchar(64) NOT NULL); (params None)
DEBUG 2024-08-21 11:59:36,547 schema CREATE TABLE `app01_register` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `queue_id` integer NOT NULL, `time` datetime(6) NOT NULL, `position` varchar(128) NOT NULL, `doctor_id` bigint NOT NULL, `patient_id` varchar(64) NOT NULL, `register_id` varchar(64) NOT NULL); (params None)
DEBUG 2024-08-21 11:59:36,607 schema CREATE TABLE `app01_onduty` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `date` date NOT NULL, `time` smallint NOT NULL, `state` integer NOT NULL, `doctor_id` bigint NOT NULL); (params None)
DEBUG 2024-08-21 11:59:36,644 schema CREATE TABLE `app01_notice` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `msg_type` smallint NOT NULL, `time` datetime(6) NOT NULL, `isRead` bool NOT NULL, `doctor_id` bigint NOT NULL, `patient_id` varchar(64) NOT NULL, `register_id` bigint NULL, `registerMan_id` varchar(64) NULL, `treatment_id` bigint NULL); (params None)
DEBUG 2024-08-21 11:59:36,729 schema CREATE TABLE `app01_bill` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `type` smallint NOT NULL, `state` bool NOT NULL, `price` numeric(5, 2) NOT NULL, `patient_id` varchar(64) NULL, `register_id` bigint NULL, `treatment_id` bigint NULL); (params None)
DEBUG 2024-08-21 11:59:36,785 schema ALTER TABLE `app01_treatment` ADD CONSTRAINT `app01_treatment_doctor_id_a47beada_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 11:59:36,811 schema ALTER TABLE `app01_treatment` ADD CONSTRAINT `app01_treatment_patient_id_52a8e1e5_fk_app01_pat` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 11:59:36,854 schema ALTER TABLE `app01_register` ADD CONSTRAINT `app01_register_doctor_id_e0ea61dc_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 11:59:36,880 schema ALTER TABLE `app01_register` ADD CONSTRAINT `app01_register_patient_id_4a065a29_fk_app01_pat` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 11:59:36,909 schema ALTER TABLE `app01_register` ADD CONSTRAINT `app01_register_register_id_e85a8e5b_fk_app01_pat` FOREIGN KEY (`register_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 11:59:36,938 schema ALTER TABLE `app01_onduty` ADD CONSTRAINT `app01_onduty_doctor_id_9b012eb7_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 11:59:36,962 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_doctor_id_2d7f7104_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 11:59:36,987 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_patient_id_74974826_fk_app01_patients_identity_num` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 11:59:37,014 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_register_id_6c54784c_fk_app01_register_id` FOREIGN KEY (`register_id`) REFERENCES `app01_register` (`id`); (params ())
DEBUG 2024-08-21 11:59:37,049 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_registerMan_id_1bd9adce_fk_app01_pat` FOREIGN KEY (`registerMan_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 11:59:37,081 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_treatment_id_596ea92a_fk_app01_treatment_id` FOREIGN KEY (`treatment_id`) REFERENCES `app01_treatment` (`id`); (params ())
DEBUG 2024-08-21 11:59:37,113 schema ALTER TABLE `app01_bill` ADD CONSTRAINT `app01_bill_patient_id_96fe396a_fk_app01_patients_identity_num` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 11:59:37,140 schema ALTER TABLE `app01_bill` ADD CONSTRAINT `app01_bill_register_id_cf59300e_fk_app01_register_id` FOREIGN KEY (`register_id`) REFERENCES `app01_register` (`id`); (params ())
DEBUG 2024-08-21 11:59:37,171 schema ALTER TABLE `app01_bill` ADD CONSTRAINT `app01_bill_treatment_id_73ef4d98_fk_app01_treatment_id` FOREIGN KEY (`treatment_id`) REFERENCES `app01_treatment` (`id`); (params ())
DEBUG 2024-08-21 11:59:37,242 schema ALTER TABLE `django_content_type` MODIFY `name` varchar(100) NULL; (params [])
DEBUG 2024-08-21 11:59:37,323 schema ALTER TABLE `django_content_type` DROP COLUMN `name`; (params ())
DEBUG 2024-08-21 11:59:37,395 schema ALTER TABLE `auth_permission` MODIFY `name` varchar(255) NOT NULL; (params [])
DEBUG 2024-08-21 11:59:37,476 schema ALTER TABLE `auth_user` MODIFY `email` varchar(254) NOT NULL; (params [])
DEBUG 2024-08-21 11:59:37,600 schema ALTER TABLE `auth_user` MODIFY `last_login` datetime(6) NULL; (params [])
DEBUG 2024-08-21 11:59:37,813 schema ALTER TABLE `auth_user` MODIFY `username` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 11:59:37,913 schema ALTER TABLE `auth_user` MODIFY `last_name` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 11:59:38,014 schema ALTER TABLE `auth_group` MODIFY `name` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 11:59:38,204 schema ALTER TABLE `auth_user` MODIFY `first_name` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 11:59:38,284 schema CREATE TABLE `django_session` (`session_key` varchar(40) NOT NULL PRIMARY KEY, `session_data` longtext NOT NULL, `expire_date` datetime(6) NOT NULL); (params None)
DEBUG 2024-08-21 11:59:38,328 schema CREATE INDEX `django_session_expire_date_a5c62663` ON `django_session` (`expire_date`); (params ())
ERROR 2024-08-21 11:59:39,860 log Internal Server Error: /api/medicine/list/
Traceback (most recent call last):
  File "D:\anacoda\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\views\decorators\csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\views\generic\base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 509, in dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 480, in raise_uncaught_exception
    raise exc
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\86185\Desktop\SEGroup6\Ã¨Ã¨¾ÍÕï\Project\app01\views.py", line 927, in post
    action = json.loads(request.body)['action']
             ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
KeyError: 'action'
ERROR 2024-08-21 11:59:39,941 log Internal Server Error: /api/medicine/list/
Traceback (most recent call last):
  File "D:\anacoda\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\views\decorators\csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\views\generic\base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 509, in dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 480, in raise_uncaught_exception
    raise exc
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\86185\Desktop\SEGroup6\Ã¨Ã¨¾ÍÕï\Project\app01\views.py", line 927, in post
    action = json.loads(request.body)['action']
             ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
KeyError: 'action'
ERROR 2024-08-21 11:59:40,018 log Internal Server Error: /api/medicine/setData/
Traceback (most recent call last):
  File "D:\anacoda\Lib\site-packages\django\db\models\fields\__init__.py", line 2053, in get_prep_value
    return int(value)
           ^^^^^^^^^^
ValueError: invalid literal for int() with base 10: 'invalid_id'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\anacoda\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\views\decorators\csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\views\generic\base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 509, in dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 480, in raise_uncaught_exception
    raise exc
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\86185\Desktop\SEGroup6\Ã¨Ã¨¾ÍÕï\Project\app01\views.py", line 935, in post
    return self.alterMedicine(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\86185\Desktop\SEGroup6\Ã¨Ã¨¾ÍÕï\Project\app01\views.py", line 969, in alterMedicine
    medicine = Medicine.objects.get(id=data['id'])
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\manager.py", line 87, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\query.py", line 623, in get
    clone = self._chain() if self.query.combinator else self.filter(*args, **kwargs)
                                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\query.py", line 1436, in filter
    return self._filter_or_exclude(False, args, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\query.py", line 1454, in _filter_or_exclude
    clone._filter_or_exclude_inplace(negate, args, kwargs)
  File "D:\anacoda\Lib\site-packages\django\db\models\query.py", line 1461, in _filter_or_exclude_inplace
    self._query.add_q(Q(*args, **kwargs))
  File "D:\anacoda\Lib\site-packages\django\db\models\sql\query.py", line 1545, in add_q
    clause, _ = self._add_q(q_object, self.used_aliases)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\sql\query.py", line 1576, in _add_q
    child_clause, needed_inner = self.build_filter(
                                 ^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\sql\query.py", line 1491, in build_filter
    condition = self.build_lookup(lookups, col, value)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\sql\query.py", line 1318, in build_lookup
    lookup = lookup_class(lhs, rhs)
             ^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\lookups.py", line 27, in __init__
    self.rhs = self.get_prep_lookup()
               ^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\lookups.py", line 341, in get_prep_lookup
    return super().get_prep_lookup()
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\lookups.py", line 85, in get_prep_lookup
    return self.lhs.output_field.get_prep_value(self.rhs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\fields\__init__.py", line 2055, in get_prep_value
    raise e.__class__(
ValueError: Field 'id' expected a number but got 'invalid_id'.
ERROR 2024-08-21 11:59:40,111 log Internal Server Error: /api/medicine/setData/
Traceback (most recent call last):
  File "D:\anacoda\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\views\decorators\csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\views\generic\base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 509, in dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 480, in raise_uncaught_exception
    raise exc
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\86185\Desktop\SEGroup6\Ã¨Ã¨¾ÍÕï\Project\app01\views.py", line 935, in post
    return self.alterMedicine(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\86185\Desktop\SEGroup6\Ã¨Ã¨¾ÍÕï\Project\app01\views.py", line 971, in alterMedicine
    medicine.medicine_type = data['type']
                             ~~~~^^^^^^^^
KeyError: 'type'
ERROR 2024-08-21 11:59:40,173 log Internal Server Error: /api/medicine/delete/
Traceback (most recent call last):
  File "D:\anacoda\Lib\site-packages\django\db\models\fields\__init__.py", line 2053, in get_prep_value
    return int(value)
           ^^^^^^^^^^
ValueError: invalid literal for int() with base 10: 'invalid_id'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\anacoda\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\views\decorators\csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\views\generic\base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 509, in dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 480, in raise_uncaught_exception
    raise exc
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\86185\Desktop\SEGroup6\Ã¨Ã¨¾ÍÕï\Project\app01\views.py", line 929, in post
    return self.deleteMedicine(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\86185\Desktop\SEGroup6\Ã¨Ã¨¾ÍÕï\Project\app01\views.py", line 941, in deleteMedicine
    Medicine.objects.get(id=id).delete()
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\manager.py", line 87, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\query.py", line 623, in get
    clone = self._chain() if self.query.combinator else self.filter(*args, **kwargs)
                                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\query.py", line 1436, in filter
    return self._filter_or_exclude(False, args, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\query.py", line 1454, in _filter_or_exclude
    clone._filter_or_exclude_inplace(negate, args, kwargs)
  File "D:\anacoda\Lib\site-packages\django\db\models\query.py", line 1461, in _filter_or_exclude_inplace
    self._query.add_q(Q(*args, **kwargs))
  File "D:\anacoda\Lib\site-packages\django\db\models\sql\query.py", line 1545, in add_q
    clause, _ = self._add_q(q_object, self.used_aliases)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\sql\query.py", line 1576, in _add_q
    child_clause, needed_inner = self.build_filter(
                                 ^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\sql\query.py", line 1491, in build_filter
    condition = self.build_lookup(lookups, col, value)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\sql\query.py", line 1318, in build_lookup
    lookup = lookup_class(lhs, rhs)
             ^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\lookups.py", line 27, in __init__
    self.rhs = self.get_prep_lookup()
               ^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\lookups.py", line 341, in get_prep_lookup
    return super().get_prep_lookup()
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\lookups.py", line 85, in get_prep_lookup
    return self.lhs.output_field.get_prep_value(self.rhs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\fields\__init__.py", line 2055, in get_prep_value
    raise e.__class__(
ValueError: Field 'id' expected a number but got 'invalid_id'.
WARNING 2024-08-21 11:59:40,605 log Bad Request: /api/medicine/list/
DEBUG 2024-08-21 12:00:08,528 schema CREATE TABLE `django_migrations` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `app` varchar(255) NOT NULL, `name` varchar(255) NOT NULL, `applied` datetime(6) NOT NULL); (params None)
DEBUG 2024-08-21 12:00:08,545 schema CREATE TABLE `django_content_type` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(100) NOT NULL, `app_label` varchar(100) NOT NULL, `model` varchar(100) NOT NULL); (params None)
DEBUG 2024-08-21 12:00:08,564 schema ALTER TABLE `django_content_type` ADD CONSTRAINT `django_content_type_app_label_model_76bd3d3b_uniq` UNIQUE (`app_label`, `model`); (params ())
DEBUG 2024-08-21 12:00:08,615 schema CREATE TABLE `auth_permission` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(50) NOT NULL, `content_type_id` integer NOT NULL, `codename` varchar(100) NOT NULL); (params None)
DEBUG 2024-08-21 12:00:08,643 schema CREATE TABLE `auth_group` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(80) NOT NULL UNIQUE); (params None)
DEBUG 2024-08-21 12:00:08,661 schema CREATE TABLE `auth_group_permissions` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `group_id` integer NOT NULL, `permission_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 12:00:08,710 schema CREATE TABLE `auth_user` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `password` varchar(128) NOT NULL, `last_login` datetime(6) NOT NULL, `is_superuser` bool NOT NULL, `username` varchar(30) NOT NULL UNIQUE, `first_name` varchar(30) NOT NULL, `last_name` varchar(30) NOT NULL, `email` varchar(75) NOT NULL, `is_staff` bool NOT NULL, `is_active` bool NOT NULL, `date_joined` datetime(6) NOT NULL); (params None)
DEBUG 2024-08-21 12:00:08,731 schema CREATE TABLE `auth_user_groups` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `user_id` integer NOT NULL, `group_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 12:00:08,775 schema CREATE TABLE `auth_user_user_permissions` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `user_id` integer NOT NULL, `permission_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 12:00:08,819 schema ALTER TABLE `auth_permission` ADD CONSTRAINT `auth_permission_content_type_id_codename_01ab375a_uniq` UNIQUE (`content_type_id`, `codename`); (params ())
DEBUG 2024-08-21 12:00:08,836 schema ALTER TABLE `auth_permission` ADD CONSTRAINT `auth_permission_content_type_id_2f476e4b_fk_django_co` FOREIGN KEY (`content_type_id`) REFERENCES `django_content_type` (`id`); (params ())
DEBUG 2024-08-21 12:00:08,860 schema ALTER TABLE `auth_group_permissions` ADD CONSTRAINT `auth_group_permissions_group_id_permission_id_0cd325b0_uniq` UNIQUE (`group_id`, `permission_id`); (params ())
DEBUG 2024-08-21 12:00:08,879 schema ALTER TABLE `auth_group_permissions` ADD CONSTRAINT `auth_group_permissions_group_id_b120cbf9_fk_auth_group_id` FOREIGN KEY (`group_id`) REFERENCES `auth_group` (`id`); (params ())
DEBUG 2024-08-21 12:00:08,902 schema ALTER TABLE `auth_group_permissions` ADD CONSTRAINT `auth_group_permissio_permission_id_84c5c92e_fk_auth_perm` FOREIGN KEY (`permission_id`) REFERENCES `auth_permission` (`id`); (params ())
DEBUG 2024-08-21 12:00:08,930 schema ALTER TABLE `auth_user_groups` ADD CONSTRAINT `auth_user_groups_user_id_group_id_94350c0c_uniq` UNIQUE (`user_id`, `group_id`); (params ())
DEBUG 2024-08-21 12:00:08,949 schema ALTER TABLE `auth_user_groups` ADD CONSTRAINT `auth_user_groups_user_id_6a12ed8b_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); (params ())
DEBUG 2024-08-21 12:00:08,979 schema ALTER TABLE `auth_user_groups` ADD CONSTRAINT `auth_user_groups_group_id_97559544_fk_auth_group_id` FOREIGN KEY (`group_id`) REFERENCES `auth_group` (`id`); (params ())
DEBUG 2024-08-21 12:00:09,005 schema ALTER TABLE `auth_user_user_permissions` ADD CONSTRAINT `auth_user_user_permissions_user_id_permission_id_14a6b632_uniq` UNIQUE (`user_id`, `permission_id`); (params ())
DEBUG 2024-08-21 12:00:09,023 schema ALTER TABLE `auth_user_user_permissions` ADD CONSTRAINT `auth_user_user_permissions_user_id_a95ead1b_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); (params ())
DEBUG 2024-08-21 12:00:09,050 schema ALTER TABLE `auth_user_user_permissions` ADD CONSTRAINT `auth_user_user_permi_permission_id_1fbb5f2c_fk_auth_perm` FOREIGN KEY (`permission_id`) REFERENCES `auth_permission` (`id`); (params ())
DEBUG 2024-08-21 12:00:09,118 schema CREATE TABLE `django_admin_log` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `action_time` datetime(6) NOT NULL, `object_id` longtext NULL, `object_repr` varchar(200) NOT NULL, `action_flag` smallint UNSIGNED NOT NULL CHECK (`action_flag` >= 0), `change_message` longtext NOT NULL, `content_type_id` integer NULL, `user_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 12:00:09,161 schema ALTER TABLE `django_admin_log` ADD CONSTRAINT `django_admin_log_content_type_id_c4bce8eb_fk_django_co` FOREIGN KEY (`content_type_id`) REFERENCES `django_content_type` (`id`); (params ())
DEBUG 2024-08-21 12:00:09,192 schema ALTER TABLE `django_admin_log` ADD CONSTRAINT `django_admin_log_user_id_c564eba6_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); (params ())
DEBUG 2024-08-21 12:00:09,316 schema CREATE TABLE `app01_doctors` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `identity_num` varchar(64) NOT NULL, `name` varchar(20) NOT NULL, `title` varchar(50) NOT NULL, `department` varchar(20) NOT NULL, `research` varchar(150) NULL, `cost` numeric(5, 2) NOT NULL, `avatar` varchar(100) NULL, `avatar_name` varchar(128) NOT NULL); (params None)
DEBUG 2024-08-21 12:00:09,336 schema CREATE TABLE `app01_medicine` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(50) NOT NULL, `medicine_type` smallint NOT NULL, `symptom` varchar(200) NOT NULL, `price` numeric(5, 2) NOT NULL, `quantity` integer NOT NULL, `photo_name` varchar(128) NOT NULL); (params None)
DEBUG 2024-08-21 12:00:09,354 schema CREATE TABLE `app01_patients` (`identity` smallint NOT NULL, `identity_num` varchar(64) NOT NULL PRIMARY KEY, `name` varchar(20) NOT NULL, `health_insurance` smallint NOT NULL, `gender` smallint NOT NULL, `birthday` date NOT NULL, `phone_num` varchar(15) NOT NULL, `address` varchar(128) NOT NULL); (params None)
DEBUG 2024-08-21 12:00:09,371 schema CREATE TABLE `app01_user` (`type` smallint NOT NULL, `identity_num` varchar(64) NOT NULL PRIMARY KEY, `password` varchar(64) NOT NULL); (params None)
DEBUG 2024-08-21 12:00:09,390 schema CREATE TABLE `app01_treatment` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `queue_id` integer NOT NULL, `time` datetime(6) NOT NULL, `advice` varchar(256) NOT NULL, `medicine` longtext NOT NULL, `price` numeric(5, 2) NOT NULL, `doctor_id` bigint NOT NULL, `patient_id` varchar(64) NOT NULL); (params None)
DEBUG 2024-08-21 12:00:09,439 schema CREATE TABLE `app01_register` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `queue_id` integer NOT NULL, `time` datetime(6) NOT NULL, `position` varchar(128) NOT NULL, `doctor_id` bigint NOT NULL, `patient_id` varchar(64) NOT NULL, `register_id` varchar(64) NOT NULL); (params None)
DEBUG 2024-08-21 12:00:09,499 schema CREATE TABLE `app01_onduty` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `date` date NOT NULL, `time` smallint NOT NULL, `state` integer NOT NULL, `doctor_id` bigint NOT NULL); (params None)
DEBUG 2024-08-21 12:00:09,531 schema CREATE TABLE `app01_notice` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `msg_type` smallint NOT NULL, `time` datetime(6) NOT NULL, `isRead` bool NOT NULL, `doctor_id` bigint NOT NULL, `patient_id` varchar(64) NOT NULL, `register_id` bigint NULL, `registerMan_id` varchar(64) NULL, `treatment_id` bigint NULL); (params None)
DEBUG 2024-08-21 12:00:09,621 schema CREATE TABLE `app01_bill` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `type` smallint NOT NULL, `state` bool NOT NULL, `price` numeric(5, 2) NOT NULL, `patient_id` varchar(64) NULL, `register_id` bigint NULL, `treatment_id` bigint NULL); (params None)
DEBUG 2024-08-21 12:00:09,676 schema ALTER TABLE `app01_treatment` ADD CONSTRAINT `app01_treatment_doctor_id_a47beada_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 12:00:09,704 schema ALTER TABLE `app01_treatment` ADD CONSTRAINT `app01_treatment_patient_id_52a8e1e5_fk_app01_pat` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 12:00:09,733 schema ALTER TABLE `app01_register` ADD CONSTRAINT `app01_register_doctor_id_e0ea61dc_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 12:00:09,758 schema ALTER TABLE `app01_register` ADD CONSTRAINT `app01_register_patient_id_4a065a29_fk_app01_pat` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 12:00:09,788 schema ALTER TABLE `app01_register` ADD CONSTRAINT `app01_register_register_id_e85a8e5b_fk_app01_pat` FOREIGN KEY (`register_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 12:00:09,818 schema ALTER TABLE `app01_onduty` ADD CONSTRAINT `app01_onduty_doctor_id_9b012eb7_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 12:00:09,842 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_doctor_id_2d7f7104_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 12:00:09,867 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_patient_id_74974826_fk_app01_patients_identity_num` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 12:00:09,893 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_register_id_6c54784c_fk_app01_register_id` FOREIGN KEY (`register_id`) REFERENCES `app01_register` (`id`); (params ())
DEBUG 2024-08-21 12:00:09,922 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_registerMan_id_1bd9adce_fk_app01_pat` FOREIGN KEY (`registerMan_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 12:00:09,951 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_treatment_id_596ea92a_fk_app01_treatment_id` FOREIGN KEY (`treatment_id`) REFERENCES `app01_treatment` (`id`); (params ())
DEBUG 2024-08-21 12:00:09,981 schema ALTER TABLE `app01_bill` ADD CONSTRAINT `app01_bill_patient_id_96fe396a_fk_app01_patients_identity_num` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 12:00:10,005 schema ALTER TABLE `app01_bill` ADD CONSTRAINT `app01_bill_register_id_cf59300e_fk_app01_register_id` FOREIGN KEY (`register_id`) REFERENCES `app01_register` (`id`); (params ())
DEBUG 2024-08-21 12:00:10,032 schema ALTER TABLE `app01_bill` ADD CONSTRAINT `app01_bill_treatment_id_73ef4d98_fk_app01_treatment_id` FOREIGN KEY (`treatment_id`) REFERENCES `app01_treatment` (`id`); (params ())
DEBUG 2024-08-21 12:00:10,093 schema ALTER TABLE `django_content_type` MODIFY `name` varchar(100) NULL; (params [])
DEBUG 2024-08-21 12:00:10,170 schema ALTER TABLE `django_content_type` DROP COLUMN `name`; (params ())
DEBUG 2024-08-21 12:00:10,232 schema ALTER TABLE `auth_permission` MODIFY `name` varchar(255) NOT NULL; (params [])
DEBUG 2024-08-21 12:00:10,293 schema ALTER TABLE `auth_user` MODIFY `email` varchar(254) NOT NULL; (params [])
DEBUG 2024-08-21 12:00:10,382 schema ALTER TABLE `auth_user` MODIFY `last_login` datetime(6) NULL; (params [])
DEBUG 2024-08-21 12:00:10,508 schema ALTER TABLE `auth_user` MODIFY `username` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 12:00:10,578 schema ALTER TABLE `auth_user` MODIFY `last_name` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 12:00:10,641 schema ALTER TABLE `auth_group` MODIFY `name` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 12:00:10,775 schema ALTER TABLE `auth_user` MODIFY `first_name` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 12:00:10,834 schema CREATE TABLE `django_session` (`session_key` varchar(40) NOT NULL PRIMARY KEY, `session_data` longtext NOT NULL, `expire_date` datetime(6) NOT NULL); (params None)
DEBUG 2024-08-21 12:00:10,866 schema CREATE INDEX `django_session_expire_date_a5c62663` ON `django_session` (`expire_date`); (params ())
ERROR 2024-08-21 12:00:12,122 log Internal Server Error: /api/medicine/list/
Traceback (most recent call last):
  File "D:\anacoda\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\views\decorators\csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\views\generic\base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 509, in dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 480, in raise_uncaught_exception
    raise exc
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\86185\Desktop\SEGroup6\Ã¨Ã¨¾ÍÕï\Project\app01\views.py", line 927, in post
    action = json.loads(request.body)['action']
             ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
KeyError: 'action'
ERROR 2024-08-21 12:00:12,185 log Internal Server Error: /api/medicine/list/
Traceback (most recent call last):
  File "D:\anacoda\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\views\decorators\csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\views\generic\base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 509, in dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 480, in raise_uncaught_exception
    raise exc
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\86185\Desktop\SEGroup6\Ã¨Ã¨¾ÍÕï\Project\app01\views.py", line 927, in post
    action = json.loads(request.body)['action']
             ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
KeyError: 'action'
ERROR 2024-08-21 12:00:12,243 log Internal Server Error: /api/medicine/setData/
Traceback (most recent call last):
  File "D:\anacoda\Lib\site-packages\django\db\models\fields\__init__.py", line 2053, in get_prep_value
    return int(value)
           ^^^^^^^^^^
ValueError: invalid literal for int() with base 10: 'invalid_id'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\anacoda\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\views\decorators\csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\views\generic\base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 509, in dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 480, in raise_uncaught_exception
    raise exc
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\86185\Desktop\SEGroup6\Ã¨Ã¨¾ÍÕï\Project\app01\views.py", line 935, in post
    return self.alterMedicine(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\86185\Desktop\SEGroup6\Ã¨Ã¨¾ÍÕï\Project\app01\views.py", line 969, in alterMedicine
    medicine = Medicine.objects.get(id=data['id'])
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\manager.py", line 87, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\query.py", line 623, in get
    clone = self._chain() if self.query.combinator else self.filter(*args, **kwargs)
                                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\query.py", line 1436, in filter
    return self._filter_or_exclude(False, args, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\query.py", line 1454, in _filter_or_exclude
    clone._filter_or_exclude_inplace(negate, args, kwargs)
  File "D:\anacoda\Lib\site-packages\django\db\models\query.py", line 1461, in _filter_or_exclude_inplace
    self._query.add_q(Q(*args, **kwargs))
  File "D:\anacoda\Lib\site-packages\django\db\models\sql\query.py", line 1545, in add_q
    clause, _ = self._add_q(q_object, self.used_aliases)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\sql\query.py", line 1576, in _add_q
    child_clause, needed_inner = self.build_filter(
                                 ^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\sql\query.py", line 1491, in build_filter
    condition = self.build_lookup(lookups, col, value)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\sql\query.py", line 1318, in build_lookup
    lookup = lookup_class(lhs, rhs)
             ^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\lookups.py", line 27, in __init__
    self.rhs = self.get_prep_lookup()
               ^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\lookups.py", line 341, in get_prep_lookup
    return super().get_prep_lookup()
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\lookups.py", line 85, in get_prep_lookup
    return self.lhs.output_field.get_prep_value(self.rhs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\fields\__init__.py", line 2055, in get_prep_value
    raise e.__class__(
ValueError: Field 'id' expected a number but got 'invalid_id'.
ERROR 2024-08-21 12:00:12,321 log Internal Server Error: /api/medicine/setData/
Traceback (most recent call last):
  File "D:\anacoda\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\views\decorators\csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\views\generic\base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 509, in dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 480, in raise_uncaught_exception
    raise exc
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\86185\Desktop\SEGroup6\Ã¨Ã¨¾ÍÕï\Project\app01\views.py", line 935, in post
    return self.alterMedicine(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\86185\Desktop\SEGroup6\Ã¨Ã¨¾ÍÕï\Project\app01\views.py", line 971, in alterMedicine
    medicine.medicine_type = data['type']
                             ~~~~^^^^^^^^
KeyError: 'type'
ERROR 2024-08-21 12:00:12,379 log Internal Server Error: /api/medicine/delete/
Traceback (most recent call last):
  File "D:\anacoda\Lib\site-packages\django\db\models\fields\__init__.py", line 2053, in get_prep_value
    return int(value)
           ^^^^^^^^^^
ValueError: invalid literal for int() with base 10: 'invalid_id'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\anacoda\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\views\decorators\csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\views\generic\base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 509, in dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 480, in raise_uncaught_exception
    raise exc
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\86185\Desktop\SEGroup6\Ã¨Ã¨¾ÍÕï\Project\app01\views.py", line 929, in post
    return self.deleteMedicine(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\86185\Desktop\SEGroup6\Ã¨Ã¨¾ÍÕï\Project\app01\views.py", line 941, in deleteMedicine
    Medicine.objects.get(id=id).delete()
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\manager.py", line 87, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\query.py", line 623, in get
    clone = self._chain() if self.query.combinator else self.filter(*args, **kwargs)
                                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\query.py", line 1436, in filter
    return self._filter_or_exclude(False, args, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\query.py", line 1454, in _filter_or_exclude
    clone._filter_or_exclude_inplace(negate, args, kwargs)
  File "D:\anacoda\Lib\site-packages\django\db\models\query.py", line 1461, in _filter_or_exclude_inplace
    self._query.add_q(Q(*args, **kwargs))
  File "D:\anacoda\Lib\site-packages\django\db\models\sql\query.py", line 1545, in add_q
    clause, _ = self._add_q(q_object, self.used_aliases)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\sql\query.py", line 1576, in _add_q
    child_clause, needed_inner = self.build_filter(
                                 ^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\sql\query.py", line 1491, in build_filter
    condition = self.build_lookup(lookups, col, value)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\sql\query.py", line 1318, in build_lookup
    lookup = lookup_class(lhs, rhs)
             ^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\lookups.py", line 27, in __init__
    self.rhs = self.get_prep_lookup()
               ^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\lookups.py", line 341, in get_prep_lookup
    return super().get_prep_lookup()
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\lookups.py", line 85, in get_prep_lookup
    return self.lhs.output_field.get_prep_value(self.rhs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\fields\__init__.py", line 2055, in get_prep_value
    raise e.__class__(
ValueError: Field 'id' expected a number but got 'invalid_id'.
WARNING 2024-08-21 12:00:12,713 log Bad Request: /api/medicine/list/
DEBUG 2024-08-21 12:01:29,620 schema CREATE TABLE `django_migrations` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `app` varchar(255) NOT NULL, `name` varchar(255) NOT NULL, `applied` datetime(6) NOT NULL); (params None)
DEBUG 2024-08-21 12:01:29,637 schema CREATE TABLE `django_content_type` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(100) NOT NULL, `app_label` varchar(100) NOT NULL, `model` varchar(100) NOT NULL); (params None)
DEBUG 2024-08-21 12:01:29,657 schema ALTER TABLE `django_content_type` ADD CONSTRAINT `django_content_type_app_label_model_76bd3d3b_uniq` UNIQUE (`app_label`, `model`); (params ())
DEBUG 2024-08-21 12:01:29,706 schema CREATE TABLE `auth_permission` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(50) NOT NULL, `content_type_id` integer NOT NULL, `codename` varchar(100) NOT NULL); (params None)
DEBUG 2024-08-21 12:01:29,737 schema CREATE TABLE `auth_group` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(80) NOT NULL UNIQUE); (params None)
DEBUG 2024-08-21 12:01:29,752 schema CREATE TABLE `auth_group_permissions` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `group_id` integer NOT NULL, `permission_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 12:01:29,792 schema CREATE TABLE `auth_user` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `password` varchar(128) NOT NULL, `last_login` datetime(6) NOT NULL, `is_superuser` bool NOT NULL, `username` varchar(30) NOT NULL UNIQUE, `first_name` varchar(30) NOT NULL, `last_name` varchar(30) NOT NULL, `email` varchar(75) NOT NULL, `is_staff` bool NOT NULL, `is_active` bool NOT NULL, `date_joined` datetime(6) NOT NULL); (params None)
DEBUG 2024-08-21 12:01:29,810 schema CREATE TABLE `auth_user_groups` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `user_id` integer NOT NULL, `group_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 12:01:29,848 schema CREATE TABLE `auth_user_user_permissions` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `user_id` integer NOT NULL, `permission_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 12:01:29,889 schema ALTER TABLE `auth_permission` ADD CONSTRAINT `auth_permission_content_type_id_codename_01ab375a_uniq` UNIQUE (`content_type_id`, `codename`); (params ())
DEBUG 2024-08-21 12:01:29,907 schema ALTER TABLE `auth_permission` ADD CONSTRAINT `auth_permission_content_type_id_2f476e4b_fk_django_co` FOREIGN KEY (`content_type_id`) REFERENCES `django_content_type` (`id`); (params ())
DEBUG 2024-08-21 12:01:29,933 schema ALTER TABLE `auth_group_permissions` ADD CONSTRAINT `auth_group_permissions_group_id_permission_id_0cd325b0_uniq` UNIQUE (`group_id`, `permission_id`); (params ())
DEBUG 2024-08-21 12:01:29,952 schema ALTER TABLE `auth_group_permissions` ADD CONSTRAINT `auth_group_permissions_group_id_b120cbf9_fk_auth_group_id` FOREIGN KEY (`group_id`) REFERENCES `auth_group` (`id`); (params ())
DEBUG 2024-08-21 12:01:29,974 schema ALTER TABLE `auth_group_permissions` ADD CONSTRAINT `auth_group_permissio_permission_id_84c5c92e_fk_auth_perm` FOREIGN KEY (`permission_id`) REFERENCES `auth_permission` (`id`); (params ())
DEBUG 2024-08-21 12:01:29,998 schema ALTER TABLE `auth_user_groups` ADD CONSTRAINT `auth_user_groups_user_id_group_id_94350c0c_uniq` UNIQUE (`user_id`, `group_id`); (params ())
DEBUG 2024-08-21 12:01:30,017 schema ALTER TABLE `auth_user_groups` ADD CONSTRAINT `auth_user_groups_user_id_6a12ed8b_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); (params ())
DEBUG 2024-08-21 12:01:30,042 schema ALTER TABLE `auth_user_groups` ADD CONSTRAINT `auth_user_groups_group_id_97559544_fk_auth_group_id` FOREIGN KEY (`group_id`) REFERENCES `auth_group` (`id`); (params ())
DEBUG 2024-08-21 12:01:30,066 schema ALTER TABLE `auth_user_user_permissions` ADD CONSTRAINT `auth_user_user_permissions_user_id_permission_id_14a6b632_uniq` UNIQUE (`user_id`, `permission_id`); (params ())
DEBUG 2024-08-21 12:01:30,083 schema ALTER TABLE `auth_user_user_permissions` ADD CONSTRAINT `auth_user_user_permissions_user_id_a95ead1b_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); (params ())
DEBUG 2024-08-21 12:01:30,105 schema ALTER TABLE `auth_user_user_permissions` ADD CONSTRAINT `auth_user_user_permi_permission_id_1fbb5f2c_fk_auth_perm` FOREIGN KEY (`permission_id`) REFERENCES `auth_permission` (`id`); (params ())
DEBUG 2024-08-21 12:01:30,157 schema CREATE TABLE `django_admin_log` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `action_time` datetime(6) NOT NULL, `object_id` longtext NULL, `object_repr` varchar(200) NOT NULL, `action_flag` smallint UNSIGNED NOT NULL CHECK (`action_flag` >= 0), `change_message` longtext NOT NULL, `content_type_id` integer NULL, `user_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 12:01:30,215 schema ALTER TABLE `django_admin_log` ADD CONSTRAINT `django_admin_log_content_type_id_c4bce8eb_fk_django_co` FOREIGN KEY (`content_type_id`) REFERENCES `django_content_type` (`id`); (params ())
DEBUG 2024-08-21 12:01:30,242 schema ALTER TABLE `django_admin_log` ADD CONSTRAINT `django_admin_log_user_id_c564eba6_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); (params ())
DEBUG 2024-08-21 12:01:30,357 schema CREATE TABLE `app01_doctors` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `identity_num` varchar(64) NOT NULL, `name` varchar(20) NOT NULL, `title` varchar(50) NOT NULL, `department` varchar(20) NOT NULL, `research` varchar(150) NULL, `cost` numeric(5, 2) NOT NULL, `avatar` varchar(100) NULL, `avatar_name` varchar(128) NOT NULL); (params None)
DEBUG 2024-08-21 12:01:30,373 schema CREATE TABLE `app01_medicine` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(50) NOT NULL, `medicine_type` smallint NOT NULL, `symptom` varchar(200) NOT NULL, `price` numeric(5, 2) NOT NULL, `quantity` integer NOT NULL, `photo_name` varchar(128) NOT NULL); (params None)
DEBUG 2024-08-21 12:01:30,387 schema CREATE TABLE `app01_patients` (`identity` smallint NOT NULL, `identity_num` varchar(64) NOT NULL PRIMARY KEY, `name` varchar(20) NOT NULL, `health_insurance` smallint NOT NULL, `gender` smallint NOT NULL, `birthday` date NOT NULL, `phone_num` varchar(15) NOT NULL, `address` varchar(128) NOT NULL); (params None)
DEBUG 2024-08-21 12:01:30,405 schema CREATE TABLE `app01_user` (`type` smallint NOT NULL, `identity_num` varchar(64) NOT NULL PRIMARY KEY, `password` varchar(64) NOT NULL); (params None)
DEBUG 2024-08-21 12:01:30,421 schema CREATE TABLE `app01_treatment` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `queue_id` integer NOT NULL, `time` datetime(6) NOT NULL, `advice` varchar(256) NOT NULL, `medicine` longtext NOT NULL, `price` numeric(5, 2) NOT NULL, `doctor_id` bigint NOT NULL, `patient_id` varchar(64) NOT NULL); (params None)
DEBUG 2024-08-21 12:01:30,463 schema CREATE TABLE `app01_register` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `queue_id` integer NOT NULL, `time` datetime(6) NOT NULL, `position` varchar(128) NOT NULL, `doctor_id` bigint NOT NULL, `patient_id` varchar(64) NOT NULL, `register_id` varchar(64) NOT NULL); (params None)
DEBUG 2024-08-21 12:01:30,518 schema CREATE TABLE `app01_onduty` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `date` date NOT NULL, `time` smallint NOT NULL, `state` integer NOT NULL, `doctor_id` bigint NOT NULL); (params None)
DEBUG 2024-08-21 12:01:30,551 schema CREATE TABLE `app01_notice` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `msg_type` smallint NOT NULL, `time` datetime(6) NOT NULL, `isRead` bool NOT NULL, `doctor_id` bigint NOT NULL, `patient_id` varchar(64) NOT NULL, `register_id` bigint NULL, `registerMan_id` varchar(64) NULL, `treatment_id` bigint NULL); (params None)
DEBUG 2024-08-21 12:01:30,635 schema CREATE TABLE `app01_bill` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `type` smallint NOT NULL, `state` bool NOT NULL, `price` numeric(5, 2) NOT NULL, `patient_id` varchar(64) NULL, `register_id` bigint NULL, `treatment_id` bigint NULL); (params None)
DEBUG 2024-08-21 12:01:30,693 schema ALTER TABLE `app01_treatment` ADD CONSTRAINT `app01_treatment_doctor_id_a47beada_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 12:01:30,719 schema ALTER TABLE `app01_treatment` ADD CONSTRAINT `app01_treatment_patient_id_52a8e1e5_fk_app01_pat` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 12:01:30,745 schema ALTER TABLE `app01_register` ADD CONSTRAINT `app01_register_doctor_id_e0ea61dc_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 12:01:30,771 schema ALTER TABLE `app01_register` ADD CONSTRAINT `app01_register_patient_id_4a065a29_fk_app01_pat` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 12:01:30,796 schema ALTER TABLE `app01_register` ADD CONSTRAINT `app01_register_register_id_e85a8e5b_fk_app01_pat` FOREIGN KEY (`register_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 12:01:30,823 schema ALTER TABLE `app01_onduty` ADD CONSTRAINT `app01_onduty_doctor_id_9b012eb7_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 12:01:30,848 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_doctor_id_2d7f7104_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 12:01:30,873 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_patient_id_74974826_fk_app01_patients_identity_num` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 12:01:30,898 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_register_id_6c54784c_fk_app01_register_id` FOREIGN KEY (`register_id`) REFERENCES `app01_register` (`id`); (params ())
DEBUG 2024-08-21 12:01:30,927 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_registerMan_id_1bd9adce_fk_app01_pat` FOREIGN KEY (`registerMan_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 12:01:30,961 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_treatment_id_596ea92a_fk_app01_treatment_id` FOREIGN KEY (`treatment_id`) REFERENCES `app01_treatment` (`id`); (params ())
DEBUG 2024-08-21 12:01:30,993 schema ALTER TABLE `app01_bill` ADD CONSTRAINT `app01_bill_patient_id_96fe396a_fk_app01_patients_identity_num` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 12:01:31,016 schema ALTER TABLE `app01_bill` ADD CONSTRAINT `app01_bill_register_id_cf59300e_fk_app01_register_id` FOREIGN KEY (`register_id`) REFERENCES `app01_register` (`id`); (params ())
DEBUG 2024-08-21 12:01:31,042 schema ALTER TABLE `app01_bill` ADD CONSTRAINT `app01_bill_treatment_id_73ef4d98_fk_app01_treatment_id` FOREIGN KEY (`treatment_id`) REFERENCES `app01_treatment` (`id`); (params ())
DEBUG 2024-08-21 12:01:31,098 schema ALTER TABLE `django_content_type` MODIFY `name` varchar(100) NULL; (params [])
DEBUG 2024-08-21 12:01:31,166 schema ALTER TABLE `django_content_type` DROP COLUMN `name`; (params ())
DEBUG 2024-08-21 12:01:31,217 schema ALTER TABLE `auth_permission` MODIFY `name` varchar(255) NOT NULL; (params [])
DEBUG 2024-08-21 12:01:31,272 schema ALTER TABLE `auth_user` MODIFY `email` varchar(254) NOT NULL; (params [])
DEBUG 2024-08-21 12:01:31,357 schema ALTER TABLE `auth_user` MODIFY `last_login` datetime(6) NULL; (params [])
DEBUG 2024-08-21 12:01:31,469 schema ALTER TABLE `auth_user` MODIFY `username` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 12:01:31,530 schema ALTER TABLE `auth_user` MODIFY `last_name` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 12:01:31,593 schema ALTER TABLE `auth_group` MODIFY `name` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 12:01:31,706 schema ALTER TABLE `auth_user` MODIFY `first_name` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 12:01:31,767 schema CREATE TABLE `django_session` (`session_key` varchar(40) NOT NULL PRIMARY KEY, `session_data` longtext NOT NULL, `expire_date` datetime(6) NOT NULL); (params None)
DEBUG 2024-08-21 12:01:31,796 schema CREATE INDEX `django_session_expire_date_a5c62663` ON `django_session` (`expire_date`); (params ())
ERROR 2024-08-21 12:01:32,980 log Internal Server Error: /api/medicine/list/
Traceback (most recent call last):
  File "D:\anacoda\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\views\decorators\csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\views\generic\base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 509, in dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 480, in raise_uncaught_exception
    raise exc
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\86185\Desktop\SEGroup6\Ã¨Ã¨¾ÍÕï\Project\app01\views.py", line 927, in post
    action = json.loads(request.body)['action']
             ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
KeyError: 'action'
ERROR 2024-08-21 12:01:33,042 log Internal Server Error: /api/medicine/list/
Traceback (most recent call last):
  File "D:\anacoda\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\views\decorators\csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\views\generic\base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 509, in dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 480, in raise_uncaught_exception
    raise exc
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\86185\Desktop\SEGroup6\Ã¨Ã¨¾ÍÕï\Project\app01\views.py", line 927, in post
    action = json.loads(request.body)['action']
             ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
KeyError: 'action'
ERROR 2024-08-21 12:01:33,104 log Internal Server Error: /api/medicine/setData/
Traceback (most recent call last):
  File "D:\anacoda\Lib\site-packages\django\db\models\fields\__init__.py", line 2053, in get_prep_value
    return int(value)
           ^^^^^^^^^^
ValueError: invalid literal for int() with base 10: 'invalid_id'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\anacoda\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\views\decorators\csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\views\generic\base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 509, in dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 480, in raise_uncaught_exception
    raise exc
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\86185\Desktop\SEGroup6\Ã¨Ã¨¾ÍÕï\Project\app01\views.py", line 935, in post
    return self.alterMedicine(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\86185\Desktop\SEGroup6\Ã¨Ã¨¾ÍÕï\Project\app01\views.py", line 972, in alterMedicine
    medicine = Medicine.objects.get(id=data['id'])
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\manager.py", line 87, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\query.py", line 623, in get
    clone = self._chain() if self.query.combinator else self.filter(*args, **kwargs)
                                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\query.py", line 1436, in filter
    return self._filter_or_exclude(False, args, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\query.py", line 1454, in _filter_or_exclude
    clone._filter_or_exclude_inplace(negate, args, kwargs)
  File "D:\anacoda\Lib\site-packages\django\db\models\query.py", line 1461, in _filter_or_exclude_inplace
    self._query.add_q(Q(*args, **kwargs))
  File "D:\anacoda\Lib\site-packages\django\db\models\sql\query.py", line 1545, in add_q
    clause, _ = self._add_q(q_object, self.used_aliases)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\sql\query.py", line 1576, in _add_q
    child_clause, needed_inner = self.build_filter(
                                 ^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\sql\query.py", line 1491, in build_filter
    condition = self.build_lookup(lookups, col, value)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\sql\query.py", line 1318, in build_lookup
    lookup = lookup_class(lhs, rhs)
             ^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\lookups.py", line 27, in __init__
    self.rhs = self.get_prep_lookup()
               ^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\lookups.py", line 341, in get_prep_lookup
    return super().get_prep_lookup()
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\lookups.py", line 85, in get_prep_lookup
    return self.lhs.output_field.get_prep_value(self.rhs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\fields\__init__.py", line 2055, in get_prep_value
    raise e.__class__(
ValueError: Field 'id' expected a number but got 'invalid_id'.
ERROR 2024-08-21 12:01:33,192 log Internal Server Error: /api/medicine/setData/
Traceback (most recent call last):
  File "D:\anacoda\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\views\decorators\csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\views\generic\base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 509, in dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 480, in raise_uncaught_exception
    raise exc
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\86185\Desktop\SEGroup6\Ã¨Ã¨¾ÍÕï\Project\app01\views.py", line 935, in post
    return self.alterMedicine(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\86185\Desktop\SEGroup6\Ã¨Ã¨¾ÍÕï\Project\app01\views.py", line 974, in alterMedicine
    medicine.medicine_type = data['type']
                             ~~~~^^^^^^^^
KeyError: 'type'
ERROR 2024-08-21 12:01:33,270 log Internal Server Error: /api/medicine/delete/
Traceback (most recent call last):
  File "D:\anacoda\Lib\site-packages\django\db\models\fields\__init__.py", line 2053, in get_prep_value
    return int(value)
           ^^^^^^^^^^
ValueError: invalid literal for int() with base 10: 'invalid_id'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\anacoda\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\views\decorators\csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\views\generic\base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 509, in dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 480, in raise_uncaught_exception
    raise exc
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\86185\Desktop\SEGroup6\Ã¨Ã¨¾ÍÕï\Project\app01\views.py", line 929, in post
    return self.deleteMedicine(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\86185\Desktop\SEGroup6\Ã¨Ã¨¾ÍÕï\Project\app01\views.py", line 941, in deleteMedicine
    medicine = Medicine.objects.get(id=id).first()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\manager.py", line 87, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\query.py", line 623, in get
    clone = self._chain() if self.query.combinator else self.filter(*args, **kwargs)
                                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\query.py", line 1436, in filter
    return self._filter_or_exclude(False, args, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\query.py", line 1454, in _filter_or_exclude
    clone._filter_or_exclude_inplace(negate, args, kwargs)
  File "D:\anacoda\Lib\site-packages\django\db\models\query.py", line 1461, in _filter_or_exclude_inplace
    self._query.add_q(Q(*args, **kwargs))
  File "D:\anacoda\Lib\site-packages\django\db\models\sql\query.py", line 1545, in add_q
    clause, _ = self._add_q(q_object, self.used_aliases)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\sql\query.py", line 1576, in _add_q
    child_clause, needed_inner = self.build_filter(
                                 ^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\sql\query.py", line 1491, in build_filter
    condition = self.build_lookup(lookups, col, value)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\sql\query.py", line 1318, in build_lookup
    lookup = lookup_class(lhs, rhs)
             ^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\lookups.py", line 27, in __init__
    self.rhs = self.get_prep_lookup()
               ^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\lookups.py", line 341, in get_prep_lookup
    return super().get_prep_lookup()
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\lookups.py", line 85, in get_prep_lookup
    return self.lhs.output_field.get_prep_value(self.rhs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\fields\__init__.py", line 2055, in get_prep_value
    raise e.__class__(
ValueError: Field 'id' expected a number but got 'invalid_id'.
ERROR 2024-08-21 12:01:33,367 log Internal Server Error: /api/medicine/delete/
Traceback (most recent call last):
  File "D:\anacoda\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\views\decorators\csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\views\generic\base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 509, in dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 480, in raise_uncaught_exception
    raise exc
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\86185\Desktop\SEGroup6\Ã¨Ã¨¾ÍÕï\Project\app01\views.py", line 929, in post
    return self.deleteMedicine(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\86185\Desktop\SEGroup6\Ã¨Ã¨¾ÍÕï\Project\app01\views.py", line 941, in deleteMedicine
    medicine = Medicine.objects.get(id=id).first()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Medicine' object has no attribute 'first'
WARNING 2024-08-21 12:01:33,590 log Bad Request: /api/medicine/list/
DEBUG 2024-08-21 12:02:01,881 schema CREATE TABLE `django_migrations` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `app` varchar(255) NOT NULL, `name` varchar(255) NOT NULL, `applied` datetime(6) NOT NULL); (params None)
DEBUG 2024-08-21 12:02:01,898 schema CREATE TABLE `django_content_type` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(100) NOT NULL, `app_label` varchar(100) NOT NULL, `model` varchar(100) NOT NULL); (params None)
DEBUG 2024-08-21 12:02:01,920 schema ALTER TABLE `django_content_type` ADD CONSTRAINT `django_content_type_app_label_model_76bd3d3b_uniq` UNIQUE (`app_label`, `model`); (params ())
DEBUG 2024-08-21 12:02:01,974 schema CREATE TABLE `auth_permission` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(50) NOT NULL, `content_type_id` integer NOT NULL, `codename` varchar(100) NOT NULL); (params None)
DEBUG 2024-08-21 12:02:02,004 schema CREATE TABLE `auth_group` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(80) NOT NULL UNIQUE); (params None)
DEBUG 2024-08-21 12:02:02,020 schema CREATE TABLE `auth_group_permissions` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `group_id` integer NOT NULL, `permission_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 12:02:02,066 schema CREATE TABLE `auth_user` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `password` varchar(128) NOT NULL, `last_login` datetime(6) NOT NULL, `is_superuser` bool NOT NULL, `username` varchar(30) NOT NULL UNIQUE, `first_name` varchar(30) NOT NULL, `last_name` varchar(30) NOT NULL, `email` varchar(75) NOT NULL, `is_staff` bool NOT NULL, `is_active` bool NOT NULL, `date_joined` datetime(6) NOT NULL); (params None)
DEBUG 2024-08-21 12:02:02,084 schema CREATE TABLE `auth_user_groups` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `user_id` integer NOT NULL, `group_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 12:02:02,124 schema CREATE TABLE `auth_user_user_permissions` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `user_id` integer NOT NULL, `permission_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 12:02:02,163 schema ALTER TABLE `auth_permission` ADD CONSTRAINT `auth_permission_content_type_id_codename_01ab375a_uniq` UNIQUE (`content_type_id`, `codename`); (params ())
DEBUG 2024-08-21 12:02:02,180 schema ALTER TABLE `auth_permission` ADD CONSTRAINT `auth_permission_content_type_id_2f476e4b_fk_django_co` FOREIGN KEY (`content_type_id`) REFERENCES `django_content_type` (`id`); (params ())
DEBUG 2024-08-21 12:02:02,204 schema ALTER TABLE `auth_group_permissions` ADD CONSTRAINT `auth_group_permissions_group_id_permission_id_0cd325b0_uniq` UNIQUE (`group_id`, `permission_id`); (params ())
DEBUG 2024-08-21 12:02:02,222 schema ALTER TABLE `auth_group_permissions` ADD CONSTRAINT `auth_group_permissions_group_id_b120cbf9_fk_auth_group_id` FOREIGN KEY (`group_id`) REFERENCES `auth_group` (`id`); (params ())
DEBUG 2024-08-21 12:02:02,245 schema ALTER TABLE `auth_group_permissions` ADD CONSTRAINT `auth_group_permissio_permission_id_84c5c92e_fk_auth_perm` FOREIGN KEY (`permission_id`) REFERENCES `auth_permission` (`id`); (params ())
DEBUG 2024-08-21 12:02:02,269 schema ALTER TABLE `auth_user_groups` ADD CONSTRAINT `auth_user_groups_user_id_group_id_94350c0c_uniq` UNIQUE (`user_id`, `group_id`); (params ())
DEBUG 2024-08-21 12:02:02,287 schema ALTER TABLE `auth_user_groups` ADD CONSTRAINT `auth_user_groups_user_id_6a12ed8b_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); (params ())
DEBUG 2024-08-21 12:02:02,310 schema ALTER TABLE `auth_user_groups` ADD CONSTRAINT `auth_user_groups_group_id_97559544_fk_auth_group_id` FOREIGN KEY (`group_id`) REFERENCES `auth_group` (`id`); (params ())
DEBUG 2024-08-21 12:02:02,333 schema ALTER TABLE `auth_user_user_permissions` ADD CONSTRAINT `auth_user_user_permissions_user_id_permission_id_14a6b632_uniq` UNIQUE (`user_id`, `permission_id`); (params ())
DEBUG 2024-08-21 12:02:02,353 schema ALTER TABLE `auth_user_user_permissions` ADD CONSTRAINT `auth_user_user_permissions_user_id_a95ead1b_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); (params ())
DEBUG 2024-08-21 12:02:02,381 schema ALTER TABLE `auth_user_user_permissions` ADD CONSTRAINT `auth_user_user_permi_permission_id_1fbb5f2c_fk_auth_perm` FOREIGN KEY (`permission_id`) REFERENCES `auth_permission` (`id`); (params ())
DEBUG 2024-08-21 12:02:02,434 schema CREATE TABLE `django_admin_log` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `action_time` datetime(6) NOT NULL, `object_id` longtext NULL, `object_repr` varchar(200) NOT NULL, `action_flag` smallint UNSIGNED NOT NULL CHECK (`action_flag` >= 0), `change_message` longtext NOT NULL, `content_type_id` integer NULL, `user_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 12:02:02,479 schema ALTER TABLE `django_admin_log` ADD CONSTRAINT `django_admin_log_content_type_id_c4bce8eb_fk_django_co` FOREIGN KEY (`content_type_id`) REFERENCES `django_content_type` (`id`); (params ())
DEBUG 2024-08-21 12:02:02,509 schema ALTER TABLE `django_admin_log` ADD CONSTRAINT `django_admin_log_user_id_c564eba6_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); (params ())
DEBUG 2024-08-21 12:02:02,652 schema CREATE TABLE `app01_doctors` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `identity_num` varchar(64) NOT NULL, `name` varchar(20) NOT NULL, `title` varchar(50) NOT NULL, `department` varchar(20) NOT NULL, `research` varchar(150) NULL, `cost` numeric(5, 2) NOT NULL, `avatar` varchar(100) NULL, `avatar_name` varchar(128) NOT NULL); (params None)
DEBUG 2024-08-21 12:02:02,668 schema CREATE TABLE `app01_medicine` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(50) NOT NULL, `medicine_type` smallint NOT NULL, `symptom` varchar(200) NOT NULL, `price` numeric(5, 2) NOT NULL, `quantity` integer NOT NULL, `photo_name` varchar(128) NOT NULL); (params None)
DEBUG 2024-08-21 12:02:02,687 schema CREATE TABLE `app01_patients` (`identity` smallint NOT NULL, `identity_num` varchar(64) NOT NULL PRIMARY KEY, `name` varchar(20) NOT NULL, `health_insurance` smallint NOT NULL, `gender` smallint NOT NULL, `birthday` date NOT NULL, `phone_num` varchar(15) NOT NULL, `address` varchar(128) NOT NULL); (params None)
DEBUG 2024-08-21 12:02:02,706 schema CREATE TABLE `app01_user` (`type` smallint NOT NULL, `identity_num` varchar(64) NOT NULL PRIMARY KEY, `password` varchar(64) NOT NULL); (params None)
DEBUG 2024-08-21 12:02:02,724 schema CREATE TABLE `app01_treatment` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `queue_id` integer NOT NULL, `time` datetime(6) NOT NULL, `advice` varchar(256) NOT NULL, `medicine` longtext NOT NULL, `price` numeric(5, 2) NOT NULL, `doctor_id` bigint NOT NULL, `patient_id` varchar(64) NOT NULL); (params None)
DEBUG 2024-08-21 12:02:02,774 schema CREATE TABLE `app01_register` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `queue_id` integer NOT NULL, `time` datetime(6) NOT NULL, `position` varchar(128) NOT NULL, `doctor_id` bigint NOT NULL, `patient_id` varchar(64) NOT NULL, `register_id` varchar(64) NOT NULL); (params None)
DEBUG 2024-08-21 12:02:02,832 schema CREATE TABLE `app01_onduty` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `date` date NOT NULL, `time` smallint NOT NULL, `state` integer NOT NULL, `doctor_id` bigint NOT NULL); (params None)
DEBUG 2024-08-21 12:02:02,865 schema CREATE TABLE `app01_notice` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `msg_type` smallint NOT NULL, `time` datetime(6) NOT NULL, `isRead` bool NOT NULL, `doctor_id` bigint NOT NULL, `patient_id` varchar(64) NOT NULL, `register_id` bigint NULL, `registerMan_id` varchar(64) NULL, `treatment_id` bigint NULL); (params None)
DEBUG 2024-08-21 12:02:02,956 schema CREATE TABLE `app01_bill` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `type` smallint NOT NULL, `state` bool NOT NULL, `price` numeric(5, 2) NOT NULL, `patient_id` varchar(64) NULL, `register_id` bigint NULL, `treatment_id` bigint NULL); (params None)
DEBUG 2024-08-21 12:02:03,015 schema ALTER TABLE `app01_treatment` ADD CONSTRAINT `app01_treatment_doctor_id_a47beada_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 12:02:03,042 schema ALTER TABLE `app01_treatment` ADD CONSTRAINT `app01_treatment_patient_id_52a8e1e5_fk_app01_pat` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 12:02:03,070 schema ALTER TABLE `app01_register` ADD CONSTRAINT `app01_register_doctor_id_e0ea61dc_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 12:02:03,094 schema ALTER TABLE `app01_register` ADD CONSTRAINT `app01_register_patient_id_4a065a29_fk_app01_pat` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 12:02:03,120 schema ALTER TABLE `app01_register` ADD CONSTRAINT `app01_register_register_id_e85a8e5b_fk_app01_pat` FOREIGN KEY (`register_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 12:02:03,148 schema ALTER TABLE `app01_onduty` ADD CONSTRAINT `app01_onduty_doctor_id_9b012eb7_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 12:02:03,173 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_doctor_id_2d7f7104_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 12:02:03,199 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_patient_id_74974826_fk_app01_patients_identity_num` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 12:02:03,226 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_register_id_6c54784c_fk_app01_register_id` FOREIGN KEY (`register_id`) REFERENCES `app01_register` (`id`); (params ())
DEBUG 2024-08-21 12:02:03,253 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_registerMan_id_1bd9adce_fk_app01_pat` FOREIGN KEY (`registerMan_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 12:02:03,282 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_treatment_id_596ea92a_fk_app01_treatment_id` FOREIGN KEY (`treatment_id`) REFERENCES `app01_treatment` (`id`); (params ())
DEBUG 2024-08-21 12:02:03,312 schema ALTER TABLE `app01_bill` ADD CONSTRAINT `app01_bill_patient_id_96fe396a_fk_app01_patients_identity_num` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 12:02:03,338 schema ALTER TABLE `app01_bill` ADD CONSTRAINT `app01_bill_register_id_cf59300e_fk_app01_register_id` FOREIGN KEY (`register_id`) REFERENCES `app01_register` (`id`); (params ())
DEBUG 2024-08-21 12:02:03,367 schema ALTER TABLE `app01_bill` ADD CONSTRAINT `app01_bill_treatment_id_73ef4d98_fk_app01_treatment_id` FOREIGN KEY (`treatment_id`) REFERENCES `app01_treatment` (`id`); (params ())
DEBUG 2024-08-21 12:02:03,426 schema ALTER TABLE `django_content_type` MODIFY `name` varchar(100) NULL; (params [])
DEBUG 2024-08-21 12:02:03,498 schema ALTER TABLE `django_content_type` DROP COLUMN `name`; (params ())
DEBUG 2024-08-21 12:02:03,558 schema ALTER TABLE `auth_permission` MODIFY `name` varchar(255) NOT NULL; (params [])
DEBUG 2024-08-21 12:02:03,631 schema ALTER TABLE `auth_user` MODIFY `email` varchar(254) NOT NULL; (params [])
DEBUG 2024-08-21 12:02:03,735 schema ALTER TABLE `auth_user` MODIFY `last_login` datetime(6) NULL; (params [])
DEBUG 2024-08-21 12:02:03,849 schema ALTER TABLE `auth_user` MODIFY `username` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 12:02:03,910 schema ALTER TABLE `auth_user` MODIFY `last_name` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 12:02:03,973 schema ALTER TABLE `auth_group` MODIFY `name` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 12:02:04,113 schema ALTER TABLE `auth_user` MODIFY `first_name` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 12:02:04,165 schema CREATE TABLE `django_session` (`session_key` varchar(40) NOT NULL PRIMARY KEY, `session_data` longtext NOT NULL, `expire_date` datetime(6) NOT NULL); (params None)
DEBUG 2024-08-21 12:02:04,196 schema CREATE INDEX `django_session_expire_date_a5c62663` ON `django_session` (`expire_date`); (params ())
ERROR 2024-08-21 12:02:05,338 log Internal Server Error: /api/medicine/list/
Traceback (most recent call last):
  File "D:\anacoda\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\views\decorators\csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\views\generic\base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 509, in dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 480, in raise_uncaught_exception
    raise exc
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\86185\Desktop\SEGroup6\Ã¨Ã¨¾ÍÕï\Project\app01\views.py", line 927, in post
    action = json.loads(request.body)['action']
             ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
KeyError: 'action'
ERROR 2024-08-21 12:02:05,397 log Internal Server Error: /api/medicine/list/
Traceback (most recent call last):
  File "D:\anacoda\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\views\decorators\csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\views\generic\base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 509, in dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 480, in raise_uncaught_exception
    raise exc
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\86185\Desktop\SEGroup6\Ã¨Ã¨¾ÍÕï\Project\app01\views.py", line 927, in post
    action = json.loads(request.body)['action']
             ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
KeyError: 'action'
ERROR 2024-08-21 12:02:05,452 log Internal Server Error: /api/medicine/setData/
Traceback (most recent call last):
  File "D:\anacoda\Lib\site-packages\django\db\models\fields\__init__.py", line 2053, in get_prep_value
    return int(value)
           ^^^^^^^^^^
ValueError: invalid literal for int() with base 10: 'invalid_id'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\anacoda\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\views\decorators\csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\views\generic\base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 509, in dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 480, in raise_uncaught_exception
    raise exc
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\86185\Desktop\SEGroup6\Ã¨Ã¨¾ÍÕï\Project\app01\views.py", line 935, in post
    return self.alterMedicine(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\86185\Desktop\SEGroup6\Ã¨Ã¨¾ÍÕï\Project\app01\views.py", line 972, in alterMedicine
    medicine = Medicine.objects.get(id=data['id'])
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\manager.py", line 87, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\query.py", line 623, in get
    clone = self._chain() if self.query.combinator else self.filter(*args, **kwargs)
                                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\query.py", line 1436, in filter
    return self._filter_or_exclude(False, args, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\query.py", line 1454, in _filter_or_exclude
    clone._filter_or_exclude_inplace(negate, args, kwargs)
  File "D:\anacoda\Lib\site-packages\django\db\models\query.py", line 1461, in _filter_or_exclude_inplace
    self._query.add_q(Q(*args, **kwargs))
  File "D:\anacoda\Lib\site-packages\django\db\models\sql\query.py", line 1545, in add_q
    clause, _ = self._add_q(q_object, self.used_aliases)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\sql\query.py", line 1576, in _add_q
    child_clause, needed_inner = self.build_filter(
                                 ^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\sql\query.py", line 1491, in build_filter
    condition = self.build_lookup(lookups, col, value)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\sql\query.py", line 1318, in build_lookup
    lookup = lookup_class(lhs, rhs)
             ^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\lookups.py", line 27, in __init__
    self.rhs = self.get_prep_lookup()
               ^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\lookups.py", line 341, in get_prep_lookup
    return super().get_prep_lookup()
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\lookups.py", line 85, in get_prep_lookup
    return self.lhs.output_field.get_prep_value(self.rhs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\fields\__init__.py", line 2055, in get_prep_value
    raise e.__class__(
ValueError: Field 'id' expected a number but got 'invalid_id'.
ERROR 2024-08-21 12:02:05,530 log Internal Server Error: /api/medicine/setData/
Traceback (most recent call last):
  File "D:\anacoda\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\views\decorators\csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\views\generic\base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 509, in dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 480, in raise_uncaught_exception
    raise exc
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\86185\Desktop\SEGroup6\Ã¨Ã¨¾ÍÕï\Project\app01\views.py", line 935, in post
    return self.alterMedicine(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\86185\Desktop\SEGroup6\Ã¨Ã¨¾ÍÕï\Project\app01\views.py", line 974, in alterMedicine
    medicine.medicine_type = data['type']
                             ~~~~^^^^^^^^
KeyError: 'type'
ERROR 2024-08-21 12:02:05,587 log Internal Server Error: /api/medicine/delete/
Traceback (most recent call last):
  File "D:\anacoda\Lib\site-packages\django\db\models\fields\__init__.py", line 2053, in get_prep_value
    return int(value)
           ^^^^^^^^^^
ValueError: invalid literal for int() with base 10: 'invalid_id'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\anacoda\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\views\decorators\csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\views\generic\base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 509, in dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 480, in raise_uncaught_exception
    raise exc
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\86185\Desktop\SEGroup6\Ã¨Ã¨¾ÍÕï\Project\app01\views.py", line 929, in post
    return self.deleteMedicine(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\86185\Desktop\SEGroup6\Ã¨Ã¨¾ÍÕï\Project\app01\views.py", line 941, in deleteMedicine
    medicine = Medicine.objects.filter(id=id).first()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\manager.py", line 87, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\query.py", line 1436, in filter
    return self._filter_or_exclude(False, args, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\query.py", line 1454, in _filter_or_exclude
    clone._filter_or_exclude_inplace(negate, args, kwargs)
  File "D:\anacoda\Lib\site-packages\django\db\models\query.py", line 1461, in _filter_or_exclude_inplace
    self._query.add_q(Q(*args, **kwargs))
  File "D:\anacoda\Lib\site-packages\django\db\models\sql\query.py", line 1545, in add_q
    clause, _ = self._add_q(q_object, self.used_aliases)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\sql\query.py", line 1576, in _add_q
    child_clause, needed_inner = self.build_filter(
                                 ^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\sql\query.py", line 1491, in build_filter
    condition = self.build_lookup(lookups, col, value)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\sql\query.py", line 1318, in build_lookup
    lookup = lookup_class(lhs, rhs)
             ^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\lookups.py", line 27, in __init__
    self.rhs = self.get_prep_lookup()
               ^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\lookups.py", line 341, in get_prep_lookup
    return super().get_prep_lookup()
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\lookups.py", line 85, in get_prep_lookup
    return self.lhs.output_field.get_prep_value(self.rhs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\fields\__init__.py", line 2055, in get_prep_value
    raise e.__class__(
ValueError: Field 'id' expected a number but got 'invalid_id'.
WARNING 2024-08-21 12:02:05,894 log Bad Request: /api/medicine/list/
DEBUG 2024-08-21 12:03:39,038 schema CREATE TABLE `django_migrations` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `app` varchar(255) NOT NULL, `name` varchar(255) NOT NULL, `applied` datetime(6) NOT NULL); (params None)
DEBUG 2024-08-21 12:03:39,052 schema CREATE TABLE `django_content_type` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(100) NOT NULL, `app_label` varchar(100) NOT NULL, `model` varchar(100) NOT NULL); (params None)
DEBUG 2024-08-21 12:03:39,069 schema ALTER TABLE `django_content_type` ADD CONSTRAINT `django_content_type_app_label_model_76bd3d3b_uniq` UNIQUE (`app_label`, `model`); (params ())
DEBUG 2024-08-21 12:03:39,108 schema CREATE TABLE `auth_permission` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(50) NOT NULL, `content_type_id` integer NOT NULL, `codename` varchar(100) NOT NULL); (params None)
DEBUG 2024-08-21 12:03:39,135 schema CREATE TABLE `auth_group` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(80) NOT NULL UNIQUE); (params None)
DEBUG 2024-08-21 12:03:39,148 schema CREATE TABLE `auth_group_permissions` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `group_id` integer NOT NULL, `permission_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 12:03:39,184 schema CREATE TABLE `auth_user` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `password` varchar(128) NOT NULL, `last_login` datetime(6) NOT NULL, `is_superuser` bool NOT NULL, `username` varchar(30) NOT NULL UNIQUE, `first_name` varchar(30) NOT NULL, `last_name` varchar(30) NOT NULL, `email` varchar(75) NOT NULL, `is_staff` bool NOT NULL, `is_active` bool NOT NULL, `date_joined` datetime(6) NOT NULL); (params None)
DEBUG 2024-08-21 12:03:39,200 schema CREATE TABLE `auth_user_groups` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `user_id` integer NOT NULL, `group_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 12:03:39,244 schema CREATE TABLE `auth_user_user_permissions` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `user_id` integer NOT NULL, `permission_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 12:03:39,279 schema ALTER TABLE `auth_permission` ADD CONSTRAINT `auth_permission_content_type_id_codename_01ab375a_uniq` UNIQUE (`content_type_id`, `codename`); (params ())
DEBUG 2024-08-21 12:03:39,297 schema ALTER TABLE `auth_permission` ADD CONSTRAINT `auth_permission_content_type_id_2f476e4b_fk_django_co` FOREIGN KEY (`content_type_id`) REFERENCES `django_content_type` (`id`); (params ())
DEBUG 2024-08-21 12:03:39,321 schema ALTER TABLE `auth_group_permissions` ADD CONSTRAINT `auth_group_permissions_group_id_permission_id_0cd325b0_uniq` UNIQUE (`group_id`, `permission_id`); (params ())
DEBUG 2024-08-21 12:03:39,338 schema ALTER TABLE `auth_group_permissions` ADD CONSTRAINT `auth_group_permissions_group_id_b120cbf9_fk_auth_group_id` FOREIGN KEY (`group_id`) REFERENCES `auth_group` (`id`); (params ())
DEBUG 2024-08-21 12:03:39,359 schema ALTER TABLE `auth_group_permissions` ADD CONSTRAINT `auth_group_permissio_permission_id_84c5c92e_fk_auth_perm` FOREIGN KEY (`permission_id`) REFERENCES `auth_permission` (`id`); (params ())
DEBUG 2024-08-21 12:03:39,383 schema ALTER TABLE `auth_user_groups` ADD CONSTRAINT `auth_user_groups_user_id_group_id_94350c0c_uniq` UNIQUE (`user_id`, `group_id`); (params ())
DEBUG 2024-08-21 12:03:39,399 schema ALTER TABLE `auth_user_groups` ADD CONSTRAINT `auth_user_groups_user_id_6a12ed8b_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); (params ())
DEBUG 2024-08-21 12:03:39,423 schema ALTER TABLE `auth_user_groups` ADD CONSTRAINT `auth_user_groups_group_id_97559544_fk_auth_group_id` FOREIGN KEY (`group_id`) REFERENCES `auth_group` (`id`); (params ())
DEBUG 2024-08-21 12:03:39,446 schema ALTER TABLE `auth_user_user_permissions` ADD CONSTRAINT `auth_user_user_permissions_user_id_permission_id_14a6b632_uniq` UNIQUE (`user_id`, `permission_id`); (params ())
DEBUG 2024-08-21 12:03:39,462 schema ALTER TABLE `auth_user_user_permissions` ADD CONSTRAINT `auth_user_user_permissions_user_id_a95ead1b_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); (params ())
DEBUG 2024-08-21 12:03:39,487 schema ALTER TABLE `auth_user_user_permissions` ADD CONSTRAINT `auth_user_user_permi_permission_id_1fbb5f2c_fk_auth_perm` FOREIGN KEY (`permission_id`) REFERENCES `auth_permission` (`id`); (params ())
DEBUG 2024-08-21 12:03:39,541 schema CREATE TABLE `django_admin_log` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `action_time` datetime(6) NOT NULL, `object_id` longtext NULL, `object_repr` varchar(200) NOT NULL, `action_flag` smallint UNSIGNED NOT NULL CHECK (`action_flag` >= 0), `change_message` longtext NOT NULL, `content_type_id` integer NULL, `user_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 12:03:39,585 schema ALTER TABLE `django_admin_log` ADD CONSTRAINT `django_admin_log_content_type_id_c4bce8eb_fk_django_co` FOREIGN KEY (`content_type_id`) REFERENCES `django_content_type` (`id`); (params ())
DEBUG 2024-08-21 12:03:39,611 schema ALTER TABLE `django_admin_log` ADD CONSTRAINT `django_admin_log_user_id_c564eba6_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); (params ())
DEBUG 2024-08-21 12:03:39,718 schema CREATE TABLE `app01_doctors` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `identity_num` varchar(64) NOT NULL, `name` varchar(20) NOT NULL, `title` varchar(50) NOT NULL, `department` varchar(20) NOT NULL, `research` varchar(150) NULL, `cost` numeric(5, 2) NOT NULL, `avatar` varchar(100) NULL, `avatar_name` varchar(128) NOT NULL); (params None)
DEBUG 2024-08-21 12:03:39,734 schema CREATE TABLE `app01_medicine` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(50) NOT NULL, `medicine_type` smallint NOT NULL, `symptom` varchar(200) NOT NULL, `price` numeric(5, 2) NOT NULL, `quantity` integer NOT NULL, `photo_name` varchar(128) NOT NULL); (params None)
DEBUG 2024-08-21 12:03:39,749 schema CREATE TABLE `app01_patients` (`identity` smallint NOT NULL, `identity_num` varchar(64) NOT NULL PRIMARY KEY, `name` varchar(20) NOT NULL, `health_insurance` smallint NOT NULL, `gender` smallint NOT NULL, `birthday` date NOT NULL, `phone_num` varchar(15) NOT NULL, `address` varchar(128) NOT NULL); (params None)
DEBUG 2024-08-21 12:03:39,765 schema CREATE TABLE `app01_user` (`type` smallint NOT NULL, `identity_num` varchar(64) NOT NULL PRIMARY KEY, `password` varchar(64) NOT NULL); (params None)
DEBUG 2024-08-21 12:03:39,779 schema CREATE TABLE `app01_treatment` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `queue_id` integer NOT NULL, `time` datetime(6) NOT NULL, `advice` varchar(256) NOT NULL, `medicine` longtext NOT NULL, `price` numeric(5, 2) NOT NULL, `doctor_id` bigint NOT NULL, `patient_id` varchar(64) NOT NULL); (params None)
DEBUG 2024-08-21 12:03:39,818 schema CREATE TABLE `app01_register` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `queue_id` integer NOT NULL, `time` datetime(6) NOT NULL, `position` varchar(128) NOT NULL, `doctor_id` bigint NOT NULL, `patient_id` varchar(64) NOT NULL, `register_id` varchar(64) NOT NULL); (params None)
DEBUG 2024-08-21 12:03:39,866 schema CREATE TABLE `app01_onduty` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `date` date NOT NULL, `time` smallint NOT NULL, `state` integer NOT NULL, `doctor_id` bigint NOT NULL); (params None)
DEBUG 2024-08-21 12:03:39,897 schema CREATE TABLE `app01_notice` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `msg_type` smallint NOT NULL, `time` datetime(6) NOT NULL, `isRead` bool NOT NULL, `doctor_id` bigint NOT NULL, `patient_id` varchar(64) NOT NULL, `register_id` bigint NULL, `registerMan_id` varchar(64) NULL, `treatment_id` bigint NULL); (params None)
DEBUG 2024-08-21 12:03:39,974 schema CREATE TABLE `app01_bill` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `type` smallint NOT NULL, `state` bool NOT NULL, `price` numeric(5, 2) NOT NULL, `patient_id` varchar(64) NULL, `register_id` bigint NULL, `treatment_id` bigint NULL); (params None)
DEBUG 2024-08-21 12:03:40,026 schema ALTER TABLE `app01_treatment` ADD CONSTRAINT `app01_treatment_doctor_id_a47beada_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 12:03:40,051 schema ALTER TABLE `app01_treatment` ADD CONSTRAINT `app01_treatment_patient_id_52a8e1e5_fk_app01_pat` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 12:03:40,074 schema ALTER TABLE `app01_register` ADD CONSTRAINT `app01_register_doctor_id_e0ea61dc_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 12:03:40,100 schema ALTER TABLE `app01_register` ADD CONSTRAINT `app01_register_patient_id_4a065a29_fk_app01_pat` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 12:03:40,128 schema ALTER TABLE `app01_register` ADD CONSTRAINT `app01_register_register_id_e85a8e5b_fk_app01_pat` FOREIGN KEY (`register_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 12:03:40,154 schema ALTER TABLE `app01_onduty` ADD CONSTRAINT `app01_onduty_doctor_id_9b012eb7_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 12:03:40,178 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_doctor_id_2d7f7104_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 12:03:40,207 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_patient_id_74974826_fk_app01_patients_identity_num` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 12:03:40,233 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_register_id_6c54784c_fk_app01_register_id` FOREIGN KEY (`register_id`) REFERENCES `app01_register` (`id`); (params ())
DEBUG 2024-08-21 12:03:40,260 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_registerMan_id_1bd9adce_fk_app01_pat` FOREIGN KEY (`registerMan_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 12:03:40,291 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_treatment_id_596ea92a_fk_app01_treatment_id` FOREIGN KEY (`treatment_id`) REFERENCES `app01_treatment` (`id`); (params ())
DEBUG 2024-08-21 12:03:40,322 schema ALTER TABLE `app01_bill` ADD CONSTRAINT `app01_bill_patient_id_96fe396a_fk_app01_patients_identity_num` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 12:03:40,348 schema ALTER TABLE `app01_bill` ADD CONSTRAINT `app01_bill_register_id_cf59300e_fk_app01_register_id` FOREIGN KEY (`register_id`) REFERENCES `app01_register` (`id`); (params ())
DEBUG 2024-08-21 12:03:40,372 schema ALTER TABLE `app01_bill` ADD CONSTRAINT `app01_bill_treatment_id_73ef4d98_fk_app01_treatment_id` FOREIGN KEY (`treatment_id`) REFERENCES `app01_treatment` (`id`); (params ())
DEBUG 2024-08-21 12:03:40,427 schema ALTER TABLE `django_content_type` MODIFY `name` varchar(100) NULL; (params [])
DEBUG 2024-08-21 12:03:40,491 schema ALTER TABLE `django_content_type` DROP COLUMN `name`; (params ())
DEBUG 2024-08-21 12:03:40,547 schema ALTER TABLE `auth_permission` MODIFY `name` varchar(255) NOT NULL; (params [])
DEBUG 2024-08-21 12:03:40,601 schema ALTER TABLE `auth_user` MODIFY `email` varchar(254) NOT NULL; (params [])
DEBUG 2024-08-21 12:03:40,689 schema ALTER TABLE `auth_user` MODIFY `last_login` datetime(6) NULL; (params [])
DEBUG 2024-08-21 12:03:40,794 schema ALTER TABLE `auth_user` MODIFY `username` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 12:03:40,849 schema ALTER TABLE `auth_user` MODIFY `last_name` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 12:03:40,911 schema ALTER TABLE `auth_group` MODIFY `name` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 12:03:41,029 schema ALTER TABLE `auth_user` MODIFY `first_name` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 12:03:41,086 schema CREATE TABLE `django_session` (`session_key` varchar(40) NOT NULL PRIMARY KEY, `session_data` longtext NOT NULL, `expire_date` datetime(6) NOT NULL); (params None)
DEBUG 2024-08-21 12:03:41,114 schema CREATE INDEX `django_session_expire_date_a5c62663` ON `django_session` (`expire_date`); (params ())
ERROR 2024-08-21 12:03:42,246 log Internal Server Error: /api/medicine/list/
Traceback (most recent call last):
  File "D:\anacoda\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\views\decorators\csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\views\generic\base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 509, in dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 480, in raise_uncaught_exception
    raise exc
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\86185\Desktop\SEGroup6\Ã¨Ã¨¾ÍÕï\Project\app01\views.py", line 927, in post
    action = json.loads(request.body)['action']
             ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
KeyError: 'action'
ERROR 2024-08-21 12:03:42,294 log Internal Server Error: /api/medicine/list/
Traceback (most recent call last):
  File "D:\anacoda\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\views\decorators\csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\views\generic\base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 509, in dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 480, in raise_uncaught_exception
    raise exc
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\86185\Desktop\SEGroup6\Ã¨Ã¨¾ÍÕï\Project\app01\views.py", line 927, in post
    action = json.loads(request.body)['action']
             ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
KeyError: 'action'
ERROR 2024-08-21 12:03:42,338 log Internal Server Error: /api/medicine/setData/
Traceback (most recent call last):
  File "D:\anacoda\Lib\site-packages\django\db\models\fields\__init__.py", line 2053, in get_prep_value
    return int(value)
           ^^^^^^^^^^
ValueError: invalid literal for int() with base 10: 'invalid_id'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\anacoda\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\views\decorators\csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\views\generic\base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 509, in dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 480, in raise_uncaught_exception
    raise exc
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\86185\Desktop\SEGroup6\Ã¨Ã¨¾ÍÕï\Project\app01\views.py", line 935, in post
    return self.alterMedicine(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\86185\Desktop\SEGroup6\Ã¨Ã¨¾ÍÕï\Project\app01\views.py", line 972, in alterMedicine
    medicine = Medicine.objects.get(id=data['id'])
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\manager.py", line 87, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\query.py", line 623, in get
    clone = self._chain() if self.query.combinator else self.filter(*args, **kwargs)
                                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\query.py", line 1436, in filter
    return self._filter_or_exclude(False, args, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\query.py", line 1454, in _filter_or_exclude
    clone._filter_or_exclude_inplace(negate, args, kwargs)
  File "D:\anacoda\Lib\site-packages\django\db\models\query.py", line 1461, in _filter_or_exclude_inplace
    self._query.add_q(Q(*args, **kwargs))
  File "D:\anacoda\Lib\site-packages\django\db\models\sql\query.py", line 1545, in add_q
    clause, _ = self._add_q(q_object, self.used_aliases)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\sql\query.py", line 1576, in _add_q
    child_clause, needed_inner = self.build_filter(
                                 ^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\sql\query.py", line 1491, in build_filter
    condition = self.build_lookup(lookups, col, value)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\sql\query.py", line 1318, in build_lookup
    lookup = lookup_class(lhs, rhs)
             ^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\lookups.py", line 27, in __init__
    self.rhs = self.get_prep_lookup()
               ^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\lookups.py", line 341, in get_prep_lookup
    return super().get_prep_lookup()
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\lookups.py", line 85, in get_prep_lookup
    return self.lhs.output_field.get_prep_value(self.rhs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\db\models\fields\__init__.py", line 2055, in get_prep_value
    raise e.__class__(
ValueError: Field 'id' expected a number but got 'invalid_id'.
ERROR 2024-08-21 12:03:42,399 log Internal Server Error: /api/medicine/setData/
Traceback (most recent call last):
  File "D:\anacoda\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\views\decorators\csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\views\generic\base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 509, in dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 480, in raise_uncaught_exception
    raise exc
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\86185\Desktop\SEGroup6\Ã¨Ã¨¾ÍÕï\Project\app01\views.py", line 935, in post
    return self.alterMedicine(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\86185\Desktop\SEGroup6\Ã¨Ã¨¾ÍÕï\Project\app01\views.py", line 974, in alterMedicine
    medicine.medicine_type = data['type']
                             ~~~~^^^^^^^^
KeyError: 'type'
WARNING 2024-08-21 12:03:42,455 log Bad Request: /api/medicine/delete/
WARNING 2024-08-21 12:03:42,716 log Bad Request: /api/medicine/list/
DEBUG 2024-08-21 12:04:12,507 schema CREATE TABLE `django_migrations` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `app` varchar(255) NOT NULL, `name` varchar(255) NOT NULL, `applied` datetime(6) NOT NULL); (params None)
DEBUG 2024-08-21 12:04:12,526 schema CREATE TABLE `django_content_type` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(100) NOT NULL, `app_label` varchar(100) NOT NULL, `model` varchar(100) NOT NULL); (params None)
DEBUG 2024-08-21 12:04:12,546 schema ALTER TABLE `django_content_type` ADD CONSTRAINT `django_content_type_app_label_model_76bd3d3b_uniq` UNIQUE (`app_label`, `model`); (params ())
DEBUG 2024-08-21 12:04:12,592 schema CREATE TABLE `auth_permission` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(50) NOT NULL, `content_type_id` integer NOT NULL, `codename` varchar(100) NOT NULL); (params None)
DEBUG 2024-08-21 12:04:12,624 schema CREATE TABLE `auth_group` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(80) NOT NULL UNIQUE); (params None)
DEBUG 2024-08-21 12:04:12,642 schema CREATE TABLE `auth_group_permissions` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `group_id` integer NOT NULL, `permission_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 12:04:12,686 schema CREATE TABLE `auth_user` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `password` varchar(128) NOT NULL, `last_login` datetime(6) NOT NULL, `is_superuser` bool NOT NULL, `username` varchar(30) NOT NULL UNIQUE, `first_name` varchar(30) NOT NULL, `last_name` varchar(30) NOT NULL, `email` varchar(75) NOT NULL, `is_staff` bool NOT NULL, `is_active` bool NOT NULL, `date_joined` datetime(6) NOT NULL); (params None)
DEBUG 2024-08-21 12:04:12,704 schema CREATE TABLE `auth_user_groups` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `user_id` integer NOT NULL, `group_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 12:04:12,749 schema CREATE TABLE `auth_user_user_permissions` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `user_id` integer NOT NULL, `permission_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 12:04:12,789 schema ALTER TABLE `auth_permission` ADD CONSTRAINT `auth_permission_content_type_id_codename_01ab375a_uniq` UNIQUE (`content_type_id`, `codename`); (params ())
DEBUG 2024-08-21 12:04:12,808 schema ALTER TABLE `auth_permission` ADD CONSTRAINT `auth_permission_content_type_id_2f476e4b_fk_django_co` FOREIGN KEY (`content_type_id`) REFERENCES `django_content_type` (`id`); (params ())
DEBUG 2024-08-21 12:04:12,834 schema ALTER TABLE `auth_group_permissions` ADD CONSTRAINT `auth_group_permissions_group_id_permission_id_0cd325b0_uniq` UNIQUE (`group_id`, `permission_id`); (params ())
DEBUG 2024-08-21 12:04:12,852 schema ALTER TABLE `auth_group_permissions` ADD CONSTRAINT `auth_group_permissions_group_id_b120cbf9_fk_auth_group_id` FOREIGN KEY (`group_id`) REFERENCES `auth_group` (`id`); (params ())
DEBUG 2024-08-21 12:04:12,877 schema ALTER TABLE `auth_group_permissions` ADD CONSTRAINT `auth_group_permissio_permission_id_84c5c92e_fk_auth_perm` FOREIGN KEY (`permission_id`) REFERENCES `auth_permission` (`id`); (params ())
DEBUG 2024-08-21 12:04:12,905 schema ALTER TABLE `auth_user_groups` ADD CONSTRAINT `auth_user_groups_user_id_group_id_94350c0c_uniq` UNIQUE (`user_id`, `group_id`); (params ())
DEBUG 2024-08-21 12:04:12,923 schema ALTER TABLE `auth_user_groups` ADD CONSTRAINT `auth_user_groups_user_id_6a12ed8b_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); (params ())
DEBUG 2024-08-21 12:04:12,950 schema ALTER TABLE `auth_user_groups` ADD CONSTRAINT `auth_user_groups_group_id_97559544_fk_auth_group_id` FOREIGN KEY (`group_id`) REFERENCES `auth_group` (`id`); (params ())
DEBUG 2024-08-21 12:04:12,977 schema ALTER TABLE `auth_user_user_permissions` ADD CONSTRAINT `auth_user_user_permissions_user_id_permission_id_14a6b632_uniq` UNIQUE (`user_id`, `permission_id`); (params ())
DEBUG 2024-08-21 12:04:13,002 schema ALTER TABLE `auth_user_user_permissions` ADD CONSTRAINT `auth_user_user_permissions_user_id_a95ead1b_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); (params ())
DEBUG 2024-08-21 12:04:13,029 schema ALTER TABLE `auth_user_user_permissions` ADD CONSTRAINT `auth_user_user_permi_permission_id_1fbb5f2c_fk_auth_perm` FOREIGN KEY (`permission_id`) REFERENCES `auth_permission` (`id`); (params ())
DEBUG 2024-08-21 12:04:13,091 schema CREATE TABLE `django_admin_log` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `action_time` datetime(6) NOT NULL, `object_id` longtext NULL, `object_repr` varchar(200) NOT NULL, `action_flag` smallint UNSIGNED NOT NULL CHECK (`action_flag` >= 0), `change_message` longtext NOT NULL, `content_type_id` integer NULL, `user_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 12:04:13,137 schema ALTER TABLE `django_admin_log` ADD CONSTRAINT `django_admin_log_content_type_id_c4bce8eb_fk_django_co` FOREIGN KEY (`content_type_id`) REFERENCES `django_content_type` (`id`); (params ())
DEBUG 2024-08-21 12:04:13,169 schema ALTER TABLE `django_admin_log` ADD CONSTRAINT `django_admin_log_user_id_c564eba6_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); (params ())
DEBUG 2024-08-21 12:04:13,288 schema CREATE TABLE `app01_doctors` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `identity_num` varchar(64) NOT NULL, `name` varchar(20) NOT NULL, `title` varchar(50) NOT NULL, `department` varchar(20) NOT NULL, `research` varchar(150) NULL, `cost` numeric(5, 2) NOT NULL, `avatar` varchar(100) NULL, `avatar_name` varchar(128) NOT NULL); (params None)
DEBUG 2024-08-21 12:04:13,306 schema CREATE TABLE `app01_medicine` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(50) NOT NULL, `medicine_type` smallint NOT NULL, `symptom` varchar(200) NOT NULL, `price` numeric(5, 2) NOT NULL, `quantity` integer NOT NULL, `photo_name` varchar(128) NOT NULL); (params None)
DEBUG 2024-08-21 12:04:13,325 schema CREATE TABLE `app01_patients` (`identity` smallint NOT NULL, `identity_num` varchar(64) NOT NULL PRIMARY KEY, `name` varchar(20) NOT NULL, `health_insurance` smallint NOT NULL, `gender` smallint NOT NULL, `birthday` date NOT NULL, `phone_num` varchar(15) NOT NULL, `address` varchar(128) NOT NULL); (params None)
DEBUG 2024-08-21 12:04:13,342 schema CREATE TABLE `app01_user` (`type` smallint NOT NULL, `identity_num` varchar(64) NOT NULL PRIMARY KEY, `password` varchar(64) NOT NULL); (params None)
DEBUG 2024-08-21 12:04:13,361 schema CREATE TABLE `app01_treatment` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `queue_id` integer NOT NULL, `time` datetime(6) NOT NULL, `advice` varchar(256) NOT NULL, `medicine` longtext NOT NULL, `price` numeric(5, 2) NOT NULL, `doctor_id` bigint NOT NULL, `patient_id` varchar(64) NOT NULL); (params None)
DEBUG 2024-08-21 12:04:13,421 schema CREATE TABLE `app01_register` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `queue_id` integer NOT NULL, `time` datetime(6) NOT NULL, `position` varchar(128) NOT NULL, `doctor_id` bigint NOT NULL, `patient_id` varchar(64) NOT NULL, `register_id` varchar(64) NOT NULL); (params None)
DEBUG 2024-08-21 12:04:13,502 schema CREATE TABLE `app01_onduty` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `date` date NOT NULL, `time` smallint NOT NULL, `state` integer NOT NULL, `doctor_id` bigint NOT NULL); (params None)
DEBUG 2024-08-21 12:04:13,547 schema CREATE TABLE `app01_notice` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `msg_type` smallint NOT NULL, `time` datetime(6) NOT NULL, `isRead` bool NOT NULL, `doctor_id` bigint NOT NULL, `patient_id` varchar(64) NOT NULL, `register_id` bigint NULL, `registerMan_id` varchar(64) NULL, `treatment_id` bigint NULL); (params None)
DEBUG 2024-08-21 12:04:13,645 schema CREATE TABLE `app01_bill` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `type` smallint NOT NULL, `state` bool NOT NULL, `price` numeric(5, 2) NOT NULL, `patient_id` varchar(64) NULL, `register_id` bigint NULL, `treatment_id` bigint NULL); (params None)
DEBUG 2024-08-21 12:04:13,708 schema ALTER TABLE `app01_treatment` ADD CONSTRAINT `app01_treatment_doctor_id_a47beada_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 12:04:13,735 schema ALTER TABLE `app01_treatment` ADD CONSTRAINT `app01_treatment_patient_id_52a8e1e5_fk_app01_pat` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 12:04:13,768 schema ALTER TABLE `app01_register` ADD CONSTRAINT `app01_register_doctor_id_e0ea61dc_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 12:04:13,811 schema ALTER TABLE `app01_register` ADD CONSTRAINT `app01_register_patient_id_4a065a29_fk_app01_pat` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 12:04:13,839 schema ALTER TABLE `app01_register` ADD CONSTRAINT `app01_register_register_id_e85a8e5b_fk_app01_pat` FOREIGN KEY (`register_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 12:04:13,868 schema ALTER TABLE `app01_onduty` ADD CONSTRAINT `app01_onduty_doctor_id_9b012eb7_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 12:04:13,892 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_doctor_id_2d7f7104_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 12:04:13,919 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_patient_id_74974826_fk_app01_patients_identity_num` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 12:04:13,944 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_register_id_6c54784c_fk_app01_register_id` FOREIGN KEY (`register_id`) REFERENCES `app01_register` (`id`); (params ())
DEBUG 2024-08-21 12:04:13,975 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_registerMan_id_1bd9adce_fk_app01_pat` FOREIGN KEY (`registerMan_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 12:04:14,006 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_treatment_id_596ea92a_fk_app01_treatment_id` FOREIGN KEY (`treatment_id`) REFERENCES `app01_treatment` (`id`); (params ())
DEBUG 2024-08-21 12:04:14,038 schema ALTER TABLE `app01_bill` ADD CONSTRAINT `app01_bill_patient_id_96fe396a_fk_app01_patients_identity_num` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 12:04:14,062 schema ALTER TABLE `app01_bill` ADD CONSTRAINT `app01_bill_register_id_cf59300e_fk_app01_register_id` FOREIGN KEY (`register_id`) REFERENCES `app01_register` (`id`); (params ())
DEBUG 2024-08-21 12:04:14,089 schema ALTER TABLE `app01_bill` ADD CONSTRAINT `app01_bill_treatment_id_73ef4d98_fk_app01_treatment_id` FOREIGN KEY (`treatment_id`) REFERENCES `app01_treatment` (`id`); (params ())
DEBUG 2024-08-21 12:04:14,148 schema ALTER TABLE `django_content_type` MODIFY `name` varchar(100) NULL; (params [])
DEBUG 2024-08-21 12:04:14,219 schema ALTER TABLE `django_content_type` DROP COLUMN `name`; (params ())
DEBUG 2024-08-21 12:04:14,278 schema ALTER TABLE `auth_permission` MODIFY `name` varchar(255) NOT NULL; (params [])
DEBUG 2024-08-21 12:04:14,338 schema ALTER TABLE `auth_user` MODIFY `email` varchar(254) NOT NULL; (params [])
DEBUG 2024-08-21 12:04:14,436 schema ALTER TABLE `auth_user` MODIFY `last_login` datetime(6) NULL; (params [])
DEBUG 2024-08-21 12:04:14,611 schema ALTER TABLE `auth_user` MODIFY `username` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 12:04:14,673 schema ALTER TABLE `auth_user` MODIFY `last_name` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 12:04:14,736 schema ALTER TABLE `auth_group` MODIFY `name` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 12:04:14,896 schema ALTER TABLE `auth_user` MODIFY `first_name` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 12:04:14,991 schema CREATE TABLE `django_session` (`session_key` varchar(40) NOT NULL PRIMARY KEY, `session_data` longtext NOT NULL, `expire_date` datetime(6) NOT NULL); (params None)
DEBUG 2024-08-21 12:04:15,028 schema CREATE INDEX `django_session_expire_date_a5c62663` ON `django_session` (`expire_date`); (params ())
ERROR 2024-08-21 12:04:16,775 log Internal Server Error: /api/medicine/list/
Traceback (most recent call last):
  File "D:\anacoda\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\views\decorators\csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\views\generic\base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 509, in dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 480, in raise_uncaught_exception
    raise exc
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\86185\Desktop\SEGroup6\Ã¨Ã¨¾ÍÕï\Project\app01\views.py", line 927, in post
    action = json.loads(request.body)['action']
             ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
KeyError: 'action'
ERROR 2024-08-21 12:04:16,834 log Internal Server Error: /api/medicine/list/
Traceback (most recent call last):
  File "D:\anacoda\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\views\decorators\csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\views\generic\base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 509, in dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 480, in raise_uncaught_exception
    raise exc
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\86185\Desktop\SEGroup6\Ã¨Ã¨¾ÍÕï\Project\app01\views.py", line 927, in post
    action = json.loads(request.body)['action']
             ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
KeyError: 'action'
WARNING 2024-08-21 12:04:16,920 log Not Found: /api/medicine/setData/
ERROR 2024-08-21 12:04:16,992 log Internal Server Error: /api/medicine/setData/
Traceback (most recent call last):
  File "D:\anacoda\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\views\decorators\csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\views\generic\base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 509, in dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 480, in raise_uncaught_exception
    raise exc
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\86185\Desktop\SEGroup6\Ã¨Ã¨¾ÍÕï\Project\app01\views.py", line 935, in post
    return self.alterMedicine(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\86185\Desktop\SEGroup6\Ã¨Ã¨¾ÍÕï\Project\app01\views.py", line 974, in alterMedicine
    medicine.medicine_type = data['type']
                             ~~~~^^^^^^^^
KeyError: 'type'
WARNING 2024-08-21 12:04:17,070 log Bad Request: /api/medicine/delete/
WARNING 2024-08-21 12:04:17,471 log Bad Request: /api/medicine/list/
DEBUG 2024-08-21 12:05:43,737 schema CREATE TABLE `django_migrations` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `app` varchar(255) NOT NULL, `name` varchar(255) NOT NULL, `applied` datetime(6) NOT NULL); (params None)
DEBUG 2024-08-21 12:05:43,758 schema CREATE TABLE `django_content_type` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(100) NOT NULL, `app_label` varchar(100) NOT NULL, `model` varchar(100) NOT NULL); (params None)
DEBUG 2024-08-21 12:05:43,779 schema ALTER TABLE `django_content_type` ADD CONSTRAINT `django_content_type_app_label_model_76bd3d3b_uniq` UNIQUE (`app_label`, `model`); (params ())
DEBUG 2024-08-21 12:05:43,830 schema CREATE TABLE `auth_permission` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(50) NOT NULL, `content_type_id` integer NOT NULL, `codename` varchar(100) NOT NULL); (params None)
DEBUG 2024-08-21 12:05:43,860 schema CREATE TABLE `auth_group` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(80) NOT NULL UNIQUE); (params None)
DEBUG 2024-08-21 12:05:43,875 schema CREATE TABLE `auth_group_permissions` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `group_id` integer NOT NULL, `permission_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 12:05:43,921 schema CREATE TABLE `auth_user` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `password` varchar(128) NOT NULL, `last_login` datetime(6) NOT NULL, `is_superuser` bool NOT NULL, `username` varchar(30) NOT NULL UNIQUE, `first_name` varchar(30) NOT NULL, `last_name` varchar(30) NOT NULL, `email` varchar(75) NOT NULL, `is_staff` bool NOT NULL, `is_active` bool NOT NULL, `date_joined` datetime(6) NOT NULL); (params None)
DEBUG 2024-08-21 12:05:43,940 schema CREATE TABLE `auth_user_groups` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `user_id` integer NOT NULL, `group_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 12:05:43,983 schema CREATE TABLE `auth_user_user_permissions` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `user_id` integer NOT NULL, `permission_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 12:05:44,022 schema ALTER TABLE `auth_permission` ADD CONSTRAINT `auth_permission_content_type_id_codename_01ab375a_uniq` UNIQUE (`content_type_id`, `codename`); (params ())
DEBUG 2024-08-21 12:05:44,040 schema ALTER TABLE `auth_permission` ADD CONSTRAINT `auth_permission_content_type_id_2f476e4b_fk_django_co` FOREIGN KEY (`content_type_id`) REFERENCES `django_content_type` (`id`); (params ())
DEBUG 2024-08-21 12:05:44,063 schema ALTER TABLE `auth_group_permissions` ADD CONSTRAINT `auth_group_permissions_group_id_permission_id_0cd325b0_uniq` UNIQUE (`group_id`, `permission_id`); (params ())
DEBUG 2024-08-21 12:05:44,082 schema ALTER TABLE `auth_group_permissions` ADD CONSTRAINT `auth_group_permissions_group_id_b120cbf9_fk_auth_group_id` FOREIGN KEY (`group_id`) REFERENCES `auth_group` (`id`); (params ())
DEBUG 2024-08-21 12:05:44,108 schema ALTER TABLE `auth_group_permissions` ADD CONSTRAINT `auth_group_permissio_permission_id_84c5c92e_fk_auth_perm` FOREIGN KEY (`permission_id`) REFERENCES `auth_permission` (`id`); (params ())
DEBUG 2024-08-21 12:05:44,134 schema ALTER TABLE `auth_user_groups` ADD CONSTRAINT `auth_user_groups_user_id_group_id_94350c0c_uniq` UNIQUE (`user_id`, `group_id`); (params ())
DEBUG 2024-08-21 12:05:44,152 schema ALTER TABLE `auth_user_groups` ADD CONSTRAINT `auth_user_groups_user_id_6a12ed8b_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); (params ())
DEBUG 2024-08-21 12:05:44,178 schema ALTER TABLE `auth_user_groups` ADD CONSTRAINT `auth_user_groups_group_id_97559544_fk_auth_group_id` FOREIGN KEY (`group_id`) REFERENCES `auth_group` (`id`); (params ())
DEBUG 2024-08-21 12:05:44,203 schema ALTER TABLE `auth_user_user_permissions` ADD CONSTRAINT `auth_user_user_permissions_user_id_permission_id_14a6b632_uniq` UNIQUE (`user_id`, `permission_id`); (params ())
DEBUG 2024-08-21 12:05:44,223 schema ALTER TABLE `auth_user_user_permissions` ADD CONSTRAINT `auth_user_user_permissions_user_id_a95ead1b_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); (params ())
DEBUG 2024-08-21 12:05:44,247 schema ALTER TABLE `auth_user_user_permissions` ADD CONSTRAINT `auth_user_user_permi_permission_id_1fbb5f2c_fk_auth_perm` FOREIGN KEY (`permission_id`) REFERENCES `auth_permission` (`id`); (params ())
DEBUG 2024-08-21 12:05:44,299 schema CREATE TABLE `django_admin_log` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `action_time` datetime(6) NOT NULL, `object_id` longtext NULL, `object_repr` varchar(200) NOT NULL, `action_flag` smallint UNSIGNED NOT NULL CHECK (`action_flag` >= 0), `change_message` longtext NOT NULL, `content_type_id` integer NULL, `user_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 12:05:44,338 schema ALTER TABLE `django_admin_log` ADD CONSTRAINT `django_admin_log_content_type_id_c4bce8eb_fk_django_co` FOREIGN KEY (`content_type_id`) REFERENCES `django_content_type` (`id`); (params ())
DEBUG 2024-08-21 12:05:44,366 schema ALTER TABLE `django_admin_log` ADD CONSTRAINT `django_admin_log_user_id_c564eba6_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); (params ())
DEBUG 2024-08-21 12:05:44,476 schema CREATE TABLE `app01_doctors` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `identity_num` varchar(64) NOT NULL, `name` varchar(20) NOT NULL, `title` varchar(50) NOT NULL, `department` varchar(20) NOT NULL, `research` varchar(150) NULL, `cost` numeric(5, 2) NOT NULL, `avatar` varchar(100) NULL, `avatar_name` varchar(128) NOT NULL); (params None)
DEBUG 2024-08-21 12:05:44,493 schema CREATE TABLE `app01_medicine` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(50) NOT NULL, `medicine_type` smallint NOT NULL, `symptom` varchar(200) NOT NULL, `price` numeric(5, 2) NOT NULL, `quantity` integer NOT NULL, `photo_name` varchar(128) NOT NULL); (params None)
DEBUG 2024-08-21 12:05:44,509 schema CREATE TABLE `app01_patients` (`identity` smallint NOT NULL, `identity_num` varchar(64) NOT NULL PRIMARY KEY, `name` varchar(20) NOT NULL, `health_insurance` smallint NOT NULL, `gender` smallint NOT NULL, `birthday` date NOT NULL, `phone_num` varchar(15) NOT NULL, `address` varchar(128) NOT NULL); (params None)
DEBUG 2024-08-21 12:05:44,526 schema CREATE TABLE `app01_user` (`type` smallint NOT NULL, `identity_num` varchar(64) NOT NULL PRIMARY KEY, `password` varchar(64) NOT NULL); (params None)
DEBUG 2024-08-21 12:05:44,546 schema CREATE TABLE `app01_treatment` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `queue_id` integer NOT NULL, `time` datetime(6) NOT NULL, `advice` varchar(256) NOT NULL, `medicine` longtext NOT NULL, `price` numeric(5, 2) NOT NULL, `doctor_id` bigint NOT NULL, `patient_id` varchar(64) NOT NULL); (params None)
DEBUG 2024-08-21 12:05:44,591 schema CREATE TABLE `app01_register` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `queue_id` integer NOT NULL, `time` datetime(6) NOT NULL, `position` varchar(128) NOT NULL, `doctor_id` bigint NOT NULL, `patient_id` varchar(64) NOT NULL, `register_id` varchar(64) NOT NULL); (params None)
DEBUG 2024-08-21 12:05:44,645 schema CREATE TABLE `app01_onduty` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `date` date NOT NULL, `time` smallint NOT NULL, `state` integer NOT NULL, `doctor_id` bigint NOT NULL); (params None)
DEBUG 2024-08-21 12:05:44,678 schema CREATE TABLE `app01_notice` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `msg_type` smallint NOT NULL, `time` datetime(6) NOT NULL, `isRead` bool NOT NULL, `doctor_id` bigint NOT NULL, `patient_id` varchar(64) NOT NULL, `register_id` bigint NULL, `registerMan_id` varchar(64) NULL, `treatment_id` bigint NULL); (params None)
DEBUG 2024-08-21 12:05:44,757 schema CREATE TABLE `app01_bill` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `type` smallint NOT NULL, `state` bool NOT NULL, `price` numeric(5, 2) NOT NULL, `patient_id` varchar(64) NULL, `register_id` bigint NULL, `treatment_id` bigint NULL); (params None)
DEBUG 2024-08-21 12:05:44,812 schema ALTER TABLE `app01_treatment` ADD CONSTRAINT `app01_treatment_doctor_id_a47beada_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 12:05:44,837 schema ALTER TABLE `app01_treatment` ADD CONSTRAINT `app01_treatment_patient_id_52a8e1e5_fk_app01_pat` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 12:05:44,864 schema ALTER TABLE `app01_register` ADD CONSTRAINT `app01_register_doctor_id_e0ea61dc_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 12:05:44,887 schema ALTER TABLE `app01_register` ADD CONSTRAINT `app01_register_patient_id_4a065a29_fk_app01_pat` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 12:05:44,912 schema ALTER TABLE `app01_register` ADD CONSTRAINT `app01_register_register_id_e85a8e5b_fk_app01_pat` FOREIGN KEY (`register_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 12:05:44,937 schema ALTER TABLE `app01_onduty` ADD CONSTRAINT `app01_onduty_doctor_id_9b012eb7_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 12:05:44,961 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_doctor_id_2d7f7104_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 12:05:44,987 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_patient_id_74974826_fk_app01_patients_identity_num` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 12:05:45,013 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_register_id_6c54784c_fk_app01_register_id` FOREIGN KEY (`register_id`) REFERENCES `app01_register` (`id`); (params ())
DEBUG 2024-08-21 12:05:45,043 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_registerMan_id_1bd9adce_fk_app01_pat` FOREIGN KEY (`registerMan_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 12:05:45,077 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_treatment_id_596ea92a_fk_app01_treatment_id` FOREIGN KEY (`treatment_id`) REFERENCES `app01_treatment` (`id`); (params ())
DEBUG 2024-08-21 12:05:45,112 schema ALTER TABLE `app01_bill` ADD CONSTRAINT `app01_bill_patient_id_96fe396a_fk_app01_patients_identity_num` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 12:05:45,139 schema ALTER TABLE `app01_bill` ADD CONSTRAINT `app01_bill_register_id_cf59300e_fk_app01_register_id` FOREIGN KEY (`register_id`) REFERENCES `app01_register` (`id`); (params ())
DEBUG 2024-08-21 12:05:45,165 schema ALTER TABLE `app01_bill` ADD CONSTRAINT `app01_bill_treatment_id_73ef4d98_fk_app01_treatment_id` FOREIGN KEY (`treatment_id`) REFERENCES `app01_treatment` (`id`); (params ())
DEBUG 2024-08-21 12:05:45,219 schema ALTER TABLE `django_content_type` MODIFY `name` varchar(100) NULL; (params [])
DEBUG 2024-08-21 12:05:45,285 schema ALTER TABLE `django_content_type` DROP COLUMN `name`; (params ())
DEBUG 2024-08-21 12:05:45,340 schema ALTER TABLE `auth_permission` MODIFY `name` varchar(255) NOT NULL; (params [])
DEBUG 2024-08-21 12:05:45,394 schema ALTER TABLE `auth_user` MODIFY `email` varchar(254) NOT NULL; (params [])
DEBUG 2024-08-21 12:05:45,480 schema ALTER TABLE `auth_user` MODIFY `last_login` datetime(6) NULL; (params [])
DEBUG 2024-08-21 12:05:45,586 schema ALTER TABLE `auth_user` MODIFY `username` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 12:05:45,642 schema ALTER TABLE `auth_user` MODIFY `last_name` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 12:05:45,697 schema ALTER TABLE `auth_group` MODIFY `name` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 12:05:45,818 schema ALTER TABLE `auth_user` MODIFY `first_name` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 12:05:45,870 schema CREATE TABLE `django_session` (`session_key` varchar(40) NOT NULL PRIMARY KEY, `session_data` longtext NOT NULL, `expire_date` datetime(6) NOT NULL); (params None)
DEBUG 2024-08-21 12:05:45,897 schema CREATE INDEX `django_session_expire_date_a5c62663` ON `django_session` (`expire_date`); (params ())
DEBUG 2024-08-21 12:05:54,645 schema CREATE TABLE `django_migrations` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `app` varchar(255) NOT NULL, `name` varchar(255) NOT NULL, `applied` datetime(6) NOT NULL); (params None)
DEBUG 2024-08-21 12:05:54,661 schema CREATE TABLE `django_content_type` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(100) NOT NULL, `app_label` varchar(100) NOT NULL, `model` varchar(100) NOT NULL); (params None)
DEBUG 2024-08-21 12:05:54,681 schema ALTER TABLE `django_content_type` ADD CONSTRAINT `django_content_type_app_label_model_76bd3d3b_uniq` UNIQUE (`app_label`, `model`); (params ())
DEBUG 2024-08-21 12:05:54,719 schema CREATE TABLE `auth_permission` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(50) NOT NULL, `content_type_id` integer NOT NULL, `codename` varchar(100) NOT NULL); (params None)
DEBUG 2024-08-21 12:05:54,746 schema CREATE TABLE `auth_group` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(80) NOT NULL UNIQUE); (params None)
DEBUG 2024-08-21 12:05:54,761 schema CREATE TABLE `auth_group_permissions` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `group_id` integer NOT NULL, `permission_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 12:05:54,801 schema CREATE TABLE `auth_user` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `password` varchar(128) NOT NULL, `last_login` datetime(6) NOT NULL, `is_superuser` bool NOT NULL, `username` varchar(30) NOT NULL UNIQUE, `first_name` varchar(30) NOT NULL, `last_name` varchar(30) NOT NULL, `email` varchar(75) NOT NULL, `is_staff` bool NOT NULL, `is_active` bool NOT NULL, `date_joined` datetime(6) NOT NULL); (params None)
DEBUG 2024-08-21 12:05:54,818 schema CREATE TABLE `auth_user_groups` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `user_id` integer NOT NULL, `group_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 12:05:54,850 schema CREATE TABLE `auth_user_user_permissions` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `user_id` integer NOT NULL, `permission_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 12:05:54,884 schema ALTER TABLE `auth_permission` ADD CONSTRAINT `auth_permission_content_type_id_codename_01ab375a_uniq` UNIQUE (`content_type_id`, `codename`); (params ())
DEBUG 2024-08-21 12:05:54,901 schema ALTER TABLE `auth_permission` ADD CONSTRAINT `auth_permission_content_type_id_2f476e4b_fk_django_co` FOREIGN KEY (`content_type_id`) REFERENCES `django_content_type` (`id`); (params ())
DEBUG 2024-08-21 12:05:54,922 schema ALTER TABLE `auth_group_permissions` ADD CONSTRAINT `auth_group_permissions_group_id_permission_id_0cd325b0_uniq` UNIQUE (`group_id`, `permission_id`); (params ())
DEBUG 2024-08-21 12:05:54,939 schema ALTER TABLE `auth_group_permissions` ADD CONSTRAINT `auth_group_permissions_group_id_b120cbf9_fk_auth_group_id` FOREIGN KEY (`group_id`) REFERENCES `auth_group` (`id`); (params ())
DEBUG 2024-08-21 12:05:54,960 schema ALTER TABLE `auth_group_permissions` ADD CONSTRAINT `auth_group_permissio_permission_id_84c5c92e_fk_auth_perm` FOREIGN KEY (`permission_id`) REFERENCES `auth_permission` (`id`); (params ())
DEBUG 2024-08-21 12:05:54,982 schema ALTER TABLE `auth_user_groups` ADD CONSTRAINT `auth_user_groups_user_id_group_id_94350c0c_uniq` UNIQUE (`user_id`, `group_id`); (params ())
DEBUG 2024-08-21 12:05:55,000 schema ALTER TABLE `auth_user_groups` ADD CONSTRAINT `auth_user_groups_user_id_6a12ed8b_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); (params ())
DEBUG 2024-08-21 12:05:55,022 schema ALTER TABLE `auth_user_groups` ADD CONSTRAINT `auth_user_groups_group_id_97559544_fk_auth_group_id` FOREIGN KEY (`group_id`) REFERENCES `auth_group` (`id`); (params ())
DEBUG 2024-08-21 12:05:55,044 schema ALTER TABLE `auth_user_user_permissions` ADD CONSTRAINT `auth_user_user_permissions_user_id_permission_id_14a6b632_uniq` UNIQUE (`user_id`, `permission_id`); (params ())
DEBUG 2024-08-21 12:05:55,061 schema ALTER TABLE `auth_user_user_permissions` ADD CONSTRAINT `auth_user_user_permissions_user_id_a95ead1b_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); (params ())
DEBUG 2024-08-21 12:05:55,082 schema ALTER TABLE `auth_user_user_permissions` ADD CONSTRAINT `auth_user_user_permi_permission_id_1fbb5f2c_fk_auth_perm` FOREIGN KEY (`permission_id`) REFERENCES `auth_permission` (`id`); (params ())
DEBUG 2024-08-21 12:05:55,129 schema CREATE TABLE `django_admin_log` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `action_time` datetime(6) NOT NULL, `object_id` longtext NULL, `object_repr` varchar(200) NOT NULL, `action_flag` smallint UNSIGNED NOT NULL CHECK (`action_flag` >= 0), `change_message` longtext NOT NULL, `content_type_id` integer NULL, `user_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 12:05:55,167 schema ALTER TABLE `django_admin_log` ADD CONSTRAINT `django_admin_log_content_type_id_c4bce8eb_fk_django_co` FOREIGN KEY (`content_type_id`) REFERENCES `django_content_type` (`id`); (params ())
DEBUG 2024-08-21 12:05:55,191 schema ALTER TABLE `django_admin_log` ADD CONSTRAINT `django_admin_log_user_id_c564eba6_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); (params ())
DEBUG 2024-08-21 12:05:55,287 schema CREATE TABLE `app01_doctors` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `identity_num` varchar(64) NOT NULL, `name` varchar(20) NOT NULL, `title` varchar(50) NOT NULL, `department` varchar(20) NOT NULL, `research` varchar(150) NULL, `cost` numeric(5, 2) NOT NULL, `avatar` varchar(100) NULL, `avatar_name` varchar(128) NOT NULL); (params None)
DEBUG 2024-08-21 12:05:55,302 schema CREATE TABLE `app01_medicine` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(50) NOT NULL, `medicine_type` smallint NOT NULL, `symptom` varchar(200) NOT NULL, `price` numeric(5, 2) NOT NULL, `quantity` integer NOT NULL, `photo_name` varchar(128) NOT NULL); (params None)
DEBUG 2024-08-21 12:05:55,315 schema CREATE TABLE `app01_patients` (`identity` smallint NOT NULL, `identity_num` varchar(64) NOT NULL PRIMARY KEY, `name` varchar(20) NOT NULL, `health_insurance` smallint NOT NULL, `gender` smallint NOT NULL, `birthday` date NOT NULL, `phone_num` varchar(15) NOT NULL, `address` varchar(128) NOT NULL); (params None)
DEBUG 2024-08-21 12:05:55,329 schema CREATE TABLE `app01_user` (`type` smallint NOT NULL, `identity_num` varchar(64) NOT NULL PRIMARY KEY, `password` varchar(64) NOT NULL); (params None)
DEBUG 2024-08-21 12:05:55,345 schema CREATE TABLE `app01_treatment` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `queue_id` integer NOT NULL, `time` datetime(6) NOT NULL, `advice` varchar(256) NOT NULL, `medicine` longtext NOT NULL, `price` numeric(5, 2) NOT NULL, `doctor_id` bigint NOT NULL, `patient_id` varchar(64) NOT NULL); (params None)
DEBUG 2024-08-21 12:05:55,385 schema CREATE TABLE `app01_register` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `queue_id` integer NOT NULL, `time` datetime(6) NOT NULL, `position` varchar(128) NOT NULL, `doctor_id` bigint NOT NULL, `patient_id` varchar(64) NOT NULL, `register_id` varchar(64) NOT NULL); (params None)
DEBUG 2024-08-21 12:05:55,433 schema CREATE TABLE `app01_onduty` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `date` date NOT NULL, `time` smallint NOT NULL, `state` integer NOT NULL, `doctor_id` bigint NOT NULL); (params None)
DEBUG 2024-08-21 12:05:55,462 schema CREATE TABLE `app01_notice` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `msg_type` smallint NOT NULL, `time` datetime(6) NOT NULL, `isRead` bool NOT NULL, `doctor_id` bigint NOT NULL, `patient_id` varchar(64) NOT NULL, `register_id` bigint NULL, `registerMan_id` varchar(64) NULL, `treatment_id` bigint NULL); (params None)
DEBUG 2024-08-21 12:05:55,535 schema CREATE TABLE `app01_bill` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `type` smallint NOT NULL, `state` bool NOT NULL, `price` numeric(5, 2) NOT NULL, `patient_id` varchar(64) NULL, `register_id` bigint NULL, `treatment_id` bigint NULL); (params None)
DEBUG 2024-08-21 12:05:55,589 schema ALTER TABLE `app01_treatment` ADD CONSTRAINT `app01_treatment_doctor_id_a47beada_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 12:05:55,612 schema ALTER TABLE `app01_treatment` ADD CONSTRAINT `app01_treatment_patient_id_52a8e1e5_fk_app01_pat` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 12:05:55,640 schema ALTER TABLE `app01_register` ADD CONSTRAINT `app01_register_doctor_id_e0ea61dc_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 12:05:55,663 schema ALTER TABLE `app01_register` ADD CONSTRAINT `app01_register_patient_id_4a065a29_fk_app01_pat` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 12:05:55,686 schema ALTER TABLE `app01_register` ADD CONSTRAINT `app01_register_register_id_e85a8e5b_fk_app01_pat` FOREIGN KEY (`register_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 12:05:55,711 schema ALTER TABLE `app01_onduty` ADD CONSTRAINT `app01_onduty_doctor_id_9b012eb7_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 12:05:55,735 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_doctor_id_2d7f7104_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 12:05:55,760 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_patient_id_74974826_fk_app01_patients_identity_num` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 12:05:55,786 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_register_id_6c54784c_fk_app01_register_id` FOREIGN KEY (`register_id`) REFERENCES `app01_register` (`id`); (params ())
DEBUG 2024-08-21 12:05:55,813 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_registerMan_id_1bd9adce_fk_app01_pat` FOREIGN KEY (`registerMan_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 12:05:55,840 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_treatment_id_596ea92a_fk_app01_treatment_id` FOREIGN KEY (`treatment_id`) REFERENCES `app01_treatment` (`id`); (params ())
DEBUG 2024-08-21 12:05:55,870 schema ALTER TABLE `app01_bill` ADD CONSTRAINT `app01_bill_patient_id_96fe396a_fk_app01_patients_identity_num` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 12:05:55,893 schema ALTER TABLE `app01_bill` ADD CONSTRAINT `app01_bill_register_id_cf59300e_fk_app01_register_id` FOREIGN KEY (`register_id`) REFERENCES `app01_register` (`id`); (params ())
DEBUG 2024-08-21 12:05:55,918 schema ALTER TABLE `app01_bill` ADD CONSTRAINT `app01_bill_treatment_id_73ef4d98_fk_app01_treatment_id` FOREIGN KEY (`treatment_id`) REFERENCES `app01_treatment` (`id`); (params ())
DEBUG 2024-08-21 12:05:55,972 schema ALTER TABLE `django_content_type` MODIFY `name` varchar(100) NULL; (params [])
DEBUG 2024-08-21 12:05:56,030 schema ALTER TABLE `django_content_type` DROP COLUMN `name`; (params ())
DEBUG 2024-08-21 12:05:56,081 schema ALTER TABLE `auth_permission` MODIFY `name` varchar(255) NOT NULL; (params [])
DEBUG 2024-08-21 12:05:56,147 schema ALTER TABLE `auth_user` MODIFY `email` varchar(254) NOT NULL; (params [])
DEBUG 2024-08-21 12:05:56,228 schema ALTER TABLE `auth_user` MODIFY `last_login` datetime(6) NULL; (params [])
DEBUG 2024-08-21 12:05:56,319 schema ALTER TABLE `auth_user` MODIFY `username` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 12:05:56,373 schema ALTER TABLE `auth_user` MODIFY `last_name` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 12:05:56,422 schema ALTER TABLE `auth_group` MODIFY `name` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 12:05:56,525 schema ALTER TABLE `auth_user` MODIFY `first_name` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 12:05:56,578 schema CREATE TABLE `django_session` (`session_key` varchar(40) NOT NULL PRIMARY KEY, `session_data` longtext NOT NULL, `expire_date` datetime(6) NOT NULL); (params None)
DEBUG 2024-08-21 12:05:56,601 schema CREATE INDEX `django_session_expire_date_a5c62663` ON `django_session` (`expire_date`); (params ())
DEBUG 2024-08-21 12:06:02,447 schema CREATE TABLE `django_migrations` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `app` varchar(255) NOT NULL, `name` varchar(255) NOT NULL, `applied` datetime(6) NOT NULL); (params None)
DEBUG 2024-08-21 12:06:02,464 schema CREATE TABLE `django_content_type` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(100) NOT NULL, `app_label` varchar(100) NOT NULL, `model` varchar(100) NOT NULL); (params None)
DEBUG 2024-08-21 12:06:02,484 schema ALTER TABLE `django_content_type` ADD CONSTRAINT `django_content_type_app_label_model_76bd3d3b_uniq` UNIQUE (`app_label`, `model`); (params ())
DEBUG 2024-08-21 12:06:02,537 schema CREATE TABLE `auth_permission` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(50) NOT NULL, `content_type_id` integer NOT NULL, `codename` varchar(100) NOT NULL); (params None)
DEBUG 2024-08-21 12:06:02,568 schema CREATE TABLE `auth_group` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(80) NOT NULL UNIQUE); (params None)
DEBUG 2024-08-21 12:06:02,588 schema CREATE TABLE `auth_group_permissions` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `group_id` integer NOT NULL, `permission_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 12:06:02,625 schema CREATE TABLE `auth_user` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `password` varchar(128) NOT NULL, `last_login` datetime(6) NOT NULL, `is_superuser` bool NOT NULL, `username` varchar(30) NOT NULL UNIQUE, `first_name` varchar(30) NOT NULL, `last_name` varchar(30) NOT NULL, `email` varchar(75) NOT NULL, `is_staff` bool NOT NULL, `is_active` bool NOT NULL, `date_joined` datetime(6) NOT NULL); (params None)
DEBUG 2024-08-21 12:06:02,640 schema CREATE TABLE `auth_user_groups` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `user_id` integer NOT NULL, `group_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 12:06:02,672 schema CREATE TABLE `auth_user_user_permissions` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `user_id` integer NOT NULL, `permission_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 12:06:02,706 schema ALTER TABLE `auth_permission` ADD CONSTRAINT `auth_permission_content_type_id_codename_01ab375a_uniq` UNIQUE (`content_type_id`, `codename`); (params ())
DEBUG 2024-08-21 12:06:02,721 schema ALTER TABLE `auth_permission` ADD CONSTRAINT `auth_permission_content_type_id_2f476e4b_fk_django_co` FOREIGN KEY (`content_type_id`) REFERENCES `django_content_type` (`id`); (params ())
DEBUG 2024-08-21 12:06:02,743 schema ALTER TABLE `auth_group_permissions` ADD CONSTRAINT `auth_group_permissions_group_id_permission_id_0cd325b0_uniq` UNIQUE (`group_id`, `permission_id`); (params ())
DEBUG 2024-08-21 12:06:02,758 schema ALTER TABLE `auth_group_permissions` ADD CONSTRAINT `auth_group_permissions_group_id_b120cbf9_fk_auth_group_id` FOREIGN KEY (`group_id`) REFERENCES `auth_group` (`id`); (params ())
DEBUG 2024-08-21 12:06:02,780 schema ALTER TABLE `auth_group_permissions` ADD CONSTRAINT `auth_group_permissio_permission_id_84c5c92e_fk_auth_perm` FOREIGN KEY (`permission_id`) REFERENCES `auth_permission` (`id`); (params ())
DEBUG 2024-08-21 12:06:02,803 schema ALTER TABLE `auth_user_groups` ADD CONSTRAINT `auth_user_groups_user_id_group_id_94350c0c_uniq` UNIQUE (`user_id`, `group_id`); (params ())
DEBUG 2024-08-21 12:06:02,820 schema ALTER TABLE `auth_user_groups` ADD CONSTRAINT `auth_user_groups_user_id_6a12ed8b_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); (params ())
DEBUG 2024-08-21 12:06:02,841 schema ALTER TABLE `auth_user_groups` ADD CONSTRAINT `auth_user_groups_group_id_97559544_fk_auth_group_id` FOREIGN KEY (`group_id`) REFERENCES `auth_group` (`id`); (params ())
DEBUG 2024-08-21 12:06:02,864 schema ALTER TABLE `auth_user_user_permissions` ADD CONSTRAINT `auth_user_user_permissions_user_id_permission_id_14a6b632_uniq` UNIQUE (`user_id`, `permission_id`); (params ())
DEBUG 2024-08-21 12:06:02,880 schema ALTER TABLE `auth_user_user_permissions` ADD CONSTRAINT `auth_user_user_permissions_user_id_a95ead1b_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); (params ())
DEBUG 2024-08-21 12:06:02,902 schema ALTER TABLE `auth_user_user_permissions` ADD CONSTRAINT `auth_user_user_permi_permission_id_1fbb5f2c_fk_auth_perm` FOREIGN KEY (`permission_id`) REFERENCES `auth_permission` (`id`); (params ())
DEBUG 2024-08-21 12:06:02,950 schema CREATE TABLE `django_admin_log` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `action_time` datetime(6) NOT NULL, `object_id` longtext NULL, `object_repr` varchar(200) NOT NULL, `action_flag` smallint UNSIGNED NOT NULL CHECK (`action_flag` >= 0), `change_message` longtext NOT NULL, `content_type_id` integer NULL, `user_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 12:06:02,995 schema ALTER TABLE `django_admin_log` ADD CONSTRAINT `django_admin_log_content_type_id_c4bce8eb_fk_django_co` FOREIGN KEY (`content_type_id`) REFERENCES `django_content_type` (`id`); (params ())
DEBUG 2024-08-21 12:06:03,022 schema ALTER TABLE `django_admin_log` ADD CONSTRAINT `django_admin_log_user_id_c564eba6_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); (params ())
DEBUG 2024-08-21 12:06:03,120 schema CREATE TABLE `app01_doctors` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `identity_num` varchar(64) NOT NULL, `name` varchar(20) NOT NULL, `title` varchar(50) NOT NULL, `department` varchar(20) NOT NULL, `research` varchar(150) NULL, `cost` numeric(5, 2) NOT NULL, `avatar` varchar(100) NULL, `avatar_name` varchar(128) NOT NULL); (params None)
DEBUG 2024-08-21 12:06:03,136 schema CREATE TABLE `app01_medicine` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(50) NOT NULL, `medicine_type` smallint NOT NULL, `symptom` varchar(200) NOT NULL, `price` numeric(5, 2) NOT NULL, `quantity` integer NOT NULL, `photo_name` varchar(128) NOT NULL); (params None)
DEBUG 2024-08-21 12:06:03,150 schema CREATE TABLE `app01_patients` (`identity` smallint NOT NULL, `identity_num` varchar(64) NOT NULL PRIMARY KEY, `name` varchar(20) NOT NULL, `health_insurance` smallint NOT NULL, `gender` smallint NOT NULL, `birthday` date NOT NULL, `phone_num` varchar(15) NOT NULL, `address` varchar(128) NOT NULL); (params None)
DEBUG 2024-08-21 12:06:03,164 schema CREATE TABLE `app01_user` (`type` smallint NOT NULL, `identity_num` varchar(64) NOT NULL PRIMARY KEY, `password` varchar(64) NOT NULL); (params None)
DEBUG 2024-08-21 12:06:03,177 schema CREATE TABLE `app01_treatment` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `queue_id` integer NOT NULL, `time` datetime(6) NOT NULL, `advice` varchar(256) NOT NULL, `medicine` longtext NOT NULL, `price` numeric(5, 2) NOT NULL, `doctor_id` bigint NOT NULL, `patient_id` varchar(64) NOT NULL); (params None)
DEBUG 2024-08-21 12:06:03,217 schema CREATE TABLE `app01_register` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `queue_id` integer NOT NULL, `time` datetime(6) NOT NULL, `position` varchar(128) NOT NULL, `doctor_id` bigint NOT NULL, `patient_id` varchar(64) NOT NULL, `register_id` varchar(64) NOT NULL); (params None)
DEBUG 2024-08-21 12:06:03,264 schema CREATE TABLE `app01_onduty` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `date` date NOT NULL, `time` smallint NOT NULL, `state` integer NOT NULL, `doctor_id` bigint NOT NULL); (params None)
DEBUG 2024-08-21 12:06:03,294 schema CREATE TABLE `app01_notice` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `msg_type` smallint NOT NULL, `time` datetime(6) NOT NULL, `isRead` bool NOT NULL, `doctor_id` bigint NOT NULL, `patient_id` varchar(64) NOT NULL, `register_id` bigint NULL, `registerMan_id` varchar(64) NULL, `treatment_id` bigint NULL); (params None)
DEBUG 2024-08-21 12:06:03,433 schema CREATE TABLE `app01_bill` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `type` smallint NOT NULL, `state` bool NOT NULL, `price` numeric(5, 2) NOT NULL, `patient_id` varchar(64) NULL, `register_id` bigint NULL, `treatment_id` bigint NULL); (params None)
DEBUG 2024-08-21 12:06:03,483 schema ALTER TABLE `app01_treatment` ADD CONSTRAINT `app01_treatment_doctor_id_a47beada_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 12:06:03,515 schema ALTER TABLE `app01_treatment` ADD CONSTRAINT `app01_treatment_patient_id_52a8e1e5_fk_app01_pat` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 12:06:03,550 schema ALTER TABLE `app01_register` ADD CONSTRAINT `app01_register_doctor_id_e0ea61dc_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 12:06:03,573 schema ALTER TABLE `app01_register` ADD CONSTRAINT `app01_register_patient_id_4a065a29_fk_app01_pat` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 12:06:03,599 schema ALTER TABLE `app01_register` ADD CONSTRAINT `app01_register_register_id_e85a8e5b_fk_app01_pat` FOREIGN KEY (`register_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 12:06:03,625 schema ALTER TABLE `app01_onduty` ADD CONSTRAINT `app01_onduty_doctor_id_9b012eb7_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 12:06:03,646 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_doctor_id_2d7f7104_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 12:06:03,670 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_patient_id_74974826_fk_app01_patients_identity_num` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 12:06:03,694 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_register_id_6c54784c_fk_app01_register_id` FOREIGN KEY (`register_id`) REFERENCES `app01_register` (`id`); (params ())
DEBUG 2024-08-21 12:06:03,722 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_registerMan_id_1bd9adce_fk_app01_pat` FOREIGN KEY (`registerMan_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 12:06:03,751 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_treatment_id_596ea92a_fk_app01_treatment_id` FOREIGN KEY (`treatment_id`) REFERENCES `app01_treatment` (`id`); (params ())
DEBUG 2024-08-21 12:06:03,781 schema ALTER TABLE `app01_bill` ADD CONSTRAINT `app01_bill_patient_id_96fe396a_fk_app01_patients_identity_num` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 12:06:03,804 schema ALTER TABLE `app01_bill` ADD CONSTRAINT `app01_bill_register_id_cf59300e_fk_app01_register_id` FOREIGN KEY (`register_id`) REFERENCES `app01_register` (`id`); (params ())
DEBUG 2024-08-21 12:06:03,827 schema ALTER TABLE `app01_bill` ADD CONSTRAINT `app01_bill_treatment_id_73ef4d98_fk_app01_treatment_id` FOREIGN KEY (`treatment_id`) REFERENCES `app01_treatment` (`id`); (params ())
DEBUG 2024-08-21 12:06:03,877 schema ALTER TABLE `django_content_type` MODIFY `name` varchar(100) NULL; (params [])
DEBUG 2024-08-21 12:06:03,936 schema ALTER TABLE `django_content_type` DROP COLUMN `name`; (params ())
DEBUG 2024-08-21 12:06:03,984 schema ALTER TABLE `auth_permission` MODIFY `name` varchar(255) NOT NULL; (params [])
DEBUG 2024-08-21 12:06:04,033 schema ALTER TABLE `auth_user` MODIFY `email` varchar(254) NOT NULL; (params [])
DEBUG 2024-08-21 12:06:04,118 schema ALTER TABLE `auth_user` MODIFY `last_login` datetime(6) NULL; (params [])
DEBUG 2024-08-21 12:06:04,215 schema ALTER TABLE `auth_user` MODIFY `username` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 12:06:04,268 schema ALTER TABLE `auth_user` MODIFY `last_name` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 12:06:04,320 schema ALTER TABLE `auth_group` MODIFY `name` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 12:06:04,429 schema ALTER TABLE `auth_user` MODIFY `first_name` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 12:06:04,482 schema CREATE TABLE `django_session` (`session_key` varchar(40) NOT NULL PRIMARY KEY, `session_data` longtext NOT NULL, `expire_date` datetime(6) NOT NULL); (params None)
DEBUG 2024-08-21 12:06:04,509 schema CREATE INDEX `django_session_expire_date_a5c62663` ON `django_session` (`expire_date`); (params ())
ERROR 2024-08-21 12:06:05,500 log Internal Server Error: /api/medicine/list/
Traceback (most recent call last):
  File "D:\anacoda\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\views\decorators\csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\views\generic\base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 509, in dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 480, in raise_uncaught_exception
    raise exc
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\86185\Desktop\SEGroup6\Ã¨Ã¨¾ÍÕï\Project\app01\views.py", line 927, in post
    action = json.loads(request.body)['action']
             ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
KeyError: 'action'
ERROR 2024-08-21 12:06:05,556 log Internal Server Error: /api/medicine/list/
Traceback (most recent call last):
  File "D:\anacoda\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\views\decorators\csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\views\generic\base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 509, in dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 480, in raise_uncaught_exception
    raise exc
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\86185\Desktop\SEGroup6\Ã¨Ã¨¾ÍÕï\Project\app01\views.py", line 927, in post
    action = json.loads(request.body)['action']
             ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
KeyError: 'action'
WARNING 2024-08-21 12:06:05,615 log Not Found: /api/medicine/setData/
ERROR 2024-08-21 12:06:05,675 log Internal Server Error: /api/medicine/setData/
Traceback (most recent call last):
  File "D:\anacoda\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\views\decorators\csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\views\generic\base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 509, in dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 480, in raise_uncaught_exception
    raise exc
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\86185\Desktop\SEGroup6\Ã¨Ã¨¾ÍÕï\Project\app01\views.py", line 935, in post
    return self.alterMedicine(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\86185\Desktop\SEGroup6\Ã¨Ã¨¾ÍÕï\Project\app01\views.py", line 974, in alterMedicine
    medicine.medicine_type = data['type']
                             ~~~~^^^^^^^^
KeyError: 'type'
WARNING 2024-08-21 12:06:05,736 log Bad Request: /api/medicine/delete/
WARNING 2024-08-21 12:06:06,021 log Bad Request: /api/medicine/list/
DEBUG 2024-08-21 14:05:13,836 schema CREATE TABLE `django_migrations` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `app` varchar(255) NOT NULL, `name` varchar(255) NOT NULL, `applied` datetime(6) NOT NULL); (params None)
DEBUG 2024-08-21 14:05:13,856 schema CREATE TABLE `django_content_type` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(100) NOT NULL, `app_label` varchar(100) NOT NULL, `model` varchar(100) NOT NULL); (params None)
DEBUG 2024-08-21 14:05:13,878 schema ALTER TABLE `django_content_type` ADD CONSTRAINT `django_content_type_app_label_model_76bd3d3b_uniq` UNIQUE (`app_label`, `model`); (params ())
DEBUG 2024-08-21 14:05:13,923 schema CREATE TABLE `auth_permission` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(50) NOT NULL, `content_type_id` integer NOT NULL, `codename` varchar(100) NOT NULL); (params None)
DEBUG 2024-08-21 14:05:13,956 schema CREATE TABLE `auth_group` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(80) NOT NULL UNIQUE); (params None)
DEBUG 2024-08-21 14:05:13,983 schema CREATE TABLE `auth_group_permissions` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `group_id` integer NOT NULL, `permission_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 14:05:14,032 schema CREATE TABLE `auth_user` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `password` varchar(128) NOT NULL, `last_login` datetime(6) NOT NULL, `is_superuser` bool NOT NULL, `username` varchar(30) NOT NULL UNIQUE, `first_name` varchar(30) NOT NULL, `last_name` varchar(30) NOT NULL, `email` varchar(75) NOT NULL, `is_staff` bool NOT NULL, `is_active` bool NOT NULL, `date_joined` datetime(6) NOT NULL); (params None)
DEBUG 2024-08-21 14:05:14,049 schema CREATE TABLE `auth_user_groups` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `user_id` integer NOT NULL, `group_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 14:05:14,094 schema CREATE TABLE `auth_user_user_permissions` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `user_id` integer NOT NULL, `permission_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 14:05:14,137 schema ALTER TABLE `auth_permission` ADD CONSTRAINT `auth_permission_content_type_id_codename_01ab375a_uniq` UNIQUE (`content_type_id`, `codename`); (params ())
DEBUG 2024-08-21 14:05:14,154 schema ALTER TABLE `auth_permission` ADD CONSTRAINT `auth_permission_content_type_id_2f476e4b_fk_django_co` FOREIGN KEY (`content_type_id`) REFERENCES `django_content_type` (`id`); (params ())
DEBUG 2024-08-21 14:05:14,181 schema ALTER TABLE `auth_group_permissions` ADD CONSTRAINT `auth_group_permissions_group_id_permission_id_0cd325b0_uniq` UNIQUE (`group_id`, `permission_id`); (params ())
DEBUG 2024-08-21 14:05:14,198 schema ALTER TABLE `auth_group_permissions` ADD CONSTRAINT `auth_group_permissions_group_id_b120cbf9_fk_auth_group_id` FOREIGN KEY (`group_id`) REFERENCES `auth_group` (`id`); (params ())
DEBUG 2024-08-21 14:05:14,223 schema ALTER TABLE `auth_group_permissions` ADD CONSTRAINT `auth_group_permissio_permission_id_84c5c92e_fk_auth_perm` FOREIGN KEY (`permission_id`) REFERENCES `auth_permission` (`id`); (params ())
DEBUG 2024-08-21 14:05:14,249 schema ALTER TABLE `auth_user_groups` ADD CONSTRAINT `auth_user_groups_user_id_group_id_94350c0c_uniq` UNIQUE (`user_id`, `group_id`); (params ())
DEBUG 2024-08-21 14:05:14,268 schema ALTER TABLE `auth_user_groups` ADD CONSTRAINT `auth_user_groups_user_id_6a12ed8b_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); (params ())
DEBUG 2024-08-21 14:05:14,291 schema ALTER TABLE `auth_user_groups` ADD CONSTRAINT `auth_user_groups_group_id_97559544_fk_auth_group_id` FOREIGN KEY (`group_id`) REFERENCES `auth_group` (`id`); (params ())
DEBUG 2024-08-21 14:05:14,315 schema ALTER TABLE `auth_user_user_permissions` ADD CONSTRAINT `auth_user_user_permissions_user_id_permission_id_14a6b632_uniq` UNIQUE (`user_id`, `permission_id`); (params ())
DEBUG 2024-08-21 14:05:14,332 schema ALTER TABLE `auth_user_user_permissions` ADD CONSTRAINT `auth_user_user_permissions_user_id_a95ead1b_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); (params ())
DEBUG 2024-08-21 14:05:14,365 schema ALTER TABLE `auth_user_user_permissions` ADD CONSTRAINT `auth_user_user_permi_permission_id_1fbb5f2c_fk_auth_perm` FOREIGN KEY (`permission_id`) REFERENCES `auth_permission` (`id`); (params ())
DEBUG 2024-08-21 14:05:14,420 schema CREATE TABLE `django_admin_log` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `action_time` datetime(6) NOT NULL, `object_id` longtext NULL, `object_repr` varchar(200) NOT NULL, `action_flag` smallint UNSIGNED NOT NULL CHECK (`action_flag` >= 0), `change_message` longtext NOT NULL, `content_type_id` integer NULL, `user_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 14:05:14,461 schema ALTER TABLE `django_admin_log` ADD CONSTRAINT `django_admin_log_content_type_id_c4bce8eb_fk_django_co` FOREIGN KEY (`content_type_id`) REFERENCES `django_content_type` (`id`); (params ())
DEBUG 2024-08-21 14:05:14,488 schema ALTER TABLE `django_admin_log` ADD CONSTRAINT `django_admin_log_user_id_c564eba6_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); (params ())
DEBUG 2024-08-21 14:05:14,602 schema CREATE TABLE `app01_doctors` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `identity_num` varchar(64) NOT NULL, `name` varchar(20) NOT NULL, `title` varchar(50) NOT NULL, `department` varchar(20) NOT NULL, `research` varchar(150) NULL, `cost` numeric(5, 2) NOT NULL, `avatar` varchar(100) NULL, `avatar_name` varchar(128) NOT NULL); (params None)
DEBUG 2024-08-21 14:05:14,619 schema CREATE TABLE `app01_medicine` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(50) NOT NULL, `medicine_type` smallint NOT NULL, `symptom` varchar(200) NOT NULL, `price` numeric(5, 2) NOT NULL, `quantity` integer NOT NULL, `photo_name` varchar(128) NOT NULL); (params None)
DEBUG 2024-08-21 14:05:14,634 schema CREATE TABLE `app01_patients` (`identity` smallint NOT NULL, `identity_num` varchar(64) NOT NULL PRIMARY KEY, `name` varchar(20) NOT NULL, `health_insurance` smallint NOT NULL, `gender` smallint NOT NULL, `birthday` date NOT NULL, `phone_num` varchar(15) NOT NULL, `address` varchar(128) NOT NULL); (params None)
DEBUG 2024-08-21 14:05:14,650 schema CREATE TABLE `app01_user` (`type` smallint NOT NULL, `identity_num` varchar(64) NOT NULL PRIMARY KEY, `password` varchar(64) NOT NULL); (params None)
DEBUG 2024-08-21 14:05:14,668 schema CREATE TABLE `app01_treatment` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `queue_id` integer NOT NULL, `time` datetime(6) NOT NULL, `advice` varchar(256) NOT NULL, `medicine` longtext NOT NULL, `price` numeric(5, 2) NOT NULL, `doctor_id` bigint NOT NULL, `patient_id` varchar(64) NOT NULL); (params None)
DEBUG 2024-08-21 14:05:14,714 schema CREATE TABLE `app01_register` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `queue_id` integer NOT NULL, `time` datetime(6) NOT NULL, `position` varchar(128) NOT NULL, `doctor_id` bigint NOT NULL, `patient_id` varchar(64) NOT NULL, `register_id` varchar(64) NOT NULL); (params None)
DEBUG 2024-08-21 14:05:14,784 schema CREATE TABLE `app01_onduty` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `date` date NOT NULL, `time` smallint NOT NULL, `state` integer NOT NULL, `doctor_id` bigint NOT NULL); (params None)
DEBUG 2024-08-21 14:05:14,820 schema CREATE TABLE `app01_notice` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `msg_type` smallint NOT NULL, `time` datetime(6) NOT NULL, `isRead` bool NOT NULL, `doctor_id` bigint NOT NULL, `patient_id` varchar(64) NOT NULL, `register_id` bigint NULL, `registerMan_id` varchar(64) NULL, `treatment_id` bigint NULL); (params None)
DEBUG 2024-08-21 14:05:14,909 schema CREATE TABLE `app01_bill` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `type` smallint NOT NULL, `state` bool NOT NULL, `price` numeric(5, 2) NOT NULL, `patient_id` varchar(64) NULL, `register_id` bigint NULL, `treatment_id` bigint NULL); (params None)
DEBUG 2024-08-21 14:05:14,971 schema ALTER TABLE `app01_treatment` ADD CONSTRAINT `app01_treatment_doctor_id_a47beada_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 14:05:15,003 schema ALTER TABLE `app01_treatment` ADD CONSTRAINT `app01_treatment_patient_id_52a8e1e5_fk_app01_pat` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 14:05:15,049 schema ALTER TABLE `app01_register` ADD CONSTRAINT `app01_register_doctor_id_e0ea61dc_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 14:05:15,077 schema ALTER TABLE `app01_register` ADD CONSTRAINT `app01_register_patient_id_4a065a29_fk_app01_pat` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 14:05:15,104 schema ALTER TABLE `app01_register` ADD CONSTRAINT `app01_register_register_id_e85a8e5b_fk_app01_pat` FOREIGN KEY (`register_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 14:05:15,130 schema ALTER TABLE `app01_onduty` ADD CONSTRAINT `app01_onduty_doctor_id_9b012eb7_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 14:05:15,158 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_doctor_id_2d7f7104_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 14:05:15,188 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_patient_id_74974826_fk_app01_patients_identity_num` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 14:05:15,218 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_register_id_6c54784c_fk_app01_register_id` FOREIGN KEY (`register_id`) REFERENCES `app01_register` (`id`); (params ())
DEBUG 2024-08-21 14:05:15,255 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_registerMan_id_1bd9adce_fk_app01_pat` FOREIGN KEY (`registerMan_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 14:05:15,286 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_treatment_id_596ea92a_fk_app01_treatment_id` FOREIGN KEY (`treatment_id`) REFERENCES `app01_treatment` (`id`); (params ())
DEBUG 2024-08-21 14:05:15,316 schema ALTER TABLE `app01_bill` ADD CONSTRAINT `app01_bill_patient_id_96fe396a_fk_app01_patients_identity_num` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 14:05:15,340 schema ALTER TABLE `app01_bill` ADD CONSTRAINT `app01_bill_register_id_cf59300e_fk_app01_register_id` FOREIGN KEY (`register_id`) REFERENCES `app01_register` (`id`); (params ())
DEBUG 2024-08-21 14:05:15,367 schema ALTER TABLE `app01_bill` ADD CONSTRAINT `app01_bill_treatment_id_73ef4d98_fk_app01_treatment_id` FOREIGN KEY (`treatment_id`) REFERENCES `app01_treatment` (`id`); (params ())
DEBUG 2024-08-21 14:05:15,427 schema ALTER TABLE `django_content_type` MODIFY `name` varchar(100) NULL; (params [])
DEBUG 2024-08-21 14:05:15,497 schema ALTER TABLE `django_content_type` DROP COLUMN `name`; (params ())
DEBUG 2024-08-21 14:05:15,560 schema ALTER TABLE `auth_permission` MODIFY `name` varchar(255) NOT NULL; (params [])
DEBUG 2024-08-21 14:05:15,623 schema ALTER TABLE `auth_user` MODIFY `email` varchar(254) NOT NULL; (params [])
DEBUG 2024-08-21 14:05:15,711 schema ALTER TABLE `auth_user` MODIFY `last_login` datetime(6) NULL; (params [])
DEBUG 2024-08-21 14:05:15,824 schema ALTER TABLE `auth_user` MODIFY `username` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 14:05:15,886 schema ALTER TABLE `auth_user` MODIFY `last_name` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 14:05:15,945 schema ALTER TABLE `auth_group` MODIFY `name` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 14:05:16,070 schema ALTER TABLE `auth_user` MODIFY `first_name` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 14:05:16,124 schema CREATE TABLE `django_session` (`session_key` varchar(40) NOT NULL PRIMARY KEY, `session_data` longtext NOT NULL, `expire_date` datetime(6) NOT NULL); (params None)
DEBUG 2024-08-21 14:05:16,153 schema CREATE INDEX `django_session_expire_date_a5c62663` ON `django_session` (`expire_date`); (params ())
ERROR 2024-08-21 14:05:17,422 log Internal Server Error: /api/medicine/list/
Traceback (most recent call last):
  File "D:\anacoda\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\views\decorators\csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\views\generic\base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 509, in dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 480, in raise_uncaught_exception
    raise exc
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\86185\Desktop\SEGroup6\Ã¨Ã¨¾ÍÕï\Project\app01\views.py", line 927, in post
    action = json.loads(request.body)['action']
             ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
KeyError: 'action'
ERROR 2024-08-21 14:05:17,486 log Internal Server Error: /api/medicine/list/
Traceback (most recent call last):
  File "D:\anacoda\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\views\decorators\csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\views\generic\base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 509, in dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 480, in raise_uncaught_exception
    raise exc
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\86185\Desktop\SEGroup6\Ã¨Ã¨¾ÍÕï\Project\app01\views.py", line 933, in post
    return self.addMedicine(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\86185\Desktop\SEGroup6\Ã¨Ã¨¾ÍÕï\Project\app01\views.py", line 959, in addMedicine
    medicine.medicine_type = data['type']
                             ~~~~^^^^^^^^
KeyError: 'type'
WARNING 2024-08-21 14:05:17,550 log Not Found: /api/medicine/setData/
ERROR 2024-08-21 14:05:17,609 log Internal Server Error: /api/medicine/setData/
Traceback (most recent call last):
  File "D:\anacoda\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\views\decorators\csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\views\generic\base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 509, in dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 480, in raise_uncaught_exception
    raise exc
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\86185\Desktop\SEGroup6\Ã¨Ã¨¾ÍÕï\Project\app01\views.py", line 935, in post
    return self.alterMedicine(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\86185\Desktop\SEGroup6\Ã¨Ã¨¾ÍÕï\Project\app01\views.py", line 974, in alterMedicine
    medicine.medicine_type = data['type']
                             ~~~~^^^^^^^^
KeyError: 'type'
WARNING 2024-08-21 14:05:17,682 log Bad Request: /api/medicine/delete/
WARNING 2024-08-21 14:05:17,979 log Bad Request: /api/medicine/list/
DEBUG 2024-08-21 14:06:09,956 schema CREATE TABLE `django_migrations` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `app` varchar(255) NOT NULL, `name` varchar(255) NOT NULL, `applied` datetime(6) NOT NULL); (params None)
DEBUG 2024-08-21 14:06:09,989 schema CREATE TABLE `django_content_type` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(100) NOT NULL, `app_label` varchar(100) NOT NULL, `model` varchar(100) NOT NULL); (params None)
DEBUG 2024-08-21 14:06:10,023 schema ALTER TABLE `django_content_type` ADD CONSTRAINT `django_content_type_app_label_model_76bd3d3b_uniq` UNIQUE (`app_label`, `model`); (params ())
DEBUG 2024-08-21 14:06:10,101 schema CREATE TABLE `auth_permission` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(50) NOT NULL, `content_type_id` integer NOT NULL, `codename` varchar(100) NOT NULL); (params None)
DEBUG 2024-08-21 14:06:10,151 schema CREATE TABLE `auth_group` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(80) NOT NULL UNIQUE); (params None)
DEBUG 2024-08-21 14:06:10,189 schema CREATE TABLE `auth_group_permissions` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `group_id` integer NOT NULL, `permission_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 14:06:10,257 schema CREATE TABLE `auth_user` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `password` varchar(128) NOT NULL, `last_login` datetime(6) NOT NULL, `is_superuser` bool NOT NULL, `username` varchar(30) NOT NULL UNIQUE, `first_name` varchar(30) NOT NULL, `last_name` varchar(30) NOT NULL, `email` varchar(75) NOT NULL, `is_staff` bool NOT NULL, `is_active` bool NOT NULL, `date_joined` datetime(6) NOT NULL); (params None)
DEBUG 2024-08-21 14:06:10,279 schema CREATE TABLE `auth_user_groups` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `user_id` integer NOT NULL, `group_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 14:06:10,354 schema CREATE TABLE `auth_user_user_permissions` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `user_id` integer NOT NULL, `permission_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 14:06:10,423 schema ALTER TABLE `auth_permission` ADD CONSTRAINT `auth_permission_content_type_id_codename_01ab375a_uniq` UNIQUE (`content_type_id`, `codename`); (params ())
DEBUG 2024-08-21 14:06:10,444 schema ALTER TABLE `auth_permission` ADD CONSTRAINT `auth_permission_content_type_id_2f476e4b_fk_django_co` FOREIGN KEY (`content_type_id`) REFERENCES `django_content_type` (`id`); (params ())
DEBUG 2024-08-21 14:06:10,487 schema ALTER TABLE `auth_group_permissions` ADD CONSTRAINT `auth_group_permissions_group_id_permission_id_0cd325b0_uniq` UNIQUE (`group_id`, `permission_id`); (params ())
DEBUG 2024-08-21 14:06:10,509 schema ALTER TABLE `auth_group_permissions` ADD CONSTRAINT `auth_group_permissions_group_id_b120cbf9_fk_auth_group_id` FOREIGN KEY (`group_id`) REFERENCES `auth_group` (`id`); (params ())
DEBUG 2024-08-21 14:06:10,544 schema ALTER TABLE `auth_group_permissions` ADD CONSTRAINT `auth_group_permissio_permission_id_84c5c92e_fk_auth_perm` FOREIGN KEY (`permission_id`) REFERENCES `auth_permission` (`id`); (params ())
DEBUG 2024-08-21 14:06:10,602 schema ALTER TABLE `auth_user_groups` ADD CONSTRAINT `auth_user_groups_user_id_group_id_94350c0c_uniq` UNIQUE (`user_id`, `group_id`); (params ())
DEBUG 2024-08-21 14:06:10,624 schema ALTER TABLE `auth_user_groups` ADD CONSTRAINT `auth_user_groups_user_id_6a12ed8b_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); (params ())
DEBUG 2024-08-21 14:06:10,670 schema ALTER TABLE `auth_user_groups` ADD CONSTRAINT `auth_user_groups_group_id_97559544_fk_auth_group_id` FOREIGN KEY (`group_id`) REFERENCES `auth_group` (`id`); (params ())
DEBUG 2024-08-21 14:06:10,724 schema ALTER TABLE `auth_user_user_permissions` ADD CONSTRAINT `auth_user_user_permissions_user_id_permission_id_14a6b632_uniq` UNIQUE (`user_id`, `permission_id`); (params ())
DEBUG 2024-08-21 14:06:10,765 schema ALTER TABLE `auth_user_user_permissions` ADD CONSTRAINT `auth_user_user_permissions_user_id_a95ead1b_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); (params ())
DEBUG 2024-08-21 14:06:10,805 schema ALTER TABLE `auth_user_user_permissions` ADD CONSTRAINT `auth_user_user_permi_permission_id_1fbb5f2c_fk_auth_perm` FOREIGN KEY (`permission_id`) REFERENCES `auth_permission` (`id`); (params ())
DEBUG 2024-08-21 14:06:10,903 schema CREATE TABLE `django_admin_log` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `action_time` datetime(6) NOT NULL, `object_id` longtext NULL, `object_repr` varchar(200) NOT NULL, `action_flag` smallint UNSIGNED NOT NULL CHECK (`action_flag` >= 0), `change_message` longtext NOT NULL, `content_type_id` integer NULL, `user_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 14:06:10,975 schema ALTER TABLE `django_admin_log` ADD CONSTRAINT `django_admin_log_content_type_id_c4bce8eb_fk_django_co` FOREIGN KEY (`content_type_id`) REFERENCES `django_content_type` (`id`); (params ())
DEBUG 2024-08-21 14:06:11,016 schema ALTER TABLE `django_admin_log` ADD CONSTRAINT `django_admin_log_user_id_c564eba6_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); (params ())
DEBUG 2024-08-21 14:06:11,236 schema CREATE TABLE `app01_doctors` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `identity_num` varchar(64) NOT NULL, `name` varchar(20) NOT NULL, `title` varchar(50) NOT NULL, `department` varchar(20) NOT NULL, `research` varchar(150) NULL, `cost` numeric(5, 2) NOT NULL, `avatar` varchar(100) NULL, `avatar_name` varchar(128) NOT NULL); (params None)
DEBUG 2024-08-21 14:06:11,268 schema CREATE TABLE `app01_medicine` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(50) NOT NULL, `medicine_type` smallint NOT NULL, `symptom` varchar(200) NOT NULL, `price` numeric(5, 2) NOT NULL, `quantity` integer NOT NULL, `photo_name` varchar(128) NOT NULL); (params None)
DEBUG 2024-08-21 14:06:11,300 schema CREATE TABLE `app01_patients` (`identity` smallint NOT NULL, `identity_num` varchar(64) NOT NULL PRIMARY KEY, `name` varchar(20) NOT NULL, `health_insurance` smallint NOT NULL, `gender` smallint NOT NULL, `birthday` date NOT NULL, `phone_num` varchar(15) NOT NULL, `address` varchar(128) NOT NULL); (params None)
DEBUG 2024-08-21 14:06:11,321 schema CREATE TABLE `app01_user` (`type` smallint NOT NULL, `identity_num` varchar(64) NOT NULL PRIMARY KEY, `password` varchar(64) NOT NULL); (params None)
DEBUG 2024-08-21 14:06:11,346 schema CREATE TABLE `app01_treatment` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `queue_id` integer NOT NULL, `time` datetime(6) NOT NULL, `advice` varchar(256) NOT NULL, `medicine` longtext NOT NULL, `price` numeric(5, 2) NOT NULL, `doctor_id` bigint NOT NULL, `patient_id` varchar(64) NOT NULL); (params None)
DEBUG 2024-08-21 14:06:11,467 schema CREATE TABLE `app01_register` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `queue_id` integer NOT NULL, `time` datetime(6) NOT NULL, `position` varchar(128) NOT NULL, `doctor_id` bigint NOT NULL, `patient_id` varchar(64) NOT NULL, `register_id` varchar(64) NOT NULL); (params None)
DEBUG 2024-08-21 14:06:11,596 schema CREATE TABLE `app01_onduty` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `date` date NOT NULL, `time` smallint NOT NULL, `state` integer NOT NULL, `doctor_id` bigint NOT NULL); (params None)
DEBUG 2024-08-21 14:06:11,653 schema CREATE TABLE `app01_notice` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `msg_type` smallint NOT NULL, `time` datetime(6) NOT NULL, `isRead` bool NOT NULL, `doctor_id` bigint NOT NULL, `patient_id` varchar(64) NOT NULL, `register_id` bigint NULL, `registerMan_id` varchar(64) NULL, `treatment_id` bigint NULL); (params None)
DEBUG 2024-08-21 14:06:11,815 schema CREATE TABLE `app01_bill` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `type` smallint NOT NULL, `state` bool NOT NULL, `price` numeric(5, 2) NOT NULL, `patient_id` varchar(64) NULL, `register_id` bigint NULL, `treatment_id` bigint NULL); (params None)
DEBUG 2024-08-21 14:06:11,928 schema ALTER TABLE `app01_treatment` ADD CONSTRAINT `app01_treatment_doctor_id_a47beada_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 14:06:11,971 schema ALTER TABLE `app01_treatment` ADD CONSTRAINT `app01_treatment_patient_id_52a8e1e5_fk_app01_pat` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 14:06:12,025 schema ALTER TABLE `app01_register` ADD CONSTRAINT `app01_register_doctor_id_e0ea61dc_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 14:06:12,064 schema ALTER TABLE `app01_register` ADD CONSTRAINT `app01_register_patient_id_4a065a29_fk_app01_pat` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 14:06:12,150 schema ALTER TABLE `app01_register` ADD CONSTRAINT `app01_register_register_id_e85a8e5b_fk_app01_pat` FOREIGN KEY (`register_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 14:06:12,195 schema ALTER TABLE `app01_onduty` ADD CONSTRAINT `app01_onduty_doctor_id_9b012eb7_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 14:06:12,235 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_doctor_id_2d7f7104_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 14:06:12,270 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_patient_id_74974826_fk_app01_patients_identity_num` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 14:06:12,318 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_register_id_6c54784c_fk_app01_register_id` FOREIGN KEY (`register_id`) REFERENCES `app01_register` (`id`); (params ())
DEBUG 2024-08-21 14:06:12,378 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_registerMan_id_1bd9adce_fk_app01_pat` FOREIGN KEY (`registerMan_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 14:06:12,416 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_treatment_id_596ea92a_fk_app01_treatment_id` FOREIGN KEY (`treatment_id`) REFERENCES `app01_treatment` (`id`); (params ())
DEBUG 2024-08-21 14:06:12,460 schema ALTER TABLE `app01_bill` ADD CONSTRAINT `app01_bill_patient_id_96fe396a_fk_app01_patients_identity_num` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 14:06:12,499 schema ALTER TABLE `app01_bill` ADD CONSTRAINT `app01_bill_register_id_cf59300e_fk_app01_register_id` FOREIGN KEY (`register_id`) REFERENCES `app01_register` (`id`); (params ())
DEBUG 2024-08-21 14:06:12,539 schema ALTER TABLE `app01_bill` ADD CONSTRAINT `app01_bill_treatment_id_73ef4d98_fk_app01_treatment_id` FOREIGN KEY (`treatment_id`) REFERENCES `app01_treatment` (`id`); (params ())
DEBUG 2024-08-21 14:06:12,681 schema ALTER TABLE `django_content_type` MODIFY `name` varchar(100) NULL; (params [])
DEBUG 2024-08-21 14:06:12,784 schema ALTER TABLE `django_content_type` DROP COLUMN `name`; (params ())
DEBUG 2024-08-21 14:06:12,893 schema ALTER TABLE `auth_permission` MODIFY `name` varchar(255) NOT NULL; (params [])
DEBUG 2024-08-21 14:06:12,977 schema ALTER TABLE `auth_user` MODIFY `email` varchar(254) NOT NULL; (params [])
DEBUG 2024-08-21 14:06:13,106 schema ALTER TABLE `auth_user` MODIFY `last_login` datetime(6) NULL; (params [])
DEBUG 2024-08-21 14:06:13,287 schema ALTER TABLE `auth_user` MODIFY `username` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 14:06:13,375 schema ALTER TABLE `auth_user` MODIFY `last_name` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 14:06:13,453 schema ALTER TABLE `auth_group` MODIFY `name` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 14:06:13,630 schema ALTER TABLE `auth_user` MODIFY `first_name` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 14:06:13,716 schema CREATE TABLE `django_session` (`session_key` varchar(40) NOT NULL PRIMARY KEY, `session_data` longtext NOT NULL, `expire_date` datetime(6) NOT NULL); (params None)
DEBUG 2024-08-21 14:06:13,755 schema CREATE INDEX `django_session_expire_date_a5c62663` ON `django_session` (`expire_date`); (params ())
ERROR 2024-08-21 14:06:15,357 log Internal Server Error: /api/medicine/list/
Traceback (most recent call last):
  File "D:\anacoda\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\views\decorators\csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\views\generic\base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 509, in dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 480, in raise_uncaught_exception
    raise exc
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\86185\Desktop\SEGroup6\Ã¨Ã¨¾ÍÕï\Project\app01\views.py", line 933, in post
    return self.addMedicine(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\86185\Desktop\SEGroup6\Ã¨Ã¨¾ÍÕï\Project\app01\views.py", line 959, in addMedicine
    medicine.medicine_type = data['type']
                             ~~~~^^^^^^^^
KeyError: 'type'
ERROR 2024-08-21 14:06:15,437 log Internal Server Error: /api/medicine/list/
Traceback (most recent call last):
  File "D:\anacoda\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\views\decorators\csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\views\generic\base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 509, in dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 480, in raise_uncaught_exception
    raise exc
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\86185\Desktop\SEGroup6\Ã¨Ã¨¾ÍÕï\Project\app01\views.py", line 933, in post
    return self.addMedicine(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\86185\Desktop\SEGroup6\Ã¨Ã¨¾ÍÕï\Project\app01\views.py", line 959, in addMedicine
    medicine.medicine_type = data['type']
                             ~~~~^^^^^^^^
KeyError: 'type'
WARNING 2024-08-21 14:06:15,546 log Not Found: /api/medicine/setData/
ERROR 2024-08-21 14:06:15,634 log Internal Server Error: /api/medicine/setData/
Traceback (most recent call last):
  File "D:\anacoda\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\views\decorators\csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\views\generic\base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 509, in dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 480, in raise_uncaught_exception
    raise exc
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\86185\Desktop\SEGroup6\Ã¨Ã¨¾ÍÕï\Project\app01\views.py", line 935, in post
    return self.alterMedicine(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\86185\Desktop\SEGroup6\Ã¨Ã¨¾ÍÕï\Project\app01\views.py", line 974, in alterMedicine
    medicine.medicine_type = data['type']
                             ~~~~^^^^^^^^
KeyError: 'type'
WARNING 2024-08-21 14:06:15,732 log Bad Request: /api/medicine/delete/
WARNING 2024-08-21 14:06:16,286 log Bad Request: /api/medicine/list/
DEBUG 2024-08-21 14:06:59,459 schema CREATE TABLE `django_migrations` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `app` varchar(255) NOT NULL, `name` varchar(255) NOT NULL, `applied` datetime(6) NOT NULL); (params None)
DEBUG 2024-08-21 14:06:59,478 schema CREATE TABLE `django_content_type` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(100) NOT NULL, `app_label` varchar(100) NOT NULL, `model` varchar(100) NOT NULL); (params None)
DEBUG 2024-08-21 14:06:59,499 schema ALTER TABLE `django_content_type` ADD CONSTRAINT `django_content_type_app_label_model_76bd3d3b_uniq` UNIQUE (`app_label`, `model`); (params ())
DEBUG 2024-08-21 14:06:59,548 schema CREATE TABLE `auth_permission` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(50) NOT NULL, `content_type_id` integer NOT NULL, `codename` varchar(100) NOT NULL); (params None)
DEBUG 2024-08-21 14:06:59,580 schema CREATE TABLE `auth_group` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(80) NOT NULL UNIQUE); (params None)
DEBUG 2024-08-21 14:06:59,602 schema CREATE TABLE `auth_group_permissions` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `group_id` integer NOT NULL, `permission_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 14:06:59,646 schema CREATE TABLE `auth_user` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `password` varchar(128) NOT NULL, `last_login` datetime(6) NOT NULL, `is_superuser` bool NOT NULL, `username` varchar(30) NOT NULL UNIQUE, `first_name` varchar(30) NOT NULL, `last_name` varchar(30) NOT NULL, `email` varchar(75) NOT NULL, `is_staff` bool NOT NULL, `is_active` bool NOT NULL, `date_joined` datetime(6) NOT NULL); (params None)
DEBUG 2024-08-21 14:06:59,664 schema CREATE TABLE `auth_user_groups` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `user_id` integer NOT NULL, `group_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 14:06:59,706 schema CREATE TABLE `auth_user_user_permissions` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `user_id` integer NOT NULL, `permission_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 14:06:59,756 schema ALTER TABLE `auth_permission` ADD CONSTRAINT `auth_permission_content_type_id_codename_01ab375a_uniq` UNIQUE (`content_type_id`, `codename`); (params ())
DEBUG 2024-08-21 14:06:59,773 schema ALTER TABLE `auth_permission` ADD CONSTRAINT `auth_permission_content_type_id_2f476e4b_fk_django_co` FOREIGN KEY (`content_type_id`) REFERENCES `django_content_type` (`id`); (params ())
DEBUG 2024-08-21 14:06:59,798 schema ALTER TABLE `auth_group_permissions` ADD CONSTRAINT `auth_group_permissions_group_id_permission_id_0cd325b0_uniq` UNIQUE (`group_id`, `permission_id`); (params ())
DEBUG 2024-08-21 14:06:59,816 schema ALTER TABLE `auth_group_permissions` ADD CONSTRAINT `auth_group_permissions_group_id_b120cbf9_fk_auth_group_id` FOREIGN KEY (`group_id`) REFERENCES `auth_group` (`id`); (params ())
DEBUG 2024-08-21 14:06:59,843 schema ALTER TABLE `auth_group_permissions` ADD CONSTRAINT `auth_group_permissio_permission_id_84c5c92e_fk_auth_perm` FOREIGN KEY (`permission_id`) REFERENCES `auth_permission` (`id`); (params ())
DEBUG 2024-08-21 14:06:59,869 schema ALTER TABLE `auth_user_groups` ADD CONSTRAINT `auth_user_groups_user_id_group_id_94350c0c_uniq` UNIQUE (`user_id`, `group_id`); (params ())
DEBUG 2024-08-21 14:06:59,885 schema ALTER TABLE `auth_user_groups` ADD CONSTRAINT `auth_user_groups_user_id_6a12ed8b_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); (params ())
DEBUG 2024-08-21 14:06:59,910 schema ALTER TABLE `auth_user_groups` ADD CONSTRAINT `auth_user_groups_group_id_97559544_fk_auth_group_id` FOREIGN KEY (`group_id`) REFERENCES `auth_group` (`id`); (params ())
DEBUG 2024-08-21 14:06:59,934 schema ALTER TABLE `auth_user_user_permissions` ADD CONSTRAINT `auth_user_user_permissions_user_id_permission_id_14a6b632_uniq` UNIQUE (`user_id`, `permission_id`); (params ())
DEBUG 2024-08-21 14:06:59,954 schema ALTER TABLE `auth_user_user_permissions` ADD CONSTRAINT `auth_user_user_permissions_user_id_a95ead1b_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); (params ())
DEBUG 2024-08-21 14:06:59,976 schema ALTER TABLE `auth_user_user_permissions` ADD CONSTRAINT `auth_user_user_permi_permission_id_1fbb5f2c_fk_auth_perm` FOREIGN KEY (`permission_id`) REFERENCES `auth_permission` (`id`); (params ())
DEBUG 2024-08-21 14:07:00,036 schema CREATE TABLE `django_admin_log` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `action_time` datetime(6) NOT NULL, `object_id` longtext NULL, `object_repr` varchar(200) NOT NULL, `action_flag` smallint UNSIGNED NOT NULL CHECK (`action_flag` >= 0), `change_message` longtext NOT NULL, `content_type_id` integer NULL, `user_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 14:07:00,098 schema ALTER TABLE `django_admin_log` ADD CONSTRAINT `django_admin_log_content_type_id_c4bce8eb_fk_django_co` FOREIGN KEY (`content_type_id`) REFERENCES `django_content_type` (`id`); (params ())
DEBUG 2024-08-21 14:07:00,133 schema ALTER TABLE `django_admin_log` ADD CONSTRAINT `django_admin_log_user_id_c564eba6_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); (params ())
DEBUG 2024-08-21 14:07:00,286 schema CREATE TABLE `app01_doctors` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `identity_num` varchar(64) NOT NULL, `name` varchar(20) NOT NULL, `title` varchar(50) NOT NULL, `department` varchar(20) NOT NULL, `research` varchar(150) NULL, `cost` numeric(5, 2) NOT NULL, `avatar` varchar(100) NULL, `avatar_name` varchar(128) NOT NULL); (params None)
DEBUG 2024-08-21 14:07:00,304 schema CREATE TABLE `app01_medicine` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(50) NOT NULL, `medicine_type` smallint NOT NULL, `symptom` varchar(200) NOT NULL, `price` numeric(5, 2) NOT NULL, `quantity` integer NOT NULL, `photo_name` varchar(128) NOT NULL); (params None)
DEBUG 2024-08-21 14:07:00,320 schema CREATE TABLE `app01_patients` (`identity` smallint NOT NULL, `identity_num` varchar(64) NOT NULL PRIMARY KEY, `name` varchar(20) NOT NULL, `health_insurance` smallint NOT NULL, `gender` smallint NOT NULL, `birthday` date NOT NULL, `phone_num` varchar(15) NOT NULL, `address` varchar(128) NOT NULL); (params None)
DEBUG 2024-08-21 14:07:00,346 schema CREATE TABLE `app01_user` (`type` smallint NOT NULL, `identity_num` varchar(64) NOT NULL PRIMARY KEY, `password` varchar(64) NOT NULL); (params None)
DEBUG 2024-08-21 14:07:00,364 schema CREATE TABLE `app01_treatment` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `queue_id` integer NOT NULL, `time` datetime(6) NOT NULL, `advice` varchar(256) NOT NULL, `medicine` longtext NOT NULL, `price` numeric(5, 2) NOT NULL, `doctor_id` bigint NOT NULL, `patient_id` varchar(64) NOT NULL); (params None)
DEBUG 2024-08-21 14:07:00,409 schema CREATE TABLE `app01_register` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `queue_id` integer NOT NULL, `time` datetime(6) NOT NULL, `position` varchar(128) NOT NULL, `doctor_id` bigint NOT NULL, `patient_id` varchar(64) NOT NULL, `register_id` varchar(64) NOT NULL); (params None)
DEBUG 2024-08-21 14:07:00,488 schema CREATE TABLE `app01_onduty` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `date` date NOT NULL, `time` smallint NOT NULL, `state` integer NOT NULL, `doctor_id` bigint NOT NULL); (params None)
DEBUG 2024-08-21 14:07:00,537 schema CREATE TABLE `app01_notice` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `msg_type` smallint NOT NULL, `time` datetime(6) NOT NULL, `isRead` bool NOT NULL, `doctor_id` bigint NOT NULL, `patient_id` varchar(64) NOT NULL, `register_id` bigint NULL, `registerMan_id` varchar(64) NULL, `treatment_id` bigint NULL); (params None)
DEBUG 2024-08-21 14:07:00,682 schema CREATE TABLE `app01_bill` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `type` smallint NOT NULL, `state` bool NOT NULL, `price` numeric(5, 2) NOT NULL, `patient_id` varchar(64) NULL, `register_id` bigint NULL, `treatment_id` bigint NULL); (params None)
DEBUG 2024-08-21 14:07:00,774 schema ALTER TABLE `app01_treatment` ADD CONSTRAINT `app01_treatment_doctor_id_a47beada_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 14:07:00,813 schema ALTER TABLE `app01_treatment` ADD CONSTRAINT `app01_treatment_patient_id_52a8e1e5_fk_app01_pat` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 14:07:00,849 schema ALTER TABLE `app01_register` ADD CONSTRAINT `app01_register_doctor_id_e0ea61dc_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 14:07:00,879 schema ALTER TABLE `app01_register` ADD CONSTRAINT `app01_register_patient_id_4a065a29_fk_app01_pat` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 14:07:00,912 schema ALTER TABLE `app01_register` ADD CONSTRAINT `app01_register_register_id_e85a8e5b_fk_app01_pat` FOREIGN KEY (`register_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 14:07:00,942 schema ALTER TABLE `app01_onduty` ADD CONSTRAINT `app01_onduty_doctor_id_9b012eb7_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 14:07:00,969 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_doctor_id_2d7f7104_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 14:07:01,000 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_patient_id_74974826_fk_app01_patients_identity_num` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 14:07:01,038 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_register_id_6c54784c_fk_app01_register_id` FOREIGN KEY (`register_id`) REFERENCES `app01_register` (`id`); (params ())
DEBUG 2024-08-21 14:07:01,073 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_registerMan_id_1bd9adce_fk_app01_pat` FOREIGN KEY (`registerMan_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 14:07:01,113 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_treatment_id_596ea92a_fk_app01_treatment_id` FOREIGN KEY (`treatment_id`) REFERENCES `app01_treatment` (`id`); (params ())
DEBUG 2024-08-21 14:07:01,165 schema ALTER TABLE `app01_bill` ADD CONSTRAINT `app01_bill_patient_id_96fe396a_fk_app01_patients_identity_num` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 14:07:01,203 schema ALTER TABLE `app01_bill` ADD CONSTRAINT `app01_bill_register_id_cf59300e_fk_app01_register_id` FOREIGN KEY (`register_id`) REFERENCES `app01_register` (`id`); (params ())
DEBUG 2024-08-21 14:07:01,239 schema ALTER TABLE `app01_bill` ADD CONSTRAINT `app01_bill_treatment_id_73ef4d98_fk_app01_treatment_id` FOREIGN KEY (`treatment_id`) REFERENCES `app01_treatment` (`id`); (params ())
DEBUG 2024-08-21 14:07:01,319 schema ALTER TABLE `django_content_type` MODIFY `name` varchar(100) NULL; (params [])
DEBUG 2024-08-21 14:07:01,411 schema ALTER TABLE `django_content_type` DROP COLUMN `name`; (params ())
DEBUG 2024-08-21 14:07:01,490 schema ALTER TABLE `auth_permission` MODIFY `name` varchar(255) NOT NULL; (params [])
DEBUG 2024-08-21 14:07:01,575 schema ALTER TABLE `auth_user` MODIFY `email` varchar(254) NOT NULL; (params [])
DEBUG 2024-08-21 14:07:01,690 schema ALTER TABLE `auth_user` MODIFY `last_login` datetime(6) NULL; (params [])
DEBUG 2024-08-21 14:07:01,830 schema ALTER TABLE `auth_user` MODIFY `username` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 14:07:01,911 schema ALTER TABLE `auth_user` MODIFY `last_name` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 14:07:01,974 schema ALTER TABLE `auth_group` MODIFY `name` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 14:07:02,160 schema ALTER TABLE `auth_user` MODIFY `first_name` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 14:07:02,239 schema CREATE TABLE `django_session` (`session_key` varchar(40) NOT NULL PRIMARY KEY, `session_data` longtext NOT NULL, `expire_date` datetime(6) NOT NULL); (params None)
DEBUG 2024-08-21 14:07:02,269 schema CREATE INDEX `django_session_expire_date_a5c62663` ON `django_session` (`expire_date`); (params ())
ERROR 2024-08-21 14:07:03,432 log Internal Server Error: /api/medicine/list/
Traceback (most recent call last):
  File "D:\anacoda\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\views\decorators\csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\views\generic\base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 509, in dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 480, in raise_uncaught_exception
    raise exc
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\86185\Desktop\SEGroup6\Ã¨Ã¨¾ÍÕï\Project\app01\views.py", line 933, in post
    return self.addMedicine(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\86185\Desktop\SEGroup6\Ã¨Ã¨¾ÍÕï\Project\app01\views.py", line 959, in addMedicine
    medicine.medicine_type = data['type']
                             ~~~~^^^^^^^^
KeyError: 'type'
ERROR 2024-08-21 14:07:03,489 log Internal Server Error: /api/medicine/list/
Traceback (most recent call last):
  File "D:\anacoda\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\views\decorators\csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\views\generic\base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 509, in dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 480, in raise_uncaught_exception
    raise exc
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\86185\Desktop\SEGroup6\Ã¨Ã¨¾ÍÕï\Project\app01\views.py", line 933, in post
    return self.addMedicine(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\86185\Desktop\SEGroup6\Ã¨Ã¨¾ÍÕï\Project\app01\views.py", line 959, in addMedicine
    medicine.medicine_type = data['type']
                             ~~~~^^^^^^^^
KeyError: 'type'
WARNING 2024-08-21 14:07:03,558 log Not Found: /api/medicine/setData/
WARNING 2024-08-21 14:07:03,719 log Bad Request: /api/medicine/delete/
WARNING 2024-08-21 14:07:04,034 log Bad Request: /api/medicine/list/
DEBUG 2024-08-21 14:07:31,321 schema CREATE TABLE `django_migrations` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `app` varchar(255) NOT NULL, `name` varchar(255) NOT NULL, `applied` datetime(6) NOT NULL); (params None)
DEBUG 2024-08-21 14:07:31,339 schema CREATE TABLE `django_content_type` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(100) NOT NULL, `app_label` varchar(100) NOT NULL, `model` varchar(100) NOT NULL); (params None)
DEBUG 2024-08-21 14:07:31,359 schema ALTER TABLE `django_content_type` ADD CONSTRAINT `django_content_type_app_label_model_76bd3d3b_uniq` UNIQUE (`app_label`, `model`); (params ())
DEBUG 2024-08-21 14:07:31,412 schema CREATE TABLE `auth_permission` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(50) NOT NULL, `content_type_id` integer NOT NULL, `codename` varchar(100) NOT NULL); (params None)
DEBUG 2024-08-21 14:07:31,441 schema CREATE TABLE `auth_group` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(80) NOT NULL UNIQUE); (params None)
DEBUG 2024-08-21 14:07:31,458 schema CREATE TABLE `auth_group_permissions` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `group_id` integer NOT NULL, `permission_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 14:07:31,503 schema CREATE TABLE `auth_user` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `password` varchar(128) NOT NULL, `last_login` datetime(6) NOT NULL, `is_superuser` bool NOT NULL, `username` varchar(30) NOT NULL UNIQUE, `first_name` varchar(30) NOT NULL, `last_name` varchar(30) NOT NULL, `email` varchar(75) NOT NULL, `is_staff` bool NOT NULL, `is_active` bool NOT NULL, `date_joined` datetime(6) NOT NULL); (params None)
DEBUG 2024-08-21 14:07:31,521 schema CREATE TABLE `auth_user_groups` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `user_id` integer NOT NULL, `group_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 14:07:31,567 schema CREATE TABLE `auth_user_user_permissions` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `user_id` integer NOT NULL, `permission_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 14:07:31,619 schema ALTER TABLE `auth_permission` ADD CONSTRAINT `auth_permission_content_type_id_codename_01ab375a_uniq` UNIQUE (`content_type_id`, `codename`); (params ())
DEBUG 2024-08-21 14:07:31,640 schema ALTER TABLE `auth_permission` ADD CONSTRAINT `auth_permission_content_type_id_2f476e4b_fk_django_co` FOREIGN KEY (`content_type_id`) REFERENCES `django_content_type` (`id`); (params ())
DEBUG 2024-08-21 14:07:31,665 schema ALTER TABLE `auth_group_permissions` ADD CONSTRAINT `auth_group_permissions_group_id_permission_id_0cd325b0_uniq` UNIQUE (`group_id`, `permission_id`); (params ())
DEBUG 2024-08-21 14:07:31,682 schema ALTER TABLE `auth_group_permissions` ADD CONSTRAINT `auth_group_permissions_group_id_b120cbf9_fk_auth_group_id` FOREIGN KEY (`group_id`) REFERENCES `auth_group` (`id`); (params ())
DEBUG 2024-08-21 14:07:31,709 schema ALTER TABLE `auth_group_permissions` ADD CONSTRAINT `auth_group_permissio_permission_id_84c5c92e_fk_auth_perm` FOREIGN KEY (`permission_id`) REFERENCES `auth_permission` (`id`); (params ())
DEBUG 2024-08-21 14:07:31,734 schema ALTER TABLE `auth_user_groups` ADD CONSTRAINT `auth_user_groups_user_id_group_id_94350c0c_uniq` UNIQUE (`user_id`, `group_id`); (params ())
DEBUG 2024-08-21 14:07:31,754 schema ALTER TABLE `auth_user_groups` ADD CONSTRAINT `auth_user_groups_user_id_6a12ed8b_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); (params ())
DEBUG 2024-08-21 14:07:31,781 schema ALTER TABLE `auth_user_groups` ADD CONSTRAINT `auth_user_groups_group_id_97559544_fk_auth_group_id` FOREIGN KEY (`group_id`) REFERENCES `auth_group` (`id`); (params ())
DEBUG 2024-08-21 14:07:31,807 schema ALTER TABLE `auth_user_user_permissions` ADD CONSTRAINT `auth_user_user_permissions_user_id_permission_id_14a6b632_uniq` UNIQUE (`user_id`, `permission_id`); (params ())
DEBUG 2024-08-21 14:07:31,825 schema ALTER TABLE `auth_user_user_permissions` ADD CONSTRAINT `auth_user_user_permissions_user_id_a95ead1b_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); (params ())
DEBUG 2024-08-21 14:07:31,851 schema ALTER TABLE `auth_user_user_permissions` ADD CONSTRAINT `auth_user_user_permi_permission_id_1fbb5f2c_fk_auth_perm` FOREIGN KEY (`permission_id`) REFERENCES `auth_permission` (`id`); (params ())
DEBUG 2024-08-21 14:07:31,909 schema CREATE TABLE `django_admin_log` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `action_time` datetime(6) NOT NULL, `object_id` longtext NULL, `object_repr` varchar(200) NOT NULL, `action_flag` smallint UNSIGNED NOT NULL CHECK (`action_flag` >= 0), `change_message` longtext NOT NULL, `content_type_id` integer NULL, `user_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 14:07:31,951 schema ALTER TABLE `django_admin_log` ADD CONSTRAINT `django_admin_log_content_type_id_c4bce8eb_fk_django_co` FOREIGN KEY (`content_type_id`) REFERENCES `django_content_type` (`id`); (params ())
DEBUG 2024-08-21 14:07:32,051 schema ALTER TABLE `django_admin_log` ADD CONSTRAINT `django_admin_log_user_id_c564eba6_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); (params ())
DEBUG 2024-08-21 14:07:32,166 schema CREATE TABLE `app01_doctors` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `identity_num` varchar(64) NOT NULL, `name` varchar(20) NOT NULL, `title` varchar(50) NOT NULL, `department` varchar(20) NOT NULL, `research` varchar(150) NULL, `cost` numeric(5, 2) NOT NULL, `avatar` varchar(100) NULL, `avatar_name` varchar(128) NOT NULL); (params None)
DEBUG 2024-08-21 14:07:32,182 schema CREATE TABLE `app01_medicine` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(50) NOT NULL, `medicine_type` smallint NOT NULL, `symptom` varchar(200) NOT NULL, `price` numeric(5, 2) NOT NULL, `quantity` integer NOT NULL, `photo_name` varchar(128) NOT NULL); (params None)
DEBUG 2024-08-21 14:07:32,199 schema CREATE TABLE `app01_patients` (`identity` smallint NOT NULL, `identity_num` varchar(64) NOT NULL PRIMARY KEY, `name` varchar(20) NOT NULL, `health_insurance` smallint NOT NULL, `gender` smallint NOT NULL, `birthday` date NOT NULL, `phone_num` varchar(15) NOT NULL, `address` varchar(128) NOT NULL); (params None)
DEBUG 2024-08-21 14:07:32,218 schema CREATE TABLE `app01_user` (`type` smallint NOT NULL, `identity_num` varchar(64) NOT NULL PRIMARY KEY, `password` varchar(64) NOT NULL); (params None)
DEBUG 2024-08-21 14:07:32,235 schema CREATE TABLE `app01_treatment` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `queue_id` integer NOT NULL, `time` datetime(6) NOT NULL, `advice` varchar(256) NOT NULL, `medicine` longtext NOT NULL, `price` numeric(5, 2) NOT NULL, `doctor_id` bigint NOT NULL, `patient_id` varchar(64) NOT NULL); (params None)
DEBUG 2024-08-21 14:07:32,278 schema CREATE TABLE `app01_register` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `queue_id` integer NOT NULL, `time` datetime(6) NOT NULL, `position` varchar(128) NOT NULL, `doctor_id` bigint NOT NULL, `patient_id` varchar(64) NOT NULL, `register_id` varchar(64) NOT NULL); (params None)
DEBUG 2024-08-21 14:07:32,335 schema CREATE TABLE `app01_onduty` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `date` date NOT NULL, `time` smallint NOT NULL, `state` integer NOT NULL, `doctor_id` bigint NOT NULL); (params None)
DEBUG 2024-08-21 14:07:32,369 schema CREATE TABLE `app01_notice` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `msg_type` smallint NOT NULL, `time` datetime(6) NOT NULL, `isRead` bool NOT NULL, `doctor_id` bigint NOT NULL, `patient_id` varchar(64) NOT NULL, `register_id` bigint NULL, `registerMan_id` varchar(64) NULL, `treatment_id` bigint NULL); (params None)
DEBUG 2024-08-21 14:07:32,453 schema CREATE TABLE `app01_bill` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `type` smallint NOT NULL, `state` bool NOT NULL, `price` numeric(5, 2) NOT NULL, `patient_id` varchar(64) NULL, `register_id` bigint NULL, `treatment_id` bigint NULL); (params None)
DEBUG 2024-08-21 14:07:32,510 schema ALTER TABLE `app01_treatment` ADD CONSTRAINT `app01_treatment_doctor_id_a47beada_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 14:07:32,549 schema ALTER TABLE `app01_treatment` ADD CONSTRAINT `app01_treatment_patient_id_52a8e1e5_fk_app01_pat` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 14:07:32,577 schema ALTER TABLE `app01_register` ADD CONSTRAINT `app01_register_doctor_id_e0ea61dc_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 14:07:32,606 schema ALTER TABLE `app01_register` ADD CONSTRAINT `app01_register_patient_id_4a065a29_fk_app01_pat` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 14:07:32,633 schema ALTER TABLE `app01_register` ADD CONSTRAINT `app01_register_register_id_e85a8e5b_fk_app01_pat` FOREIGN KEY (`register_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 14:07:32,661 schema ALTER TABLE `app01_onduty` ADD CONSTRAINT `app01_onduty_doctor_id_9b012eb7_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 14:07:32,686 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_doctor_id_2d7f7104_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 14:07:32,715 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_patient_id_74974826_fk_app01_patients_identity_num` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 14:07:32,747 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_register_id_6c54784c_fk_app01_register_id` FOREIGN KEY (`register_id`) REFERENCES `app01_register` (`id`); (params ())
DEBUG 2024-08-21 14:07:32,774 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_registerMan_id_1bd9adce_fk_app01_pat` FOREIGN KEY (`registerMan_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 14:07:32,802 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_treatment_id_596ea92a_fk_app01_treatment_id` FOREIGN KEY (`treatment_id`) REFERENCES `app01_treatment` (`id`); (params ())
DEBUG 2024-08-21 14:07:32,833 schema ALTER TABLE `app01_bill` ADD CONSTRAINT `app01_bill_patient_id_96fe396a_fk_app01_patients_identity_num` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 14:07:32,858 schema ALTER TABLE `app01_bill` ADD CONSTRAINT `app01_bill_register_id_cf59300e_fk_app01_register_id` FOREIGN KEY (`register_id`) REFERENCES `app01_register` (`id`); (params ())
DEBUG 2024-08-21 14:07:32,883 schema ALTER TABLE `app01_bill` ADD CONSTRAINT `app01_bill_treatment_id_73ef4d98_fk_app01_treatment_id` FOREIGN KEY (`treatment_id`) REFERENCES `app01_treatment` (`id`); (params ())
DEBUG 2024-08-21 14:07:32,946 schema ALTER TABLE `django_content_type` MODIFY `name` varchar(100) NULL; (params [])
DEBUG 2024-08-21 14:07:33,025 schema ALTER TABLE `django_content_type` DROP COLUMN `name`; (params ())
DEBUG 2024-08-21 14:07:33,088 schema ALTER TABLE `auth_permission` MODIFY `name` varchar(255) NOT NULL; (params [])
DEBUG 2024-08-21 14:07:33,165 schema ALTER TABLE `auth_user` MODIFY `email` varchar(254) NOT NULL; (params [])
DEBUG 2024-08-21 14:07:33,260 schema ALTER TABLE `auth_user` MODIFY `last_login` datetime(6) NULL; (params [])
DEBUG 2024-08-21 14:07:33,389 schema ALTER TABLE `auth_user` MODIFY `username` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 14:07:33,446 schema ALTER TABLE `auth_user` MODIFY `last_name` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 14:07:33,505 schema ALTER TABLE `auth_group` MODIFY `name` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 14:07:33,649 schema ALTER TABLE `auth_user` MODIFY `first_name` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 14:07:33,707 schema CREATE TABLE `django_session` (`session_key` varchar(40) NOT NULL PRIMARY KEY, `session_data` longtext NOT NULL, `expire_date` datetime(6) NOT NULL); (params None)
DEBUG 2024-08-21 14:07:33,741 schema CREATE INDEX `django_session_expire_date_a5c62663` ON `django_session` (`expire_date`); (params ())
ERROR 2024-08-21 14:07:34,955 log Internal Server Error: /api/medicine/list/
Traceback (most recent call last):
  File "D:\anacoda\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\views\decorators\csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\views\generic\base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 509, in dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 480, in raise_uncaught_exception
    raise exc
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\86185\Desktop\SEGroup6\Ã¨Ã¨¾ÍÕï\Project\app01\views.py", line 933, in post
    return self.addMedicine(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\86185\Desktop\SEGroup6\Ã¨Ã¨¾ÍÕï\Project\app01\views.py", line 959, in addMedicine
    medicine.medicine_type = data['type']
                             ~~~~^^^^^^^^
KeyError: 'type'
WARNING 2024-08-21 14:07:35,109 log Not Found: /api/medicine/setData/
WARNING 2024-08-21 14:07:35,280 log Bad Request: /api/medicine/delete/
WARNING 2024-08-21 14:07:35,603 log Bad Request: /api/medicine/list/
DEBUG 2024-08-21 14:07:51,918 schema CREATE TABLE `django_migrations` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `app` varchar(255) NOT NULL, `name` varchar(255) NOT NULL, `applied` datetime(6) NOT NULL); (params None)
DEBUG 2024-08-21 14:07:51,935 schema CREATE TABLE `django_content_type` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(100) NOT NULL, `app_label` varchar(100) NOT NULL, `model` varchar(100) NOT NULL); (params None)
DEBUG 2024-08-21 14:07:51,957 schema ALTER TABLE `django_content_type` ADD CONSTRAINT `django_content_type_app_label_model_76bd3d3b_uniq` UNIQUE (`app_label`, `model`); (params ())
DEBUG 2024-08-21 14:07:51,997 schema CREATE TABLE `auth_permission` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(50) NOT NULL, `content_type_id` integer NOT NULL, `codename` varchar(100) NOT NULL); (params None)
DEBUG 2024-08-21 14:07:52,029 schema CREATE TABLE `auth_group` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(80) NOT NULL UNIQUE); (params None)
DEBUG 2024-08-21 14:07:52,043 schema CREATE TABLE `auth_group_permissions` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `group_id` integer NOT NULL, `permission_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 14:07:52,083 schema CREATE TABLE `auth_user` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `password` varchar(128) NOT NULL, `last_login` datetime(6) NOT NULL, `is_superuser` bool NOT NULL, `username` varchar(30) NOT NULL UNIQUE, `first_name` varchar(30) NOT NULL, `last_name` varchar(30) NOT NULL, `email` varchar(75) NOT NULL, `is_staff` bool NOT NULL, `is_active` bool NOT NULL, `date_joined` datetime(6) NOT NULL); (params None)
DEBUG 2024-08-21 14:07:52,099 schema CREATE TABLE `auth_user_groups` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `user_id` integer NOT NULL, `group_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 14:07:52,141 schema CREATE TABLE `auth_user_user_permissions` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `user_id` integer NOT NULL, `permission_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 14:07:52,182 schema ALTER TABLE `auth_permission` ADD CONSTRAINT `auth_permission_content_type_id_codename_01ab375a_uniq` UNIQUE (`content_type_id`, `codename`); (params ())
DEBUG 2024-08-21 14:07:52,200 schema ALTER TABLE `auth_permission` ADD CONSTRAINT `auth_permission_content_type_id_2f476e4b_fk_django_co` FOREIGN KEY (`content_type_id`) REFERENCES `django_content_type` (`id`); (params ())
DEBUG 2024-08-21 14:07:52,222 schema ALTER TABLE `auth_group_permissions` ADD CONSTRAINT `auth_group_permissions_group_id_permission_id_0cd325b0_uniq` UNIQUE (`group_id`, `permission_id`); (params ())
DEBUG 2024-08-21 14:07:52,240 schema ALTER TABLE `auth_group_permissions` ADD CONSTRAINT `auth_group_permissions_group_id_b120cbf9_fk_auth_group_id` FOREIGN KEY (`group_id`) REFERENCES `auth_group` (`id`); (params ())
DEBUG 2024-08-21 14:07:52,263 schema ALTER TABLE `auth_group_permissions` ADD CONSTRAINT `auth_group_permissio_permission_id_84c5c92e_fk_auth_perm` FOREIGN KEY (`permission_id`) REFERENCES `auth_permission` (`id`); (params ())
DEBUG 2024-08-21 14:07:52,287 schema ALTER TABLE `auth_user_groups` ADD CONSTRAINT `auth_user_groups_user_id_group_id_94350c0c_uniq` UNIQUE (`user_id`, `group_id`); (params ())
DEBUG 2024-08-21 14:07:52,303 schema ALTER TABLE `auth_user_groups` ADD CONSTRAINT `auth_user_groups_user_id_6a12ed8b_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); (params ())
DEBUG 2024-08-21 14:07:52,326 schema ALTER TABLE `auth_user_groups` ADD CONSTRAINT `auth_user_groups_group_id_97559544_fk_auth_group_id` FOREIGN KEY (`group_id`) REFERENCES `auth_group` (`id`); (params ())
DEBUG 2024-08-21 14:07:52,352 schema ALTER TABLE `auth_user_user_permissions` ADD CONSTRAINT `auth_user_user_permissions_user_id_permission_id_14a6b632_uniq` UNIQUE (`user_id`, `permission_id`); (params ())
DEBUG 2024-08-21 14:07:52,376 schema ALTER TABLE `auth_user_user_permissions` ADD CONSTRAINT `auth_user_user_permissions_user_id_a95ead1b_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); (params ())
DEBUG 2024-08-21 14:07:52,399 schema ALTER TABLE `auth_user_user_permissions` ADD CONSTRAINT `auth_user_user_permi_permission_id_1fbb5f2c_fk_auth_perm` FOREIGN KEY (`permission_id`) REFERENCES `auth_permission` (`id`); (params ())
DEBUG 2024-08-21 14:07:52,452 schema CREATE TABLE `django_admin_log` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `action_time` datetime(6) NOT NULL, `object_id` longtext NULL, `object_repr` varchar(200) NOT NULL, `action_flag` smallint UNSIGNED NOT NULL CHECK (`action_flag` >= 0), `change_message` longtext NOT NULL, `content_type_id` integer NULL, `user_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 14:07:52,492 schema ALTER TABLE `django_admin_log` ADD CONSTRAINT `django_admin_log_content_type_id_c4bce8eb_fk_django_co` FOREIGN KEY (`content_type_id`) REFERENCES `django_content_type` (`id`); (params ())
DEBUG 2024-08-21 14:07:52,518 schema ALTER TABLE `django_admin_log` ADD CONSTRAINT `django_admin_log_user_id_c564eba6_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); (params ())
DEBUG 2024-08-21 14:07:52,633 schema CREATE TABLE `app01_doctors` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `identity_num` varchar(64) NOT NULL, `name` varchar(20) NOT NULL, `title` varchar(50) NOT NULL, `department` varchar(20) NOT NULL, `research` varchar(150) NULL, `cost` numeric(5, 2) NOT NULL, `avatar` varchar(100) NULL, `avatar_name` varchar(128) NOT NULL); (params None)
DEBUG 2024-08-21 14:07:52,652 schema CREATE TABLE `app01_medicine` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(50) NOT NULL, `medicine_type` smallint NOT NULL, `symptom` varchar(200) NOT NULL, `price` numeric(5, 2) NOT NULL, `quantity` integer NOT NULL, `photo_name` varchar(128) NOT NULL); (params None)
DEBUG 2024-08-21 14:07:52,669 schema CREATE TABLE `app01_patients` (`identity` smallint NOT NULL, `identity_num` varchar(64) NOT NULL PRIMARY KEY, `name` varchar(20) NOT NULL, `health_insurance` smallint NOT NULL, `gender` smallint NOT NULL, `birthday` date NOT NULL, `phone_num` varchar(15) NOT NULL, `address` varchar(128) NOT NULL); (params None)
DEBUG 2024-08-21 14:07:52,686 schema CREATE TABLE `app01_user` (`type` smallint NOT NULL, `identity_num` varchar(64) NOT NULL PRIMARY KEY, `password` varchar(64) NOT NULL); (params None)
DEBUG 2024-08-21 14:07:52,703 schema CREATE TABLE `app01_treatment` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `queue_id` integer NOT NULL, `time` datetime(6) NOT NULL, `advice` varchar(256) NOT NULL, `medicine` longtext NOT NULL, `price` numeric(5, 2) NOT NULL, `doctor_id` bigint NOT NULL, `patient_id` varchar(64) NOT NULL); (params None)
DEBUG 2024-08-21 14:07:52,744 schema CREATE TABLE `app01_register` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `queue_id` integer NOT NULL, `time` datetime(6) NOT NULL, `position` varchar(128) NOT NULL, `doctor_id` bigint NOT NULL, `patient_id` varchar(64) NOT NULL, `register_id` varchar(64) NOT NULL); (params None)
DEBUG 2024-08-21 14:07:52,799 schema CREATE TABLE `app01_onduty` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `date` date NOT NULL, `time` smallint NOT NULL, `state` integer NOT NULL, `doctor_id` bigint NOT NULL); (params None)
DEBUG 2024-08-21 14:07:52,830 schema CREATE TABLE `app01_notice` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `msg_type` smallint NOT NULL, `time` datetime(6) NOT NULL, `isRead` bool NOT NULL, `doctor_id` bigint NOT NULL, `patient_id` varchar(64) NOT NULL, `register_id` bigint NULL, `registerMan_id` varchar(64) NULL, `treatment_id` bigint NULL); (params None)
DEBUG 2024-08-21 14:07:52,913 schema CREATE TABLE `app01_bill` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `type` smallint NOT NULL, `state` bool NOT NULL, `price` numeric(5, 2) NOT NULL, `patient_id` varchar(64) NULL, `register_id` bigint NULL, `treatment_id` bigint NULL); (params None)
DEBUG 2024-08-21 14:07:52,964 schema ALTER TABLE `app01_treatment` ADD CONSTRAINT `app01_treatment_doctor_id_a47beada_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 14:07:52,989 schema ALTER TABLE `app01_treatment` ADD CONSTRAINT `app01_treatment_patient_id_52a8e1e5_fk_app01_pat` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 14:07:53,014 schema ALTER TABLE `app01_register` ADD CONSTRAINT `app01_register_doctor_id_e0ea61dc_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 14:07:53,038 schema ALTER TABLE `app01_register` ADD CONSTRAINT `app01_register_patient_id_4a065a29_fk_app01_pat` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 14:07:53,065 schema ALTER TABLE `app01_register` ADD CONSTRAINT `app01_register_register_id_e85a8e5b_fk_app01_pat` FOREIGN KEY (`register_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 14:07:53,093 schema ALTER TABLE `app01_onduty` ADD CONSTRAINT `app01_onduty_doctor_id_9b012eb7_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 14:07:53,119 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_doctor_id_2d7f7104_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 14:07:53,144 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_patient_id_74974826_fk_app01_patients_identity_num` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 14:07:53,170 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_register_id_6c54784c_fk_app01_register_id` FOREIGN KEY (`register_id`) REFERENCES `app01_register` (`id`); (params ())
DEBUG 2024-08-21 14:07:53,198 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_registerMan_id_1bd9adce_fk_app01_pat` FOREIGN KEY (`registerMan_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 14:07:53,225 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_treatment_id_596ea92a_fk_app01_treatment_id` FOREIGN KEY (`treatment_id`) REFERENCES `app01_treatment` (`id`); (params ())
DEBUG 2024-08-21 14:07:53,254 schema ALTER TABLE `app01_bill` ADD CONSTRAINT `app01_bill_patient_id_96fe396a_fk_app01_patients_identity_num` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 14:07:53,278 schema ALTER TABLE `app01_bill` ADD CONSTRAINT `app01_bill_register_id_cf59300e_fk_app01_register_id` FOREIGN KEY (`register_id`) REFERENCES `app01_register` (`id`); (params ())
DEBUG 2024-08-21 14:07:53,314 schema ALTER TABLE `app01_bill` ADD CONSTRAINT `app01_bill_treatment_id_73ef4d98_fk_app01_treatment_id` FOREIGN KEY (`treatment_id`) REFERENCES `app01_treatment` (`id`); (params ())
DEBUG 2024-08-21 14:07:53,373 schema ALTER TABLE `django_content_type` MODIFY `name` varchar(100) NULL; (params [])
DEBUG 2024-08-21 14:07:53,440 schema ALTER TABLE `django_content_type` DROP COLUMN `name`; (params ())
DEBUG 2024-08-21 14:07:53,490 schema ALTER TABLE `auth_permission` MODIFY `name` varchar(255) NOT NULL; (params [])
DEBUG 2024-08-21 14:07:53,546 schema ALTER TABLE `auth_user` MODIFY `email` varchar(254) NOT NULL; (params [])
DEBUG 2024-08-21 14:07:53,634 schema ALTER TABLE `auth_user` MODIFY `last_login` datetime(6) NULL; (params [])
DEBUG 2024-08-21 14:07:53,748 schema ALTER TABLE `auth_user` MODIFY `username` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 14:07:53,803 schema ALTER TABLE `auth_user` MODIFY `last_name` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 14:07:53,857 schema ALTER TABLE `auth_group` MODIFY `name` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 14:07:53,970 schema ALTER TABLE `auth_user` MODIFY `first_name` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 14:07:54,024 schema CREATE TABLE `django_session` (`session_key` varchar(40) NOT NULL PRIMARY KEY, `session_data` longtext NOT NULL, `expire_date` datetime(6) NOT NULL); (params None)
DEBUG 2024-08-21 14:07:54,050 schema CREATE INDEX `django_session_expire_date_a5c62663` ON `django_session` (`expire_date`); (params ())
ERROR 2024-08-21 14:07:55,123 log Internal Server Error: /api/medicine/list/
Traceback (most recent call last):
  File "D:\anacoda\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\views\decorators\csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\django\views\generic\base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 509, in dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 480, in raise_uncaught_exception
    raise exc
  File "D:\anacoda\Lib\site-packages\rest_framework\views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\86185\Desktop\SEGroup6\Ã¨Ã¨¾ÍÕï\Project\app01\views.py", line 933, in post
    return self.addMedicine(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\86185\Desktop\SEGroup6\Ã¨Ã¨¾ÍÕï\Project\app01\views.py", line 960, in addMedicine
    medicine.symptom = data['symptom']
                       ~~~~^^^^^^^^^^^
KeyError: 'symptom'
WARNING 2024-08-21 14:07:55,259 log Not Found: /api/medicine/setData/
WARNING 2024-08-21 14:07:55,402 log Bad Request: /api/medicine/delete/
WARNING 2024-08-21 14:07:55,716 log Bad Request: /api/medicine/list/
DEBUG 2024-08-21 14:09:02,991 schema CREATE TABLE `django_migrations` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `app` varchar(255) NOT NULL, `name` varchar(255) NOT NULL, `applied` datetime(6) NOT NULL); (params None)
DEBUG 2024-08-21 14:09:03,008 schema CREATE TABLE `django_content_type` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(100) NOT NULL, `app_label` varchar(100) NOT NULL, `model` varchar(100) NOT NULL); (params None)
DEBUG 2024-08-21 14:09:03,030 schema ALTER TABLE `django_content_type` ADD CONSTRAINT `django_content_type_app_label_model_76bd3d3b_uniq` UNIQUE (`app_label`, `model`); (params ())
DEBUG 2024-08-21 14:09:03,079 schema CREATE TABLE `auth_permission` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(50) NOT NULL, `content_type_id` integer NOT NULL, `codename` varchar(100) NOT NULL); (params None)
DEBUG 2024-08-21 14:09:03,119 schema CREATE TABLE `auth_group` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(80) NOT NULL UNIQUE); (params None)
DEBUG 2024-08-21 14:09:03,136 schema CREATE TABLE `auth_group_permissions` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `group_id` integer NOT NULL, `permission_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 14:09:03,185 schema CREATE TABLE `auth_user` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `password` varchar(128) NOT NULL, `last_login` datetime(6) NOT NULL, `is_superuser` bool NOT NULL, `username` varchar(30) NOT NULL UNIQUE, `first_name` varchar(30) NOT NULL, `last_name` varchar(30) NOT NULL, `email` varchar(75) NOT NULL, `is_staff` bool NOT NULL, `is_active` bool NOT NULL, `date_joined` datetime(6) NOT NULL); (params None)
DEBUG 2024-08-21 14:09:03,203 schema CREATE TABLE `auth_user_groups` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `user_id` integer NOT NULL, `group_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 14:09:03,250 schema CREATE TABLE `auth_user_user_permissions` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `user_id` integer NOT NULL, `permission_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 14:09:03,295 schema ALTER TABLE `auth_permission` ADD CONSTRAINT `auth_permission_content_type_id_codename_01ab375a_uniq` UNIQUE (`content_type_id`, `codename`); (params ())
DEBUG 2024-08-21 14:09:03,313 schema ALTER TABLE `auth_permission` ADD CONSTRAINT `auth_permission_content_type_id_2f476e4b_fk_django_co` FOREIGN KEY (`content_type_id`) REFERENCES `django_content_type` (`id`); (params ())
DEBUG 2024-08-21 14:09:03,339 schema ALTER TABLE `auth_group_permissions` ADD CONSTRAINT `auth_group_permissions_group_id_permission_id_0cd325b0_uniq` UNIQUE (`group_id`, `permission_id`); (params ())
DEBUG 2024-08-21 14:09:03,358 schema ALTER TABLE `auth_group_permissions` ADD CONSTRAINT `auth_group_permissions_group_id_b120cbf9_fk_auth_group_id` FOREIGN KEY (`group_id`) REFERENCES `auth_group` (`id`); (params ())
DEBUG 2024-08-21 14:09:03,385 schema ALTER TABLE `auth_group_permissions` ADD CONSTRAINT `auth_group_permissio_permission_id_84c5c92e_fk_auth_perm` FOREIGN KEY (`permission_id`) REFERENCES `auth_permission` (`id`); (params ())
DEBUG 2024-08-21 14:09:03,410 schema ALTER TABLE `auth_user_groups` ADD CONSTRAINT `auth_user_groups_user_id_group_id_94350c0c_uniq` UNIQUE (`user_id`, `group_id`); (params ())
DEBUG 2024-08-21 14:09:03,429 schema ALTER TABLE `auth_user_groups` ADD CONSTRAINT `auth_user_groups_user_id_6a12ed8b_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); (params ())
DEBUG 2024-08-21 14:09:03,453 schema ALTER TABLE `auth_user_groups` ADD CONSTRAINT `auth_user_groups_group_id_97559544_fk_auth_group_id` FOREIGN KEY (`group_id`) REFERENCES `auth_group` (`id`); (params ())
DEBUG 2024-08-21 14:09:03,480 schema ALTER TABLE `auth_user_user_permissions` ADD CONSTRAINT `auth_user_user_permissions_user_id_permission_id_14a6b632_uniq` UNIQUE (`user_id`, `permission_id`); (params ())
DEBUG 2024-08-21 14:09:03,499 schema ALTER TABLE `auth_user_user_permissions` ADD CONSTRAINT `auth_user_user_permissions_user_id_a95ead1b_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); (params ())
DEBUG 2024-08-21 14:09:03,525 schema ALTER TABLE `auth_user_user_permissions` ADD CONSTRAINT `auth_user_user_permi_permission_id_1fbb5f2c_fk_auth_perm` FOREIGN KEY (`permission_id`) REFERENCES `auth_permission` (`id`); (params ())
DEBUG 2024-08-21 14:09:03,586 schema CREATE TABLE `django_admin_log` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `action_time` datetime(6) NOT NULL, `object_id` longtext NULL, `object_repr` varchar(200) NOT NULL, `action_flag` smallint UNSIGNED NOT NULL CHECK (`action_flag` >= 0), `change_message` longtext NOT NULL, `content_type_id` integer NULL, `user_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 14:09:03,636 schema ALTER TABLE `django_admin_log` ADD CONSTRAINT `django_admin_log_content_type_id_c4bce8eb_fk_django_co` FOREIGN KEY (`content_type_id`) REFERENCES `django_content_type` (`id`); (params ())
DEBUG 2024-08-21 14:09:03,666 schema ALTER TABLE `django_admin_log` ADD CONSTRAINT `django_admin_log_user_id_c564eba6_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); (params ())
DEBUG 2024-08-21 14:09:03,810 schema CREATE TABLE `app01_doctors` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `identity_num` varchar(64) NOT NULL, `name` varchar(20) NOT NULL, `title` varchar(50) NOT NULL, `department` varchar(20) NOT NULL, `research` varchar(150) NULL, `cost` numeric(5, 2) NOT NULL, `avatar` varchar(100) NULL, `avatar_name` varchar(128) NOT NULL); (params None)
DEBUG 2024-08-21 14:09:03,828 schema CREATE TABLE `app01_medicine` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(50) NOT NULL, `medicine_type` smallint NOT NULL, `symptom` varchar(200) NOT NULL, `price` numeric(5, 2) NOT NULL, `quantity` integer NOT NULL, `photo_name` varchar(128) NOT NULL); (params None)
DEBUG 2024-08-21 14:09:03,845 schema CREATE TABLE `app01_patients` (`identity` smallint NOT NULL, `identity_num` varchar(64) NOT NULL PRIMARY KEY, `name` varchar(20) NOT NULL, `health_insurance` smallint NOT NULL, `gender` smallint NOT NULL, `birthday` date NOT NULL, `phone_num` varchar(15) NOT NULL, `address` varchar(128) NOT NULL); (params None)
DEBUG 2024-08-21 14:09:03,863 schema CREATE TABLE `app01_user` (`type` smallint NOT NULL, `identity_num` varchar(64) NOT NULL PRIMARY KEY, `password` varchar(64) NOT NULL); (params None)
DEBUG 2024-08-21 14:09:03,882 schema CREATE TABLE `app01_treatment` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `queue_id` integer NOT NULL, `time` datetime(6) NOT NULL, `advice` varchar(256) NOT NULL, `medicine` longtext NOT NULL, `price` numeric(5, 2) NOT NULL, `doctor_id` bigint NOT NULL, `patient_id` varchar(64) NOT NULL); (params None)
DEBUG 2024-08-21 14:09:03,935 schema CREATE TABLE `app01_register` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `queue_id` integer NOT NULL, `time` datetime(6) NOT NULL, `position` varchar(128) NOT NULL, `doctor_id` bigint NOT NULL, `patient_id` varchar(64) NOT NULL, `register_id` varchar(64) NOT NULL); (params None)
DEBUG 2024-08-21 14:09:03,994 schema CREATE TABLE `app01_onduty` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `date` date NOT NULL, `time` smallint NOT NULL, `state` integer NOT NULL, `doctor_id` bigint NOT NULL); (params None)
DEBUG 2024-08-21 14:09:04,026 schema CREATE TABLE `app01_notice` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `msg_type` smallint NOT NULL, `time` datetime(6) NOT NULL, `isRead` bool NOT NULL, `doctor_id` bigint NOT NULL, `patient_id` varchar(64) NOT NULL, `register_id` bigint NULL, `registerMan_id` varchar(64) NULL, `treatment_id` bigint NULL); (params None)
DEBUG 2024-08-21 14:09:04,115 schema CREATE TABLE `app01_bill` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `type` smallint NOT NULL, `state` bool NOT NULL, `price` numeric(5, 2) NOT NULL, `patient_id` varchar(64) NULL, `register_id` bigint NULL, `treatment_id` bigint NULL); (params None)
DEBUG 2024-08-21 14:09:04,173 schema ALTER TABLE `app01_treatment` ADD CONSTRAINT `app01_treatment_doctor_id_a47beada_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 14:09:04,201 schema ALTER TABLE `app01_treatment` ADD CONSTRAINT `app01_treatment_patient_id_52a8e1e5_fk_app01_pat` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 14:09:04,226 schema ALTER TABLE `app01_register` ADD CONSTRAINT `app01_register_doctor_id_e0ea61dc_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 14:09:04,250 schema ALTER TABLE `app01_register` ADD CONSTRAINT `app01_register_patient_id_4a065a29_fk_app01_pat` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 14:09:04,279 schema ALTER TABLE `app01_register` ADD CONSTRAINT `app01_register_register_id_e85a8e5b_fk_app01_pat` FOREIGN KEY (`register_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 14:09:04,306 schema ALTER TABLE `app01_onduty` ADD CONSTRAINT `app01_onduty_doctor_id_9b012eb7_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 14:09:04,331 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_doctor_id_2d7f7104_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 14:09:04,358 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_patient_id_74974826_fk_app01_patients_identity_num` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 14:09:04,386 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_register_id_6c54784c_fk_app01_register_id` FOREIGN KEY (`register_id`) REFERENCES `app01_register` (`id`); (params ())
DEBUG 2024-08-21 14:09:04,414 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_registerMan_id_1bd9adce_fk_app01_pat` FOREIGN KEY (`registerMan_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 14:09:04,445 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_treatment_id_596ea92a_fk_app01_treatment_id` FOREIGN KEY (`treatment_id`) REFERENCES `app01_treatment` (`id`); (params ())
DEBUG 2024-08-21 14:09:04,477 schema ALTER TABLE `app01_bill` ADD CONSTRAINT `app01_bill_patient_id_96fe396a_fk_app01_patients_identity_num` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 14:09:04,501 schema ALTER TABLE `app01_bill` ADD CONSTRAINT `app01_bill_register_id_cf59300e_fk_app01_register_id` FOREIGN KEY (`register_id`) REFERENCES `app01_register` (`id`); (params ())
DEBUG 2024-08-21 14:09:04,528 schema ALTER TABLE `app01_bill` ADD CONSTRAINT `app01_bill_treatment_id_73ef4d98_fk_app01_treatment_id` FOREIGN KEY (`treatment_id`) REFERENCES `app01_treatment` (`id`); (params ())
DEBUG 2024-08-21 14:09:04,594 schema ALTER TABLE `django_content_type` MODIFY `name` varchar(100) NULL; (params [])
DEBUG 2024-08-21 14:09:04,665 schema ALTER TABLE `django_content_type` DROP COLUMN `name`; (params ())
DEBUG 2024-08-21 14:09:04,730 schema ALTER TABLE `auth_permission` MODIFY `name` varchar(255) NOT NULL; (params [])
DEBUG 2024-08-21 14:09:04,860 schema ALTER TABLE `auth_user` MODIFY `email` varchar(254) NOT NULL; (params [])
DEBUG 2024-08-21 14:09:04,953 schema ALTER TABLE `auth_user` MODIFY `last_login` datetime(6) NULL; (params [])
DEBUG 2024-08-21 14:09:05,073 schema ALTER TABLE `auth_user` MODIFY `username` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 14:09:05,138 schema ALTER TABLE `auth_user` MODIFY `last_name` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 14:09:05,194 schema ALTER TABLE `auth_group` MODIFY `name` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 14:09:05,319 schema ALTER TABLE `auth_user` MODIFY `first_name` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 14:09:05,381 schema CREATE TABLE `django_session` (`session_key` varchar(40) NOT NULL PRIMARY KEY, `session_data` longtext NOT NULL, `expire_date` datetime(6) NOT NULL); (params None)
DEBUG 2024-08-21 14:09:05,410 schema CREATE INDEX `django_session_expire_date_a5c62663` ON `django_session` (`expire_date`); (params ())
WARNING 2024-08-21 14:09:06,619 log Bad Request: /api/medicine/list/
WARNING 2024-08-21 14:09:06,767 log Not Found: /api/medicine/setData/
WARNING 2024-08-21 14:09:06,926 log Bad Request: /api/medicine/delete/
WARNING 2024-08-21 14:09:07,260 log Bad Request: /api/medicine/list/
DEBUG 2024-08-21 14:09:23,425 schema CREATE TABLE `django_migrations` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `app` varchar(255) NOT NULL, `name` varchar(255) NOT NULL, `applied` datetime(6) NOT NULL); (params None)
DEBUG 2024-08-21 14:09:23,448 schema CREATE TABLE `django_content_type` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(100) NOT NULL, `app_label` varchar(100) NOT NULL, `model` varchar(100) NOT NULL); (params None)
DEBUG 2024-08-21 14:09:23,468 schema ALTER TABLE `django_content_type` ADD CONSTRAINT `django_content_type_app_label_model_76bd3d3b_uniq` UNIQUE (`app_label`, `model`); (params ())
DEBUG 2024-08-21 14:09:23,525 schema CREATE TABLE `auth_permission` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(50) NOT NULL, `content_type_id` integer NOT NULL, `codename` varchar(100) NOT NULL); (params None)
DEBUG 2024-08-21 14:09:23,558 schema CREATE TABLE `auth_group` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(80) NOT NULL UNIQUE); (params None)
DEBUG 2024-08-21 14:09:23,577 schema CREATE TABLE `auth_group_permissions` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `group_id` integer NOT NULL, `permission_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 14:09:23,631 schema CREATE TABLE `auth_user` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `password` varchar(128) NOT NULL, `last_login` datetime(6) NOT NULL, `is_superuser` bool NOT NULL, `username` varchar(30) NOT NULL UNIQUE, `first_name` varchar(30) NOT NULL, `last_name` varchar(30) NOT NULL, `email` varchar(75) NOT NULL, `is_staff` bool NOT NULL, `is_active` bool NOT NULL, `date_joined` datetime(6) NOT NULL); (params None)
DEBUG 2024-08-21 14:09:23,649 schema CREATE TABLE `auth_user_groups` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `user_id` integer NOT NULL, `group_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 14:09:23,707 schema CREATE TABLE `auth_user_user_permissions` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `user_id` integer NOT NULL, `permission_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 14:09:23,748 schema ALTER TABLE `auth_permission` ADD CONSTRAINT `auth_permission_content_type_id_codename_01ab375a_uniq` UNIQUE (`content_type_id`, `codename`); (params ())
DEBUG 2024-08-21 14:09:23,766 schema ALTER TABLE `auth_permission` ADD CONSTRAINT `auth_permission_content_type_id_2f476e4b_fk_django_co` FOREIGN KEY (`content_type_id`) REFERENCES `django_content_type` (`id`); (params ())
DEBUG 2024-08-21 14:09:23,791 schema ALTER TABLE `auth_group_permissions` ADD CONSTRAINT `auth_group_permissions_group_id_permission_id_0cd325b0_uniq` UNIQUE (`group_id`, `permission_id`); (params ())
DEBUG 2024-08-21 14:09:23,809 schema ALTER TABLE `auth_group_permissions` ADD CONSTRAINT `auth_group_permissions_group_id_b120cbf9_fk_auth_group_id` FOREIGN KEY (`group_id`) REFERENCES `auth_group` (`id`); (params ())
DEBUG 2024-08-21 14:09:23,834 schema ALTER TABLE `auth_group_permissions` ADD CONSTRAINT `auth_group_permissio_permission_id_84c5c92e_fk_auth_perm` FOREIGN KEY (`permission_id`) REFERENCES `auth_permission` (`id`); (params ())
DEBUG 2024-08-21 14:09:23,863 schema ALTER TABLE `auth_user_groups` ADD CONSTRAINT `auth_user_groups_user_id_group_id_94350c0c_uniq` UNIQUE (`user_id`, `group_id`); (params ())
DEBUG 2024-08-21 14:09:23,882 schema ALTER TABLE `auth_user_groups` ADD CONSTRAINT `auth_user_groups_user_id_6a12ed8b_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); (params ())
DEBUG 2024-08-21 14:09:23,906 schema ALTER TABLE `auth_user_groups` ADD CONSTRAINT `auth_user_groups_group_id_97559544_fk_auth_group_id` FOREIGN KEY (`group_id`) REFERENCES `auth_group` (`id`); (params ())
DEBUG 2024-08-21 14:09:23,932 schema ALTER TABLE `auth_user_user_permissions` ADD CONSTRAINT `auth_user_user_permissions_user_id_permission_id_14a6b632_uniq` UNIQUE (`user_id`, `permission_id`); (params ())
DEBUG 2024-08-21 14:09:23,950 schema ALTER TABLE `auth_user_user_permissions` ADD CONSTRAINT `auth_user_user_permissions_user_id_a95ead1b_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); (params ())
DEBUG 2024-08-21 14:09:23,972 schema ALTER TABLE `auth_user_user_permissions` ADD CONSTRAINT `auth_user_user_permi_permission_id_1fbb5f2c_fk_auth_perm` FOREIGN KEY (`permission_id`) REFERENCES `auth_permission` (`id`); (params ())
DEBUG 2024-08-21 14:09:24,027 schema CREATE TABLE `django_admin_log` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `action_time` datetime(6) NOT NULL, `object_id` longtext NULL, `object_repr` varchar(200) NOT NULL, `action_flag` smallint UNSIGNED NOT NULL CHECK (`action_flag` >= 0), `change_message` longtext NOT NULL, `content_type_id` integer NULL, `user_id` integer NOT NULL); (params None)
DEBUG 2024-08-21 14:09:24,065 schema ALTER TABLE `django_admin_log` ADD CONSTRAINT `django_admin_log_content_type_id_c4bce8eb_fk_django_co` FOREIGN KEY (`content_type_id`) REFERENCES `django_content_type` (`id`); (params ())
DEBUG 2024-08-21 14:09:24,105 schema ALTER TABLE `django_admin_log` ADD CONSTRAINT `django_admin_log_user_id_c564eba6_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`); (params ())
DEBUG 2024-08-21 14:09:24,212 schema CREATE TABLE `app01_doctors` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `identity_num` varchar(64) NOT NULL, `name` varchar(20) NOT NULL, `title` varchar(50) NOT NULL, `department` varchar(20) NOT NULL, `research` varchar(150) NULL, `cost` numeric(5, 2) NOT NULL, `avatar` varchar(100) NULL, `avatar_name` varchar(128) NOT NULL); (params None)
DEBUG 2024-08-21 14:09:24,229 schema CREATE TABLE `app01_medicine` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(50) NOT NULL, `medicine_type` smallint NOT NULL, `symptom` varchar(200) NOT NULL, `price` numeric(5, 2) NOT NULL, `quantity` integer NOT NULL, `photo_name` varchar(128) NOT NULL); (params None)
DEBUG 2024-08-21 14:09:24,246 schema CREATE TABLE `app01_patients` (`identity` smallint NOT NULL, `identity_num` varchar(64) NOT NULL PRIMARY KEY, `name` varchar(20) NOT NULL, `health_insurance` smallint NOT NULL, `gender` smallint NOT NULL, `birthday` date NOT NULL, `phone_num` varchar(15) NOT NULL, `address` varchar(128) NOT NULL); (params None)
DEBUG 2024-08-21 14:09:24,264 schema CREATE TABLE `app01_user` (`type` smallint NOT NULL, `identity_num` varchar(64) NOT NULL PRIMARY KEY, `password` varchar(64) NOT NULL); (params None)
DEBUG 2024-08-21 14:09:24,282 schema CREATE TABLE `app01_treatment` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `queue_id` integer NOT NULL, `time` datetime(6) NOT NULL, `advice` varchar(256) NOT NULL, `medicine` longtext NOT NULL, `price` numeric(5, 2) NOT NULL, `doctor_id` bigint NOT NULL, `patient_id` varchar(64) NOT NULL); (params None)
DEBUG 2024-08-21 14:09:24,323 schema CREATE TABLE `app01_register` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `queue_id` integer NOT NULL, `time` datetime(6) NOT NULL, `position` varchar(128) NOT NULL, `doctor_id` bigint NOT NULL, `patient_id` varchar(64) NOT NULL, `register_id` varchar(64) NOT NULL); (params None)
DEBUG 2024-08-21 14:09:24,381 schema CREATE TABLE `app01_onduty` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `date` date NOT NULL, `time` smallint NOT NULL, `state` integer NOT NULL, `doctor_id` bigint NOT NULL); (params None)
DEBUG 2024-08-21 14:09:24,411 schema CREATE TABLE `app01_notice` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `msg_type` smallint NOT NULL, `time` datetime(6) NOT NULL, `isRead` bool NOT NULL, `doctor_id` bigint NOT NULL, `patient_id` varchar(64) NOT NULL, `register_id` bigint NULL, `registerMan_id` varchar(64) NULL, `treatment_id` bigint NULL); (params None)
DEBUG 2024-08-21 14:09:24,488 schema CREATE TABLE `app01_bill` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `type` smallint NOT NULL, `state` bool NOT NULL, `price` numeric(5, 2) NOT NULL, `patient_id` varchar(64) NULL, `register_id` bigint NULL, `treatment_id` bigint NULL); (params None)
DEBUG 2024-08-21 14:09:24,543 schema ALTER TABLE `app01_treatment` ADD CONSTRAINT `app01_treatment_doctor_id_a47beada_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 14:09:24,567 schema ALTER TABLE `app01_treatment` ADD CONSTRAINT `app01_treatment_patient_id_52a8e1e5_fk_app01_pat` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 14:09:24,597 schema ALTER TABLE `app01_register` ADD CONSTRAINT `app01_register_doctor_id_e0ea61dc_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 14:09:24,692 schema ALTER TABLE `app01_register` ADD CONSTRAINT `app01_register_patient_id_4a065a29_fk_app01_pat` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 14:09:24,720 schema ALTER TABLE `app01_register` ADD CONSTRAINT `app01_register_register_id_e85a8e5b_fk_app01_pat` FOREIGN KEY (`register_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 14:09:24,749 schema ALTER TABLE `app01_onduty` ADD CONSTRAINT `app01_onduty_doctor_id_9b012eb7_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 14:09:24,774 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_doctor_id_2d7f7104_fk_app01_doctors_id` FOREIGN KEY (`doctor_id`) REFERENCES `app01_doctors` (`id`); (params ())
DEBUG 2024-08-21 14:09:24,798 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_patient_id_74974826_fk_app01_patients_identity_num` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 14:09:24,827 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_register_id_6c54784c_fk_app01_register_id` FOREIGN KEY (`register_id`) REFERENCES `app01_register` (`id`); (params ())
DEBUG 2024-08-21 14:09:24,857 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_registerMan_id_1bd9adce_fk_app01_pat` FOREIGN KEY (`registerMan_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 14:09:24,886 schema ALTER TABLE `app01_notice` ADD CONSTRAINT `app01_notice_treatment_id_596ea92a_fk_app01_treatment_id` FOREIGN KEY (`treatment_id`) REFERENCES `app01_treatment` (`id`); (params ())
DEBUG 2024-08-21 14:09:24,920 schema ALTER TABLE `app01_bill` ADD CONSTRAINT `app01_bill_patient_id_96fe396a_fk_app01_patients_identity_num` FOREIGN KEY (`patient_id`) REFERENCES `app01_patients` (`identity_num`); (params ())
DEBUG 2024-08-21 14:09:24,951 schema ALTER TABLE `app01_bill` ADD CONSTRAINT `app01_bill_register_id_cf59300e_fk_app01_register_id` FOREIGN KEY (`register_id`) REFERENCES `app01_register` (`id`); (params ())
DEBUG 2024-08-21 14:09:24,978 schema ALTER TABLE `app01_bill` ADD CONSTRAINT `app01_bill_treatment_id_73ef4d98_fk_app01_treatment_id` FOREIGN KEY (`treatment_id`) REFERENCES `app01_treatment` (`id`); (params ())
DEBUG 2024-08-21 14:09:25,056 schema ALTER TABLE `django_content_type` MODIFY `name` varchar(100) NULL; (params [])
DEBUG 2024-08-21 14:09:25,128 schema ALTER TABLE `django_content_type` DROP COLUMN `name`; (params ())
DEBUG 2024-08-21 14:09:25,186 schema ALTER TABLE `auth_permission` MODIFY `name` varchar(255) NOT NULL; (params [])
DEBUG 2024-08-21 14:09:25,246 schema ALTER TABLE `auth_user` MODIFY `email` varchar(254) NOT NULL; (params [])
DEBUG 2024-08-21 14:09:25,341 schema ALTER TABLE `auth_user` MODIFY `last_login` datetime(6) NULL; (params [])
DEBUG 2024-08-21 14:09:25,463 schema ALTER TABLE `auth_user` MODIFY `username` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 14:09:25,526 schema ALTER TABLE `auth_user` MODIFY `last_name` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 14:09:25,590 schema ALTER TABLE `auth_group` MODIFY `name` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 14:09:25,731 schema ALTER TABLE `auth_user` MODIFY `first_name` varchar(150) NOT NULL; (params [])
DEBUG 2024-08-21 14:09:25,801 schema CREATE TABLE `django_session` (`session_key` varchar(40) NOT NULL PRIMARY KEY, `session_data` longtext NOT NULL, `expire_date` datetime(6) NOT NULL); (params None)
DEBUG 2024-08-21 14:09:25,834 schema CREATE INDEX `django_session_expire_date_a5c62663` ON `django_session` (`expire_date`); (params ())
WARNING 2024-08-21 14:09:27,123 log Bad Request: /api/bills/list/
WARNING 2024-08-21 14:09:27,299 log Bad Request: /api/bills/list/
WARNING 2024-08-21 14:09:27,431 log Bad Request: /api/bills/list/
WARNING 2024-08-21 14:09:27,681 log Bad Request: /api/bills/list/
WARNING 2024-08-21 14:09:27,880 log Bad Request: /api/doctors/setData/
WARNING 2024-08-21 14:09:28,101 log Bad Request: /api/doctors/delete/
WARNING 2024-08-21 14:09:28,652 log Bad Request: /api/medicine/list/
WARNING 2024-08-21 14:09:28,798 log Not Found: /api/medicine/setData/
WARNING 2024-08-21 14:09:28,956 log Bad Request: /api/medicine/delete/
WARNING 2024-08-21 14:09:29,268 log Bad Request: /api/medicine/list/
WARNING 2024-08-21 14:09:29,533 log Bad Request: /api/notice/list/
WARNING 2024-08-21 14:09:29,804 log Bad Request: /api/notice/list/
WARNING 2024-08-21 14:09:29,933 log Bad Request: /api/notice/list/
WARNING 2024-08-21 14:09:30,253 log Bad Request: /api/duty/all_next_seven_days/
WARNING 2024-08-21 14:09:30,387 log Bad Request: /api/duty/next_seven_days/
WARNING 2024-08-21 14:09:31,176 log Bad Request: /api/registers/list/
WARNING 2024-08-21 14:09:31,492 log Bad Request: /api/treatments/list/
WARNING 2024-08-21 14:09:31,749 log Bad Request: /api/treatments/list/
