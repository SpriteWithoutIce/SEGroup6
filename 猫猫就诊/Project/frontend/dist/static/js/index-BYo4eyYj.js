import{B as pe,ai as c,o as m,c as v,a as e,V as o,P as a,T as f,S,U as h,aw as q,ax as P,ay as ie,O as A,F as w,a8 as M,e as F,k as se,j as ae,a3 as he,f as ge,d as Ce,Q as R,af as ye,J as B,al as Z,az as oe,Z as Se,at as Te}from"./@vue-BmH4dvKI.js";import{C as be}from"./crypto-js-Ci0zXM0r.js";import{V as E}from"./vue-cookies-Dep2syKb.js";import{E as N,a as Me,i as qe}from"./element-plus-BrVYwv51.js";import{R as Pe,a as Ve,c as Ae,b as Be}from"./vue-router-CGjTgPtb.js";import{a as J}from"./axios-G5LVpFxl.js";import{Q as Ie}from"./@element-plus-BZs8tJsE.js";import"./lodash-es-WEemOz_S.js";import"./@vueuse-nP03j2kH.js";import"./@popperjs-D9SI2xQl.js";import"./@ctrl-r5W6hzzQ.js";import"./dayjs-DaDYfFNR.js";import"./async-validator-DKvM95Vc.js";import"./memoize-one-BdPwpGay.js";import"./normalize-wheel-es-B6fDCfyv.js";import"./@floating-ui-CtcGg-6p.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))d(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const p of i.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&d(p)}).observe(document,{childList:!0,subtree:!0});function l(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function d(n){if(n.ep)return;n.ep=!0;const i=l(n);fetch(n.href,i)}})();const j={identityNum:0},Ue={updateIdentityNum(t){j.identityNum=t}},Re="/static/jpg/banner2-k7fdBEjn.jpg",T=(t,s)=>{const l=t.__vccOpts||t;for(const[d,n]of s)l[d]=n;return l},Le={data(){return{identityNum:pe("$identity_num"),receivedidCard:"",receivedtype:"",loginVisible:!1,isLogin:!0,notLogin:!1,loginForm:{idCard:"",userType:"",password:"",remember:!1,autoLogin:!1},msg:"",rules:{idCard:[{required:!0,message:"请输入账号",trigger:"blur"},{pattern:/^\d{6,20}$/,message:"账号必须为6~20位数字",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]}}},mounted(){this.checkLoginStatus()},methods:{updateIdentityNum(t){Ue.updateIdentityNum(t)},getUserData(t,s,l){return new Promise((d,n)=>{let i=this,p={idCard:t,password:be.SHA256(s).toString(),userType:l};this.$axios.post("/api/login/",p).then(function(u){i.msg=u.data.msg,console.log(i.msg),d()}).catch(function(u){console.log(u),n(u)})})},openModal(t,s){this.receivedidCard=t,this.receivedtype=s,t!=""?(this.isLogin=!1,this.notLogin=!0):(this.isLogin=!0,this.notLogin=!1),this.loginForm.idCard="",this.loginForm.password="",this.loginVisible=!0,document.body.style.overflow="hidden"},closeModal(){this.loginVisible=!1,document.body.style.overflow=""},cancelModal(){N({type:"info",message:"取消 ╮(╯▽╰)╭",showClose:!0}),this.loginForm.userType="",this.closeModal()},handleLogin(){this.$refs.loginForm.validate(t=>{if(t){const{idCard:s,password:l,userType:d}=this.loginForm;this.getUserData(s,l,d).then(()=>{this.msg==="Successfully Login"?(N({showClose:!0,message:"登录成功 (๑˃̵ᴗ˂̵)",type:"success"}),this.identityNum=s,this.updateIdentityNum(s),this.$emit("update:currentUserCard",this.loginForm.idCard),this.$emit("update:currentUserType",this.loginForm.userType),E.set("idCard",s,"1h"),E.set("userType",d,"1h"),this.closeModal()):this.msg==="Wrong Password"?N({showClose:!0,message:"密码错误或用户类型错误 ╮(╯▽╰)╭",type:"error"}):(N({showClose:!0,message:"注册成功并已登录 (๑˃̵ᴗ˂̵)",type:"success"}),this.identityNum=s,this.updateIdentityNum(s),console.log("登录处修改identityNum为:",j.identityNum),this.$emit("update:currentUserCard",this.loginForm.idCard),this.$emit("update:currentUserType",this.loginForm.userType),E.set("idCard",s,"1h"),E.set("userType",d,"1h"),this.closeModal())})}else N({type:"info",message:"信息错误 ╮(╯▽╰)╭",showClose:!0})})},checkLoginStatus(){const t=E.get("idCard"),s=E.get("userType");t&&s&&(this.isLogin=!1,this.notLogin=!0,this.receivedidCard=t,this.receivedtype=s)},logout(){this.identityNum="0",this.receivedidCard="",this.currentUserType="",this.loginForm.userType="",this.$emit("update:currentUserCard",""),this.$emit("update:currentUserType",""),this.isLogin=!0,this.notLogin=!1,E.remove("idCard"),E.remove("userType"),this.closeModal(),N({type:"success",message:"已退出登录 (๑˃̵ᴗ˂̵)",showClose:!0}),window.scrollTo({top:0,left:0,behavior:"smooth"})}}},re=t=>(q("data-v-e950a092"),t=t(),P(),t),Ne={key:0,class:"modal-background"},Fe={class:"modal-container"},je={class:"top-section"},He=re(()=>e("img",{src:Re,alt:"背景图片",class:"background-image"},null,-1)),ze=re(()=>e("div",{class:"cancel-icon"},"X",-1)),Ee=[ze],Oe=re(()=>e("div",{class:"mid-section"},null,-1)),Ye={key:0,class:"bottom-section"},Ge={class:"button-group"},Je={key:1,class:"bottom-section"},Ke={class:"user-info"},We=re(()=>e("title",null,"当前用户信息",-1)),Ze={class:"button-group"};function Qe(t,s,l,d,n,i){const p=c("el-input"),u=c("el-form-item"),r=c("el-option"),_=c("el-select"),g=c("el-form"),$=c("el-button"),k=c("RouterLink");return n.loginVisible?(m(),v("div",Ne,[e("div",Fe,[e("div",je,[He,e("div",{class:"cancel-btn",onClick:s[0]||(s[0]=(...C)=>i.cancelModal&&i.cancelModal(...C))},Ee)]),Oe,n.isLogin?(m(),v("div",Ye,[o(g,{model:n.loginForm,rules:n.rules,ref:"loginForm",class:"form","label-width":"auto"},{default:a(()=>[o(u,{label:"身份证号",prop:"idCard",class:"input-item"},{default:a(()=>[o(p,{modelValue:n.loginForm.idCard,"onUpdate:modelValue":s[1]||(s[1]=C=>n.loginForm.idCard=C)},null,8,["modelValue"])]),_:1}),o(u,{label:"密码",prop:"password",class:"input-item"},{default:a(()=>[o(p,{modelValue:n.loginForm.password,"onUpdate:modelValue":s[2]||(s[2]=C=>n.loginForm.password=C),type:"password"},null,8,["modelValue"])]),_:1}),o(u,{label:"身份",prop:"idCard",class:"input-item3"},{default:a(()=>[o(_,{modelValue:n.loginForm.userType,"onUpdate:modelValue":s[3]||(s[3]=C=>n.loginForm.userType=C),placeholder:"身份选择",class:"input-item3"},{default:a(()=>[o(r,{label:"医生",value:"医生"}),o(r,{label:"普通用户",value:"普通用户"}),o(r,{label:"管理员",value:"管理员"})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","rules"]),e("div",Ge,[o($,{type:"primary",onClick:i.handleLogin,class:"input-item2"},{default:a(()=>[f("登录")]),_:1},8,["onClick"])])])):S("",!0),n.notLogin?(m(),v("div",Je,[e("div",Ke,[We,e("p",null,"身份证号："+h(n.receivedidCard),1),e("p",null,"用户类型："+h(n.receivedtype),1)]),e("div",Ze,[o(k,{to:"/Main"},{default:a(()=>[o($,{type:"danger",onClick:i.logout,class:"input-item2"},{default:a(()=>[f("退出登录")]),_:1},8,["onClick"])]),_:1})])])):S("",!0)])])):S("",!0)}const Xe=T(Le,[["render",Qe],["__scopeId","data-v-e950a092"]]),et={data(){return{isVisible:!1}},methods:{openModal(t){this.isVisible=!0,document.body.style.overflow="hidden",this.form.office=t.office,this.form.time=t.time,this.form.medicine=t.medicine},closeModal(){this.isVisible=!1,document.body.style.overflow=""}}},tt={key:0,class:"modal-background"},nt={class:"modal-container"},st=ie('<div class="content" data-v-7e265ebf><h1 data-v-7e265ebf>系统介绍</h1><h3 data-v-7e265ebf>一.预约挂号</h3><div class="line" data-v-7e265ebf><p style="margin-left:15px;" data-v-7e265ebf> 本系统提供医生的查询，方便用户看本诊所总共有哪些医生。用户能够在挂号页面选择想要的科室、医生和时间段进行挂号预约，每天凌晨00:00放号，可以进行复诊操作。 </p></div><h3 data-v-7e265ebf>二.处方开具</h3><div class="line" data-v-7e265ebf><p style="margin-left:15px;" data-v-7e265ebf> 医生可以根据患者的症状开具对应的处方。开具处方的时候医生要能够根据症状或者名字查询药物。同时每个药物应该有价格，医生开具处方后要能自动结算价格。 </p></div><h3 data-v-7e265ebf>三.历史记录查询</h3><div class="line" data-v-7e265ebf><p style="margin-left:15px;" data-v-7e265ebf> 患者能查询自己的挂号和问诊记录，得到挂号信息和处方单子。医生能够查询自己名下挂号的患者，和自己开具的单子。 </p></div><h3 data-v-7e265ebf>四.药物登记&amp;医生登记</h3><div class="line" data-v-7e265ebf><p style="margin-left:15px;" data-v-7e265ebf> 药剂师可以把药物和医生录入到后端系统，药物信息包含：名字，种类，适应症状和价格等等。 </p></div><h3 data-v-7e265ebf>五.通知系统</h3><div class="line" data-v-7e265ebf><p style="margin-left:15px;" data-v-7e265ebf> 患者能够收到一些特定的通知，如预约成功，预约被取消了，一定时间内没缴费会发缴费等通知。 </p></div><h3 data-v-7e265ebf>六.缴费系统</h3><div class="line" data-v-7e265ebf><p style="margin-left:15px;" data-v-7e265ebf>患者能够通过该系统缴纳医疗费用。</p></div></div>',1),ot={class:"button"};function it(t,s,l,d,n,i){const p=c("el-button");return n.isVisible?(m(),v("div",tt,[e("div",nt,[st,e("div",ot,[o(p,{onClick:i.closeModal},{default:a(()=>[f("退出")]),_:1},8,["onClick"])])])])):S("",!0)}const at=T(et,[["render",it],["__scopeId","data-v-7e265ebf"]]),lt={name:"BillDetails",data(){return{isVisible:!1,form:{type:"",issue:"",price:0,date:"",id:0}}},methods:{openModal(t){this.isVisible=!0,document.body.style.overflow="hidden",this.form.type=t.type,this.form.department=t.department,this.form.price=t.price,this.form.date=t.date,this.form.id=t.id},closeModal(){this.isVisible=!1,document.body.style.overflow=""},cancelModal(){N({type:"info",message:"取消缴费 ╮(╯▽╰)╭",showClose:!0}),this.closeModal()},submitForm(){this.$emit("update:pay-status",this.form.id),N({showClose:!0,message:"缴费成功 ╰(*°▽°*)╯",type:"success"}),this.closeModal()}}},rt={key:0,class:"modal-background"},ct={class:"modal-container"},dt={class:"button-group"};function ut(t,s,l,d,n,i){const p=c("el-form-header"),u=c("el-form-item"),r=c("el-button"),_=c("el-form");return n.isVisible?(m(),v("div",rt,[e("div",ct,[o(_,{model:n.form,class:"form","label-width":"auto",style:{"max-width":"600px"}},{default:a(()=>[o(p,{class:"form-header"},{default:a(()=>[f("缴费详情")]),_:1}),o(u,{label:"类型"},{default:a(()=>[f(h(n.form.type),1)]),_:1}),o(u,{label:"科室"},{default:a(()=>[f(h(n.form.department),1)]),_:1}),o(u,{label:"费用"},{default:a(()=>[f(h(n.form.price)+" 元 ",1)]),_:1}),o(u,{label:"时间"},{default:a(()=>[f(h(n.form.date),1)]),_:1}),e("div",dt,[o(r,{onClick:i.submitForm,type:"primary",plain:!0},{default:a(()=>[f("确认缴费")]),_:1},8,["onClick"]),o(r,{onClick:i.cancelModal},{default:a(()=>[f("取消")]),_:1},8,["onClick"])])]),_:1},8,["model"])])])):S("",!0)}const mt=T(lt,[["render",ut],["__scopeId","data-v-56cfcb05"]]),ht={created(){this.identityNum=j.identityNum,console.log("BillList获取的identityNum为：",this.identityNum)},data(){return{identityNum:0,desc:"缴费列表统计",bill:[],pagination:{total:0,currentPage:1,pageSize:10},filteredBills:[],filteredBillsDiv:[]}},components:{BillDetails:mt},methods:{getBillsData(){return new Promise((t,s)=>{let l=this;this.$axios.post("/api/bills/list/",{identity_num:this.identityNum,action:"getBillsData"}).then(function(d){l.bill=d.data.bill,console.log(l.bill),t()}).catch(function(d){console.log(d),s(d)}),console.log("BillList发送的请求参数:",{identity_num:this.identityNum})})},handleCurrentChange(t){this.pagination.currentPage=t;const s=(this.pagination.currentPage-1)*this.pagination.pageSize,l=s+this.pagination.pageSize;this.filteredBillsDiv=this.filteredBills.slice(s,l),this.pagination.total=this.filteredBills.length},showBillDetails(t){this.$refs.BillDetails.openModal(t)},selectFunc(t){this.filteredBills=this.bill.filter(s=>s.payStatus===t),this.handleCurrentChange(1)},changeBillStatus(t){return new Promise((s,l)=>{let d=this;this.$axios.post("/api/bills/list/",{identity_num:this.identityNum,action:"changeBillStatus",item_id:t}).then(function(n){d.bill=n.data.bill,console.log(d.bill),s()}).catch(function(n){console.log(n),l(n)})})},updatePayStatus(t){this.changeBillStatus(t).then(()=>{this.selectFunc(!1)})}},mounted(){this.getBillsData().then(()=>{this.selectFunc(!1),this.handleCurrentChange(1)})}},pt=t=>(q("data-v-155ce400"),t=t(),P(),t),_t=pt(()=>e("span",null,"缴费列表",-1)),ft={class:"main"},vt={key:0},gt={key:1,class:"butAbanText"};function yt(t,s,l,d,n,i){const p=c("BillDetails"),u=c("el-menu-item"),r=c("el-sub-menu"),_=c("el-menu"),g=c("el-aside"),$=c("el-header"),k=c("el-table-column"),C=c("el-button"),b=c("el-table"),D=c("el-pagination"),y=c("el-main"),x=c("el-footer"),U=c("el-container");return m(),v("div",null,[o(p,{"onUpdate:payStatus":i.updatePayStatus,ref:"BillDetails"},null,8,["onUpdate:payStatus"]),o(U,{class:"componentBody"},{default:a(()=>[o(U,null,{default:a(()=>[o(g,null,{default:a(()=>[o(_,{class:"aside my-menu","default-active":"1","unique-opened":!0},{default:a(()=>[o(r,{index:"1"},{title:a(()=>[_t]),default:a(()=>[o(u,{index:"1",onClick:s[0]||(s[0]=V=>i.selectFunc(!1))},{default:a(()=>[f("未缴费")]),_:1}),o(u,{index:"2",onClick:s[1]||(s[1]=V=>i.selectFunc(!0))},{default:a(()=>[f("已缴费")]),_:1})]),_:1})]),_:1})]),_:1}),o(U,null,{default:a(()=>[o($,{height:"30px",style:{padding:"0",margin:"0"}}),o(y,{class:"el-main"},{default:a(()=>[e("div",ft,[o(b,{data:n.filteredBillsDiv,class:"el-table"},{default:a(()=>[o(k,{prop:"type",label:"类型"}),o(k,{prop:"department",label:"开具科室"}),o(k,{prop:"price",label:"费用（元）"}),o(k,{prop:"date",label:"创建时间"}),o(k,{style:{"text-align":"right"},label:"操作"},{default:a(V=>[V.row.payStatus===!1?(m(),v("div",vt,[o(C,{class:"pay-button",onClick:G=>i.showBillDetails(V.row)},{default:a(()=>[f("缴费")]),_:2},1032,["onClick"])])):(m(),v("div",gt,"已缴费，无需操作"))]),_:1})]),_:1},8,["data"]),o(D,{class:"page","current-page":n.pagination.currentPage,"page-size":n.pagination.pageSize,total:n.pagination.total,"pager-count":3,background:"",layout:"prev, pager, next, total","onUpdate:currentPage":i.handleCurrentChange},null,8,["current-page","page-size","total","onUpdate:currentPage"])])]),_:1}),o(x,{height:"30px",align:"center",class:"footer"},{default:a(()=>[f("SE_GROUP_6")]),_:1})]),_:1})]),_:1})]),_:1})])}const bt=T(ht,[["render",yt],["__scopeId","data-v-155ce400"]]),kt={},Dt=t=>(q("data-v-8827876a"),t=t(),P(),t),wt={class:"sign-container"},xt={class:"neirong"},$t=Dt(()=>e("p",null,"详细信息以医院出具的单据为准！",-1));function Ct(t,s){const l=c("Warning"),d=c("el-icon");return m(),v("div",wt,[e("div",xt,[o(d,{class:"jinggao"},{default:a(()=>[o(l)]),_:1}),$t])])}const ke=T(kt,[["render",Ct],["__scopeId","data-v-8827876a"]]),St={name:"DetailA",data(){return{isVisible:!1,form:{id:"",office:"",orderNum:"",price:"",name:"",cardNum:"",position:"",time:"",line:"",state:"",doctor:""}}},methods:{cancelRegister(){return new Promise((t,s)=>{let l={action:"cancelRegister",id:this.form.id};this.$axios.post("/api/registers/cancel/",l).then(function(d){console.log(d.data.msg),t()}).catch(function(d){console.log(d),s(d)})})},openModal(t){this.isVisible=!0,document.body.style.overflow="hidden",this.form.id=t.id,this.form.office=t.office,this.form.orderNum=t.orderNum,this.form.price=t.price,this.form.name=t.name,this.form.cardNum=t.cardNum,this.form.line=t.line,this.form.position=t.position,this.form.time=t.time,this.form.state=t.state,this.form.doctor=t.doctor},closeModal(){this.isVisible=!1,document.body.style.overflow=""},cancelModal(){this.cancelRegister().then(()=>{N({type:"info",message:"取消挂号成功 ╮(╯▽╰)╭",showClose:!0}),this.closeModal()})}}},H=t=>(q("data-v-067553ff"),t=t(),P(),t),Tt={key:0,class:"modal-background"},Mt={class:"modal-container"},qt={class:"head"},Pt={style:{"margin-left":"15px","font-size":"larger",color:"white"}},Vt={key:0,style:{"margin-left":"15px","font-size":"small",color:"white"}},At={class:"content"},Bt=H(()=>e("h3",null,"就诊信息",-1)),It={class:"line"},Ut=H(()=>e("p",{style:{"margin-left":"15px"}},"就诊科室：",-1)),Rt={class:"line"},Lt=H(()=>e("p",{style:{"margin-left":"15px"}},"科室地址：",-1)),Nt={class:"line"},Ft=H(()=>e("p",{style:{"margin-left":"15px"}},"医生：",-1)),jt={class:"line"},Ht=H(()=>e("p",{style:{"margin-left":"15px"}},"预约时间：",-1)),zt={class:"y"},Et=H(()=>e("p",{class:"w"},"就诊时间以医生实际看诊叫号顺序为准",-1)),Ot={class:"line"},Yt=H(()=>e("p",{style:{"margin-left":"15px"}},"排队号：",-1)),Gt={class:"line"},Jt=H(()=>e("p",{style:{"margin-left":"15px"}},"就诊人：",-1)),Kt={class:"line"},Wt=H(()=>e("p",{style:{"margin-left":"15px"}},"电子就医卡号：",-1)),Zt=H(()=>e("div",{class:"m"},null,-1)),Qt={class:"content"},Xt=H(()=>e("h3",null,"订单信息",-1)),en={class:"line"},tn=H(()=>e("p",{style:{"margin-left":"15px"}},"订单号：",-1)),nn={class:"line"},sn=H(()=>e("p",{style:{"margin-left":"15px"}},"费用：",-1)),on={class:"button"},an={class:"button"};function ln(t,s,l,d,n,i){const p=c("Bell"),u=c("el-icon"),r=c("el-button");return n.isVisible?(m(),v("div",Tt,[e("div",Mt,[e("div",qt,[e("p",Pt,h(n.form.state),1),n.form.state==="已预约"?(m(),v("p",Vt," 请在约定时间前往就诊 ")):S("",!0)]),e("div",At,[Bt,e("div",It,[Ut,e("p",null,h(n.form.office),1)]),e("div",Rt,[Lt,e("p",null,h(n.form.position),1)]),e("div",Nt,[Ft,e("p",null,h(n.form.doctor),1)]),e("div",jt,[Ht,e("p",null,h(n.form.time),1)]),e("div",zt,[o(u,{class:"w"},{default:a(()=>[o(p)]),_:1}),Et]),e("div",Ot,[Yt,e("p",null,h(n.form.line),1)]),e("div",Gt,[Jt,e("p",null,h(n.form.name),1)]),e("div",Kt,[Wt,e("p",null,h(n.form.cardNum),1)])]),Zt,e("div",Qt,[Xt,e("div",en,[tn,e("p",null,h(n.form.orderNum),1)]),e("div",nn,[sn,e("p",null,"现场待支付医事服务费"+h(n.form.price),1)])]),e("div",on,[n.form.state==="已预约"?(m(),A(r,{key:0},{default:a(()=>[f("取消挂号")]),_:1})):S("",!0)]),e("div",an,[o(r,{onClick:i.closeModal},{default:a(()=>[f("退出")]),_:1},8,["onClick"])])])])):S("",!0)}const rn=T(St,[["render",ln],["__scopeId","data-v-067553ff"]]),cn={name:"HistoryA",props:{filterInfo:{type:Array,required:!0}},data(){return{circleUrl:"https://cube.elemecdn.com/3/7c/3ea6beec64369c2642b92c6726f1epng.png"}},components:{DetailA:rn},methods:{showPrescriptionDetails(t){this.$refs.detail.openModal(t)}}},O=t=>(q("data-v-a1881f49"),t=t(),P(),t),dn={class:"container"},un={class:"card-container"},mn={class:"header"},hn={class:"row"},pn={class:"row1"},_n=O(()=>e("p",{style:{"font-size":"larger","margin-right":"10px","font-weight":"600"}},"门诊号",-1)),fn=O(()=>e("div",{class:"row2"},[e("p",null,"猫猫就诊医院")],-1)),vn={style:{color:"darkblue","margin-left":"60px"}},gn={class:"content"},yn={class:"line"},bn=O(()=>e("p",null,"订单号：",-1)),kn={class:"line"},Dn=O(()=>e("p",null,"费用：",-1)),wn={class:"line"},xn=O(()=>e("p",null,"就诊人：",-1)),$n={class:"line"},Cn=O(()=>e("p",null,"电子就医卡号：",-1)),Sn={class:"line"},Tn=O(()=>e("p",null,"科室地址：",-1)),Mn={class:"line"},qn=O(()=>e("p",null,"预约时间：",-1)),Pn={class:"line"},Vn=O(()=>e("p",null,"排队号：",-1)),An={class:"neirong"},Bn=O(()=>e("p",null," 实际就诊时间以医院安排为准！",-1)),In={class:"button"};function Un(t,s,l,d,n,i){const p=c("DetailA"),u=c("el-avatar"),r=c("el-divider"),_=c("Warning"),g=c("el-icon"),$=c("el-button"),k=c("el-card"),C=c("el-footer");return m(),v(w,null,[o(p,{ref:"detail"},null,512),e("div",dn,[e("div",un,[(m(!0),v(w,null,M(l.filterInfo,b=>(m(),A(k,{key:b,style:{width:"30%","min-height":"400px",margin:"1.6%"}},{default:a(()=>[e("div",mn,[o(u,{size:50,src:n.circleUrl},null,8,["src"]),e("div",hn,[e("div",pn,[_n,e("p",null,h(b.office),1)]),fn]),e("p",vn,h(b.state),1)]),o(r,{class:"divider"}),e("div",gn,[e("div",yn,[bn,e("p",null,h(b.orderNum),1)]),e("div",kn,[Dn,e("p",null,h(b.price),1)]),e("div",wn,[xn,e("p",null,h(b.name),1)]),e("div",$n,[Cn,e("p",null,h(b.cardNum),1)]),e("div",Sn,[Tn,e("p",null,h(b.position),1)]),e("div",Mn,[qn,e("p",null,h(b.time),1)]),e("div",Pn,[Vn,e("p",null,h(b.line),1)])]),e("div",An,[o(g,{class:"jinggao"},{default:a(()=>[o(_)]),_:1}),Bn]),o(r,{class:"divider"}),e("div",In,[o($,{type:"primary",plain:"",onClick:D=>i.showPrescriptionDetails(b),class:"xiang"},{default:a(()=>[f("显示详情")]),_:2},1032,["onClick"]),b.state==="已预约"?(m(),A($,{key:0,type:"primary",plain:""},{default:a(()=>[f("取消挂号")]),_:1})):S("",!0)])]),_:2},1024))),128))]),o(C,{height:"30px",align:"center",class:"footer"},{default:a(()=>[f("SE_GROUP_6")]),_:1})])],64)}const Rn=T(cn,[["render",Un],["__scopeId","data-v-a1881f49"]]),Ln=t=>(q("data-v-ced4b8fa"),t=t(),P(),t),Nn={class:"all-container",width:"100%"},Fn={class:"search-container"},jn=Ln(()=>e("div",{class:"wenzi"},[e("p",{class:"guahao"},"挂号查询"),e("p",{class:"back"},"首页 > 挂号查询")],-1)),Hn={class:"input-container"},zn={class:"chaxun"},En={__name:"PatientA",setup(t){const s=F(""),l=F([]);pe("$identity_num");const d=()=>new Promise((p,u)=>{let r={action:"getRegistersData",identity_num:j.identityNum};J.post("/api/registers/list/",r).then(_=>{l.value=_.data.registers,console.log("Registers data fetched:",l.value),p()}).catch(_=>{console.error("Error fetching registers data:",_),u(_)})}),n=()=>{console.log(`查询内容是：${s.value}`)},i=se(()=>l.value.filter(p=>/^\d/.test(s.value)?p.time.split(" ")[0]===s.value:s.value?p.office===s.value:!0));return ae(()=>{if(j.identityNum=="0"){console.log("未登录");return}d().then(()=>{})}),(p,u)=>{const r=c("el-divider"),_=c("search"),g=c("el-icon"),$=c("el-input"),k=c("el-button"),C=c("scroll"),b=c("el-container");return m(),A(b,{style:{height:"100vh"}},{default:a(()=>[o(C,null,{default:a(()=>[e("div",Nn,[e("div",Fn,[jn,o(r,{class:"divider"})]),o(ke),e("div",Hn,[e("div",zn,[o($,{modelValue:s.value,"onUpdate:modelValue":u[0]||(u[0]=D=>s.value=D),style:{width:"300px",height:"40px"},placeholder:"请输入就诊日期(例:2024-05-09) 或 科室",class:"shuru"},{prefix:a(()=>[o(g,{class:"el-input__icon"},{default:a(()=>[o(_)]),_:1})]),_:1},8,["modelValue"]),o(k,{color:"#DBA979",dark:p.isDark,plain:"",class:"searchButton",style:{width:"80px",height:"40px"},onClick:n},{default:a(()=>[f("查询")]),_:1},8,["dark"]),e("p",null,h(s.value),1)])]),o(Rn,{filterInfo:i.value},null,8,["filterInfo"])])]),_:1})]),_:1})}}},On=T(En,[["__scopeId","data-v-ced4b8fa"]]),Yn={name:"PrescriptionDetails",data(){return{isVisible:!1,image:null,form:{id:"",name:"",date:new Date().toISOString().substr(0,10),gender:"",advice:"",medicines:[{name:"",cnt:0,price:0,totalPrice:0}]},medicinesDB:[]}},computed:{totalPrice(){return this.form.medicines.reduce((t,s)=>t+parseFloat(s.totalPrice||0),0).toFixed(2)}},methods:{writeBackPrescriptionDetailsData(){return new Promise((t,s)=>{let l={id:this.form.id,medicines:this.medicines,suggestion:this.advice,totalPrice:this.totalPrice};this.$axios.post("/api/prescriptionDetailsWriteBack/",l).then(function(d){console.log(d.data.msg),t()}).catch(function(d){console.log(d),console.log("Prescription Details Write Back Failed"),s(d)})})},handleImageUpload(t){const s=t.target.files[0];if(s){const l=new FileReader;l.onload=d=>{this.image=d.target.result},l.readAsDataURL(s)}},getMedicineData(){return new Promise((t,s)=>{let l=this;this.$axios.get("/api/medicine/list/").then(function(d){l.medicinesDB=d.data.medicine,console.log(l.medicinesDB),t()}).catch(function(d){console.log(d),s(d)})})},openModal(t){this.id=t.Id,this.isVisible=!0,document.body.style.overflow="hidden",this.form.name=t.name,this.form.gender=t.sex},closeModal(){this.isVisible=!1,document.body.style.overflow=""},cancelModal(){N({type:"info",message:"取消提交 ╮(╯▽╰)╭",showClose:!0}),this.closeModal()},submitForm(){N({showClose:!0,message:"提交成功 ╰(*°▽°*)╯",type:"success"}),console.log("提交表单 完成",this.form),this.form.advice="",this.form.date="",this.form.gender="",this.form.id="",this.form.medicines="",this.form.name="",writeBackPrescriptionDetailsData(),this.closeModal()},addMedicine(){this.form.medicines.push({name:"",cnt:0,price:0,totalPrice:0})},removeMedicine(t){this.form.medicines.splice(t,1)},calculatePrice(t){const s=this.medicinesDB.find(l=>l.name===t.name);s&&(t.price=s.price,t.totalPrice=(s.price*t.cnt).toFixed(2))},querySearch(t,s){const l=this.medicinesDB.map(n=>({value:n.name,symptoms:n.use})),d=t?l.filter(this.createFilter(t)):l;s(d)},createFilter(t){return s=>{const l=s.value.toLowerCase().includes(t.toLowerCase()),d=s.symptoms.toLowerCase().includes(t.toLowerCase());return l||d}},handleSelect(t){return s=>{const l=this.medicinesDB.find(d=>d.name===s.value);if(l){const d=this.form.medicines[t];d.name=l.name,d.price=l.price,this.calculatePrice(d)}}},generateReport(){const t="<h2 style='font-family: 宋体;font-size: 24px;'>猫猫就诊报告</h2>",s=this.image?`<img src="${this.image}" alt="就诊图片" style="max-width: 100%;">`:"",l=`
    <p style='font-family: 宋体;font-size: 14px;'>
      姓名: ${this.form.name} <br/>
      就诊日期: ${this.form.date} <br/>
      性别: ${this.form.gender} <br/>
      药物列表: <br/>
      ${this.form.medicines.map(u=>`  - ${u.name}: ${u.cnt} 个，总价: ¥${u.totalPrice}`).join("<br/>")}
      <br/>
      医师建议: <br/>
      ${this.form.advice} <br/>
      总价: ¥${this.totalPrice}
    </p>
  `,d=t+s+l,n=new Blob([d],{type:"text/html"}),i=URL.createObjectURL(n),p=document.createElement("a");p.href=i,p.download=`${this.form.name}-就诊报告.html`,document.body.appendChild(p),p.click(),document.body.removeChild(p),URL.revokeObjectURL(i),N({showClose:!0,message:"报告生成成功 ╰(*°▽°*)╯",type:"success"})}},mounted(){this.getMedicineData().then(()=>{})}},Gn=t=>(q("data-v-c2f41437"),t=t(),P(),t),Jn={key:0,class:"modal-background"},Kn={class:"modal-container"},Wn=Gn(()=>e("div",{class:"form-header"},"处方开具",-1)),Zn={class:"button-group"};function Qn(t,s,l,d,n,i){const p=c("el-input"),u=c("el-form-item"),r=c("el-date-picker"),_=c("el-radio"),g=c("el-radio-group"),$=c("el-autocomplete"),k=c("el-input-number"),C=c("el-col"),b=c("el-row"),D=c("el-button"),y=c("el-form");return n.isVisible?(m(),v("div",Jn,[e("div",Kn,[o(y,{model:n.form,class:"form","label-width":"auto",style:{"max-width":"600px"}},{default:a(()=>[Wn,o(u,{label:"姓名",class:"namelable"},{default:a(()=>[o(p,{modelValue:n.form.name,"onUpdate:modelValue":s[0]||(s[0]=x=>n.form.name=x)},null,8,["modelValue"])]),_:1}),o(u,{label:"就诊日期"},{default:a(()=>[o(r,{modelValue:n.form.date,"onUpdate:modelValue":s[1]||(s[1]=x=>n.form.date=x),type:"date"},null,8,["modelValue"])]),_:1}),o(u,{label:"性别"},{default:a(()=>[o(g,{modelValue:n.form.gender,"onUpdate:modelValue":s[2]||(s[2]=x=>n.form.gender=x)},{default:a(()=>[o(_,{value:"男"},{default:a(()=>[f("男")]),_:1}),o(_,{value:"女"},{default:a(()=>[f("女")]),_:1})]),_:1},8,["modelValue"])]),_:1}),(m(!0),v(w,null,M(n.form.medicines,(x,U)=>(m(),A(u,{key:U},{default:a(()=>[o($,{modelValue:x.name,"onUpdate:modelValue":V=>x.name=V,"trigger-on-focus":!1,"fetch-suggestions":i.querySearch,placeholder:"药物名称或症状",onSelect:V=>i.handleSelect(U),"show-all":!0},null,8,["modelValue","onUpdate:modelValue","fetch-suggestions","onSelect"]),o(k,{modelValue:x.cnt,"onUpdate:modelValue":V=>x.cnt=V,min:0,step:1,placeholder:"数量",onChange:V=>i.calculatePrice(x)},null,8,["modelValue","onUpdate:modelValue","onChange"]),o(b,null,{default:a(()=>[o(C,{span:12},{default:a(()=>[o(p,{modelValue:x.totalPrice,"onUpdate:modelValue":V=>x.totalPrice=V,disabled:"",placeholder:"总价",style:{"margin-left":"10px"}},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),n.form.medicines.length>1?(m(),A(D,{key:0,type:"danger",icon:"el-icon-delete",onClick:V=>i.removeMedicine(U),class:"delete-button"},{default:a(()=>[f("删除药物")]),_:2},1032,["onClick"])):S("",!0)]),_:2},1024))),128)),o(u,null,{default:a(()=>[o(D,{onClick:i.addMedicine,type:"primary"},{default:a(()=>[f("添加药物")]),_:1},8,["onClick"])]),_:1}),o(u,{label:"上传图片",type:"primary"},{default:a(()=>[e("input",{type:"file",onChange:s[3]||(s[3]=(...x)=>i.handleImageUpload&&i.handleImageUpload(...x))},null,32)]),_:1}),o(u,{label:"医师建议"},{default:a(()=>[o(p,{type:"textarea",modelValue:n.form.advice,"onUpdate:modelValue":s[4]||(s[4]=x=>n.form.advice=x)},null,8,["modelValue"])]),_:1}),o(u,null,{default:a(()=>[o(p,{modelValue:i.totalPrice,"onUpdate:modelValue":s[5]||(s[5]=x=>i.totalPrice=x),disabled:"",placeholder:"总价"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"]),e("div",Zn,[o(D,{onClick:i.submitForm,type:"primary"},{default:a(()=>[f("提交")]),_:1},8,["onClick"]),o(D,{onClick:i.cancelModal},{default:a(()=>[f("退出")]),_:1},8,["onClick"]),o(D,{onClick:i.generateReport,type:"success"},{default:a(()=>[f("生成报告")]),_:1},8,["onClick"])])])])):S("",!0)}const Xn=T(Yn,[["render",Qn],["__scopeId","data-v-c2f41437"]]),es={data(){return{desc:"问诊列表统计",patient:[{Id:"1",name:"秋子夜",age:"18",sex:"男",date:"2024年5月10日"}],filteredPatients:[],currentPatients:[],pagination:{total:0,currentPage:1,pageSize:10}}},components:{PrescriptionDetails:Xn},methods:{handleCurrentChange(t){this.pagination.currentPage=t;const s=(this.pagination.currentPage-1)*this.pagination.pageSize,l=s+this.pagination.pageSize;this.currentPatients=this.filteredPatients.slice(s,l),this.pagination.total=this.filteredPatients.length,console.log(this.patient)},getRegisterData(){return console.log("getRegisterDate done"),new Promise((t,s)=>{let l=this;this.$axios.post("/api/registers/list/",{action:"getDoctorRegisters",identity_num:j.identityNum}).then(function(d){l.patient=d.data.registers,console.log(l.patient),t()}).catch(function(d){console.log(d.response),s(d)})})},showPrescriptionDetails(t){this.$refs.prescriptionDetails.openModal(t)},selectFunc(t){let s=new Date;s.setHours(0,0,0,0);let l=new Date(s);switch(l.setDate(l.getDate()-1),t){case"1":this.filteredPatients=this.patient.filter(d=>{let n=d.date.split("年").join("-").split("月").join("-").split("日").join("").split("-"),i=new Date(n[0],n[1]-1,n[2]);return i.setHours(0,0,0,0),i.toDateString()===s.toDateString()}),this.handleCurrentChange(1);break;case"2":this.filteredPatients=this.patient.filter(d=>{let n=d.date.split("年").join("-").split("月").join("-").split("日").join("").split("-"),i=new Date(n[0],n[1]-1,n[2]);return i.setHours(0,0,0,0),i.toDateString()===l.toDateString()}),this.handleCurrentChange(1);break;case"3":this.filteredPatients=this.patient.filter(d=>{let n=d.date.split("年").join("-").split("月").join("-").split("日").join("").split("-"),i=new Date(n[0],n[1]-1,n[2]);return i.setHours(0,0,0,0),i<l}),this.handleCurrentChange(1);break}}},mounted(){this.getRegisterData().then(()=>{this.selectFunc("1"),this.handleCurrentChange(1)})}},ts=t=>(q("data-v-1a879db0"),t=t(),P(),t),ns=ts(()=>e("span",null,"问诊列表",-1));function ss(t,s,l,d,n,i){const p=c("PrescriptionDetails"),u=c("el-menu-item"),r=c("el-sub-menu"),_=c("el-menu"),g=c("el-aside"),$=c("el-header"),k=c("el-table-column"),C=c("el-button"),b=c("el-table"),D=c("el-pagination"),y=c("el-main"),x=c("el-footer"),U=c("el-container");return m(),v(w,null,[o(p,{ref:"prescriptionDetails"},null,512),o(U,{style:{height:"100vh"}},{default:a(()=>[o(U,null,{default:a(()=>[o(g,{width:"200px"},{default:a(()=>[o(_,{class:"aside my-menu","default-active":"1","unique-opened":!0},{default:a(()=>[o(r,{index:"1"},{title:a(()=>[ns]),default:a(()=>[o(u,{index:"1",onClick:s[0]||(s[0]=V=>i.selectFunc("1"))},{default:a(()=>[f("今日")]),_:1}),o(u,{index:"2",onClick:s[1]||(s[1]=V=>i.selectFunc("2"))},{default:a(()=>[f("昨日")]),_:1}),o(u,{index:"3",onClick:s[2]||(s[2]=V=>i.selectFunc("3"))},{default:a(()=>[f("更早")]),_:1})]),_:1})]),_:1})]),_:1}),o(U,null,{default:a(()=>[o($,{height:"30px",style:{padding:"0",margin:"0"}}),o(y,{class:"main"},{default:a(()=>[e("div",null,[o(b,{data:n.currentPatients},{default:a(()=>[o(k,{prop:"Id",label:"单号"}),o(k,{prop:"name",label:"姓名"}),o(k,{prop:"age",label:"年龄"}),o(k,{prop:"sex",label:"性别"}),o(k,{prop:"date",style:{"background-color":"black"},label:"问诊时间"}),o(k,{style:{"text-align":"right"},label:"操作"},{default:a(V=>[o(C,{class:"prescribe-button",onClick:G=>i.showPrescriptionDetails(V.row)},{default:a(()=>[f("开具处方")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),o(D,{class:"page","current-page":n.pagination.currentPage,"page-size":n.pagination.pageSize,total:n.pagination.total,"pager-count":3,background:"",layout:"prev, pager, next, total","onUpdate:currentPage":i.handleCurrentChange},null,8,["current-page","page-size","total","onUpdate:currentPage"])])]),_:1}),o(x,{height:"30px",align:"center",class:"footer"},{default:a(()=>[f("SE_GROUP_6")]),_:1})]),_:1})]),_:1})]),_:1})],64)}const os=T(es,[["render",ss],["__scopeId","data-v-1a879db0"]]),is={data(){return{activeNames:["1","2"],table:!1,timer:null,unreadCount:0,firstLoad:!0,resMes:[],oriBillMes:[],billMes:[]}},methods:{countUnread(){const t=this.resMes.filter(l=>l.read===!1).length,s=this.billMes.filter(l=>l.read===!1).length;this.unreadCount=t+s,this.unreadCount>0&&this.firstLoad===!0&&(this.checkNewMsg(),this.firstLoad=!1),this.$emit("update:result",this.unreadCount)},getMesData(){return new Promise((t,s)=>{let l=this;this.$axios.post("api/notice/list/",{identity_num:j.identityNum,action:"getMesData"}).then(function(d){l.resMes=d.data.resMes,l.oriBillMes=d.data.billMes,l.payOverTimeQuery(),console.log(l.resMes),console.log(l.billMes),l.countUnread(),t()}).catch(function(d){console.log(d),s(d)}),console.log("MesDrawer发送的请求参数:",{identity_num:j.identityNum})})},openDrawer(){this.getMesData(),this.table=!0},turnToBill(){this.table=!1,window.scrollTo({top:0,left:0,behavior:"smooth"})},tableRowClassName({row:t,rowIndex:s}){return t.read===!1?"warning-row":t.read===!0?"success-row":""},readMes(t){return new Promise((s,l)=>{let d=this;this.$axios.post("api/notice/list/",{action:"readMes",item_id:t.item_id}).then(function(n){d.getMesData().then(()=>{s()})}).catch(function(n){console.log(n),l(n)})})},payOverTimeQuery(){this.billMes=[];const t=Date.now(),s=8*60*60*1e3,l=t+s;this.oriBillMes.forEach(d=>{const n=new Date(d.timetamp).getTime();(d.type==="处方缴费提醒"&&l-n>30*60*1e3||d.type==="处方缴费成功")&&this.billMes.push(d)})},checkNewMsg(){Me({title:"未读消息提示",message:"你有新的消息，请及时查看",type:"info"})},mounted(){if(j.identityNum==="0"){console.log("未登录");return}this.getMesData().then(()=>{this.intervalId=setInterval(this.payOverTimeQuery,3e4)})},beforeDestroy(){clearInterval(this.intervalId)}}},I=t=>(q("data-v-12c119b3"),t=t(),P(),t),as={class:"myDrawer"},ls={class:"demo-collapse"},rs={class:"messageList"},cs={key:0,m:"4",class:"mesBody"},ds=I(()=>e("p",null,"尊敬的患者:",-1)),us=I(()=>e("p",null,[f("您好！您已"),e("b",null,"成功预约"),f("了我院的挂号服务。以下是您的预约详情：")],-1)),ms={m:"t-0 b-2"},hs={m:"t-0 b-2"},ps={m:"t-0 b-2"},_s={m:"t-0 b-2"},fs=I(()=>e("p",null,[f(" 请您准时到达，并携带"),e("b",null,"有效身份证件及相关病历资料"),f("。 "),e("br"),f("感谢您选择我院，祝您身体健康！ ")],-1)),vs={style:{"text-align":"right"}},gs=I(()=>e("br",null,null,-1)),ys={key:1,m:"4",class:"mesBody"},bs=I(()=>e("p",null,"尊敬的患者:",-1)),ks=I(()=>e("p",null,[f("您好！我们收到了您的"),e("b",null,"预约挂号取消"),f("请求。以下是已取消的预约信息：")],-1)),Ds={m:"t-0 b-2"},ws={m:"t-0 b-2"},xs={m:"t-0 b-2"},$s={m:"t-0 b-2"},Cs=I(()=>e("p",null,[f(" 请您注意，若未来需要再次预约，"),e("b",null,"请提前通过我院官网进行预约"),f("。 "),e("br"),f("感谢您的理解与合作，祝您身体健康！ ")],-1)),Ss={style:{"text-align":"right"}},Ts=I(()=>e("br",null,null,-1)),Ms={key:0},qs={key:1,class:"butAbanText"},Ps={class:"messageList"},Vs={key:0,m:"4",class:"mesBody"},As=I(()=>e("p",null,"尊敬的患者:",-1)),Bs=I(()=>e("p",null,[f("您好！您在我院的就诊处方"),e("b",null,"即将到达缴费截止时间"),f("。处方详情如下：")],-1)),Is={m:"t-0 b-2"},Us={m:"t-0 b-2"},Rs={m:"t-0 b-2"},Ls={m:"t-0 b-2"},Ns=I(()=>e("p",null,[f(" 请您"),e("b",null,"在30分钟内完成缴费"),f("，以免影响您的就诊计划。 "),e("br"),f("感谢您的配合，祝您身体健康！ ")],-1)),Fs={style:{"text-align":"right"}},js=I(()=>e("br",null,null,-1)),Hs={key:1,m:"4",class:"mesBody"},zs=I(()=>e("p",null,"尊敬的患者:",-1)),Es=I(()=>e("p",null,[f("您好！您在我院的就诊处方"),e("b",null,"缴费成功"),f("。处方详情如下：")],-1)),Os={m:"t-0 b-2"},Ys={m:"t-0 b-2"},Gs={m:"t-0 b-2"},Js={m:"t-0 b-2"},Ks=I(()=>e("p",null," 感谢您对我们医院的信任与支持。如有任何疑问或需要进一步的帮助，请随时联系我们。祝您身体健康！ ",-1)),Ws={style:{"text-align":"right"}},Zs=I(()=>e("br",null,null,-1)),Qs={key:0},Xs={key:1,class:"butAbanText"};function eo(t,s,l,d,n,i){const p=c("Calendar"),u=c("el-icon"),r=c("el-table-column"),_=c("el-button"),g=c("el-table"),$=c("el-collapse-item"),k=c("Money"),C=c("router-link"),b=c("el-collapse"),D=c("el-drawer");return m(),v("div",as,[o(D,{modelValue:n.table,"onUpdate:modelValue":s[1]||(s[1]=y=>n.table=y),title:"消息列表",direction:"rtl",size:"40%"},{default:a(()=>[e("div",ls,[o(b,{modelValue:n.activeNames,"onUpdate:modelValue":s[0]||(s[0]=y=>n.activeNames=y)},{default:a(()=>[o($,{name:"1",class:"collapseItem1"},{title:a(()=>[f("    "),o(u,null,{default:a(()=>[o(p)]),_:1}),f("  预约通知 ")]),default:a(()=>[e("div",rs,[o(g,{data:n.resMes,style:{width:"100%"},"row-class-name":i.tableRowClassName},{default:a(()=>[o(r,{type:"expand"},{default:a(y=>[y.row.type=="预约成功"?(m(),v("div",cs,[ds,us,e("strong",null,[e("p",ms,"- 预约编号: "+h(y.row.id),1),e("p",hs,"- 预约科室: "+h(y.row.department),1),e("p",ps,"- 预约医生: "+h(y.row.doctor),1),e("p",_s,"- 预约就诊时间: "+h(y.row.time),1)]),fs,e("p",vs,[f(" 猫猫就诊ฅ 预约挂号服务中心"),gs,f(" "+h(y.row.timetamp),1)])])):S("",!0),y.row.type=="取消预约"?(m(),v("div",ys,[bs,ks,e("strong",null,[e("p",Ds,"- 预约编号: "+h(y.row.id),1),e("p",ws,"- 预约科室: "+h(y.row.department),1),e("p",xs,"- 预约医生: "+h(y.row.doctor),1),e("p",$s,"- 预约就诊时间: "+h(y.row.time),1)]),Cs,e("p",Ss,[f(" 猫猫就诊 预约挂号服务中心"),Ts,f(" "+h(y.row.timetamp),1)])])):S("",!0)]),_:1}),o(r,{label:"已读?"},{default:a(y=>[y.row.read===!1?(m(),v("div",Ms,[o(_,{class:"pay-button",onClick:x=>i.readMes(y.row)},{default:a(()=>[f("确认")]),_:2},1032,["onClick"])])):(m(),v("div",qs,"已读"))]),_:1}),o(r,{label:"类型",prop:"type"}),o(r,{label:"患者姓名",prop:"name"}),o(r,{label:"就诊时间",prop:"time"})]),_:1},8,["data","row-class-name"])])]),_:1}),o($,{name:"2",class:"collapseItem2"},{title:a(()=>[f("    "),o(u,null,{default:a(()=>[o(k)]),_:1}),f("  处方缴费通知 ")]),default:a(()=>[e("div",Ps,[o(g,{data:n.billMes,style:{width:"100%"},"row-class-name":i.tableRowClassName},{default:a(()=>[o(r,{type:"expand"},{default:a(y=>[y.row.type=="处方缴费提醒"?(m(),v("div",Vs,[As,Bs,e("strong",null,[e("p",Is,"- 处方编号: "+h(y.row.id),1),e("p",Us,"- 开具科室: "+h(y.row.department),1),e("p",Rs,"- 开具医生: "+h(y.row.doctor),1),e("p",Ls,"- 开具时间: "+h(y.row.time),1)]),Ns,o(C,{to:"/Bill",onClick:i.turnToBill},{default:a(()=>[f("缴费入口")]),_:1},8,["onClick"]),e("p",Fs,[f(" 猫猫就诊 缴费服务中心"),js,f(" "+h(y.row.timetamp),1)])])):S("",!0),y.row.type=="处方缴费成功"?(m(),v("div",Hs,[zs,Es,e("strong",null,[e("p",Os,"- 处方编号: "+h(y.row.id),1),e("p",Ys,"- 开具科室: "+h(y.row.department),1),e("p",Gs,"- 开具医生: "+h(y.row.doctor),1),e("p",Js,"- 开具时间: "+h(y.row.time),1)]),Ks,e("p",Ws,[f(" 猫猫就诊 缴费服务中心"),Zs,f(" "+h(y.row.timetamp),1)])])):S("",!0)]),_:1}),o(r,{label:"已读?"},{default:a(y=>[y.row.read===!1?(m(),v("div",Qs,[o(_,{class:"pay-button",onClick:x=>i.readMes(y.row)},{default:a(()=>[f("确认")]),_:2},1032,["onClick"])])):(m(),v("div",Xs,"已读"))]),_:1}),o(r,{label:"类型",prop:"type"}),o(r,{label:"患者姓名",prop:"name"}),o(r,{label:"开具时间",prop:"time"})]),_:1},8,["data","row-class-name"])])]),_:1})]),_:1},8,["modelValue"])])]),_:1},8,["modelValue"])])}const De=T(is,[["render",eo],["__scopeId","data-v-12c119b3"]]),to="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIYAAACECAYAAABVsVOaAAAI/UlEQVR4nO3deYxV1R3A8e9cQRwcFOPSljJWlKlUUKpg0opaEY0RpSaSuMUNjWLauPWP2iqx/9Qm1KULpjatdd9Qq0jd0MSlTNwQRXGhRUS0tlahhJFCoTqvf/zekzev782795xzzzn3vd8nmTDMvHPeL/B7527n/E5HqVSizewI7AGMB7qBkUAn0AFU/jE6gM3ABuBfwEvAaqDfd7ChDAkdgAe7Ad8CDgYOAvYv/6wjYz+ry18vAEuBZ5HkaUkdLTpiDAWOBU4EpiOjhGsfAU8CdwF/zqH/oFotMbqA2cD5wGiP77scmAfc6fE9c9VKiXEhcAnw5YAxvA7MBRYEjMGJVkiMbwM/Rc4jYvEIcCWwInQgpoqeGLOB60IH0cBW4LvA4tCBmEhCB2DhOuJNCoDtgceBC0IHYqKoI8YDwDGhg8jgF8Cc0EFkUcQR416KlRQAlwIXhw4ii6IlxrXAcaGDMPQz4PTQQaRVpEPJScDNoYNwYDLwduggmilKYuwMfEj229gxeh+YAHweOpDBFOVQciOtkRQAewJXhQ6imSKMGEcgN4xazUTgndBBNFKExHgb+ZS1mmeI+EQ69kPJkbRmUoCMhJNCB9FI7Inx49AB5OyK0AE0EvOhpJsCP4TKoAf4e+ggasU8YkwJHYAnp4YOoJ6YE2Nq6AA8OTZ0APXEeigZBryLTNRtdVuAMcjE42jEOmIcQHskBciHoDt0ELViTYyzQwfgWXSXrTEeSr4BvBw6CM8+AMaFDqJabCPGfsCi0EEE0A0sRB4WRsHniNEFDGfbaq/PgF2B3ZGnjYcgj9bb2SfAw8ASoA/YG/gSsBEZVT4F3kPu72zMM5C8EmMkMmu7svJrf2AnZClgqfzVX/6Zym4d8CbwPNALPOX6DVwmxnbATGAGcBT6n+7TO8BjwHzgVRcdukiMTuBcZPXXPtYRKVtPIJOPrZZN2ibGecjqr71sOlG5WARcjRxuMjNNjAnA9cgKchW33wGXIQugUjNJjJPKbzY0a0MVzEpkdF+StkHW+xi/RGZqa1IUSw8yY+zMtA2yJMbtSNap4roB+GGaF6ZNjJuQIiSq+H5CiplxaRLjGuBk63BUTOYAFw32gmYnnzGXGVD2ZtDgrulgibEv8EpeEakobEFuSq6v/cVgh5L5uYWjYjGMBv/PjRLjR8gljmp9U6jzVLveoeSrwF99RKSisRF5rPFF3dJ6I8ZcX9GoaHRRUxKqdsQYh1S9Ve1nMzCK8jOV2hHjMu/hqFh0ArMqf6keMbqQpXLbBQhKxeEvyKy7ASPGOWhStLseZPHTgMSYVf+1qo0kwAmVb0Cy5OvBwlExORy2JcaMgIGouBwOjKgkRpQrrlUQncCEBBhB+UxUqbKJCbIYqCt0JCoqByfIImKlqu2R0D51KFR6wxNkR0Glqo1M8LupnCqGzoRtZQmUqiglRFhjUgVXSoivqo4KryOhdbZ7UO70J+RcskcV0sYEWBM6ChWdzQkF2J9LebcyAVYhK5KUqngxAdaiSxHVQMsrl6qF3H9c5WI98GYlMRaEjERFZTGwqZIYrwF/CxiMiscCGHjX8w+BAlHx6AMehIGJMQ+9Oml3d1BnieJm4LYg4ahYXFP5pnZR827ondB29TBVtdZqn6yuBX7lNRwVg01IvbUv1CuckiCFU77iKSgV3lnA/dU/qDcXo5/225OsnS2kJimg8SSdXuA3uYajYvAeDQaBZnU+e4ED3cejIrAV+CYNLjaaTeubjuzTpVrPdAa5Am2WGH3lDvTGV+vYimxNNugGN2kmAr8FHE/GjVBUlN4HvkOKXY/SzhB/Dqmb8KFFUCqsO5EdqV5P8+IsSweWlzu+xyAoFc4y4EJkM8PUE79N90SbgpR+nGbSWHnRD3wP2YAoM9tdFC8BrrLpQOXmCmSrMiMu9l2dh5SCVHEZC/zDtLGL5Ylz0YXRMbKqkuQiMdYD/3bQj3LrbJvGLg4lw4HVaB2v2JSAA4B3TRq7GDFGAzs66Ee51QH81rSxi8Q4Gl0xH6spwGEmDV0khtYgj9vs5i/5f7bnGIcAT9p0oHL3H+BrZCx3YTtipN4rXAWzA3JIycQ2MaZatld+jMnawCYxDkRLQRZF5urPNomhhemLI3P1Z5vEGGvRVvmV+eajTWKMs2ir/BqatYFpYnSgNciLpD9rA9PEGAbsadhW+Zf5ZpVpYgzFYHhSwWSe5a/lottD5nrxponxX8N2KoxVWRuYJsYWZN2jKoa1WRuYJkYJXWNSJKnWklSzOccwmhmkvFsHrMjayCYxlli0Vf704vFyFeBFi7bKn0dNGtkkxgcYHLuUd0+YNLK9j6HrWOP2NPCxSUPbxLjLsr3K192mDW0T4xPgIcs+VD4+Bh4wbezilvjPHfSh3LsWqfZsxMVKNJBS0zNddKSc2ADshUUVJFcP0S5FFzbH5HIsS2O5Sox1wBxHfSk7bwC32Hbi6lBS8Sww2WWHKrPJONgZ0/V8jOPRuqAhXY6j7VJdJ8anwCmO+1TpzMfhzhGuDyUV04H78uhY1bUCmOSyw7ym9j0KnJZT32qgVcCRrjvNc87nQ8DpOfavZBbdVOS+hVN5HUqqTUUetsVeiumPSDL/ExgFHEPc50vPAWcAH+XRuY/EALkLdzdSEyo2a5BylC/U+d1BwE1Aj9eImrsVKe6aG1+JUfFr4Fyfb9jESqRGet8gr9kJ+D1yKR7aJuBiPDzV9r2u5CLkvMNojoBjS4FDGTwpKP/+ZOBEwk5nXIhceXiZ6hBiwdGDyM46NxDu+cr1yPYMWcoPLQKOAL6PFNz3ZSlyhXcqsq2EF74PJbV6kMr4ZwFDPLzfYuBK4CUHfU0DfoAkSx6eR7ZVN55sYyN0YlSMQT4VM4F9HfddQqa43Ug+k4rGIucpRyOlE3ex6Ost4HHgEeqfDHsTS2JUm4bcsDkMuYoxWTzdh3zieoE/ISeZPowA9kP2dRmPVMsbBXQjI2KCJOpnyGFhTfnPZcghY5mnOJuKMTGqjQYmlr8mATsjVwlDkJoPCbJcckP5qxc5/r+G1DiPxe7A9kjcnyNzJWI4AW/of9ZK03bc0/5uAAAAAElFTkSuQmCC",no={name:"HeaderNavigation",data(){return{date:new Date,WebURL:"http://localhost:8080",currentIndex:0,images:["/static/img/navigation/banner1.jpg","/static/img/navigation/banner2.jpg","/static/img/navigation/banner3.jpg"],unreadCount:0,intervalId:null,currentUser:{userType:"",idCard:"",password:""}}},mounted(){this.checkLoginStatus(),this.startBackgroundRotation(),this.$refs.messageBox.countUnread()},beforeDestroy(){this.stopBackgroundRotation()},components:{Login:Xe,Sign:at,RouterLink:Pe,RouterView:Ve,messagedrawer:De},methods:{checkLoginStatus(){const t=E.get("idCard");console.log("HeaderNavigationcookies"+t);const s=E.get("userType");t&&s&&(j.identityNum=t,console.log("刷新后的全局身份"+j.identityNum),this.currentUser.userType=s,this.currentUser.idCard=t)},handleImageClick(t,s){this.currentUser.userType===""?this.showLogin():this.$router.push(t)},refreshPage(){this.currentUser.idCard="",this.currentUser.userType="",this.currentUser.password="",console.log("HeaderNavigarion refreshPage done"),this.$forceUpdate()},updateUserCard(t){this.currentUser.idCard=t,console.log("用户id更新完毕")},updateUserType(t){this.currentUser.userType=t,this.$forceUpdate(),console.log("用户类型更新完毕")},showLogin(){this.$refs.Login.openModal(this.currentUser.idCard,this.currentUser.userType)},showSign(){this.$refs.Sign.openModal()},startBackgroundRotation(){this.intervalId=setInterval(this.changeBackground,5e3)},stopBackgroundRotation(){clearInterval(this.intervalId)},changeBackground(){this.currentIndex=(this.currentIndex+1)%this.images.length;let t=document.getElementsByClassName("header-nav");for(let s=0;s<t.length;s++)t[s].style.transition="background-image 2s ease-in-out",t[s].style.backgroundImage="url("+this.images[this.currentIndex]+")"},changeBackgroundOnClick(){this.stopBackgroundRotation(),this.changeBackground(),this.startBackgroundRotation()},showSurroundImage(t){const s=document.querySelector(`.clickable-images a:nth-child(${t}) .Surround-image`);s&&(s.style.opacity=1,s.style.animation="spin 10s linear infinite")},hideSurroundImage(){document.querySelectorAll(".Surround-image").forEach(s=>{s.style.opacity=0,s.style.transform="rotate(0deg)"})},openMessageBox(){this.$refs.messageBox.openDrawer()},getUnreadCount(t){this.unreadCount=t},getClickableImages(){switch(this.currentUser.userType){case"医生":return[{link:"/PatientA",icon:"/static/img/navigation/list1_2.png",alt:"Image 2"},{link:"/PresA",icon:"/static/img/navigation/list1_5.png",alt:"Image 5"},{link:"/Prescription",icon:"/static/img/navigation/list1_3.png",alt:"Image 3"}];case"普通用户":return[{link:"/AppointmentRegistration",icon:"/static/img/navigation/list1_1.png",alt:"Image1"},{link:"/PatientA",icon:"/static/img/navigation/list1_2.png",alt:"Image 2"},{link:"/PresA",icon:"/static/img/navigation/list1_5.png",alt:"Image 5"},{link:"/Bill",icon:"/static/img/navigation/list1_4.png",alt:"Image 4"}];case"管理员":return[{link:"/PharmaCist",icon:"/static/img/navigation/信息录入.png",alt:"Image 2"}];default:return[{link:"/AppointmentRegistration",icon:"/static/img/navigation/list1_1.png",alt:"Image1"},{link:"/PharmaCist",icon:"/static/img/navigation/信息录入.png",alt:"Image 2"},{link:"/PresA",icon:"/static/img/navigation/list1_5.png",alt:"Image 5"},{link:"/Bill",icon:"/static/img/navigation/list1_4.png",alt:"Image 4"}]}}}},so={class:"clickable-images"},oo=["src","alt"],io=e("img",{class:"Surround-image",src:to,alt:"Surround Image"},null,-1);function ao(t,s,l,d,n,i){const p=c("messagedrawer"),u=c("Login"),r=c("Sign"),_=c("RouterLink"),g=c("el-badge"),$=c("el-header"),k=c("RouterView");return m(),v("div",null,[o(p,{ref:"messageBox",class:"messageBox","onUpdate:result":i.getUnreadCount},null,8,["onUpdate:result"]),o(u,{"onUpdate:refresh":i.refreshPage,"onUpdate:currentUserCard":i.updateUserCard,"onUpdate:currentUserType":i.updateUserType,ref:"Login"},null,8,["onUpdate:refresh","onUpdate:currentUserCard","onUpdate:currentUserType"]),o(r,{ref:"Sign"},null,512),o($,{class:"header-nav",onClick:i.changeBackgroundOnClick},{default:a(()=>[e("nav",null,[o(_,{to:"/Main"},{default:a(()=>[f("首页")]),_:1}),e("a",{href:"#unknown",onClick:s[0]||(s[0]=C=>i.showLogin())},"登录"),e("a",{onClick:s[1]||(s[1]=(...C)=>i.openMessageBox&&i.openMessageBox(...C))},"消息"),n.unreadCount!==0?(m(),A(g,{key:0,value:n.unreadCount,class:"item"},null,8,["value"])):S("",!0),e("a",{href:"#unknown",onClick:s[2]||(s[2]=C=>i.showSign())},"系统介绍")]),e("div",so,[(m(!0),v(w,null,M(i.getClickableImages(),(C,b)=>(m(),A(_,{class:"image-link",to:"/Main",onMouseover:D=>i.showSurroundImage(b+1),onMouseleave:s[3]||(s[3]=D=>i.hideSurroundImage()),onClick:he(D=>i.handleImageClick(C.link,D),["prevent"])},{default:a(()=>[e("img",{class:"designed-icon",src:C.icon,alt:C.alt},null,8,oo),io]),_:2},1032,["onMouseover","onClick"]))),256))])]),_:1},8,["onClick"]),o(k)])}const lo=T(no,[["render",ao]]),ro="/static/jpg/3-BllZ-oxG.jpg",co="/static/png/subtitle-PaPH0dqX.png",uo="/static/png/logo-DSnrn9Sv.png",mo={},ho=e("div",{class:"flowing-background"},null,-1),po=e("img",{src:ro,class:"bg"},null,-1),_o=e("img",{src:co,class:"subtitle"},null,-1),fo=e("img",{src:uo,class:"logo",alt:"Logo"},null,-1),vo=e("div",{class:"zqssquare1"},null,-1),go=e("div",{class:"zqssquare2"},null,-1),yo=e("div",{class:"zqssquare3"},null,-1),bo=e("div",{class:"zqssquare4"},null,-1);function ko(t,s){const l=c("el-header"),d=c("el-container"),n=c("el-footer");return m(),v(w,null,[o(d,{style:{height:"88vh"}},{default:a(()=>[ho,o(l,{class:"Header"},{default:a(()=>[po,_o,fo,vo,go,yo,bo]),_:1})]),_:1}),o(n,{height:"30px",align:"center",class:"footer"},{default:a(()=>[f("SE_GROUP_6")]),_:1})],64)}const Do=T(mo,[["render",ko]]),wo={name:"DetailB",data(){return{isVisible:!1,form:{office:"",time:"",patient:"",doctor:"",medicine:[{name:"金莲花软件囊",time:3,cnt:1,use:"口服",price:""}]}}},methods:{openModal(t){this.isVisible=!0,document.body.style.overflow="hidden",this.form.office=t.office,this.form.time=t.time,this.form.doctor=t.doctor,this.form.patient=t.patient,this.form.medicine=t.medicine},closeModal(){this.isVisible=!1,document.body.style.overflow=""}}},le=t=>(q("data-v-cf8e562e"),t=t(),P(),t),xo={key:0,class:"modal-background"},$o={class:"modal-container"},Co={class:"content"},So=le(()=>e("h3",null,"处方明细",-1)),To=["index"],Mo={style:{"margin-left":"15px"}},qo={style:{"font-size":"smaller","margin-left":"15px"}},Po={class:"line"},Vo=le(()=>e("p",{style:{"margin-left":"15px"}},"疗程：",-1)),Ao={class:"line"},Bo=le(()=>e("p",{style:{"margin-left":"15px"}},"数量：",-1)),Io={class:"line"},Uo=le(()=>e("p",{style:{"margin-left":"15px"}},"使用方法：",-1)),Ro=le(()=>e("div",{class:"m"},null,-1)),Lo={class:"button"};function No(t,s,l,d,n,i){const p=c("el-divider"),u=c("el-button");return n.isVisible?(m(),v("div",xo,[e("div",$o,[e("div",Co,[So,(m(!0),v(w,null,M(n.form.medicine,r=>(m(),v("div",{index:r,class:"card"},[e("p",Mo,h(r.name),1),e("p",qo,"单价："+h(r.price),1),o(p,{class:"divider"}),e("div",Po,[Vo,e("p",null,h(r.time),1)]),e("div",Ao,[Bo,e("p",null,h(r.cnt),1)]),e("div",Io,[Uo,e("p",null,h(r.use),1)]),Ro],8,To))),256))]),e("div",Lo,[o(u,{onClick:i.closeModal},{default:a(()=>[f("退出")]),_:1},8,["onClick"])])])])):S("",!0)}const Fo=T(wo,[["render",No],["__scopeId","data-v-cf8e562e"]]),jo={name:"PHistory",props:{filterInfo:{type:Array,required:!0}},data(){return{info:[{office:"心血管门诊",time:"2024-05-14 下午 14:10-14:20",patient:"buaa",doctor:"",advice:"心跳过快",medicine:[{name:"金莲花软件囊",time:3,cnt:1,use:"口服",fre:"Tid",price:"5.98"},{name:"复方鲜竹沥液",time:3,cnt:2,use:"口服",fre:"Tid",price:1.09},{name:"复方鲜竹沥液",time:3,cnt:2,use:"口服",fre:"Tid",price:1.09}]}]}},components:{DetailB:Fo},methods:{showPrescriptionDetails(t){this.$refs.detail.openModal(t)}}},_e=t=>(q("data-v-b217ce5a"),t=t(),P(),t),Ho={class:"container"},zo={class:"card-container"},Eo={class:"header"},Oo={class:"row"},Yo={class:"row1"},Go=_e(()=>e("p",{style:{"margin-right":"10px","font-weight":"600"}},"门诊号",-1)),Jo={style:{"font-size":"small"}},Ko={style:{"font-size":"small"}},Wo={style:{"font-size":"small"}},Zo={class:"content"},Qo={class:"line"},Xo=_e(()=>e("p",null,"诊断：",-1)),ei=_e(()=>e("div",{class:"button"},null,-1));function ti(t,s,l,d,n,i){const p=c("DetailB"),u=c("el-divider"),r=c("el-button"),_=c("el-card"),g=c("el-footer");return m(),v(w,null,[o(p,{ref:"detail"},null,512),e("div",Ho,[e("div",zo,[(m(!0),v(w,null,M(l.filterInfo,$=>(m(),A(_,{key:$,style:{width:"30%","min-height":"00px",margin:"1.6%"}},{default:a(()=>[e("div",Eo,[e("div",Oo,[e("div",Yo,[Go,e("p",null,h($.office),1)]),e("div",Jo,[e("p",null,h($.time),1)]),e("div",Ko,[e("p",null,"患者："+h($.patient),1)]),e("div",Wo,[e("p",null,"医生："+h($.doctor),1)])])]),o(u,{class:"divider"}),e("div",Zo,[e("div",Qo,[Xo,e("p",null,h($.advice),1),o(r,{type:"primary",plain:"",onClick:k=>i.showPrescriptionDetails($),class:"xiang"},{default:a(()=>[f("展开处方")]),_:2},1032,["onClick"])])]),ei]),_:2},1024))),128))]),o(g,{height:"30px",align:"center",class:"footer"},{default:a(()=>[f("SE_GROUP_6")]),_:1})])],64)}const ni=T(jo,[["render",ti],["__scopeId","data-v-b217ce5a"]]),si=t=>(q("data-v-0b11faf0"),t=t(),P(),t),oi={class:"all-container",width:"100%"},ii={class:"search-container"},ai=si(()=>e("div",{class:"wenzi"},[e("p",{class:"guahao"},"处方查询"),e("p",{class:"back"},"首页 > 处方查询")],-1)),li={class:"input-container"},ri={class:"chaxun"},ci={__name:"PresA",setup(t){pe("$identity_num");const s=()=>new Promise((i,p)=>{J.post("/api/treatments/list/",{identity_num:j.identityNum}).then(u=>{d.value=u.data.treatments,console.log("Treatments data fetched:",d.value),i()}).catch(u=>{console.error("Error fetching treatments data:",u),p(u)})}),l=F(""),d=F([]),n=se(()=>d.value.filter(i=>/^\d/.test(l.value)?i.time.split(" ")[0]===l.value:l.value?i.office===l.value:!0));return ae(()=>{if(j.identityNum=="0"){console.log("未登录");return}s().then(()=>{})}),(i,p)=>{const u=c("el-divider"),r=c("search"),_=c("el-icon"),g=c("el-input"),$=c("el-button"),k=c("scroll"),C=c("el-container");return m(),A(C,{style:{height:"100vh"}},{default:a(()=>[o(k,null,{default:a(()=>[e("div",oi,[e("div",ii,[ai,o(u,{class:"divider"})]),o(ke),e("div",li,[e("div",ri,[o(g,{modelValue:l.value,"onUpdate:modelValue":p[0]||(p[0]=b=>l.value=b),style:{width:"300px",height:"40px"},placeholder:"请输入就诊日期(例:2024-05-09) 或 科室",class:"shuru"},{prefix:a(()=>[o(_,{class:"el-input__icon"},{default:a(()=>[o(r)]),_:1})]),_:1},8,["modelValue"]),o($,{color:"#DBA979",dark:i.isDark,plain:"",class:"searchButton",style:{width:"80px",height:"40px"}},{default:a(()=>[f("查询")]),_:1},8,["dark"]),e("p",null,h(l.value),1)])]),o(ni,{filterInfo:n.value},null,8,["filterInfo"])])]),_:1})]),_:1})}}},di=T(ci,[["__scopeId","data-v-0b11faf0"]]),ui={name:"DetailC",data(){return{fileList:[],isVisible:!1,sign:"",inputName:"",radio:"",info:[{id:"",name:"",use:"",price:"",num:""}]}},methods:{setMedicineData(){return new Promise((t,s)=>{let l={id:this.info.id,name:this.info.name,type:this.radio,symptom:this.info.use,price:this.info.price,quantity:this.info.num,photo_name:this.fileList.length===0?"":this.fileList[0].name,action:this.sign=="add"?"addMedicine":"alterMedicine"};this.$axios.post("/api/medicine/setData/",l).then(function(d){console.log(d.data.msg),t()}).catch(function(d){console.log(d),s(d)})})},removePhoto(){return new Promise((t,s)=>{J.post("/api/medicine/removePhoto/",{id:this.info.id,photo_name:this.fileList[0].name,action:"removePhoto"}).then(l=>{console.log("删除成功:",l.data),t()}).catch(l=>{console.error("删除失败:",l),s(l)})})},handleBeforeUpload(t){if(this.fileList.length===0)return t.formData={id:this.info.id},!0;this.removePhoto().then(()=>(t.formData={id:this.info.id},!0))},handleSuccess(t){this.fileList.length===0?this.fileList.push({name:t.name,url:t.url}):(this.fileList=[],this.fileList.push({name:t.name,url:t.url})),console.log(this.fileList)},handleBeforeRemove(){this.removePhoto().then(()=>!0)},handleRemove(){this.fileList=[]},handlePreview(t){console.log(t)},openModal(t,s){this.isVisible=!0,document.body.style.overflow="hidden",this.info.name=t.name,t.type==="中药"?this.radio=1:t.type==="中成药"?this.radio=2:this.radio=3,this.info.id=t.id,this.info.use=t.use,this.info.price=t.price,this.info.num=t.num,this.sign=s,this.fileList=[],t.photo_name!==void 0&&t.photo_name!=""&&this.fileList.push({name:t.photo_name,url:"/api/medicine/photo/"+t.photo_name}),console.log(`传入的sign是：${this.sign}`)},closeModal(){this.fileList.length!==0&&this.sign=="add"?this.removePhoto().then(()=>{this.isVisible=!1,document.body.style.overflow="",this.$emit("updateData")}):(this.isVisible=!1,document.body.style.overflow="",this.$emit("updateData"))},setDataAndCloseModal(){this.setMedicineData().then(()=>{this.isVisible=!1,document.body.style.overflow="",this.$emit("updateData")})}}},Q=t=>(q("data-v-b9b29092"),t=t(),P(),t),mi={key:0,class:"modal-background"},hi={class:"modal-container"},pi={class:"content"},_i=Q(()=>e("h3",null,"添加药品",-1)),fi={class:"upload"},vi=Q(()=>e("p",{style:{"margin-bottom":"20px","font-size":"14px","font-weight":"500",color:"grey"}}," 点击导入本地药物图片 ",-1)),gi=Q(()=>e("div",{class:"el-upload__tip"},"jpg/png files with a size less than 500kb",-1)),yi={class:"line"},bi=Q(()=>e("p",{style:{"margin-left":"15px"}},"药品名：",-1)),ki={class:"line"},Di=Q(()=>e("p",{style:{"margin-left":"15px"}},"药品类型：",-1)),wi={class:"line"},xi=Q(()=>e("p",{style:{"margin-left":"15px"}},"价格：",-1)),$i={class:"line"},Ci=Q(()=>e("p",{style:{"margin-left":"15px"}},"库存：",-1)),Si={class:"line"},Ti=Q(()=>e("p",{style:{"margin-left":"15px"}},"适应症状：",-1)),Mi={class:"button"};function qi(t,s,l,d,n,i){const p=c("el-button"),u=c("el-upload"),r=c("el-divider"),_=c("el-input"),g=c("el-radio"),$=c("el-radio-group");return n.isVisible?(m(),v("div",mi,[e("div",hi,[e("div",pi,[_i,e("div",fi,[vi,o(u,{"file-list":n.fileList,"onUpdate:fileList":s[0]||(s[0]=k=>n.fileList=k),class:"upload-demo",action:"/api/medicine/uploadPhoto/","before-upload":i.handleBeforeUpload,"on-success":i.handleSuccess,"on-preview":i.handlePreview,"before-remove":i.handleBeforeRemove,"on-remove":i.handleRemove,"list-type":"picture"},{tip:a(()=>[gi]),default:a(()=>[o(p,{type:"primary"},{default:a(()=>[f("Click to upload")]),_:1})]),_:1},8,["file-list","before-upload","on-success","on-preview","before-remove","on-remove"])]),o(r),e("div",yi,[bi,o(_,{modelValue:n.info.name,"onUpdate:modelValue":s[1]||(s[1]=k=>n.info.name=k),style:{width:"240px"},placeholder:"请输入药品名称",clearable:""},null,8,["modelValue"])]),e("div",ki,[Di,o($,{modelValue:n.radio,"onUpdate:modelValue":s[2]||(s[2]=k=>n.radio=k)},{default:a(()=>[o(g,{value:1},{default:a(()=>[f("中药")]),_:1}),o(g,{value:2},{default:a(()=>[f("中成药")]),_:1}),o(g,{value:3},{default:a(()=>[f("西药")]),_:1})]),_:1},8,["modelValue"])]),e("div",wi,[xi,o(_,{modelValue:n.info.price,"onUpdate:modelValue":s[3]||(s[3]=k=>n.info.price=k),style:{width:"240px"},placeholder:"请输入单价",clearable:""},null,8,["modelValue"])]),e("div",$i,[Ci,o(_,{modelValue:n.info.num,"onUpdate:modelValue":s[4]||(s[4]=k=>n.info.num=k),style:{width:"240px"},placeholder:"请输入库存",clearable:""},null,8,["modelValue"])]),e("div",Si,[Ti,o(_,{modelValue:n.info.use,"onUpdate:modelValue":s[5]||(s[5]=k=>n.info.use=k),style:{width:"240px"},placeholder:"用逗号分隔(例如：感冒，头痛)",type:"textarea",clearable:""},null,8,["modelValue"])])]),e("div",Mi,[o(p,{onClick:i.closeModal,plain:""},{default:a(()=>[f("取消")]),_:1},8,["onClick"]),o(p,{onClick:i.setDataAndCloseModal,type:"primary"},{default:a(()=>[f("确定")]),_:1},8,["onClick"])])])])):S("",!0)}const Pi=T(ui,[["render",qi],["__scopeId","data-v-b9b29092"]]),fe=t=>(q("data-v-aff51454"),t=t(),P(),t),Vi={class:"container"},Ai={class:"m"},Bi=fe(()=>e("p",{style:{"margin-left":"50px","font-weight":"bold","margin-right":"10px"}},"首页",-1)),Ii=fe(()=>e("p",{style:{"font-weight":"bold","margin-left":"10px"}},"药品管理",-1)),Ui={class:"card-container"},Ri={class:"warn"},Li={key:0},Ni={key:1,class:"warn"},Fi=fe(()=>e("p",{style:{color:"red"}},"库存数量不足",-1)),ji={__name:"MedicineA",setup(t){const s=F(null),l=F(""),d=(b,D)=>{s.value.openModal(b,D)},n=()=>{g().then(()=>{_(),C(p.value.currentPage)})},i=(b,D)=>{$(D).then(()=>{})},p=F({total:0,currentPage:1,pageSize:9}),u=F([{name:"感冒冲剂",type:"中药",use:"感冒",price:"5.00",num:"10"}]),r=se(()=>l.value?u.value.filter(b=>b.name.includes(l.value)):u.value),_=()=>{p.value.total=r.value.length};ge(l,()=>{_()});const g=()=>new Promise((b,D)=>{J.get("/api/medicine/list/").then(y=>{u.value=y.data.medicine,p.value.total=u.value.length,console.log("Medicine data fetched:",u.value),b()}).catch(y=>{console.error("Error fetching medicine data:",y),D(y)})}),$=b=>new Promise((D,y)=>{J.post("/api/medicine/delete/",{id:b.id,action:"deleteMedicine"}).then(x=>{u.value=x.data.medicine,p.value.total=u.value.length,console.log("Medicine data deleted"),D()}).catch(x=>{console.error("Error deleting medicine data:",x),y(x)})}),k=se(()=>{const b=(p.value.currentPage-1)*p.value.pageSize,D=b+p.value.pageSize;return r.value.slice(b,D)}),C=b=>{p.value.currentPage=b};return ae(()=>{g().then(()=>{_(),C(1)})}),(b,D)=>{const y=c("DArrowRight"),x=c("el-icon"),U=c("search"),V=c("el-input"),G=c("el-button"),L=c("el-table-column"),ce=c("WarningFilled"),de=c("el-table"),ue=c("el-pagination"),me=c("el-card"),W=c("el-footer");return m(),v(w,null,[o(Pi,{ref_key:"detail",ref:s,onUpdateData:n},null,512),e("div",Vi,[e("div",Ai,[Bi,o(x,null,{default:a(()=>[o(y)]),_:1}),Ii]),e("div",Ui,[o(me,{style:{height:"660px",width:"95%"}},{default:a(()=>[o(V,{modelValue:l.value,"onUpdate:modelValue":D[0]||(D[0]=z=>l.value=z),style:{width:"300px",height:"40px"},placeholder:"请输入药物名称",class:"shuru"},{prefix:a(()=>[o(x,{class:"el-input__icon"},{default:a(()=>[o(U)]),_:1})]),_:1},8,["modelValue"]),o(G,{type:"primary",plain:"",style:{height:"40px","margin-left":"10px"},onClick:D[1]||(D[1]=z=>d("","add"))},{default:a(()=>[f("+新建药物类型")]),_:1}),o(de,{data:k.value,style:{width:"95%","max-height":"480px"}},{default:a(()=>[o(L,{prop:"name",label:"药物名称",width:"150"}),o(L,{prop:"type",label:"药物种类",width:"150"}),o(L,{prop:"price",label:"药物价格",width:"150"}),o(L,{prop:"num",label:"药物库存",width:"150"},{default:a(z=>[e("div",Ri,[z.row.num!=="0"?(m(),v("span",Li,h(z.row.num),1)):(m(),v("span",Ni,[e("p",null,h(z.row.num),1),o(x,{style:{color:"red"}},{default:a(()=>[o(ce)]),_:1}),Fi]))])]),_:1}),o(L,{prop:"use",label:"适应症状"}),o(L,{label:"操作"},{default:a(z=>[o(G,{size:"small",onClick:$e=>d(z.row,"alter")},{default:a(()=>[f(" 修改 ")]),_:2},1032,["onClick"]),o(G,{size:"small",type:"danger",onClick:$e=>i(z.$index,z.row),plain:""},{default:a(()=>[f(" 删除 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),o(ue,{class:"page","current-page":p.value.currentPage,"page-size":p.value.pageSize,total:p.value.total,"pager-count":3,background:"",layout:"prev, pager, next, total","onUpdate:currentPage":C},null,8,["current-page","page-size","total"])]),_:1})]),o(W,{height:"30px",align:"center",class:"footer"},{default:a(()=>[f("SE_GROUP_6")]),_:1})])],64)}}},we=T(ji,[["__scopeId","data-v-aff51454"]]),Hi={name:"DetailC",data(){return{fileList:[],isVisible:!1,sign:"",inputName:"",radio:"",info:[{name:"",id:"",office:"",title:"",cost:"",research:""}]}},methods:{setDoctorData(){return new Promise((t,s)=>{let l={name:this.info.name,id:this.info.id,department:this.info.office,title:this.info.title,cost:this.info.cost,research:this.info.research,avatar_name:this.fileList.length===0?"":this.fileList[0].name,action:this.sign=="add"?"addDoctor":"alterDoctor"};this.$axios.post("/api/doctors/setData/",l).then(function(d){console.log(d.data.msg),t()}).catch(function(d){console.log(d),s(d)})})},removePhoto(){return new Promise((t,s)=>{J.post("/api/doctors/removeAvatar/",{id:this.info.id,avatar_name:this.fileList[0].name,action:"removeAvatar"}).then(l=>{console.log("删除成功:",l.data),t()}).catch(l=>{console.error("删除失败:",l),s(l)})})},handleBeforeUpload(t){if(this.fileList.length===0)return t.formData={id:this.info.id},!0;this.removePhoto().then(()=>(t.formData={id:this.info.id},!0))},handleSuccess(t){this.fileList.length===0?this.fileList.push({name:t.name,url:t.url}):(this.fileList=[],this.fileList.push({name:t.name,url:t.url})),console.log(this.fileList)},handleBeforeRemove(){this.removePhoto().then(()=>!0)},handleRemove(){this.fileList=[]},handlePreview(t){console.log(t)},openModal(t,s){this.isVisible=!0,document.body.style.overflow="hidden",this.info.name=t.name,this.info.id=t.id,this.info.office=t.office,this.info.title=t.title,this.info.cost=t.cost,this.info.research=t.research,this.sign=s,this.fileList=[],t.avatar_name!==void 0&&t.avatar_name!=""&&this.fileList.push({name:t.avatar_name,url:"/api/doctor/avatar/"+t.avatar_name}),console.log(`传入的sign是：${this.sign}`)},closeModal(){this.fileList.length!==0&&this.sign=="add"?this.removePhoto().then(()=>{this.isVisible=!1,document.body.style.overflow="",this.$emit("updateData")}):(this.isVisible=!1,document.body.style.overflow="",this.$emit("updateData"))},setDataAndCloseModal(){this.setDoctorData().then(()=>{this.isVisible=!1,document.body.style.overflow="",this.$emit("updateData")})}}},K=t=>(q("data-v-82ea385a"),t=t(),P(),t),zi={key:0,class:"modal-background"},Ei={class:"modal-container"},Oi={class:"content"},Yi=K(()=>e("h3",null,"录入医生",-1)),Gi={class:"upload"},Ji=K(()=>e("p",{style:{"margin-bottom":"20px","font-size":"14px","font-weight":"500",color:"grey"}}," 点击导入本地医生照片 ",-1)),Ki=K(()=>e("div",{class:"el-upload__tip"},"jpg/png files with a size less than 500kb",-1)),Wi={class:"line"},Zi=K(()=>e("p",{style:{"margin-left":"15px"}},"姓名：",-1)),Qi={class:"line"},Xi=K(()=>e("p",{style:{"margin-left":"15px"}},"医生编号：",-1)),ea={class:"line"},ta=K(()=>e("p",{style:{"margin-left":"15px"}},"科室：",-1)),na={class:"line"},sa=K(()=>e("p",{style:{"margin-left":"15px"}},"职称：",-1)),oa={class:"line"},ia=K(()=>e("p",{style:{"margin-left":"15px"}},"出诊费：",-1)),aa={class:"line"},la=K(()=>e("p",{style:{"margin-left":"15px"}},"主要研究方向：",-1)),ra={class:"button"};function ca(t,s,l,d,n,i){const p=c("el-button"),u=c("el-upload"),r=c("el-divider"),_=c("el-input");return n.isVisible?(m(),v("div",zi,[e("div",Ei,[e("div",Oi,[Yi,e("div",Gi,[Ji,o(u,{"file-list":n.fileList,"onUpdate:fileList":s[0]||(s[0]=g=>n.fileList=g),class:"upload-demo",action:"/api/doctors/uploadAvatar/","before-upload":i.handleBeforeUpload,"on-success":i.handleSuccess,"on-preview":i.handlePreview,"before-remove":i.handleBeforeRemove,"on-remove":i.handleRemove,"list-type":"picture"},{tip:a(()=>[Ki]),default:a(()=>[o(p,{type:"primary"},{default:a(()=>[f("Click to upload")]),_:1})]),_:1},8,["file-list","before-upload","on-success","on-preview","before-remove","on-remove"])]),o(r),e("div",Wi,[Zi,o(_,{modelValue:n.info.name,"onUpdate:modelValue":s[1]||(s[1]=g=>n.info.name=g),style:{width:"240px"},placeholder:"请输入医生姓名",clearable:""},null,8,["modelValue"])]),e("div",Qi,[Xi,o(_,{modelValue:n.info.id,"onUpdate:modelValue":s[2]||(s[2]=g=>n.info.id=g),style:{width:"240px"},placeholder:"请输入医生编号",clearable:""},null,8,["modelValue"])]),e("div",ea,[ta,o(_,{modelValue:n.info.office,"onUpdate:modelValue":s[3]||(s[3]=g=>n.info.office=g),style:{width:"240px"},placeholder:"请输入工作科室",clearable:""},null,8,["modelValue"])]),e("div",na,[sa,o(_,{modelValue:n.info.title,"onUpdate:modelValue":s[4]||(s[4]=g=>n.info.title=g),style:{width:"240px"},placeholder:"请输入职称",clearable:""},null,8,["modelValue"])]),e("div",oa,[ia,o(_,{modelValue:n.info.cost,"onUpdate:modelValue":s[5]||(s[5]=g=>n.info.cost=g),style:{width:"240px"},placeholder:"请输入单次出诊费",clearable:""},null,8,["modelValue"])]),e("div",aa,[la,o(_,{modelValue:n.info.research,"onUpdate:modelValue":s[6]||(s[6]=g=>n.info.research=g),style:{width:"240px"},placeholder:"用逗号分隔(例如：病理学，生物医学)",type:"textarea",clearable:""},null,8,["modelValue"])])]),e("div",ra,[o(p,{onClick:i.closeModal,plain:""},{default:a(()=>[f("取消")]),_:1},8,["onClick"]),o(p,{onClick:i.setDataAndCloseModal,type:"primary"},{default:a(()=>[f("确定")]),_:1},8,["onClick"])])])])):S("",!0)}const da=T(Hi,[["render",ca],["__scopeId","data-v-82ea385a"]]),xe=t=>(q("data-v-5d25ecbf"),t=t(),P(),t),ua={class:"container"},ma={class:"m"},ha=xe(()=>e("p",{style:{"margin-left":"50px","font-weight":"bold","margin-right":"10px"}},"首页",-1)),pa=xe(()=>e("p",{style:{"font-weight":"bold","margin-left":"10px"}},"医生管理",-1)),_a={class:"card-container"},fa={__name:"DoctorA",setup(t){const s=F(null),l=F(""),d=(b,D)=>{s.value.openModal(b,D)},n=()=>{g().then(()=>{_(),C(p.value.currentPage)})},i=(b,D)=>{$(D).then(()=>{})},p=F({total:0,currentPage:1,pageSize:9}),u=F([]),r=se(()=>l.value?u.value.filter(b=>b.name.includes(l.value)):u.value),_=()=>{p.value.total=r.value.length};ge(l,()=>{_()});const g=()=>new Promise((b,D)=>{J.get("/api/doctors/list/").then(y=>{u.value=y.data.doctors,p.value.total=u.value.length,console.log("Doctor data fetched:",u.value),b()}).catch(y=>{console.error("Error fetching doctor data:",y),D(y)})}),$=b=>new Promise((D,y)=>{J.post("/api/doctors/delete/",{id:b.id,action:"deleteDoctor"}).then(x=>{u.value=x.data.doctors,p.value.total=u.value.length,console.log("Doctor data deleted"),D()}).catch(x=>{console.error("Error deleting doctor data:",x),y(x)})}),k=se(()=>{const b=(p.value.currentPage-1)*p.value.pageSize,D=b+p.value.pageSize;return r.value.slice(b,D)}),C=b=>{p.value.currentPage=b};return ae(()=>{g().then(()=>{_(),C(1)})}),(b,D)=>{const y=c("DArrowRight"),x=c("el-icon"),U=c("search"),V=c("el-input"),G=c("el-button"),L=c("el-table-column"),ce=c("el-table"),de=c("el-pagination"),ue=c("el-card"),me=c("el-footer");return m(),v(w,null,[o(da,{ref_key:"detail",ref:s,onUpdateData:n},null,512),e("div",ua,[e("div",ma,[ha,o(x,null,{default:a(()=>[o(y)]),_:1}),pa]),e("div",_a,[o(ue,{style:{height:"660px",width:"95%"}},{default:a(()=>[o(V,{modelValue:l.value,"onUpdate:modelValue":D[0]||(D[0]=W=>l.value=W),style:{width:"300px",height:"40px"},placeholder:"请输入医生姓名",class:"shuru"},{prefix:a(()=>[o(x,{class:"el-input__icon"},{default:a(()=>[o(U)]),_:1})]),_:1},8,["modelValue"]),o(G,{type:"primary",plain:"",style:{height:"40px","margin-left":"10px"},onClick:D[1]||(D[1]=W=>d("","add"))},{default:a(()=>[f("+录入医生")]),_:1}),o(ce,{data:k.value,style:{width:"95%","max-height":"480px"}},{default:a(()=>[o(L,{prop:"name",label:"姓名",width:"150"}),o(L,{prop:"id",label:"医生编号",width:"150"}),o(L,{prop:"office",label:"科室",width:"150"}),o(L,{prop:"title",label:"职称",width:"150"}),o(L,{prop:"cost",label:"出诊费",width:"150"}),o(L,{prop:"research",label:"主要研究方向"}),o(L,{label:"操作"},{default:a(W=>[o(G,{size:"small",onClick:z=>d(W.row,"alter")},{default:a(()=>[f(" 修改 ")]),_:2},1032,["onClick"]),o(G,{size:"small",type:"danger",onClick:z=>i(W.$index,W.row),plain:""},{default:a(()=>[f(" 删除 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),o(de,{class:"page","current-page":p.value.currentPage,"page-size":p.value.pageSize,total:p.value.total,"pager-count":3,background:"",layout:"prev, pager, next, total","onUpdate:currentPage":C},null,8,["current-page","page-size","total"])]),_:1})]),o(me,{height:"30px",align:"center",class:"footer"},{default:a(()=>[f("SE_GROUP_6")]),_:1})])],64)}}},va=T(fa,[["__scopeId","data-v-5d25ecbf"]]),ga={class:"container"},ya=Ce({__name:"PharmaCist",setup(t){const s=F("first"),l=(d,n)=>{console.log(d,n)};return(d,n)=>{const i=c("el-tab-pane"),p=c("el-tabs");return m(),v("div",ga,[o(p,{modelValue:s.value,"onUpdate:modelValue":n[0]||(n[0]=u=>s.value=u),class:"demo-tabs",onTabClick:l},{default:a(()=>[o(i,{label:"药物录入",name:"first"},{default:a(()=>[o(we)]),_:1}),o(i,{label:"医生录入",name:"second"},{default:a(()=>[o(va)]),_:1})]),_:1},8,["modelValue"])])}}}),ba={data(){return{squares:[{hovered:!1},{hovered:!0},{hovered:!1},{hovered:!1}],info:["出诊查询","网上预约看诊","预约流程","医生查询"],checked:!1,currentSquareIndex:0,squares2:[{hovered:!1,active:!0},{hovered:!1,active:!1},{hovered:!1,active:!1},{hovered:!1,active:!1},{hovered:!1,active:!1},{hovered:!1,active:!1},{hovered:!1,active:!1},{hovered:!1,active:!1}],info2:["就诊须知","挂号类别","填写预约信息","选择科室","选择医生","选择时间地点","核对预约信息","预约成功"],link:["/TableSearch","/AppointmentRegistration","/Picture","/DoctorSearch"]}},methods:{toggleSquare(t){this.currentSquareIndex=t,this.currentSquareIndex=1,this.checked=!1},nextSquare(){}}},ka=t=>(q("data-v-8ad589a2"),t=t(),P(),t),Da={class:"containerlyh",style:{display:"flex","justify-content":"center","align-items":"center",height:"180px"}},wa={class:"container2",style:{display:"flex","justify-content":"center","align-items":"center"}},xa=["onMouseover","onMouseout","onClick"],$a=ie('<div class="notice-box" data-v-8ad589a2><h2 data-v-8ad589a2>温 馨 提 示</h2><p data-v-8ad589a2>尊敬的就诊者：</p><p data-v-8ad589a2>您好！我院门诊已实行就诊新流程，敬请注意如下事项：</p><p data-v-8ad589a2>一、进入院区请正确佩戴口罩。体温≥37.3℃者请到发热门诊就诊。急危重症患者请到急诊就诊。</p><p data-v-8ad589a2>二、按照医院整体改造施工计划，东川门诊4楼大部分区域开始围蔽改造。部分康复科及心中医门诊继续安排在4楼新区出诊，请留意指引标识或咨询现场导诊人员。</p><p data-v-8ad589a2>三、原板房门诊已关停。东川儿科、肝胆内科已分别搬到东川门诊3楼及5楼，东川心理精神科已搬到伟伦楼4楼继续开诊，请留意现场指引。</p><p data-v-8ad589a2>四、心外科、心儿科门诊已搬迁到东川门诊5楼开诊，请留意现场指引。</p><p data-v-8ad589a2>五、普通门诊预约后无需先缴诊查费，就诊后交费时一并收取诊查费。但若有欠费（注：看病或咨询后没有开药或开具检验/检查者，也需缴诊查费），在您补交欠费前，将无法预约下次门诊。</p><p data-v-8ad589a2>六、请于预约时段前10分钟到自助机或分诊台报到（初诊未实名、越秀区公医及省市直医保门特患者须到分诊台人工报到），请勿过早聚集在医院内候诊。如过时未报到，预约号会自动失效（详见预约手机短信或现场预约凭条内容指引）。</p><p data-v-8ad589a2>七、报到后请留意诊间门前叫号屏，可扫码查阅实时排序信息并候诊。</p><p data-v-8ad589a2>八、失约管理：累计失约次数超过3次，系统会自动暂停您线上预约挂号功能（但不影响现场挂号），需凭本人身份证明到挂号窗口办理恢复手续。</p><p data-v-8ad589a2>九、官网、官微、5G互联网医院、自助机、现场、电话、诊间预约挂号期限统一为14天。</p></div>',1),Ca={class:"button-container"},Sa={class:"checkbox-container",style:{"text-align":"center","margin-top":"20px"}},Ta=ka(()=>e("label",{for:"checkbox"},"我已阅读并同意《个人隐私收集声明》",-1));function Ma(t,s,l,d,n,i){const p=c("router-link");return m(),v(w,null,[e("div",Da,[(m(!0),v(w,null,M(n.squares,(u,r)=>(m(),A(p,{key:r,to:n.link[r],class:B(["square",{"square-hovered":u.hovered||r===1}]),onMouseover:_=>u.hovered=!0,onMouseout:_=>u.hovered=!1},{default:a(()=>[f(h(n.info[r]),1)]),_:2},1032,["to","class","onMouseover","onMouseout"]))),128))]),e("div",null,[e("div",wa,[(m(!0),v(w,null,M(n.squares2,(u,r)=>(m(),v("div",{key:r,class:B(["square2",{"square-active2":u.active}]),onMouseover:_=>u.hovered=!0,onMouseout:_=>u.hovered=!1,onClick:_=>i.toggleSquare(r)},h(n.info2[r]),43,xa))),128))])]),$a,e("div",null,[e("div",Ca,[n.checked?(m(),A(p,{key:0,onClick:i.nextSquare,class:"router-button",to:"/AppointmentRegistration2"},{default:a(()=>[f(" 下一步 ")]),_:1},8,["onClick"])):S("",!0)]),e("div",Sa,[R(e("input",{type:"checkbox",id:"checkbox","onUpdate:modelValue":s[0]||(s[0]=u=>n.checked=u)},null,512),[[ye,n.checked]]),Ta])])],64)}const qa=T(ba,[["render",Ma],["__scopeId","data-v-8ad589a2"]]),Pa={props:{squares2:{type:Array,required:!0}},data(){return{squares:[{hovered:!1},{hovered:!0},{hovered:!1},{hovered:!1}],info:["出诊查询","网上预约看诊","预约流程","医生查询"],checked:!1,currentSquareIndex:0,info2:["就诊须知","挂号类别","填写预约信息","选择科室","选择医生","选择时间地点","核对预约信息","预约成功"],link:["/TableSearch","/AppointmentRegistration","/Picture","/DoctorSearch"]}},methods:{toggleSquare(t){this.currentSquareIndex=t,this.currentSquareIndex=1,this.checked=!1},nextSquare(){}}},Va={class:"containerlyh"},Aa={class:"container2",style:{display:"flex","justify-content":"center","align-items":"center"}},Ba=["onMouseover","onMouseout","onClick"];function Ia(t,s,l,d,n,i){const p=c("router-link");return m(),v(w,null,[e("div",Va,[(m(!0),v(w,null,M(n.squares,(u,r)=>(m(),A(p,{key:r,to:n.link[r],class:B(["square",{"square-hovered":u.hovered||r===1}]),onMouseover:_=>u.hovered=!0,onMouseout:_=>u.hovered=!1},{default:a(()=>[f(h(n.info[r]),1)]),_:2},1032,["to","class","onMouseover","onMouseout"]))),128))]),e("div",null,[e("div",Aa,[(m(!0),v(w,null,M(l.squares2,(u,r)=>(m(),v("div",{key:r,class:B(["square2",{"square-active2":u.active,"square-done":u.done}]),onMouseover:_=>u.hovered=!0,onMouseout:_=>u.hovered=!1,onClick:_=>i.toggleSquare(r)},h(n.info2[r]),43,Ba))),128))])])],64)}const ee=T(Pa,[["render",Ia],["__scopeId","data-v-d006d7e7"]]),Ua={components:{Header:ee},data(){return{squares:[{hovered:!1},{hovered:!0},{hovered:!1},{hovered:!1}],info:["出诊查询","网上预约看诊","预约流程","取消预约"],checked:!1,selected:-1,currentSquareIndex:0,squares2:[{hovered:!1,active:!1,done:!0},{hovered:!1,active:!0,done:!1},{hovered:!1,active:!1,done:!1},{hovered:!1,active:!1,done:!1},{hovered:!1,active:!1,done:!1},{hovered:!1,active:!1,done:!1},{hovered:!1,active:!1,done:!1},{hovered:!1,active:!1,done:!1}],info2:["就诊须知","挂号类别","填写预约信息","选择科室","选择医生","选择时间地点","核对预约信息","预约成功"],squares3:[{hovered:!1,active:!1},{hovered:!1,active:!1}],treat:["首诊","复诊"]}},methods:{toggleSquare(t){this.currentSquareIndex=t,this.currentSquareIndex=1,this.checked=!1},nextSquare(){},clickbutton(t){this.checked=!0,this.selected=t}}},Ra={class:"notice-box",style:{height:"400px"}},La={class:"container2"},Na={class:"containerlyh",style:{display:"flex","justify-content":"center","align-items":"center",height:"180px"}},Fa=["onMouseover","onMouseout","onClick"];function ja(t,s,l,d,n,i){const p=c("Header"),u=c("router-link");return m(),v(w,null,[o(p,{squares2:n.squares2},null,8,["squares2"]),e("div",Ra,[e("div",La,[o(u,{to:"/AppointmentRegistration",class:"button2 button-prev"},{default:a(()=>[f("上一步")]),_:1}),n.checked?(m(),A(u,{key:0,to:{path:"/AppointmentRegistration3",query:{select:n.selected}},class:"button2 button-next"},{default:a(()=>[f("下一步")]),_:1},8,["to"])):S("",!0)]),e("div",Na,[(m(!0),v(w,null,M(n.squares3,(r,_)=>(m(),v("div",{key:_,class:B(["square3",{"square3-hovered":r.hovered||_==n.selected}]),onMouseover:g=>r.hovered=!0,onMouseout:g=>r.hovered=!1,onClick:g=>i.clickbutton(_)},h(n.treat[_]),43,Fa))),128))])])],64)}const Ha=T(Ua,[["render",ja],["__scopeId","data-v-ca7f5e00"]]),za={components:{Header:ee},data(){return{squares:[{hovered:!1},{hovered:!0},{hovered:!1},{hovered:!1}],info:["出诊查询","网上预约看诊","预约流程","取消预约"],checked:!1,currentSquareIndex:0,squares2:[{hovered:!1,active:!1,done:!0},{hovered:!1,active:!1,done:!0},{hovered:!1,active:!0,done:!1},{hovered:!1,active:!1,done:!1},{hovered:!1,active:!1,done:!1},{hovered:!1,active:!1,done:!1},{hovered:!1,active:!1,done:!1},{hovered:!1,active:!1,done:!1}],info2:["就诊须知","挂号类别","填写预约信息","选择科室","选择医生","选择时间地点","核对预约信息","预约成功"],first:0,second:0,select:0,formData:{queryFirst:0,name:"",paymentType:"",gender:"",birthday:"",idType:"",phone:"",number:"",addr:""}}},methods:{setPatientData(){return new Promise((t,s)=>{let l={name:this.formData.name,paymentType:this.formData.paymentType,gender:this.formData.gender,birthday:this.formData.birthday,idType:this.formData.idType,phone:this.formData.phone,number:this.formData.number,addr:this.formData.addr};this.$axios.post("/api/patient/add/",l).then(function(d){console.log(d.data.msg),t()}).catch(function(d){console.log(d),s(d)})})},toggleSquare(t){this.currentSquareIndex=t,this.currentSquareIndex=1,this.checked=!1},nextSquare(){},submitForm(){console.log(this.formData)},submit(){this.setPatientData()},submitForm2(){console.log(this.form2)},isformed(){return this.first==1?this.checked?Object.keys(this.formData).filter(t=>t!=="queryFirst").every(t=>this.formData[t]!==""):!1:!(!this.checked||this.formData.name==""||this.formData.gender==""||this.formData.idType==""||this.formData.number==""||this.formData.phone=="")}},created(){this.select=this.$route.query.select,this.$route.query.select==0?(this.first=1,this.formData.queryFirst=1):this.second=1}},te=t=>(q("data-v-5737787a"),t=t(),P(),t),Ea={class:"notice-box"},Oa={class:"container2",style:{"margin-bottom":"50px"}},Ya={key:0,class:"container3"},Ga={class:"form-group"},Ja=te(()=>e("option",{value:"医保"},"医保",-1)),Ka=te(()=>e("option",{value:"非医保"},"非医保",-1)),Wa=[Ja,Ka],Za={class:"form-group"},Qa=te(()=>e("option",{value:"男"},"男",-1)),Xa=te(()=>e("option",{value:"女"},"女",-1)),el=[Qa,Xa],tl={class:"form-group"},nl=ie('<option value="身份证" data-v-5737787a>身份证</option><option value="医保卡" data-v-5737787a>医保卡</option><option value="诊疗卡" data-v-5737787a>诊疗卡</option><option value="护照" data-v-5737787a>护照</option><option value="军官证" data-v-5737787a>军官证</option><option value="港澳通行证" data-v-5737787a>港澳通行证</option>',6),sl=[nl],ol={class:"form-group"},il={class:"form-group"},al={key:1,class:"container3"},ll={class:"form-group"},rl=te(()=>e("option",{value:"男"},"男",-1)),cl=te(()=>e("option",{value:"女"},"女",-1)),dl=[rl,cl],ul={class:"form-group"},ml=ie('<option value="身份证" data-v-5737787a>身份证</option><option value="医保卡" data-v-5737787a>医保卡</option><option value="诊疗卡" data-v-5737787a>诊疗卡</option><option value="护照" data-v-5737787a>护照</option><option value="军官证" data-v-5737787a>军官证</option><option value="港澳通行证" data-v-5737787a>港澳通行证</option>',6),hl=[ml],pl={class:"form-group"},_l={class:"checkbox-container",style:{"text-align":"center","margin-top":"20px"}},fl=te(()=>e("label",{for:"checkbox"},"我已阅读并同意《个人隐私收集声明》",-1));function vl(t,s,l,d,n,i){const p=c("Header"),u=c("router-link");return m(),v(w,null,[o(p,{squares2:n.squares2},null,8,["squares2"]),e("div",Ea,[e("div",Oa,[o(u,{to:"/AppointmentRegistration2",class:"button2 button-prev"},{default:a(()=>[f("上一步")]),_:1}),i.isformed()?(m(),A(u,{key:0,to:{path:"/AppointmentRegistration4",query:{name:n.formData.name,number:n.formData.number,paymentType:n.formData.paymentType,selected:n.select}},class:"button2 button-next",onClick:i.submit},{default:a(()=>[f(" 下一步 ")]),_:1},8,["to","onClick"])):S("",!0)]),n.first?(m(),v("div",Ya,[e("form",{onSubmit:s[8]||(s[8]=he((...r)=>i.submitForm&&i.submitForm(...r),["prevent"]))},[e("div",Ga,[R(e("input",{type:"text",id:"name",name:"name",class:"form-control",placeholder:"请输入姓名","onUpdate:modelValue":s[0]||(s[0]=r=>n.formData.name=r)},null,512),[[Z,n.formData.name]]),R(e("select",{id:"paymentType",name:"paymentType",class:"form-control",placeholder:"支付类型","onUpdate:modelValue":s[1]||(s[1]=r=>n.formData.paymentType=r)},Wa,512),[[oe,n.formData.paymentType]])]),e("div",Za,[R(e("select",{id:"gender",name:"gender",class:"form-control",placeholder:"性别","onUpdate:modelValue":s[2]||(s[2]=r=>n.formData.gender=r)},el,512),[[oe,n.formData.gender]]),R(e("input",{type:"date",id:"birthday",name:"birthday",class:"form-control",placeholder:"出生日期","onUpdate:modelValue":s[3]||(s[3]=r=>n.formData.birthday=r)},null,512),[[Z,n.formData.birthday]])]),e("div",tl,[R(e("select",{id:"idType",name:"idType",class:"form-control",placeholder:"证件类型","onUpdate:modelValue":s[4]||(s[4]=r=>n.formData.idType=r)},sl,512),[[oe,n.formData.idType]]),R(e("input",{type:"tel",id:"phone",name:"phone",class:"form-control",placeholder:"联系电话","onUpdate:modelValue":s[5]||(s[5]=r=>n.formData.phone=r)},null,512),[[Z,n.formData.phone]])]),e("div",ol,[R(e("input",{type:"text",id:"number",name:"number",class:"form-control",placeholder:"请输入证件号","onUpdate:modelValue":s[6]||(s[6]=r=>n.formData.number=r)},null,512),[[Z,n.formData.number]])]),e("div",il,[R(e("input",{type:"text",id:"addr",name:"addr",class:"form-control",placeholder:"请输入住址","onUpdate:modelValue":s[7]||(s[7]=r=>n.formData.addr=r)},null,512),[[Z,n.formData.addr]])])],32)])):S("",!0),n.second?(m(),v("div",al,[e("form",{onSubmit2:s[14]||(s[14]=he((...r)=>i.submitForm2&&i.submitForm2(...r),["prevent"]))},[e("div",ll,[R(e("input",{type:"text",id:"name",name:"name",class:"form-control",placeholder:"请输入姓名","onUpdate:modelValue":s[9]||(s[9]=r=>n.formData.name=r)},null,512),[[Z,n.formData.name]]),R(e("select",{id:"gender",name:"gender",class:"form-control",placeholder:"性别","onUpdate:modelValue":s[10]||(s[10]=r=>n.formData.gender=r)},dl,512),[[oe,n.formData.gender]])]),e("div",ul,[R(e("select",{id:"idType",name:"idType",class:"form-control",placeholder:"证件类型","onUpdate:modelValue":s[11]||(s[11]=r=>n.formData.idType=r)},hl,512),[[oe,n.formData.idType]]),R(e("input",{type:"tel",id:"phone",name:"phone",class:"form-control",placeholder:"联系电话","onUpdate:modelValue":s[12]||(s[12]=r=>n.formData.phone=r)},null,512),[[Z,n.formData.phone]])]),e("div",pl,[R(e("input",{type:"text",id:"number",name:"number",class:"form-control",placeholder:"请输入证件号","onUpdate:modelValue":s[13]||(s[13]=r=>n.formData.number=r)},null,512),[[Z,n.formData.number]])])],32)])):S("",!0),e("div",null,[e("div",_l,[R(e("input",{type:"checkbox",id:"checkbox","onUpdate:modelValue":s[15]||(s[15]=r=>n.checked=r)},null,512),[[ye,n.checked]]),fl])])])],64)}const gl=T(za,[["render",vl],["__scopeId","data-v-5737787a"]]),yl={components:{Header:ee},data(){return{squares:[{hovered:!1},{hovered:!0},{hovered:!1},{hovered:!1}],info:["出诊查询","网上预约看诊","预约流程","取消预约"],checked:!1,currentSquareIndex:0,squares2:[{hovered:!1,active:!1,done:!0},{hovered:!1,active:!1,done:!0},{hovered:!1,active:!1,done:!0},{hovered:!1,active:!0,done:!1},{hovered:!1,active:!1,done:!1},{hovered:!1,active:!1,done:!1},{hovered:!1,active:!1,done:!1},{hovered:!1,active:!1,done:!1}],info2:["就诊须知","挂号类别","填写预约信息","选择科室","选择医生","选择时间地点","核对预约信息","预约成功"],departments:[{id:"internal",name:"内科"},{id:"surgical",name:"外科"},{id:"medical_tech",name:"医技科室"}],selectedDepartment:"internal",hoveredButton:"internal",selectedDepartmentName:"",selectedDepartmentRight:"",selectedSubDepartment:"",selectedSubDepartmentName:"",info:{name:"",paymentType:"",inumber:""},selected:0}},methods:{selectDepartment(t){this.selectedDepartment=t},selectSubDepartment(t){this.selectedDepartmentName=this.getSubDepartments(this.selectedDepartment)[t-1].name,this.selectedDepartmentRight=this.selectedDepartment,this.selectedSubDepartment=this.getSubDepartments(this.selectedDepartment)[t-1].id,this.checked=!0},getSubDepartmentsName(t){if(t==="internal")return[{subname:"内科系统",enbame:"Internal Medician System"}];if(t==="surgical")return[{subname:"外科系统",enbame:"Surgical System"}];if(t==="medical_tech")return[{subname:"医技科室",enbame:"Medical Technology Department"}]},getSubDepartments(t){if(t==="internal")return[{id:1,name:"心血管内科"},{id:2,name:"呼吸与危重症医学科"},{id:3,name:"内分泌科"},{id:4,name:"肾内科"},{id:5,name:"血液内科"},{id:6,name:"消化科"},{id:7,name:"风湿免疫科"},{id:8,name:"老年内科"},{id:9,name:"神经内科"},{id:10,name:"感染疾病科"},{id:11,name:"急诊科"},{id:12,name:"皮肤科"},{id:13,name:"中医科"},{id:14,name:"职业病科"},{id:15,name:"肿瘤放疗科"},{id:16,name:"肿瘤化疗与放射病科"},{id:17,name:"儿科"},{id:18,name:"体检中心"},{id:19,name:"全科医学科"}];if(t==="surgical")return[{id:1,name:"普通外科"},{id:2,name:"骨科"},{id:3,name:"泌尿外科"},{id:4,name:"胸外科"},{id:5,name:"心脏外科"},{id:6,name:"神经外科"},{id:7,name:"整形科"},{id:8,name:"介入血管外科"},{id:9,name:"危重医学科"},{id:10,name:"运动医学科"},{id:11,name:"康复医学科"},{id:12,name:"妇产科"},{id:13,name:"生殖医学科"},{id:14,name:"眼科"},{id:15,name:"耳鼻喉科"},{id:16,name:"口腔科"},{id:17,name:"麻醉科"},{id:18,name:"疼痛医学中心"}];if(t==="medical_tech")return[{id:1,name:"放射科"},{id:2,name:"超声医学科"},{id:3,name:"核医学科"},{id:4,name:"检验科"},{id:5,name:"输血科"},{id:6,name:"药剂科"},{id:7,name:"手术室"},{id:8,name:"病理科"},{id:9,name:"病案科"},{id:10,name:"临床营养科"}]},hoverButton(){},mouseoutButton(){}},created(){this.info.name=this.$route.query.name,this.info.paymentType=this.$route.query.paymentType,this.selected=this.$route.query.selected,this.info.inumber=this.$route.query.number}},bl=t=>(q("data-v-70b1bc78"),t=t(),P(),t),kl={class:"notice-box"},Dl={class:"department-selector"},wl={class:"left-buttons"},xl=["onClick"],$l={class:"right-buttons"},Cl={class:"selected-department-container"},Sl=bl(()=>e("div",{style:{height:"30px"}},"您选择的科室为：",-1)),Tl={class:"sub-department-titles selected-department-title",style:{width:"200px",height:"30px"}},Ml={class:"container2"},ql={class:"sub-department-titles"},Pl={key:0,class:"sub-department-title-chinese"},Vl={key:1,class:"sub-department-title-english"},Al={class:"sub-department-buttons"},Bl=["onClick"];function Il(t,s,l,d,n,i){const p=c("Header"),u=c("router-link");return m(),v(w,null,[o(p,{squares2:n.squares2},null,8,["squares2"]),e("div",kl,[e("div",Dl,[e("div",wl,[(m(!0),v(w,null,M(n.departments,r=>(m(),v("button",{key:r.id,class:B([{active:n.selectedDepartment===r.id},"round-button"]),onClick:_=>i.selectDepartment(r.id)},h(r.name),11,xl))),128))]),e("div",$l,[e("div",Cl,[Sl,e("div",Tl,h(n.selectedDepartmentName),1),e("div",Ml,[o(u,{to:{path:"/AppointmentRegistration3",query:{select:this.selected}},class:"button2 button-prev"},{default:a(()=>[f("上一步")]),_:1},8,["to"]),n.checked?(m(),A(u,{key:0,to:{path:"/AppointmentRegistration5",query:{name:n.info.name,paymentType:n.info.paymentType,inumber:n.info.inumber,department:n.selectedDepartmentName}},class:"button2 button-next"},{default:a(()=>[f(" 下一步 ")]),_:1},8,["to"])):S("",!0)])]),e("div",ql,[n.selectedDepartment?(m(),v("div",Pl,h(i.getSubDepartmentsName(n.selectedDepartment)[0].subname),1)):S("",!0),n.selectedDepartment?(m(),v("div",Vl,h(i.getSubDepartmentsName(n.selectedDepartment)[0].enbame),1)):S("",!0)]),e("div",Al,[(m(!0),v(w,null,M(i.getSubDepartments(n.selectedDepartment),r=>(m(),v("button",{key:r.id,class:B(["square-button",{selected:n.selectedSubDepartment===r.id&&n.selectedDepartmentRight===n.selectedDepartment}]),onMouseover:s[0]||(s[0]=(..._)=>i.hoverButton&&i.hoverButton(..._)),onMouseout:s[1]||(s[1]=(..._)=>i.mouseoutButton&&i.mouseoutButton(..._)),onClick:_=>i.selectSubDepartment(r.id)},h(r.name),43,Bl))),128))])])])])],64)}const Ul=T(yl,[["render",Il],["__scopeId","data-v-70b1bc78"]]),Rl={components:{Header:ee},data(){return{squares:[{hovered:!1},{hovered:!0},{hovered:!1},{hovered:!1}],info:["出诊查询","网上预约看诊","预约流程","取消预约"],checked:!1,currentSquareIndex:0,squares2:[{hovered:!1,active:!1,done:!0},{hovered:!1,active:!1,done:!0},{hovered:!1,active:!1,done:!0},{hovered:!1,active:!1,done:!0},{hovered:!1,active:!0,done:!1},{hovered:!1,active:!1,done:!1},{hovered:!1,active:!1,done:!1},{hovered:!1,active:!1,done:!1}],info2:["就诊须知","挂号类别","填写预约信息","选择科室","选择医生","选择时间地点","核对预约信息","预约成功"],nextSevenDays:[],dayStatus:[{status:"none"},{status:"none"},{status:"none"},{status:"none"},{status:"none"},{status:"none"},{status:"none"}],selectedDate:null,selectDoctor:"",selectDate:"",today:new Date,doctors:[{id:0,name:"医生A",title:"主任医师",avatar:"img/lsy.jpg",research:"生物信息",schedule:[{time:"05-31(上午)",status:"empty",number:10,emptytime:[{number:1,status:"empty"},{number:2,status:"full"},{number:3,status:"empty"},{number:4,status:"empty"},{number:5,status:"full"},{number:6,status:"empty"},{number:7,status:"full"},{number:8,status:"full"},{number:9,status:"empty"},{number:10,status:"full"},{number:11,status:"full"},{number:12,status:"full"},{number:13,status:"empty"},{number:14,status:"empty"},{number:15,status:"full"},{number:16,status:"empty"},{number:17,status:"empty"},{number:18,status:"full"},{number:19,status:"empty"},{number:20,status:"full"}]}],cost:100},{id:1,name:"医生B",title:"副主任医师",avatar:"img/touxiang.png",research:"生物信息",schedule:[{time:"05-13(上午)",status:"full"},{time:"05-12(下午) ",status:"empty",number:5}],cost:60},{id:2,name:"医生C",title:"副主任医师",avatar:"img/touxiang (1).png",research:"生物信息",schedule:[{time:"05-11(上午)",status:"full"},{time:"05-14(下午) ",status:"full"}],cost:60}],isHovered:[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],info:{name:"",paymentType:"",department:"",inumber:"",info_time:"",doctor:{},day_index:""}}},methods:{getDutyData(){return new Promise((t,s)=>{let l=this,d={action:"getNextSevenDaysDuty",department:this.$route.query.department};console.log(d.department),this.$axios.post("/api/duty/next_seven_days/",d).then(function(n){l.doctors=n.data.duty,console.log(l.doctors),t()}).catch(function(n){console.log(n),s(n)})})},isClick(t,s,l,d){this.info.info_time=s,this.checked=!0,this.selectDoctor=t,this.selectDate=s,this.info.day_index=l,this.info.doctor=this.doctors[d]},locatenextSevenDays(){const t=[];for(let s=0;s<7;s++){const l=new Date(this.today);l.setDate(this.today.getDate()+s),t.push({date:this.formatDate(l),dayOfWeek:this.formatDayOfWeek(l)})}return t},formatDate(t){const s=String(t.getMonth()+1).padStart(2,"0"),l=String(t.getDate()).padStart(2,"0");return`${s}-${l}`},formatDayOfWeek(t){return`周${["日","一","二","三","四","五","六"][t.getDay()]}`},clickButton(t){this.selectedDate=t.date},doctorHasScheduleForDate(t,s){return t.schedule.some(l=>l.time.includes(s))},dayHasScheduleForDate(t,s){return t.time.includes(s)},hoverButton(){},mouseoutButton(){}},mounted(){console.log(this.$route.query.department),console.log(this.$route.query.paymentType),this.getDutyData().then(()=>{console.log("111"),console.log(this.doctors),this.nextSevenDays=this.locatenextSevenDays();for(let t=0;t<this.nextSevenDays.length;t++){const s=this.nextSevenDays[t].date;this.dayStatus[t].status="none",this.doctors.forEach(l=>{l.schedule.forEach(d=>{d.time.includes(s)&&(d.status==="full"&&this.dayStatus[t].status!="empty"?this.dayStatus[t].status="full":d.status==="empty"&&(this.dayStatus[t].status="empty")),console.log(this.dayStatus[t].status)})})}})},created(){this.info.name=this.$route.query.name,this.info.paymentType=this.$route.query.paymentType,this.info.department=this.$route.query.department,this.info.inumber=this.$route.query.inumber,console.log(this.info.department)}},Ll=t=>(q("data-v-1e462f8f"),t=t(),P(),t),Nl={class:"notice-box",style:{height:"1000px"}},Fl={class:"container2"},jl={class:"date-blocks"},Hl=["onClick"],zl={key:0},El={key:1},Ol={key:2},Yl={key:3},Gl={key:4},Jl={key:5},Kl={class:"doctor-intro"},Wl={key:0,class:"doctor-item"},Zl={class:"doctor-header"},Ql=["src"],Xl={class:"info"},er={class:"name"},tr={class:"title"},nr={class:"research"},sr={class:"schedule"},or={key:0},ir={key:0,class:"schedule-item1"},ar={class:"time-label"},lr=Ll(()=>e("div",null,[e("div",{class:"status"},"约满")],-1)),rr=["onClick"],cr={class:"time-label"},dr={class:"status",style:{color:"blue"}};function ur(t,s,l,d,n,i){const p=c("Header"),u=c("router-link");return m(),v(w,null,[o(p,{squares2:n.squares2},null,8,["squares2"]),e("div",Nl,[e("div",Fl,[o(u,{to:{path:"/AppointmentRegistration4",query:{name:n.info.name,paymentType:n.info.paymentType,department:n.info.department,inumber:n.info.inumber}},class:"button2 button-prev",style:{"text-decoration":"none"}},{default:a(()=>[f("上一步")]),_:1},8,["to"]),o(u,{to:{path:"/AppointmentRegistration6",query:{info_doctor:JSON.stringify(n.info)}},class:"button2 button-next",style:{"text-decoration":"none"}},{default:a(()=>[f(" 下一步 ")]),_:1},8,["to"])]),e("div",null,h(this.$route.query.department),1),e("div",jl,[(m(!0),v(w,null,M(n.nextSevenDays,(r,_)=>(m(),v("button",{class:B(["date-block",{noSelected:n.dayStatus[_].status!="empty"}]),key:_,onMouseover:s[0]||(s[0]=(...g)=>i.hoverButton&&i.hoverButton(...g)),onClick:g=>i.clickButton(r)},[e("div",null,h(r.date),1),_==0?(m(),v("div",zl,"今天")):_==1?(m(),v("div",El,"明天")):(m(),v("div",Ol,h(r.dayOfWeek),1)),n.dayStatus[_].status=="none"?(m(),v("div",Yl,"无排班")):n.dayStatus[_].status=="full"?(m(),v("div",Gl,"约满")):(m(),v("div",Jl,"有号"))],42,Hl))),128))]),e("div",Kl,[(m(!0),v(w,null,M(n.doctors,(r,_)=>(m(),v("div",{key:_},[i.doctorHasScheduleForDate(r,n.selectedDate)?(m(),v("div",Wl,[e("div",Zl,[e("img",{src:r.avatar,alt:"",class:"avatar"},null,8,Ql),e("div",Xl,[e("div",er,h(r.name),1),e("div",tr,h(r.title),1),e("div",nr,h(r.research),1)])]),e("div",sr,[(m(!0),v(w,null,M(r.schedule,(g,$)=>(m(),v("div",{key:$},[i.dayHasScheduleForDate(g,n.selectedDate)?(m(),v("div",or,[g.status!="empty"?(m(),v("button",ir,[e("div",ar,h(g.time),1),lr])):(m(),v("button",{key:1,onClick:k=>i.isClick(r.name,g.time,$,_),onMouseover:s[1]||(s[1]=(...k)=>i.hoverButton&&i.hoverButton(...k)),onMouseout:s[2]||(s[2]=(...k)=>i.mouseoutButton&&i.mouseoutButton(...k)),class:B(["schedule-item",{check:r.name===n.selectDoctor&&g.time===n.selectDate}])},[e("div",cr,h(g.time),1),e("div",null,[e("div",dr,"余 "+h(g.number),1)])],42,rr))])):S("",!0)]))),128))])])):S("",!0)]))),128))])])],64)}const mr=T(Rl,[["render",ur],["__scopeId","data-v-1e462f8f"]]),hr={components:{Header:ee},data(){return{squares:[{hovered:!1},{hovered:!0},{hovered:!1},{hovered:!1}],info:["出诊查询","网上预约看诊","预约流程","取消预约"],checked:!1,currentSquareIndex:0,squares2:[{hovered:!1,active:!1,done:!0},{hovered:!1,active:!1,done:!0},{hovered:!1,active:!1,done:!0},{hovered:!1,active:!1,done:!0},{hovered:!1,active:!1,done:!0},{hovered:!1,active:!0,done:!1},{hovered:!1,active:!1,done:!1},{hovered:!1,active:!1,done:!1}],info2:["就诊须知","挂号类别","填写预约信息","选择科室","选择医生","选择时间地点","核对预约信息","预约成功"],selectTime:1,timetable_1:[{startTime:"08:00",endTime:"08:10"},{startTime:"08:10",endTime:"08:20"},{startTime:"08:20",endTime:"08:30"},{startTime:"08:30",endTime:"08:40"},{startTime:"08:40",endTime:"08:50"},{startTime:"08:50",endTime:"09:00"},{startTime:"09:00",endTime:"09:10"},{startTime:"09:10",endTime:"09:20"},{startTime:"09:20",endTime:"09:30"},{startTime:"09:30",endTime:"09:40"},{startTime:"09:40",endTime:"09:50"},{startTime:"09:50",endTime:"10:00"},{startTime:"10:00",endTime:"10:10"},{startTime:"10:10",endTime:"10:20"},{startTime:"10:20",endTime:"10:30"},{startTime:"10:30",endTime:"10:40"},{startTime:"10:40",endTime:"10:50"},{startTime:"10:50",endTime:"11:00"},{startTime:"11:00",endTime:"11:10"},{startTime:"11:10",endTime:"11:20"}],timetable_2:[{startTime:"14:00",endTime:"14:10"},{startTime:"14:10",endTime:"14:20"},{startTime:"14:20",endTime:"14:30"},{startTime:"14:30",endTime:"14:40"},{startTime:"14:40",endTime:"14:50"},{startTime:"14:50",endTime:"15:00"},{startTime:"15:00",endTime:"15:10"},{startTime:"15:10",endTime:"15:20"},{startTime:"15:20",endTime:"15:30"},{startTime:"15:30",endTime:"15:40"},{startTime:"15:40",endTime:"15:50"},{startTime:"15:50",endTime:"16:00"},{startTime:"16:00",endTime:"16:10"},{startTime:"16:10",endTime:"16:20"},{startTime:"16:20",endTime:"16:30"},{startTime:"16:30",endTime:"16:40"},{startTime:"16:40",endTime:"16:50"},{startTime:"16:50",endTime:"17:00"},{startTime:"17:00",endTime:"17:10"},{startTime:"17:10",endTime:"17:20"}],doctors:[],info_doctor:{},info:{name:"",paymentType:"",department:"",inumber:""},info_time:"",timeOfDay:"",info_startTime:"",info_endTime:"",info_number:0,info_detail:{name:"",paymentType:"",department:"",inumber:"",time:"",starttime:"",endtime:"",number:"",doctorName:"",doctorTitle:"",doctorAvatar:"",doctorRearch:"",cost:"",info_doctor:{}}}},methods:{nextSquare(){},selectTimeSlot(t,s,l){this.selectTime=t,this.checked=!0,this.info_startTime=s,this.info_endTime=l,this.info_number=t+1,this.info_detail.starttime=this.info_startTime,this.info_detail.endtime=this.info_endTime,this.info_detail.number=this.info_number},displayTime(){return this.timeOfDay=this.info_time.match(/\(.*?\)/)||[],timeOfDay=="(下午)"?1:timeOfDay=="(上午)"||!timeOfDay?0:"未知的时间"}},created(){const t=this.$route.query.info_doctor;t&&(this.info_doctor=JSON.parse(t)),console.log(this.info_doctor),this.info.name=this.info_doctor.name,this.info.paymentType=this.info_doctor.paymentType,this.info.department=this.info_doctor.department,this.info_time=this.info_doctor.info_time,this.info.inumber=this.info_doctor.inumber,this.doctors[0]=this.info_doctor.doctor,this.info_detail.name=this.info.name,this.info_detail.paymentType=this.info.paymentType,this.info_detail.department=this.info.department,this.info_detail.inumber=this.info.inumber,this.info_detail.time=this.info_time,this.info_detail.doctorName=this.doctors[0].name,this.info_detail.doctorTitle=this.doctors[0].title,this.info_detail.doctorAvatar=this.doctors[0].avatar,this.info_detail.doctorRearch=this.doctors[0].research,this.info_detail.cost=this.doctors[0].cost,this.info_detail.info_doctor=this.info_doctor}},pr={class:"notice-box",style:{height:"1400px"}},_r={class:"container2"},fr={class:"doctor-item"},vr={class:"doctor-header"},gr=["src"],yr={class:"info"},br={class:"name"},kr={class:"title"},Dr={class:"research"},wr={class:"button-container"},xr=["onClick"],$r=["onClick"];function Cr(t,s,l,d,n,i){const p=c("Header"),u=c("router-link");return m(),v(w,null,[o(p,{squares2:n.squares2},null,8,["squares2"]),e("div",pr,[e("div",_r,[o(u,{to:{path:"/AppointmentRegistration5",query:{name:n.info.name,paymentType:n.info.paymentType,department:n.info.department,inumber:n.info.inumber}},class:"button2 button-prev",style:{"text-decoration":"none"}},{default:a(()=>[f("上一步")]),_:1},8,["to"]),o(u,{to:{path:"/AppointmentRegistration7",query:{info:JSON.stringify(n.info_detail)}},class:"button2 button-next",style:{"text-decoration":"none"}},{default:a(()=>[f(" 下一步")]),_:1},8,["to"])]),e("div",fr,[e("div",vr,[e("img",{src:n.doctors[0].avatar,alt:"",class:"avatar"},null,8,gr),e("div",yr,[e("div",br,h(n.doctors[0].name),1),e("div",kr,h(n.doctors[0].title),1),e("div",Dr,h(n.doctors[0].research),1)])])]),e("div",wr,[(m(!0),v(w,null,M(n.doctors[0].schedule[this.info_doctor.day_index].emptytime,(r,_)=>(m(),v("div",{key:_,class:"button-row"},[r.status==="empty"&&(this.info_time.match(/\(.*?\)/)||[])[0]=="(上午)"?(m(),v("button",{key:0,onClick:g=>i.selectTimeSlot(_,n.timetable_1[r.number-1].startTime,n.timetable_1[r.number-1].endTime),class:B(["button-down",{selected:n.selectTime===_}])},[f(h(n.timetable_1[r.number-1].startTime)+" - "+h(n.timetable_1[r.number-1].endTime)+" ",1),e("span",null,h(_+1)+" 号",1)],10,xr)):S("",!0),r.status==="empty"&&(this.info_time.match(/\(.*?\)/)||[])[0]=="(下午)"?(m(),v("button",{key:1,onClick:g=>i.selectTimeSlot(_,n.timetable_2[r.number-1].startTime,n.timetable_2[r.number-1].endTime),class:B(["button-down",{selected:n.selectTime===_}])},[f(h(n.timetable_2[r.number-1].startTime)+" - "+h(n.timetable_2[r.number-1].endTime)+" ",1),e("span",null,h(_+1)+" 号",1)],10,$r)):S("",!0)]))),128))])])],64)}const Sr=T(hr,[["render",Cr],["__scopeId","data-v-647c3e94"]]),Tr={name:"BillDetails",data(){return{isVisible:!1,form:{type:"",issue:"",price:0,date:"",id:0}}},methods:{openModal(t){this.isVisible=!0,document.body.style.overflow="hidden",this.form.type=t.type,this.form.issue=t.issue,this.form.price=t.price,this.form.date=t.date,this.form.id=t.id},closeModal(){this.isVisible=!1,document.body.style.overflow=""},cancelModal(){N({type:"info",message:"取消缴费 ╮(╯▽╰)╭",showClose:!0}),this.closeModal()},submitForm(){this.$emit("billDetailsUpdated",!0),N({showClose:!0,message:"缴费成功 ╰(*°▽°*)╯",type:"success"}),this.closeModal()}}},Mr={key:0,class:"modal-background"},qr={class:"modal-container"},Pr={class:"button-group"};function Vr(t,s,l,d,n,i){const p=c("el-form-header"),u=c("el-form-item"),r=c("el-button"),_=c("el-form");return n.isVisible?(m(),v("div",Mr,[e("div",qr,[o(_,{model:n.form,class:"form","label-width":"auto",style:{"max-width":"600px"}},{default:a(()=>[o(p,{class:"form-header"},{default:a(()=>[f("缴费详情")]),_:1}),o(u,{label:"类型"},{default:a(()=>[f(h(n.form.type),1)]),_:1}),o(u,{label:"具体事由"},{default:a(()=>[f(h(n.form.issue),1)]),_:1}),o(u,{label:"费用（元）"},{default:a(()=>[f(h(n.form.price),1)]),_:1}),o(u,{label:"创建时间"},{default:a(()=>[f(h(n.form.date),1)]),_:1}),e("div",Pr,[o(r,{onClick:i.submitForm,type:"primary",plain:!0},{default:a(()=>[f("确认缴费")]),_:1},8,["onClick"]),o(r,{onClick:i.cancelModal},{default:a(()=>[f("取消")]),_:1},8,["onClick"])])]),_:1},8,["model"])])])):S("",!0)}const Ar=T(Tr,[["render",Vr],["__scopeId","data-v-af3315b7"]]),Br={inject:["$identity_num"],components:{Header:ee},data(){return{checked:!1,currentSquareIndex:0,squares2:[{hovered:!1,active:!1,done:!0},{hovered:!1,active:!1,done:!0},{hovered:!1,active:!1,done:!0},{hovered:!1,active:!1,done:!0},{hovered:!1,active:!1,done:!0},{hovered:!1,active:!1,done:!0},{hovered:!1,active:!0,done:!1},{hovered:!1,active:!1,done:!1}],info2:["就诊须知","挂号类别","填写预约信息","选择科室","选择医生","选择时间地点","核对预约信息","预约成功"],selectTime:1,isMedicalInsurance:!0,billstatus:!1,info:{name:"",paymentType:"",department:"",time:"",starttime:"",endtime:"",number:"",doctorName:"",doctorTitle:"",doctorAvatar:"",doctorRearch:"",cost:"",inumber:"",identity_num:this.$identityNum,info_last:{}},info_last:{}}},components:{BillDetails:Ar},methods:{submit(){this.form.address="猫猫就诊",this.form.selectTimeTable=this.selectTimeTable,this.form.order=this.doctor.cost,this.form.people=this.people,this.form.isMedicalInsurance=this.isMedicalInsurance,this.form.doctorname=this.doctor.name},selectTimeSlot(t){this.selectTime=t,this.checked=!0},togglePaymentType(){this.isMedicalInsurance=!this.isMedicalInsurance,this.isMedicalInsurance?this.info.paymentType="医保":this.info.paymentType="非医保"},showBillDetails(){const t=new Date,s=`${t.getFullYear()}年${String(t.getMonth()+1).padStart(2,"0")}月${String(t.getDate()).padStart(2,"0")}日`;var l={type:"挂号",issue:"挂号费",price:this.info.cost,date:s};this.isMedicalInsurance&&(l.price=0),console.log(l),this.$refs.BillDetails.openModal(l)},onBillDetailsUpdated(t){return this.billstatus=t,t},setAppointmentData(){return new Promise((t,s)=>{let l={name:this.info.name,paymentType:this.info.paymentType,department:this.info.department,time:this.info.time,starttime:this.info.starttime,endtime:this.info.endtime,number:this.info.number,doctorName:this.info.doctorName,doctorTitle:this.info.doctorAvatar,doctorAvatar:this.info.doctorAvatar,doctorRearch:this.info.doctorRearch,cost:this.info.cost,inumber:this.info.inumber,identity_num:j.identityNum,action:"addRegisterData"};this.info.paymentType=="医保"&&(l.cost=0),this.$axios.post("/api/appointment/add/",l).then(function(d){console.log(d.data.msg),t()}).catch(function(d){console.log(d),s(d)})})}},created(){const t=this.$route.query.info;t&&(this.info_last=JSON.parse(t)),this.info.info_last=this.info_last,this.info.name=this.info_last.name,this.isMedicalInsurance?this.info.paymentType="医保":this.info.paymentType="非医保",this.info.department=this.info_last.department,this.info.time=this.info_last.time,this.info.starttime=this.info_last.starttime,this.info.endtime=this.info_last.endtime,this.info.number=this.info_last.number,this.info.doctorName=this.info_last.doctorName,this.info.doctorTitle=this.info_last.doctorTitle,this.info.doctorAvatar=this.info_last.doctorAvatar,this.info.doctorRearch=this.info_last.doctorRearch,this.info.cost=this.info_last.cost,this.info.inumber=this.info_last.inumber,console.log(this.info.info_last)}},ne=t=>(q("data-v-ba5a73c3"),t=t(),P(),t),Ir={class:"notice-box",style:{height:"1500px"}},Ur={class:"container2"},Rr={key:1,class:"container2"},Lr={class:"doctor-item"},Nr={class:"doctor-header"},Fr=["src"],jr={class:"info"},Hr={class:"name"},zr={class:"title"},Er={class:"research"},Or=ne(()=>e("div",{class:"detail-container"},[e("div",{class:"detail-item"},"就诊院区："),e("div",{class:"detail-item"},"猫猫就诊")],-1)),Yr={class:"detail-container"},Gr=ne(()=>e("div",{class:"detail-item"},"科室：",-1)),Jr={class:"detail-item"},Kr={class:"detail-container"},Wr=ne(()=>e("div",{class:"detail-item"},"就诊日期：",-1)),Zr={class:"detail-item"},Qr={class:"detail-container"},Xr=ne(()=>e("div",{class:"detail-item"},"就诊时间：",-1)),ec={class:"detail-item"},tc={class:"detail-container"},nc=ne(()=>e("div",{class:"detail-item"},"医事服务费：",-1)),sc={class:"detail-item"},oc={class:"detail-container"},ic=ne(()=>e("div",{class:"detail-item"},"就诊人：",-1)),ac={class:"detail-item"},lc={class:"detail-container"},rc=ne(()=>e("div",{class:"detail-item"},"*支付类型（请选择）：",-1)),cc={style:{display:"flex","justify-content":"space-around",height:"50px"},class:"detail-item"};function dc(t,s,l,d,n,i){const p=c("Header"),u=c("BillDetails"),r=c("router-link"),_=c("el-button");return m(),v(w,null,[o(p,{squares2:n.squares2},null,8,["squares2"]),o(u,{onBillDetailsUpdated:i.onBillDetailsUpdated,ref:"BillDetails"},null,8,["onBillDetailsUpdated"]),e("div",Ir,[e("div",null,h(this.info.inumber),1),e("div",null,h(this.info.identity_num),1),e("div",null,h(this.billstatus),1),e("div",Ur,[o(r,{to:{path:"/AppointmentRegistration6",query:{info_doctor:JSON.stringify(n.info_last.info_doctor)}},class:"button2 button-prev",style:{"text-decoration":"none"}},{default:a(()=>[f("上一步")]),_:1},8,["to"]),n.billstatus?(m(),A(r,{key:0,to:{path:"/AppointmentRegistration8",query:{order:JSON.stringify(n.info)}},class:"button2 button-next",onClick:i.submit},{default:a(()=>[f("确认")]),_:1},8,["to","onClick"])):S("",!0),n.billstatus?S("",!0):(m(),v("div",Rr,[o(_,{onClick:s[0]||(s[0]=g=>i.showBillDetails())},{default:a(()=>[f("缴费")]),_:1})]))]),e("div",Lr,[e("div",Nr,[e("img",{src:n.info.doctorAvatar,alt:"",class:"avatar"},null,8,Fr),e("div",jr,[e("div",Hr,h(n.info.doctorName),1),e("div",zr,h(n.info.doctorTitle),1),e("div",Er,h(n.info.doctorRearch),1)])]),Or,e("div",Yr,[Gr,e("div",Jr,h(n.info.department),1)]),e("div",Kr,[Wr,e("div",Zr,"2024-"+h(n.info.time),1)]),e("div",Qr,[Xr,e("div",ec,h(n.info.starttime)+"-"+h(n.info.endtime),1)]),e("div",tc,[nc,e("div",sc,h(n.info.cost)+"元",1)]),e("div",oc,[ic,e("div",ac,h(n.info.name),1)]),e("div",lc,[rc,e("div",cc,[e("div",null,h(n.isMedicalInsurance?"医保":"非医保"),1),e("span",{class:"toggle-arrow",onClick:s[1]||(s[1]=(...g)=>i.togglePaymentType&&i.togglePaymentType(...g))},"▶")])])])])],64)}const uc=T(Br,[["render",dc],["__scopeId","data-v-ba5a73c3"]]),mc={components:{Header:ee},data(){return{checked:!1,currentSquareIndex:0,squares2:[{hovered:!1,active:!1,done:!0},{hovered:!1,active:!1,done:!0},{hovered:!1,active:!1,done:!0},{hovered:!1,active:!1,done:!0},{hovered:!1,active:!1,done:!0},{hovered:!1,active:!1,done:!0},{hovered:!1,active:!1,done:!0},{hovered:!1,active:!0,done:!1}],info2:["就诊须知","挂号类别","填写预约信息","选择科室","选择医生","选择时间地点","核对预约信息","预约成功"],form:{address:"北医三院",selectTimeTable:{time:"05-09(上午)",startTime:"08:00",endTime:"08:10"},order:100,people:{name:"林艺涵",gender:"女",idType:"身份证",phone:"18518559617",number:"370883200503160423"},isMedicalInsurance:!0,doctor:"医生A",department:"心血管内科",num:15},currentTime:"",info1:{}}},methods:{timeBeforeTenMinutes(t){var[s,l]=t.split(":").map(Number),d=s,n=l-10;n<0&&(d-=1,n+=60);const i=String(d).padStart(2,"0"),p=String(n).padStart(2,"0");return`${i}时${p}分`},updateCurrentTime(){const t=new Date,s=`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")} ${String(t.getHours()).padStart(2,"0")}:${String(t.getMinutes()).padStart(2,"0")}:${String(t.getSeconds()).padStart(2,"0")}`;this.currentTime=s}},created(){this.updateCurrentTime();const t=this.$route.query.order;t&&(this.info1=JSON.parse(t))}},Y=t=>(q("data-v-6ddea260"),t=t(),P(),t),hc={class:"notice-box",style:{height:"1400px"}},pc={style:{width:"800px",margin:"20px auto"}},_c=Y(()=>e("div",{class:"subline"},"您好，您已预约成功。订单详情如下",-1)),fc={class:"subline"},vc=Y(()=>e("div",null,"就诊人：",-1)),gc={class:"detail"},yc={class:"subline"},bc=Y(()=>e("div",null,"医生：",-1)),kc={class:"detail"},Dc=Y(()=>e("div",{class:"subline"},[e("div",null,"就诊医院："),e("div",{class:"detail"},"猫猫就诊")],-1)),wc={class:"subline"},xc=Y(()=>e("div",null,"科室：",-1)),$c={class:"detail"},Cc={class:"subline"},Sc=Y(()=>e("div",null,"就诊时段：",-1)),Tc={class:"detail"},Mc={class:"subline"},qc=Y(()=>e("div",{class:"detail"},"建议到诊时间：",-1)),Pc={class:"detail"},Vc={class:"subline"},Ac=Y(()=>e("div",null,"医事服务费：",-1)),Bc={key:0,class:"detail"},Ic={key:1,class:"detail"},Uc={class:"subline"},Rc=Y(()=>e("div",null,"就诊序号：",-1)),Lc={class:"detail"},Nc={class:"subline"},Fc=Y(()=>e("div",null,"挂号时间：",-1)),jc=ie('<div class="subline" data-v-6ddea260><div data-v-6ddea260>温馨提示：</div></div><div data-v-6ddea260><div style="margin:5px auto;" data-v-6ddea260> (1)医保患者请携带挂号凭证(电子就医卡二维码)和医保卡，到自助机或挂号/预约取号窗口缴费取号，再去分诊台分诊。(取号时间:上午号时间11:30前、下午号16:30前) </div><div style="margin:5px auto;" data-v-6ddea260> (2)非医保患者请携带挂号凭证(电子就医卡二维码)，无需取号即可去分诊台分诊。 </div><div style="margin:5px auto;" data-v-6ddea260> (3)所有挂号在就诊当日上午号12:00前、下午号17:00前有效，过有效时间后不再安排就诊及退费。 </div><div style="margin:5px auto;" data-v-6ddea260> 倡导文明绿色出行，共享单车请入栏停放。如需驾车,中大型轿车及SUV车型沿道路最内侧的排队通道进入，标准尺寸小型轿车工作日8-16时周末8-12时可直接进入医院。 </div></div>',2),Hc={class:"container2"};function zc(t,s,l,d,n,i){const p=c("Header"),u=c("router-link");return m(),v(w,null,[o(p,{squares2:n.squares2},null,8,["squares2"]),e("div",hc,[e("div",pc,[_c,e("div",fc,[vc,e("div",gc,h(n.info1.name),1)]),e("div",yc,[bc,e("div",kc,h(n.info1.doctorName),1)]),Dc,e("div",wc,[xc,e("div",$c,h(n.info1.department),1)]),e("div",Cc,[Sc,e("div",Tc,"2024-"+h(n.info1.time)+" "+h(n.info1.starttime)+"-"+h(n.info1.endtime),1)]),e("div",Mc,[qc,e("div",Pc,h(i.timeBeforeTenMinutes(n.info1.starttime)),1)]),e("div",Vc,[Ac,this.info1.paymentType=="医保"?(m(),v("div",Bc,"0元")):(m(),v("div",Ic,h(n.info1.cost)+"元",1))]),e("div",Uc,[Rc,e("div",Lc,h(n.info1.number),1)]),e("div",Nc,[Fc,e("div",null,h(n.currentTime),1)]),jc]),e("div",Hc,[o(u,{to:{path:"/AppointmentRegistration7",query:{info:JSON.stringify(n.info1.info_last)}},class:"button2 button-prev",style:{"text-decoration":"none"}},{default:a(()=>[f("上一步")]),_:1},8,["to"]),e("button",{class:"button2 button-next",onClick:s[0]||(s[0]=(...r)=>t.submit&&t.submit(...r))},"确认")])])],64)}const Ec=T(mc,[["render",zc],["__scopeId","data-v-6ddea260"]]),Oc={props:{squares2:{type:Array,required:!0}},data(){return{squares:[{hovered:!1},{hovered:!1},{hovered:!1},{hovered:!0}],info:["出诊查询","网上预约看诊","预约流程","医生查询"],checked:!1,currentSquareIndex:0,selected:0,info2:["就诊须知","挂号类别","填写预约信息","选择科室","选择医生","选择时间地点","核对预约信息","预约成功"]}},methods:{toggleSquare(t){this.currentSquareIndex=t,this.currentSquareIndex=1,this.checked=!1},nextSquare(){}}},Yc={class:"container",style:{display:"flex","justify-content":"center","align-items":"center",height:"180px"}},Gc=["onMouseover","onMouseout"];function Jc(t,s,l,d,n,i){return m(),v("div",Yc,[(m(!0),v(w,null,M(n.squares,(p,u)=>(m(),v("div",{key:u,class:B(["square",{"square-hovered":n.selected==u||p.hovered}]),onMouseover:r=>p.hovered=!0,onMouseout:r=>p.hovered=!1},h(n.info[u]),43,Gc))),128))])}const ve=T(Oc,[["render",Jc],["__scopeId","data-v-481af824"]]),Kc={components:{Header:ve},data(){return{squares:[{hovered:!0},{hovered:!1},{hovered:!1},{hovered:!1}],info:["出诊查询","网上预约看诊","预约流程","医生查询"],link:["/TableSearch","/AppointmentRegistration","/Picture","/DoctorSearch"],departments:[{id:0,name:"心血管内科",pinyin:"Xinxueguanneike"},{id:1,name:"呼吸与危重症医学科",pinyin:"Huxi"},{id:2,name:"内分泌科",pinyin:"Neifenmi"},{id:3,name:"肾内科",pinyin:"Shenneike"},{id:4,name:"血液内科",pinyin:"Xueye"},{id:5,name:"消化科",pinyin:"Xiaohua"},{id:6,name:"风湿免疫科",pinyin:"Fengshi"},{id:7,name:"老年内科",pinyin:"Laonian"},{id:8,name:"神经内科",pinyin:"Shenjing"},{id:9,name:"感染疾病科",pinyin:"Ganran"},{id:10,name:"急诊科",pinyin:"Jizhen"},{id:11,name:"皮肤科",pinyin:"Pifu"},{id:12,name:"中医科",pinyin:"Zhongyi"},{id:13,name:"职业病科",pinyin:"Zhiye"},{id:14,name:"肿瘤放疗科",pinyin:"Zhongliu"},{id:15,name:"肿瘤化疗与放射病科",pinyin:"Zhongliu"},{id:16,name:"儿科",pinyin:"Erke"},{id:17,name:"体检中心",pinyin:"Tijian"},{id:18,name:"全科医学科",pinyin:"Quanke"},{id:19,name:"普通外科",pinyin:"Puwai"},{id:20,name:"骨科",pinyin:"Guke"},{id:21,name:"泌尿外科",pinyin:"Miniao"},{id:22,name:"胸外科",pinyin:"Xiongwai"},{id:23,name:"心脏外科",pinyin:"Xinwai"},{id:24,name:"神经外科",pinyin:"Shenwai"},{id:25,name:"整形科",pinyin:"Zhengxing"},{id:26,name:"介入血管外科",pinyin:"Jieru"},{id:27,name:"危重医学科",pinyin:"Weizhong"},{id:28,name:"运动医学科",pinyin:"Yundong"},{id:29,name:"康复医学科",pinyin:"Kangfu"},{id:30,name:"妇产科",pinyin:"Fuchan"},{id:31,name:"生殖医学科",pinyin:"Shengzhi"},{id:32,name:"眼科",pinyin:"Yanke"},{id:33,name:"耳鼻喉科",pinyin:"Erbihou"},{id:34,name:"口腔科",pinyin:"Kouqiang"},{id:35,name:"麻醉科",pinyin:"Mazui"},{id:36,name:"疼痛医学中心",pinyin:"Tengtong"},{id:37,name:"放射科",pinyin:"Fangshe"},{id:38,name:"超声医学科",pinyin:"Chaosheng"},{id:39,name:"核医学科",pinyin:"He"},{id:40,name:"检验科",pinyin:"Jianyan"},{id:41,name:"输血科",pinyin:"Shuxue"},{id:42,name:"药剂科",pinyin:"Yaoji"},{id:43,name:"手术室",pinyin:"Shoushu"},{id:44,name:"病理科",pinyin:"Bingli"},{id:45,name:"病案科",pinyin:"Bingan"},{id:46,name:"临床营养科",pinyin:"Linchuang"}],doctors:[{name:"医生A",title:"主任医师",department:"心血管内科",research:"生物信息",schedule:[{time:"05-09(上午)",status:"empty",number:10},{time:"05-07(下午) ",status:"full"}],cost:100},{name:"医生B",title:"副主任医师",department:"呼吸与危重症医学科",research:"生物信息",schedule:[{time:"05-08(上午)",status:"full"},{time:"05-09(下午) ",status:"empty",number:5}],cost:60},{name:"医生C",title:"副主任医师",department:"心血管内科",research:"生物信息",schedule:[{time:"05-06(上午)",status:"full"},{time:"05-10(下午) ",status:"full"}],cost:60}],departmentLetters:["ALL","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],selectedLetterIndex:-1,square_selected:-1,select:!1}},computed:{filteredDepartments(){if(this.selectedLetterIndex===-1)return this.departments;{const t=this.departmentLetters[this.selectedLetterIndex].toUpperCase();return this.departments.filter(s=>s.pinyin[0].toUpperCase()===t)}}},methods:{selectDepartment(t){t==0?this.selectedLetterIndex=-1:this.selectedLetterIndex=t},isActive(t){return t==0?this.selectedLetterIndex===-1:this.selectedLetterIndex===t},square_select(t){this.square_selected=t,this.select=!0},filteredDoctors(t){return this.doctors.filter(s=>s.department===this.departments[t].name)},getDutyData(){return new Promise((t,s)=>{let l=this,d={action:"getAllNextSevenDaysDuty"};this.$axios.post("/api/duty/all_next_seven_days/",d).then(function(n){l.doctors=n.data.duty,console.log(l.doctors),t()}).catch(function(n){console.log(n),s(n)})})}},created(){this.getDutyData()}},Wc=t=>(q("data-v-cc9c71d3"),t=t(),P(),t),Zc={class:"containerlyh",style:{display:"flex","justify-content":"center","align-items":"center",height:"180px"}},Qc={class:"circle-buttons"},Xc=["onClick"],ed={class:"square-buttons"},td=["onClick"],nd={key:0,class:"doctors-table-container",id:"targetDiv"},sd={class:"doctors-table"},od=Wc(()=>e("thead",null,[e("tr",null,[e("th",null,"科室"),e("th",null,"姓名"),e("th",null,"专长"),e("th",null,"出诊时间"),e("th",null,"门诊限号")])],-1));function id(t,s,l,d,n,i){const p=c("router-link");return m(),v(w,null,[e("div",Zc,[(m(!0),v(w,null,M(n.squares,(u,r)=>(m(),A(p,{key:r,to:n.link[r],class:B(["square",{"square-hovered":u.hovered||r===0}]),onMouseover:_=>u.hovered=!0,onMouseout:_=>u.hovered=!1},{default:a(()=>[f(h(n.info[r]),1)]),_:2},1032,["to","class","onMouseover","onMouseout"]))),128))]),e("div",null,[e("div",Qc,[(m(!0),v(w,null,M(n.departmentLetters,(u,r)=>(m(),v("button",{key:r,class:B({selected:i.isActive(r)}),onClick:_=>i.selectDepartment(r)},h(u),11,Xc))),128))]),e("div",ed,[(m(!0),v(w,null,M(i.filteredDepartments,(u,r)=>(m(),v("div",{key:r,onClick:_=>i.square_select(u.id)},[e("button",{class:B(["department-button",{"department-button-selected":u.id==n.square_selected}])},h(u.name),3)],8,td))),128))])]),n.select?(m(),v("div",nd,[e("table",sd,[od,e("tbody",null,[(m(!0),v(w,null,M(i.filteredDoctors(n.square_selected),u=>(m(),v("tr",{key:u.name},[e("td",null,h(u.department),1),e("td",null,h(u.name),1),e("td",null,h(u.research),1),e("td",null,h(u.schedule.map(r=>r.time).join(", ")),1),e("td",null,h(u.schedule.length*20),1)]))),128))])])])):S("",!0)],64)}const ad=T(Kc,[["render",id],["__scopeId","data-v-cc9c71d3"]]),ld={components:{Header:ve},data(){return{squares:[{hovered:!1},{hovered:!1},{hovered:!1},{hovered:!0}],info:["出诊查询","网上预约看诊","预约流程","医生查询"],link:["/TableSearch","/AppointmentRegistration","/Picture","/DoctorSearch"],departments:[{id:0,name:"心血管内科",pinyin:"Xinxueguanneike"},{id:1,name:"呼吸与危重症医学科",pinyin:"Huxi"},{id:2,name:"内分泌科",pinyin:"Neifenmi"},{id:3,name:"肾内科",pinyin:"Shenneike"},{id:4,name:"血液内科",pinyin:"Xueye"},{id:5,name:"消化科",pinyin:"Xiaohua"},{id:6,name:"风湿免疫科",pinyin:"Fengshi"},{id:7,name:"老年内科",pinyin:"Laonian"},{id:8,name:"神经内科",pinyin:"Shenjing"},{id:9,name:"感染疾病科",pinyin:"Ganran"},{id:10,name:"急诊科",pinyin:"Jizhen"},{id:11,name:"皮肤科",pinyin:"Pifu"},{id:12,name:"中医科",pinyin:"Zhongyi"},{id:13,name:"职业病科",pinyin:"Zhiye"},{id:14,name:"肿瘤放疗科",pinyin:"Zhongliu"},{id:15,name:"肿瘤化疗与放射病科",pinyin:"Zhongliu"},{id:16,name:"儿科",pinyin:"Erke"},{id:17,name:"体检中心",pinyin:"Tijian"},{id:18,name:"全科医学科",pinyin:"Quanke"},{id:19,name:"普通外科",pinyin:"Puwai"},{id:20,name:"骨科",pinyin:"Guke"},{id:21,name:"泌尿外科",pinyin:"Miniao"},{id:22,name:"胸外科",pinyin:"Xiongwai"},{id:23,name:"心脏外科",pinyin:"Xinwai"},{id:24,name:"神经外科",pinyin:"Shenwai"},{id:25,name:"整形科",pinyin:"Zhengxing"},{id:26,name:"介入血管外科",pinyin:"Jieru"},{id:27,name:"危重医学科",pinyin:"Weizhong"},{id:28,name:"运动医学科",pinyin:"Yundong"},{id:29,name:"康复医学科",pinyin:"Kangfu"},{id:30,name:"妇产科",pinyin:"Fuchan"},{id:31,name:"生殖医学科",pinyin:"Shengzhi"},{id:32,name:"眼科",pinyin:"Yanke"},{id:33,name:"耳鼻喉科",pinyin:"Erbihou"},{id:34,name:"口腔科",pinyin:"Kouqiang"},{id:35,name:"麻醉科",pinyin:"Mazui"},{id:36,name:"疼痛医学中心",pinyin:"Tengtong"},{id:37,name:"放射科",pinyin:"Fangshe"},{id:38,name:"超声医学科",pinyin:"Chaosheng"},{id:39,name:"核医学科",pinyin:"He"},{id:40,name:"检验科",pinyin:"Jianyan"},{id:41,name:"输血科",pinyin:"Shuxue"},{id:42,name:"药剂科",pinyin:"Yaoji"},{id:43,name:"手术室",pinyin:"Shoushu"},{id:44,name:"病理科",pinyin:"Bingli"},{id:45,name:"病案科",pinyin:"Bingan"},{id:46,name:"临床营养科",pinyin:"Linchuang"}],doctors:[],departmentLetters:["ALL","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],selectedLetterIndex:-1,square_selected:-1,select:!1,search:"",search_name_id:-1}},computed:{filteredDepartments(){if(this.selectedLetterIndex===-1)return this.departments;{const t=this.departmentLetters[this.selectedLetterIndex].toUpperCase();return this.departments.filter(s=>s.pinyin[0].toUpperCase()===t)}}},methods:{selectDepartment(t){t==0?this.selectedLetterIndex=-1:this.selectedLetterIndex=t},isActive(t){return t==0?this.selectedLetterIndex===-1:this.selectedLetterIndex===t},square_select(t){this.square_selected=t,this.select=!0,this.search_name_id=-1},filteredDoctors(t){if(this.search_name_id!=-1)return this.doctors.filter(s=>s.name==this.doctors[this.search_name_id].name);if(this.square_selected!=-1)return this.doctors.filter(s=>s.department==this.departments[this.square_selected].name)},querySearch(t,s){console.log(t);const l=this.doctors.filter(d=>d.name.includes(t));console.log(l),s(l)},handleSelect(t){this.search_name_id=t.id,console.log(t),input.value=t.name},getDutyData(){return new Promise((t,s)=>{let l=this,d={action:"getDoctorsData"};this.$axios.post("api/doctors/list/",d).then(function(n){l.doctors=n.data.doctors,console.log(l.doctors),t()}).catch(function(n){console.log(n),s(n)})})}},mounted(){this.getDutyData()}},rd={class:"containerlyh",style:{display:"flex","justify-content":"center","align-items":"center",height:"180px"}},cd={class:"container2"},dd={class:"input-container",style:{width:"500px",height:"100px",margin:"auto auto"}},ud={class:"chaxun"},md={class:"el-input__icon"},hd={class:"doctor-intro"},pd={class:"doctor-header"},_d=["src"],fd={class:"info"},vd={style:{display:"flex","align-items":"center"}},gd={class:"name"},yd={style:{"font-size":"12px"}},bd={class:"research"},kd={class:"circle-buttons"},Dd=["onClick"],wd={class:"square-buttons"},xd=["onClick"];function $d(t,s,l,d,n,i){const p=c("router-link"),u=c("el-autocomplete"),r=c("el-button");return m(),v(w,null,[e("div",rd,[(m(!0),v(w,null,M(n.squares,(_,g)=>(m(),A(p,{key:g,to:n.link[g],class:B(["square",{"square-hovered":_.hovered||g==3}]),onMouseover:$=>_.hovered=!0,onMouseout:$=>_.hovered=!1},{default:a(()=>[f(h(n.info[g]),1)]),_:2},1032,["to","class","onMouseover","onMouseout"]))),128))]),e("div",cd,[e("div",dd,[e("div",ud,[o(u,{modelValue:n.search,"onUpdate:modelValue":s[0]||(s[0]=_=>n.search=_),"fetch-suggestions":i.querySearch,placeholder:"请输入医生姓名",onSelect:i.handleSelect,style:{width:"300px",height:"40px"}},{default:a(({item:_})=>[e("div",md,h(_.name),1)]),_:1},8,["modelValue","fetch-suggestions","onSelect"]),o(r,{color:"#DBA979",dark:t.isDark,plain:"",class:"searchButton",style:{width:"80px",height:"40px"}},{default:a(()=>[f("查询")]),_:1},8,["dark"]),e("p",null,h(n.search),1)])]),e("div",hd,[(m(!0),v(w,null,M(i.filteredDoctors(n.square_selected),_=>(m(),v("div",{key:_.name,class:"doctor-item"},[e("div",pd,[e("img",{src:_.avatar,alt:"",class:"avatar"},null,8,_d),e("div",fd,[e("div",vd,[e("div",gd,h(_.name),1),e("div",yd,h(_.title),1)]),e("div",bd,h(_.research),1)])])]))),128))]),e("div",kd,[(m(!0),v(w,null,M(n.departmentLetters,(_,g)=>(m(),v("button",{key:g,class:B({selected:i.isActive(g)}),onClick:$=>i.selectDepartment(g)},h(_),11,Dd))),128))]),e("div",wd,[(m(!0),v(w,null,M(i.filteredDepartments,(_,g)=>(m(),v("div",{key:g,onClick:$=>i.square_select(_.id)},[e("button",{class:B(["department-button",{"department-button-selected":_.id==n.square_selected}])},h(_.name),3)],8,xd))),128))])])],64)}const Cd=T(ld,[["render",$d],["__scopeId","data-v-2306be71"]]),Sd="/static/img/appointment/img.png",Td={components:{Header:ve},data(){return{squares:[{hovered:!1},{hovered:!1},{hovered:!0},{hovered:!1}],info:["出诊查询","网上预约看诊","预约流程","医生查询"],link:["/TableSearch","/AppointmentRegistration","/Picture","/DoctorSearch"]}},methods:{},created(){}},Md=t=>(q("data-v-9177fc2e"),t=t(),P(),t),qd={class:"containerlyh",style:{display:"flex","justify-content":"center","align-items":"center",height:"180px"}},Pd=Md(()=>e("div",{class:"container2"},[e("img",{src:Sd,alt:"",style:{width:"40%"}})],-1));function Vd(t,s,l,d,n,i){const p=c("router-link");return m(),v(w,null,[e("div",qd,[(m(!0),v(w,null,M(n.squares,(u,r)=>(m(),A(p,{key:r,to:n.link[r],class:B(["square",{"square-hovered":u.hovered||r==2}]),onMouseover:_=>u.hovered=!0,onMouseout:_=>u.hovered=!1},{default:a(()=>[f(h(n.info[r]),1)]),_:2},1032,["to","class","onMouseover","onMouseout"]))),128))]),Pd],64)}const Ad=T(Td,[["render",Vd],["__scopeId","data-v-9177fc2e"]]),Bd={name:"NavBar",setup(){const t=F(!1),s=()=>{t.value=window.scrollY>200};return ae(()=>{window.addEventListener("scroll",s)}),Se(()=>{window.removeEventListener("scroll",s)}),{isSticky:t}},data(){return{unreadCount:0}},components:{messagedrawer:De,HeaderNavigation:lo},methods:{NavbarLogin(){this.$refs.HeaderNavigation&&this.$refs.HeaderNavigation.showLogin?this.$refs.HeaderNavigation.showLogin():console.error("HeaderNavigation component is not properly initialized.")},openMessageBox(){this.$refs.messageBox.openDrawer()},getUnreadCount(t){this.unreadCount=t},returnTop(){window.scrollTo({top:0,left:0,behavior:"smooth"})}},mounted(){this.$refs.messageBox.countUnread()}};function Id(t,s,l,d,n,i){const p=c("HeaderNavigation"),u=c("messagedrawer"),r=c("RouterLink"),_=c("el-badge");return m(),v(w,null,[o(p,{ref:"HeaderNavigation"},null,512),e("div",{class:B(["navbar",{sticky:d.isSticky}])},[o(u,{ref:"messageBox",class:"messageBox","onUpdate:result":i.getUnreadCount},null,8,["onUpdate:result"]),o(r,{to:"/Main",onClick:i.returnTop,class:"white-bold"},{default:a(()=>[f("首页")]),_:1},8,["onClick"]),e("a",{onClick:s[0]||(s[0]=(...g)=>i.NavbarLogin&&i.NavbarLogin(...g)),class:"white-bold"},"登录"),e("a",{class:"white-bold",onClick:s[1]||(s[1]=(...g)=>i.openMessageBox&&i.openMessageBox(...g))},"消息"),n.unreadCount!==0?(m(),A(_,{key:0,value:n.unreadCount,class:"item"},null,8,["value"])):S("",!0),e("a",{onClick:s[2]||(s[2]=(...g)=>i.returnTop&&i.returnTop(...g)),class:"white-bold"},"回到顶部")],2)],64)}const Ud=T(Bd,[["render",Id],["__scopeId","data-v-e9d7669a"]]),Rd={id:"app"},Ld={__name:"App",setup(t){return(s,l)=>(m(),v("div",Rd,[o(Ud)]))}},Nd=Ae({history:Be("/"),routes:[{path:"/",redirect:"/Main"},{path:"/Main",name:"Main",component:Do},{path:"/Bill",name:"Bill",component:bt},{path:"/Prescription",name:"Prescription",component:os},{path:"/PatientA",name:"PatientA",component:On},{path:"/PresA",name:"PresA",component:di},{path:"/AppointmentRegistration",name:"AppointmentRegistration",component:qa},{path:"/AppointmentRegistration2",name:"AppointmentRegistration2",component:Ha},{path:"/AppointmentRegistration3",name:"AppointmentRegistration3",component:gl},{path:"/AppointmentRegistration4",name:"AppointmentRegistration4",component:Ul},{path:"/AppointmentRegistration5",name:"AppointmentRegistration5",component:mr},{path:"/AppointmentRegistration6",name:"AppointmentRegistration6",component:Sr},{path:"/AppointmentRegistration7",name:"AppointmentRegistration7",component:uc},{path:"/AppointmentRegistration8",name:"AppointmentRegistration8",component:Ec},{path:"/TableSearch",name:"TableSearch",component:ad},{path:"/DoctorSearch",name:"DoctorSearch",component:Cd},{path:"/Picture",name:"Picture",component:Ad},{path:"/MedicineA",name:"MedicineA",component:we},{path:"/PharmaCist",name:"PharmaCist",component:ya}]}),X=Te(Ld);for(const[t,s]of Object.entries(Ie))X.component(t,s);X.config.globalProperties.$axios=J;X.provide("$identity_num","0");X.config.productionTip=!1;X.use(Nd);X.use(qe);X.use(be);X.mount("#app");
