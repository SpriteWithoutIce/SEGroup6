import{B as ve,ai as u,o as m,c as v,a as t,V as s,P as l,T as f,S as C,U as p,aw as P,ax as A,ay as se,O as q,F as w,a8 as M,e as L,k as oe,j as ae,a3 as he,f as ge,d as $e,Q as R,af as ye,J as V,al as Q,az as ie,Z as Ce,at as Se}from"./@vue-BmH4dvKI.js";import{C as be}from"./crypto-js-Ci0zXM0r.js";import{V as E}from"./vue-cookies-Dep2syKb.js";import{R as Te,a as Me,c as Pe,b as Ae}from"./vue-router-CGjTgPtb.js";import{E as B,a as qe,i as Ve}from"./element-plus-BrVYwv51.js";import{a as W}from"./axios-G5LVpFxl.js";import{Q as Ie}from"./@element-plus-BZs8tJsE.js";import"./lodash-es-WEemOz_S.js";import"./@vueuse-nP03j2kH.js";import"./@popperjs-D9SI2xQl.js";import"./@ctrl-r5W6hzzQ.js";import"./dayjs-DaDYfFNR.js";import"./async-validator-DKvM95Vc.js";import"./memoize-one-BdPwpGay.js";import"./normalize-wheel-es-B6fDCfyv.js";import"./@floating-ui-CtcGg-6p.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))c(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const _ of i.addedNodes)_.tagName==="LINK"&&_.rel==="modulepreload"&&c(_)}).observe(document,{childList:!0,subtree:!0});function a(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function c(n){if(n.ep)return;n.ep=!0;const i=a(n);fetch(n.href,i)}})();const I={identityNum:0},Be={updateIdentityNum(e){I.identityNum=e}},Ue="/static/jpg/banner2-k7fdBEjn.jpg",S=(e,o)=>{const a=e.__vccOpts||e;for(const[c,n]of o)a[c]=n;return a},Re={data(){return{identityNum:ve("$identity_num"),receivedidCard:"",receivedtype:"",loginVisible:!1,isLogin:!0,notLogin:!1,loginForm:{idCard:"",userType:"",password:"",remember:!1,autoLogin:!1},msg:"",rules:{idCard:[{required:!0,message:"请输入账号",trigger:"blur"},{pattern:/^\d{6,20}$/,message:"账号必须为6~20位数字",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]}}},mounted(){this.checkLoginStatus()},methods:{updateIdentityNum(e){Be.updateIdentityNum(e)},getUserData(e,o,a){return new Promise((c,n)=>{let i=this,_={idCard:e,password:be.SHA256(o).toString(),userType:a};this.$axios.post("/api/login/",_).then(function(d){i.msg=d.data.msg,console.log(i.msg),c()}).catch(function(d){console.log(d),n(d)})})},openModal(e,o){this.receivedidCard=e,this.receivedtype=o,e!=""?(this.isLogin=!1,this.notLogin=!0):(this.isLogin=!0,this.notLogin=!1),this.loginForm.idCard="",this.loginForm.password="",this.loginVisible=!0,document.body.style.overflow="hidden"},closeModal(){this.loginVisible=!1,document.body.style.overflow=""},cancelModal(){I.identityNum===0&&B({type:"info",message:"请登录后重试 ╮(╯▽╰)╭",showClose:!0}),this.loginForm.userType="",this.closeModal()},handleLogin(){this.$refs.loginForm.validate(e=>{if(e){const{idCard:o,password:a,userType:c}=this.loginForm;this.getUserData(o,a,c).then(()=>{this.msg==="Successfully Login"?(B({showClose:!0,message:"登录成功 (๑˃̵ᴗ˂̵)",type:"success"}),this.identityNum=o,this.updateIdentityNum(o),this.$emit("update:messagebox"),this.$emit("update:currentUserCard",this.loginForm.idCard),this.$emit("update:currentUserType",this.loginForm.userType),E.set("idCard",o,"1h"),E.set("userType",c,"1h"),this.closeModal()):this.msg==="Wrong Password"?B({showClose:!0,message:"密码错误或用户类型错误 ╮(╯▽╰)╭",type:"error"}):(B({showClose:!0,message:"注册成功并已登录 (๑˃̵ᴗ˂̵)",type:"success"}),this.identityNum=o,this.updateIdentityNum(o),console.log("登录处修改identityNum为:",I.identityNum),this.$emit("update:currentUserCard",this.loginForm.idCard),this.$emit("update:currentUserType",this.loginForm.userType),E.set("idCard",o,"1h"),E.set("userType",c,"1h"),this.closeModal())})}else B({type:"info",message:"信息错误 ╮(╯▽╰)╭",showClose:!0})})},checkLoginStatus(){const e=E.get("idCard"),o=E.get("userType");e&&o&&(this.isLogin=!1,this.notLogin=!0,this.receivedidCard=e,this.receivedtype=o)},logout(){this.identityNum="0",this.receivedidCard="",this.currentUserType="",this.loginForm.userType="",this.updateIdentityNum(0),this.$emit("update:messagebox"),this.$emit("update:currentUserCard",""),this.$emit("update:currentUserType",""),this.isLogin=!0,this.notLogin=!1,E.remove("idCard"),E.remove("userType"),this.closeModal(),B({type:"success",message:"已退出登录 (๑˃̵ᴗ˂̵)",showClose:!0}),window.scrollTo({top:0,left:0,behavior:"smooth"}),this.$router.push({path:"/Main"})}}},le=e=>(P("data-v-46fadadd"),e=e(),A(),e),Ne={key:0,class:"modal-background"},Le={class:"modal-container"},Fe={class:"top-section"},je=le(()=>t("img",{src:Ue,alt:"背景图片",class:"background-image"},null,-1)),He=le(()=>t("div",{class:"cancel-icon"},"X",-1)),ze=[He],Ee=le(()=>t("div",{class:"mid-section"},null,-1)),Oe={key:0,class:"bottom-section"},Ye={class:"button-group"},Ge={key:1,class:"bottom-section"},Je={class:"user-info"},We=le(()=>t("title",null,"当前用户信息",-1)),Ke={class:"button-group"};function Ze(e,o,a,c,n,i){const _=u("el-input"),d=u("el-form-item"),r=u("el-option"),h=u("el-select"),g=u("el-form"),x=u("el-button"),D=u("RouterLink");return n.loginVisible?(m(),v("div",Ne,[t("div",Le,[t("div",Fe,[je,t("div",{class:"cancel-btn",onClick:o[0]||(o[0]=(...$)=>i.cancelModal&&i.cancelModal(...$))},ze)]),Ee,n.isLogin?(m(),v("div",Oe,[s(g,{model:n.loginForm,rules:n.rules,ref:"loginForm",class:"form","label-width":"auto"},{default:l(()=>[s(d,{label:"身份证号",prop:"idCard",class:"input-item"},{default:l(()=>[s(_,{modelValue:n.loginForm.idCard,"onUpdate:modelValue":o[1]||(o[1]=$=>n.loginForm.idCard=$)},null,8,["modelValue"])]),_:1}),s(d,{label:"密码",prop:"password",class:"input-item"},{default:l(()=>[s(_,{modelValue:n.loginForm.password,"onUpdate:modelValue":o[2]||(o[2]=$=>n.loginForm.password=$),type:"password"},null,8,["modelValue"])]),_:1}),s(d,{label:"身份",prop:"idCard",class:"input-item3"},{default:l(()=>[s(h,{modelValue:n.loginForm.userType,"onUpdate:modelValue":o[3]||(o[3]=$=>n.loginForm.userType=$),placeholder:"身份选择",class:"input-item3"},{default:l(()=>[s(r,{label:"医生",value:"医生"}),s(r,{label:"普通用户",value:"普通用户"}),s(r,{label:"管理员",value:"管理员"})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","rules"]),t("div",Ye,[s(x,{type:"primary",onClick:i.handleLogin,class:"input-item2"},{default:l(()=>[f("登录")]),_:1},8,["onClick"])])])):C("",!0),n.notLogin?(m(),v("div",Ge,[t("div",Je,[We,t("p",null,"身份证号："+p(n.receivedidCard),1),t("p",null,"用户类型："+p(n.receivedtype),1)]),t("div",Ke,[s(D,{to:"/Main"},{default:l(()=>[s(x,{type:"danger",onClick:i.logout,class:"input-item2"},{default:l(()=>[f("退出登录")]),_:1},8,["onClick"])]),_:1})])])):C("",!0)])])):C("",!0)}const Qe=S(Re,[["render",Ze],["__scopeId","data-v-46fadadd"]]),Xe={data(){return{isVisible:!1}},methods:{openModal(e){this.isVisible=!0,document.body.style.overflow="hidden",this.form.office=e.office,this.form.time=e.time,this.form.medicine=e.medicine},closeModal(){this.isVisible=!1,document.body.style.overflow=""}}},et={key:0,class:"modal-background"},tt={class:"modal-container"},nt=se('<div class="content" data-v-7e265ebf><h1 data-v-7e265ebf>系统介绍</h1><h3 data-v-7e265ebf>一.预约挂号</h3><div class="line" data-v-7e265ebf><p style="margin-left:15px;" data-v-7e265ebf> 本系统提供医生的查询，方便用户看本诊所总共有哪些医生。用户能够在挂号页面选择想要的科室、医生和时间段进行挂号预约，每天凌晨00:00放号，可以进行复诊操作。 </p></div><h3 data-v-7e265ebf>二.处方开具</h3><div class="line" data-v-7e265ebf><p style="margin-left:15px;" data-v-7e265ebf> 医生可以根据患者的症状开具对应的处方。开具处方的时候医生要能够根据症状或者名字查询药物。同时每个药物应该有价格，医生开具处方后要能自动结算价格。 </p></div><h3 data-v-7e265ebf>三.历史记录查询</h3><div class="line" data-v-7e265ebf><p style="margin-left:15px;" data-v-7e265ebf> 患者能查询自己的挂号和问诊记录，得到挂号信息和处方单子。医生能够查询自己名下挂号的患者，和自己开具的单子。 </p></div><h3 data-v-7e265ebf>四.药物登记&amp;医生登记</h3><div class="line" data-v-7e265ebf><p style="margin-left:15px;" data-v-7e265ebf> 药剂师可以把药物和医生录入到后端系统，药物信息包含：名字，种类，适应症状和价格等等。 </p></div><h3 data-v-7e265ebf>五.通知系统</h3><div class="line" data-v-7e265ebf><p style="margin-left:15px;" data-v-7e265ebf> 患者能够收到一些特定的通知，如预约成功，预约被取消了，一定时间内没缴费会发缴费等通知。 </p></div><h3 data-v-7e265ebf>六.缴费系统</h3><div class="line" data-v-7e265ebf><p style="margin-left:15px;" data-v-7e265ebf>患者能够通过该系统缴纳医疗费用。</p></div></div>',1),ot={class:"button"};function st(e,o,a,c,n,i){const _=u("el-button");return n.isVisible?(m(),v("div",et,[t("div",tt,[nt,t("div",ot,[s(_,{onClick:i.closeModal},{default:l(()=>[f("退出")]),_:1},8,["onClick"])])])])):C("",!0)}const it=S(Xe,[["render",st],["__scopeId","data-v-7e265ebf"]]),at={name:"BillDetails",data(){return{isVisible:!1,form:{type:"",issue:"",price:0,date:"",id:0}}},methods:{openModal(e){this.isVisible=!0,document.body.style.overflow="hidden",this.form.type=e.type,this.form.department=e.department,this.form.price=e.price,this.form.date=e.date,this.form.id=e.id},closeModal(){this.isVisible=!1,document.body.style.overflow=""},cancelModal(){B({type:"info",message:"取消缴费 ╮(╯▽╰)╭",showClose:!0}),this.closeModal()},submitForm(){this.$emit("update:pay-status",this.form.id),B({showClose:!0,message:"缴费成功 ╰(*°▽°*)╯",type:"success"}),this.closeModal()}}},lt={key:0,class:"modal-background"},rt={class:"modal-container"},ct={class:"button-group"};function dt(e,o,a,c,n,i){const _=u("el-form-header"),d=u("el-form-item"),r=u("el-button"),h=u("el-form");return n.isVisible?(m(),v("div",lt,[t("div",rt,[s(h,{model:n.form,class:"form","label-width":"auto",style:{"max-width":"600px"}},{default:l(()=>[s(_,{class:"form-header"},{default:l(()=>[f("缴费详情")]),_:1}),s(d,{label:"类型"},{default:l(()=>[f(p(n.form.type),1)]),_:1}),s(d,{label:"科室"},{default:l(()=>[f(p(n.form.department),1)]),_:1}),s(d,{label:"费用"},{default:l(()=>[f(p(n.form.price)+" 元 ",1)]),_:1}),s(d,{label:"时间"},{default:l(()=>[f(p(n.form.date),1)]),_:1}),t("div",ct,[s(r,{onClick:i.submitForm,type:"primary",plain:!0},{default:l(()=>[f("确认缴费")]),_:1},8,["onClick"]),s(r,{onClick:i.cancelModal},{default:l(()=>[f("取消")]),_:1},8,["onClick"])])]),_:1},8,["model"])])])):C("",!0)}const ut=S(at,[["render",dt],["__scopeId","data-v-a94da714"]]),mt={created(){this.identityNum=I.identityNum,console.log("BillList获取的identityNum为：",this.identityNum)},data(){return{identityNum:0,desc:"缴费列表统计",bill:[],pagination:{total:0,currentPage:1,pageSize:10},filteredBills:[],filteredBillsDiv:[]}},components:{BillDetails:ut},methods:{getBillsData(){return new Promise((e,o)=>{let a=this;this.$axios.post("/api/bills/list/",{identity_num:this.identityNum,action:"getBillsData"}).then(function(c){a.bill=c.data.bill,console.log(a.bill),e()}).catch(function(c){console.log(c),o(c)}),console.log("BillList发送的请求参数:",{identity_num:this.identityNum})})},handleCurrentChange(e){this.pagination.currentPage=e;const o=(this.pagination.currentPage-1)*this.pagination.pageSize,a=o+this.pagination.pageSize;this.filteredBillsDiv=this.filteredBills.slice(o,a),this.pagination.total=this.filteredBills.length},showBillDetails(e){this.$refs.BillDetails.openModal(e)},selectFunc(e){this.filteredBills=this.bill.filter(o=>o.payStatus===e),this.handleCurrentChange(1)},changeBillStatus(e){return new Promise((o,a)=>{let c=this;this.$axios.post("/api/bills/list/",{identity_num:this.identityNum,action:"changeBillStatus",item_id:e}).then(function(n){c.bill=n.data.bill,console.log(c.bill),o()}).catch(function(n){console.log(n),a(n)})})},updatePayStatus(e){this.changeBillStatus(e).then(()=>{this.selectFunc(!1)})}},mounted(){this.getBillsData().then(()=>{this.selectFunc(!1),this.handleCurrentChange(1)})}},ht=e=>(P("data-v-604cc590"),e=e(),A(),e),pt=ht(()=>t("span",null,"缴费列表",-1)),_t={class:"main"},ft={key:0},vt={key:1,class:"butAbanText"};function gt(e,o,a,c,n,i){const _=u("BillDetails"),d=u("el-menu-item"),r=u("el-sub-menu"),h=u("el-menu"),g=u("el-aside"),x=u("el-header"),D=u("el-table-column"),$=u("el-button"),k=u("el-table"),y=u("el-pagination"),b=u("el-main"),T=u("el-footer"),z=u("el-container");return m(),v("div",null,[s(_,{"onUpdate:payStatus":i.updatePayStatus,ref:"BillDetails"},null,8,["onUpdate:payStatus"]),s(z,{class:"componentBody"},{default:l(()=>[s(z,null,{default:l(()=>[s(g,null,{default:l(()=>[s(h,{class:"aside my-menu","default-active":"1","unique-opened":!0},{default:l(()=>[s(r,{index:"1"},{title:l(()=>[pt]),default:l(()=>[s(d,{index:"1",onClick:o[0]||(o[0]=F=>i.selectFunc(!1))},{default:l(()=>[f("未缴费")]),_:1}),s(d,{index:"2",onClick:o[1]||(o[1]=F=>i.selectFunc(!0))},{default:l(()=>[f("已缴费")]),_:1})]),_:1})]),_:1})]),_:1}),s(z,null,{default:l(()=>[s(x,{height:"30px",style:{padding:"0",margin:"0"}}),s(b,{class:"el-main"},{default:l(()=>[t("div",_t,[s(k,{data:n.filteredBillsDiv,class:"el-table"},{default:l(()=>[s(D,{prop:"type",label:"类型"}),s(D,{prop:"department",label:"开具科室"}),s(D,{prop:"price",label:"费用（元）"}),s(D,{prop:"date",label:"创建时间"}),s(D,{style:{"text-align":"right"},label:"操作"},{default:l(F=>[F.row.payStatus===!1?(m(),v("div",ft,[s($,{class:"pay-button",onClick:J=>i.showBillDetails(F.row)},{default:l(()=>[f("缴费")]),_:2},1032,["onClick"])])):(m(),v("div",vt,"已缴费，无需操作"))]),_:1})]),_:1},8,["data"]),s(y,{class:"page","current-page":n.pagination.currentPage,"page-size":n.pagination.pageSize,total:n.pagination.total,"pager-count":3,background:"",layout:"prev, pager, next, total","onUpdate:currentPage":i.handleCurrentChange},null,8,["current-page","page-size","total","onUpdate:currentPage"])])]),_:1}),s(T,{height:"30px",align:"center",class:"footer"},{default:l(()=>[f("SE_GROUP_6")]),_:1})]),_:1})]),_:1})]),_:1})])}const yt=S(mt,[["render",gt],["__scopeId","data-v-604cc590"]]),bt={},kt=e=>(P("data-v-8827876a"),e=e(),A(),e),Dt={class:"sign-container"},wt={class:"neirong"},xt=kt(()=>t("p",null,"详细信息以医院出具的单据为准！",-1));function $t(e,o){const a=u("Warning"),c=u("el-icon");return m(),v("div",Dt,[t("div",wt,[s(c,{class:"jinggao"},{default:l(()=>[s(a)]),_:1}),xt])])}const ke=S(bt,[["render",$t],["__scopeId","data-v-8827876a"]]),Ct={name:"DetailA",data(){return{isVisible:!1,form:{id:"",office:"",orderNum:"",price:"",name:"",cardNum:"",position:"",time:"",line:"",state:"",doctor:""}}},methods:{cancelRegister(){return new Promise((e,o)=>{let a={action:"cancelRegister",id:this.form.id};this.$axios.post("/api/registers/cancel/",a).then(function(c){console.log(c.data.msg),e()}).catch(function(c){console.log(c),o(c)})})},openModal(e){this.isVisible=!0,document.body.style.overflow="hidden",this.form.id=e.id,this.form.office=e.office,this.form.orderNum=e.orderNum,this.form.price=e.price,this.form.name=e.name,this.form.cardNum=e.cardNum,this.form.line=e.line,this.form.position=e.position,this.form.time=e.time,this.form.state=e.state,this.form.doctor=e.doctor},closeModal(){this.isVisible=!1,document.body.style.overflow=""},cancelModal(){this.cancelRegister().then(()=>{B({type:"info",message:"取消挂号成功 ╮(╯▽╰)╭",showClose:!0}),this.closeModal()})}}},j=e=>(P("data-v-9a53f420"),e=e(),A(),e),St={key:0,class:"modal-background"},Tt={class:"modal-container"},Mt={class:"head"},Pt={style:{"margin-left":"15px","font-size":"larger",color:"white"}},At={key:0,style:{"margin-left":"15px","font-size":"small",color:"white"}},qt={class:"content"},Vt=j(()=>t("h3",null,"就诊信息",-1)),It={class:"line"},Bt=j(()=>t("p",{style:{"margin-left":"15px"}},"就诊科室：",-1)),Ut={class:"line"},Rt=j(()=>t("p",{style:{"margin-left":"15px"}},"科室地址：",-1)),Nt={class:"line"},Lt=j(()=>t("p",{style:{"margin-left":"15px"}},"医生：",-1)),Ft={class:"line"},jt=j(()=>t("p",{style:{"margin-left":"15px"}},"预约时间：",-1)),Ht={class:"y"},zt=j(()=>t("p",{class:"w"},"就诊时间以医生实际看诊叫号顺序为准",-1)),Et={class:"line"},Ot=j(()=>t("p",{style:{"margin-left":"15px"}},"排队号：",-1)),Yt={class:"line"},Gt=j(()=>t("p",{style:{"margin-left":"15px"}},"就诊人：",-1)),Jt={class:"line"},Wt=j(()=>t("p",{style:{"margin-left":"15px"}},"电子就医卡号：",-1)),Kt=j(()=>t("div",{class:"m"},null,-1)),Zt={class:"content"},Qt=j(()=>t("h3",null,"订单信息",-1)),Xt={class:"line"},en=j(()=>t("p",{style:{"margin-left":"15px"}},"订单号：",-1)),tn={class:"line"},nn=j(()=>t("p",{style:{"margin-left":"15px"}},"费用：",-1)),on={class:"button"},sn={class:"button"};function an(e,o,a,c,n,i){const _=u("Bell"),d=u("el-icon"),r=u("el-button");return n.isVisible?(m(),v("div",St,[t("div",Tt,[t("div",Mt,[t("p",Pt,p(n.form.state),1),n.form.state==="已预约"?(m(),v("p",At," 请在约定时间前往就诊 ")):C("",!0)]),t("div",qt,[Vt,t("div",It,[Bt,t("p",null,p(n.form.office),1)]),t("div",Ut,[Rt,t("p",null,p(n.form.position),1)]),t("div",Nt,[Lt,t("p",null,p(n.form.doctor),1)]),t("div",Ft,[jt,t("p",null,p(n.form.time),1)]),t("div",Ht,[s(d,{class:"w"},{default:l(()=>[s(_)]),_:1}),zt]),t("div",Et,[Ot,t("p",null,p(n.form.line),1)]),t("div",Yt,[Gt,t("p",null,p(n.form.name),1)]),t("div",Jt,[Wt,t("p",null,p(n.form.cardNum),1)])]),Kt,t("div",Zt,[Qt,t("div",Xt,[en,t("p",null,p(n.form.orderNum),1)]),t("div",tn,[nn,t("p",null,"现场待支付医事服务费"+p(n.form.price),1)])]),t("div",on,[n.form.state==="已预约"?(m(),q(r,{key:0,onClick:i.cancelModal},{default:l(()=>[f("取消挂号")]),_:1},8,["onClick"])):C("",!0)]),t("div",sn,[s(r,{onClick:i.closeModal},{default:l(()=>[f("退出")]),_:1},8,["onClick"])])])])):C("",!0)}const ln=S(Ct,[["render",an],["__scopeId","data-v-9a53f420"]]),rn={name:"HistoryA",props:{filterInfo:{type:Array,required:!0}},data(){return{circleUrl:"https://cube.elemecdn.com/3/7c/3ea6beec64369c2642b92c6726f1epng.png"}},components:{DetailA:ln},methods:{showPrescriptionDetails(e){this.$refs.detail.openModal(e)},cancelRegister(e){return new Promise((o,a)=>{let c={action:"cancelRegister",id:e.id};this.$axios.post("/api/registers/cancel/",c).then(function(n){console.log(n.data.msg),o()}).catch(function(n){console.log(n),a(n)})})},cancel(e){this.cancelRegister(e).then(()=>{B({type:"info",message:"取消挂号成功 ╮(╯▽╰)╭",showClose:!0})})}}},O=e=>(P("data-v-705afdbf"),e=e(),A(),e),cn={class:"container"},dn={class:"card-container"},un={class:"header"},mn={class:"row"},hn={class:"row1"},pn=O(()=>t("p",{style:{"font-size":"larger","margin-right":"10px","font-weight":"600"}},"门诊号",-1)),_n=O(()=>t("div",{class:"row2"},[t("p",null,"猫猫就诊医院")],-1)),fn={style:{color:"darkblue","margin-left":"60px"}},vn={class:"content"},gn={class:"line"},yn=O(()=>t("p",null,"订单号：",-1)),bn={class:"line"},kn=O(()=>t("p",null,"费用：",-1)),Dn={class:"line"},wn=O(()=>t("p",null,"就诊人：",-1)),xn={class:"line"},$n=O(()=>t("p",null,"电子就医卡号：",-1)),Cn={class:"line"},Sn=O(()=>t("p",null,"科室地址：",-1)),Tn={class:"line"},Mn=O(()=>t("p",null,"预约时间：",-1)),Pn={class:"line"},An=O(()=>t("p",null,"排队号：",-1)),qn={class:"neirong"},Vn=O(()=>t("p",null," 实际就诊时间以医院安排为准！",-1)),In={class:"button"};function Bn(e,o,a,c,n,i){const _=u("DetailA"),d=u("el-avatar"),r=u("el-divider"),h=u("Warning"),g=u("el-icon"),x=u("el-button"),D=u("el-card"),$=u("el-footer");return m(),v(w,null,[s(_,{ref:"detail"},null,512),t("div",cn,[t("div",dn,[(m(!0),v(w,null,M(a.filterInfo,k=>(m(),q(D,{key:k,style:{width:"30%","min-height":"400px",margin:"1.6%"}},{default:l(()=>[t("div",un,[s(d,{size:50,src:n.circleUrl},null,8,["src"]),t("div",mn,[t("div",hn,[pn,t("p",null,p(k.office),1)]),_n]),t("p",fn,p(k.state),1)]),s(r,{class:"divider"}),t("div",vn,[t("div",gn,[yn,t("p",null,p(k.orderNum),1)]),t("div",bn,[kn,t("p",null,p(k.price),1)]),t("div",Dn,[wn,t("p",null,p(k.name),1)]),t("div",xn,[$n,t("p",null,p(k.cardNum),1)]),t("div",Cn,[Sn,t("p",null,p(k.position),1)]),t("div",Tn,[Mn,t("p",null,p(k.time),1)]),t("div",Pn,[An,t("p",null,p(k.line),1)])]),t("div",qn,[s(g,{class:"jinggao"},{default:l(()=>[s(h)]),_:1}),Vn]),s(r,{class:"divider"}),t("div",In,[s(x,{type:"primary",plain:"",onClick:y=>i.showPrescriptionDetails(k),class:"xiang"},{default:l(()=>[f("显示详情")]),_:2},1032,["onClick"]),k.state==="已预约"?(m(),q(x,{key:0,type:"primary",plain:"",onClick:y=>i.cancel(k)},{default:l(()=>[f("取消挂号")]),_:2},1032,["onClick"])):C("",!0)])]),_:2},1024))),128))]),s($,{height:"30px",align:"center",class:"footer"},{default:l(()=>[f("SE_GROUP_6")]),_:1})])],64)}const Un=S(rn,[["render",Bn],["__scopeId","data-v-705afdbf"]]),Rn=e=>(P("data-v-7e7ddd06"),e=e(),A(),e),Nn={class:"all-container",width:"100%"},Ln={class:"search-container"},Fn=Rn(()=>t("div",{class:"wenzi"},[t("p",{class:"guahao"},"挂号查询"),t("p",{class:"back"},"首页 > 挂号查询")],-1)),jn={class:"input-container"},Hn={class:"chaxun"},zn={__name:"PatientA",setup(e){const o=L(""),a=L([]),c=()=>new Promise((_,d)=>{let r={action:"getRegistersData",identity_num:I.identityNum};W.post("/api/registers/list/",r).then(h=>{a.value=h.data.registers,console.log("Registers data fetched:",a.value),_()}).catch(h=>{console.error("Error fetching registers data:",h),d(h)})}),n=()=>{console.log(`查询内容是：${o.value}`)},i=oe(()=>a.value.filter(_=>/^\d/.test(o.value)?_.time.split(" ")[0]===o.value:o.value?_.office===o.value:!0));return ae(()=>{if(I.identityNum=="0"){console.log("未登录");return}c().then(()=>{})}),(_,d)=>{const r=u("el-divider"),h=u("search"),g=u("el-icon"),x=u("el-input"),D=u("el-button"),$=u("scroll"),k=u("el-container");return m(),q(k,{style:{height:"100vh"}},{default:l(()=>[s($,null,{default:l(()=>[t("div",Nn,[t("div",Ln,[Fn,s(r,{class:"divider"})]),s(ke),t("div",jn,[t("div",Hn,[s(x,{modelValue:o.value,"onUpdate:modelValue":d[0]||(d[0]=y=>o.value=y),style:{width:"300px",height:"40px"},placeholder:"请输入就诊日期(例:2024-05-09) 或 科室",class:"shuru"},{prefix:l(()=>[s(g,{class:"el-input__icon"},{default:l(()=>[s(h)]),_:1})]),_:1},8,["modelValue"]),s(D,{color:"#DBA979",dark:_.isDark,plain:"",class:"searchButton",style:{width:"80px",height:"40px"},onClick:n},{default:l(()=>[f("查询")]),_:1},8,["dark"]),t("p",null,p(o.value),1)])]),s(Un,{filterInfo:i.value},null,8,["filterInfo"])])]),_:1})]),_:1})}}},En=S(zn,[["__scopeId","data-v-7e7ddd06"]]),On={name:"PrescriptionDetails",data(){return{isVisible:!1,image:null,totalPrice:0,form:{id:"",name:"",date:new Date().toISOString().substr(0,10),gender:"",advice:"",medicines:[{name:"",cnt:0,price:0,times:0,totalPrice:0}]},medicinesDB:[]}},computed:{totalPrice(){return this.totalPrice=this.form.medicines.reduce((e,o)=>e+parseFloat(o.totalPrice||0),0).toFixed(2),this.form.medicines.reduce((e,o)=>e+parseFloat(o.totalPrice||0),0).toFixed(2)}},methods:{writeBackPrescriptionDetailsData(){return new Promise((e,o)=>{let a={id:this.form.id,medicines:this.form.medicines,suggestion:this.form.advice,totalPrice:this.totalPrice,action:"addTreatmentData"};console.log("写回处方前的数据"+a.id+" "+a.totalPrice+" "+a.medicines+" "+a.suggestion),this.$axios.post("/api/prescriptionDetailsWriteBack/",a).then(function(c){console.log(c.data.msg),e()}).catch(function(c){console.log(c),console.log("Prescription Details Write Back Failed"),o(c)})})},handleImageUpload(e){const o=e.target.files[0];if(o){const a=new FileReader;a.onload=c=>{this.image=c.target.result},a.readAsDataURL(o)}},getMedicineData(){return new Promise((e,o)=>{let a=this;this.$axios.get("/api/medicine/list/").then(function(c){a.medicinesDB=c.data.medicine,console.log(a.medicinesDB),e()}).catch(function(c){console.log(c),o(c)})})},openModal(e){this.form.id=e.Id,this.isVisible=!0,document.body.style.overflow="hidden",this.form.name=e.name,this.form.gender=e.sex,console.log("打开订单时的列的信息"+this.form.id+" "+this.form.name)},closeModal(){this.isVisible=!1,document.body.style.overflow=""},cancelModal(){B({type:"info",message:"取消提交 ╮(╯▽╰)╭",showClose:!0}),this.closeModal()},submitForm(){console.log("Submitting form:",this.form),B({showClose:!0,message:"提交成功 ╰(*°▽°*)╯",type:"success"}),console.log("提交表单 完成"+this.form),this.writeBackPrescriptionDetailsData(),this.form.advice="",this.form.date="",this.form.gender="",this.form.id="",this.form.medicines=[{name:"",cnt:0,price:0,times:0,totalPrice:0}],this.form.name="",this.totalPrice=0,this.closeModal()},addMedicine(){this.form.medicines.push({name:"",cnt:0,price:0,times:0,totalPrice:0})},removeMedicine(e){this.form.medicines.splice(e,1)},calculatePrice(e){const o=this.medicinesDB.find(a=>a.name===e.name);o&&(e.price=o.price,e.totalPrice=(o.price*e.cnt).toFixed(2))},querySearch(e,o){const a=this.medicinesDB.map(n=>({value:n.name,symptoms:n.use})),c=e?a.filter(this.createFilter(e)):a;o(c)},createFilter(e){return o=>{const a=o.value.toLowerCase().includes(e.toLowerCase()),c=o.symptoms.toLowerCase().includes(e.toLowerCase());return a||c}},handleSelect(e){return o=>{const a=this.medicinesDB.find(c=>c.name===o.value);if(a){const c=this.form.medicines[e];c.name=a.name,c.price=a.price,this.calculatePrice(c)}}},generateReport(){const e="<h2 style='font-family: 宋体;font-size: 24px;'>猫猫就诊报告</h2>",o=this.image?`<img src="${this.image}" alt="就诊图片" style="max-width: 100%;">`:"",a=`
    <p style='font-family: 宋体;font-size: 14px;'>
      姓名: ${this.form.name} <br/>
      就诊日期: ${this.form.date} <br/>
      性别: ${this.form.gender} <br/>
      药物列表: <br/>
      ${this.form.medicines.map(d=>`  - ${d.name}: ${d.cnt} 个，总价: ¥${d.totalPrice}`).join("<br/>")}
      <br/>
      医师建议: <br/>
      ${this.form.advice} <br/>
      总价: ¥${this.totalPrice}
    </p>
  `,c=e+o+a,n=new Blob([c],{type:"text/html"}),i=URL.createObjectURL(n),_=document.createElement("a");_.href=i,_.download=`${this.form.name}-就诊报告.html`,document.body.appendChild(_),_.click(),document.body.removeChild(_),URL.revokeObjectURL(i),B({showClose:!0,message:"报告生成成功 ╰(*°▽°*)╯",type:"success"})}},mounted(){this.getMedicineData().then(()=>{})}},Yn=e=>(P("data-v-022eff82"),e=e(),A(),e),Gn={key:0,class:"modal-background"},Jn={class:"modal-container"},Wn=Yn(()=>t("div",{class:"form-header"},"处方开具",-1)),Kn={class:"button-group"};function Zn(e,o,a,c,n,i){const _=u("el-input"),d=u("el-form-item"),r=u("el-date-picker"),h=u("el-radio"),g=u("el-radio-group"),x=u("el-autocomplete"),D=u("el-input-number"),$=u("el-button"),k=u("el-form");return n.isVisible?(m(),v("div",Gn,[t("div",Jn,[s(k,{model:n.form,class:"form","label-width":"auto",style:{"max-width":"600px"}},{default:l(()=>[Wn,s(d,{label:"姓名",class:"namelable"},{default:l(()=>[s(_,{modelValue:n.form.name,"onUpdate:modelValue":o[0]||(o[0]=y=>n.form.name=y)},null,8,["modelValue"])]),_:1}),s(d,{label:"就诊日期"},{default:l(()=>[s(r,{modelValue:n.form.date,"onUpdate:modelValue":o[1]||(o[1]=y=>n.form.date=y),type:"date"},null,8,["modelValue"])]),_:1}),s(d,{label:"性别"},{default:l(()=>[s(g,{modelValue:n.form.gender,"onUpdate:modelValue":o[2]||(o[2]=y=>n.form.gender=y)},{default:l(()=>[s(h,{value:"男"},{default:l(()=>[f("男")]),_:1}),s(h,{value:"女"},{default:l(()=>[f("女")]),_:1})]),_:1},8,["modelValue"])]),_:1}),(m(!0),v(w,null,M(n.form.medicines,(y,b)=>(m(),q(d,{key:b},{default:l(()=>[s(x,{modelValue:y.name,"onUpdate:modelValue":T=>y.name=T,"trigger-on-focus":!1,"fetch-suggestions":i.querySearch,placeholder:"药物名称或症状",onSelect:T=>i.handleSelect(b),"show-all":!0},null,8,["modelValue","onUpdate:modelValue","fetch-suggestions","onSelect"]),s(D,{modelValue:y.cnt,"onUpdate:modelValue":T=>y.cnt=T,min:0,step:1,placeholder:"数量",onChange:T=>i.calculatePrice(y)},{default:l(()=>[f("药物数")]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"]),s(d,{label:"疗程"},{default:l(()=>[s(D,{modelValue:y.times,"onUpdate:modelValue":T=>y.times=T,min:0},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),n.form.medicines.length>1?(m(),q($,{key:0,type:"danger",icon:"el-icon-delete",onClick:T=>i.removeMedicine(b),class:"delete-button"},{default:l(()=>[f("删除药物")]),_:2},1032,["onClick"])):C("",!0)]),_:2},1024))),128)),s(d,null,{default:l(()=>[s($,{onClick:i.addMedicine,type:"primary"},{default:l(()=>[f("添加药物")]),_:1},8,["onClick"])]),_:1}),s(d,{label:"上传图片",type:"primary"},{default:l(()=>[t("input",{type:"file",onChange:o[3]||(o[3]=(...y)=>i.handleImageUpload&&i.handleImageUpload(...y))},null,32)]),_:1}),s(d,{label:"医师建议"},{default:l(()=>[s(_,{type:"textarea",modelValue:n.form.advice,"onUpdate:modelValue":o[4]||(o[4]=y=>n.form.advice=y)},null,8,["modelValue"])]),_:1}),s(d,null,{default:l(()=>[s(_,{modelValue:i.totalPrice,"onUpdate:modelValue":o[5]||(o[5]=y=>i.totalPrice=y),disabled:"",placeholder:"总价"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"]),t("div",Kn,[s($,{onClick:i.submitForm,type:"primary"},{default:l(()=>[f("提交")]),_:1},8,["onClick"]),s($,{onClick:i.cancelModal},{default:l(()=>[f("退出")]),_:1},8,["onClick"]),s($,{onClick:i.generateReport,type:"success"},{default:l(()=>[f("生成报告")]),_:1},8,["onClick"])])])])):C("",!0)}const Qn=S(On,[["render",Zn],["__scopeId","data-v-022eff82"]]),Xn={data(){return{desc:"问诊列表统计",patient:[{}],filteredPatients:[],currentPatients:[],pagination:{total:0,currentPage:1,pageSize:10}}},components:{PrescriptionDetails:Qn},methods:{handleCurrentChange(e){this.pagination.currentPage=e;const o=(this.pagination.currentPage-1)*this.pagination.pageSize,a=o+this.pagination.pageSize;this.currentPatients=this.filteredPatients.slice(o,a),this.pagination.total=this.filteredPatients.length,console.log(this.patient)},getRegisterData(){return console.log("getRegisterDate done"),new Promise((e,o)=>{let a=this;this.$axios.post("/api/registers/list/",{action:"getDoctorRegisters",identity_num:I.identityNum}).then(function(c){a.patient=c.data.registers,console.log(a.patient),e()}).catch(function(c){console.log(c.response),o(c)})})},showPrescriptionDetails(e){this.$refs.prescriptionDetails.openModal(e)},selectFunc(e){let o=new Date;o.setHours(0,0,0,0);let a=new Date(o);switch(a.setDate(a.getDate()-1),e){case"1":this.filteredPatients=this.patient.filter(c=>{let n=c.date.split("年").join("-").split("月").join("-").split("日").join("").split("-"),i=new Date(n[0],n[1]-1,n[2]);return i.setHours(0,0,0,0),i.toDateString()===o.toDateString()}),this.handleCurrentChange(1);break;case"2":this.filteredPatients=this.patient.filter(c=>{let n=c.date.split("年").join("-").split("月").join("-").split("日").join("").split("-"),i=new Date(n[0],n[1]-1,n[2]);return i.setHours(0,0,0,0),i.toDateString()===a.toDateString()}),this.handleCurrentChange(1);break;case"3":this.filteredPatients=this.patient.filter(c=>{let n=c.date.split("年").join("-").split("月").join("-").split("日").join("").split("-"),i=new Date(n[0],n[1]-1,n[2]);return i.setHours(0,0,0,0),i<a}),this.handleCurrentChange(1);break}}},mounted(){this.getRegisterData().then(()=>{this.selectFunc("1"),this.handleCurrentChange(1)})}},eo=e=>(P("data-v-76f2169c"),e=e(),A(),e),to=eo(()=>t("span",null,"问诊列表",-1));function no(e,o,a,c,n,i){const _=u("PrescriptionDetails"),d=u("el-menu-item"),r=u("el-sub-menu"),h=u("el-menu"),g=u("el-aside"),x=u("el-header"),D=u("el-table-column"),$=u("el-button"),k=u("el-table"),y=u("el-pagination"),b=u("el-main"),T=u("el-footer"),z=u("el-container");return m(),v(w,null,[s(_,{ref:"prescriptionDetails"},null,512),s(z,{style:{height:"100vh"}},{default:l(()=>[s(z,null,{default:l(()=>[s(g,{width:"200px"},{default:l(()=>[s(h,{class:"aside my-menu","default-active":"1","unique-opened":!0},{default:l(()=>[s(r,{index:"1"},{title:l(()=>[to]),default:l(()=>[s(d,{index:"1",onClick:o[0]||(o[0]=F=>i.selectFunc("1"))},{default:l(()=>[f("今日")]),_:1}),s(d,{index:"2",onClick:o[1]||(o[1]=F=>i.selectFunc("2"))},{default:l(()=>[f("昨日")]),_:1}),s(d,{index:"3",onClick:o[2]||(o[2]=F=>i.selectFunc("3"))},{default:l(()=>[f("更早")]),_:1})]),_:1})]),_:1})]),_:1}),s(z,null,{default:l(()=>[s(x,{height:"30px",style:{padding:"0",margin:"0"}}),s(b,{class:"main"},{default:l(()=>[t("div",null,[s(k,{data:n.currentPatients},{default:l(()=>[s(D,{prop:"Id",label:"单号"}),s(D,{prop:"name",label:"姓名"}),s(D,{prop:"age",label:"年龄"}),s(D,{prop:"sex",label:"性别"}),s(D,{prop:"date",style:{"background-color":"black"},label:"问诊时间"}),s(D,{style:{"text-align":"right"},label:"操作"},{default:l(F=>[s($,{class:"prescribe-button",onClick:J=>i.showPrescriptionDetails(F.row)},{default:l(()=>[f("开具处方")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),s(y,{class:"page","current-page":n.pagination.currentPage,"page-size":n.pagination.pageSize,total:n.pagination.total,"pager-count":3,background:"",layout:"prev, pager, next, total","onUpdate:currentPage":i.handleCurrentChange},null,8,["current-page","page-size","total","onUpdate:currentPage"])])]),_:1}),s(T,{height:"30px",align:"center",class:"footer"},{default:l(()=>[f("SE_GROUP_6")]),_:1})]),_:1})]),_:1})]),_:1})],64)}const oo=S(Xn,[["render",no],["__scopeId","data-v-76f2169c"]]),so={name:"WaveAnimation",mounted(){this.startWaveAnimation()},methods:{startWaveAnimation(){const e=this.$el.querySelector(".wave-svg");e.style.animationPlayState="running"}}},io=se('<svg class="wave-svg" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 72 72" data-v-0a5c361d><path fill="#3f3f3f" d="M11.976 19.277s-.326 2.164-.13 2.492S13.667 24 13.927 24s1.952.197 1.952.197l1.106-2.23l-1.301-2.23l-2.407-.984zm5.069-8.106l-.127 2.532l1.587 1.975h1.715l.888-1.285l-.381-2.761l-2.562-1.879zM26.44 8.04l-.593 1.905l.064 1.835l.96 1.664l1.634.314l1.053-1.658V9.504s-1.724-1.87-2.057-1.87s-1.06.405-1.06.405m8.471 3.859l-1.241 2.104s.254 3.134.504 3.384s2.452.97 2.452.97l1.71-1.937l-.032-3.33l-1.5-1.66zm-12.275 9.484c-.083.25-1.83 3.208-1.83 3.208l.333 3.583l-1.167 3.333l.667 3.333l3.094 1.644l2.72-.992l2.806-2.51l3.897 1.028a2.3 2.3 0 0 0 2.177-.606c.836-.837 1.675-2.101 1.624-2.256c-.083-.25-.295-3-.295-3s-2.242-3.157-2.992-2.99c0 0-1.055-4.44-4.222-5.357c-3.166-.917-4.45-.085-4.45-.085zm13.139 19.699s-1.865 2.598-1.699 2.848s1.045 3.037 1.045 3.037s2.334.457 2.417.207s.914-2.264.914-2.264l-.587-3.005zm8.395-5.495l-1.75 2.916l1.822 3.65l2.845-1.4l.469-2.528l-.905-2.299zm9.52 2.477c-.083.25-2.325 3.19-2.325 3.19l.917 3.166l1.958-.576l1.503-2.15l-.073-2.524zm4.951 7.97l-1.798 2.373l-.5 2.222l.875 1.074l2.272-.475s1.649-1.994 1.649-2.244s-.125-2.2-.125-2.2zm-18.285 4.32c-.198.987-1.024 3.056-1.024 3.056s-2.682 1.744-2.849 2.078c-.166.333-.904 2.714-.904 2.714l.87 2.613l2.179 1.508l4.792-1.273l3.35 3.116s2.822 1.283 4.155-.134s1.81-3.82 1.81-3.82l-1.24-3.183l.301-4.122s-1.722-4.715-4.39-5.215c-2.666-.5-6.8 1.412-7.05 2.662" data-v-0a5c361d></path><g fill="none" stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" data-v-0a5c361d><path d="M34.204 25.041a8 8 0 0 0-.134-.662c-1.012-4.017-4.87-6.507-8.62-5.563s-5.968 4.966-4.956 8.982q.085.331.196.647c-1.153 1.179-1.692 2.968-1.237 4.772c.674 2.678 3.247 4.338 5.746 3.709c1.684-.424 3.709-3.513 3.915-3.564s3.453 1.708 5.136 1.284c2.5-.63 3.979-3.31 3.304-5.988c-.454-1.804-1.776-3.125-3.35-3.617" data-v-0a5c361d></path><ellipse cx="19.013" cy="12.934" rx="2.688" ry="3.764" transform="rotate(-21.143 19.013 12.934)" data-v-0a5c361d></ellipse><ellipse cx="14.124" cy="21.548" rx="2.688" ry="3.763" transform="rotate(-34.043 14.124 21.548)" data-v-0a5c361d></ellipse><ellipse cx="36.131" cy="14.826" rx="3.763" ry="2.688" transform="rotate(-85.71 36.131 14.826)" data-v-0a5c361d></ellipse><path d="M27.154 6.77c1.372-.202 3.001 1.928 3.208 3.332c.303 2.056-.642 4.148-2.111 4.365s-2.905-1.275-3.208-3.332s.642-4.148 2.11-4.365m24.863 50.136q.117-.314.211-.642c1.109-3.991-1.012-8.065-4.737-9.1s-7.643 1.36-8.752 5.352c-.061.22-.108.44-.15.659c-1.586.453-2.939 1.742-3.437 3.534c-.739 2.66.675 5.377 3.158 6.067c1.673.464 4.96-1.217 5.166-1.16s2.154 3.194 3.827 3.658c2.483.69 5.095-.907 5.835-3.568c.498-1.792.003-3.594-1.121-4.8M42.4 38.532c.31-2.055 1.748-3.543 3.217-3.323s2.409 2.065 2.1 4.12s-1.745 3.525-3.216 3.324c-1.48-.203-2.412-2.06-2.1-4.12" data-v-0a5c361d></path><ellipse cx="36.297" cy="44.183" rx="2.688" ry="3.764" transform="rotate(-4.376 36.296 44.182)" data-v-0a5c361d></ellipse><ellipse cx="58.75" cy="48.983" rx="3.764" ry="2.688" transform="rotate(-56.043 58.75 48.983)" data-v-0a5c361d></ellipse><ellipse cx="53.691" cy="41.331" rx="3.763" ry="2.688" transform="rotate(-68.716 53.691 41.331)" data-v-0a5c361d></ellipse></g></svg>',1),ao=[io];function lo(e,o,a,c,n,i){return m(),v("div",null,ao)}const ro=S(so,[["render",lo],["__scopeId","data-v-0a5c361d"]]),co={data(){return{activeNames:["1","2"],table:!1,timer:null,unreadCount:0,msgCount:0,resMes:[],oriBillMes:[],billMes:[]}},methods:{countUnread(){const e=this.resMes.filter(a=>a.read===!1).length,o=this.billMes.filter(a=>a.read===!1).length;this.unreadCount=e+o,this.$emit("update:result",this.unreadCount)},getMesData(){if(I.identityNum===0){this.resMes=[],this.oriBillMes=[],this.billMes=[],this.msgCount=0,this.countUnread();return}return new Promise((e,o)=>{let a=this;this.$axios.post("api/notice/list/",{identity_num:I.identityNum,action:"getMesData"}).then(function(c){a.resMes=c.data.resMes,a.oriBillMes=c.data.billMes,a.payOverTimeQuery(),a.sortMesByTimestamp(),console.log(a.resMes),console.log(a.billMes),a.countUnread(),a.checkNewMsg(),e()}).catch(function(c){console.log(c),o(c)}),console.log("MesDrawer发送的请求参数:",{identity_num:I.identityNum})})},sortMesByTimestamp(){this.resMes.sort((e,o)=>{const a=new Date(e.timetamp);return new Date(o.timetamp)-a}),this.billMes.sort((e,o)=>{const a=new Date(e.timetamp);return new Date(o.timetamp)-a})},openDrawer(){if(I.identityNum===0){B({showClose:!0,message:"请先登录 ╮(╯▽╰)╭",type:"warning"});return}this.getMesData(),this.table=!0},turnToBill(){this.table=!1,window.scrollTo({top:0,left:0,behavior:"smooth"})},tableRowClassName({row:e,rowIndex:o}){return e.read===!1?"warning-row":e.read===!0?"success-row":""},readMes(e){return new Promise((o,a)=>{let c=this;this.$axios.post("api/notice/list/",{action:"readMes",item_id:e.item_id}).then(function(n){c.getMesData().then(()=>{o()})}).catch(function(n){console.log(n),a(n)})})},payOverTimeQuery(){this.billMes=[];const e=Date.now(),o=8*60*60*1e3,a=e+o;this.oriBillMes.forEach(c=>{const n=new Date(c.timetamp).getTime();(c.type==="处方缴费提醒"&&a-n>2*60*1e3||c.type==="处方缴费成功")&&this.billMes.push(c)})},checkNewMsg(){console.log("旧消息数：",this.msgCount),console.log("新消息数：",this.resMes.length+this.billMes.length),this.msgCount!=this.resMes.length+this.billMes.length&&this.unreadCount!==0&&(console.log("有新消息"),qe({icon:ro,title:"未读消息提示",message:"猫猫提示您，有新消息啦，请及时查看哦(>^ω^<)",duration:5e3,offset:50}),this.msgCount=this.resMes.length+this.billMes.length)},created(){if(I.identityNum==="0"){console.log("未登录");return}this.getMesData()}}},U=e=>(P("data-v-fac929d0"),e=e(),A(),e),uo={class:"myDrawer"},mo={class:"demo-collapse"},ho={class:"messageList"},po={key:0,m:"4",class:"mesBody"},_o=U(()=>t("p",null,"尊敬的患者:",-1)),fo=U(()=>t("p",null,[f("您好！您已"),t("b",null,"成功预约"),f("了我院的挂号服务。以下是您的预约详情：")],-1)),vo={m:"t-0 b-2"},go={m:"t-0 b-2"},yo={m:"t-0 b-2"},bo={m:"t-0 b-2"},ko=U(()=>t("p",null,[f(" 请您准时到达，并携带"),t("b",null,"有效身份证件及相关病历资料"),f("。 "),t("br"),f("感谢您选择我院，祝您身体健康！ ")],-1)),Do={style:{"text-align":"right"}},wo=U(()=>t("br",null,null,-1)),xo={key:1,m:"4",class:"mesBody"},$o=U(()=>t("p",null,"尊敬的患者:",-1)),Co=U(()=>t("p",null,[f("您好！我们收到了您的"),t("b",null,"预约挂号取消"),f("请求。以下是已取消的预约信息：")],-1)),So={m:"t-0 b-2"},To={m:"t-0 b-2"},Mo={m:"t-0 b-2"},Po={m:"t-0 b-2"},Ao=U(()=>t("p",null,[f(" 请您注意，若未来需要再次预约，"),t("b",null,"请提前通过我院官网进行预约"),f("。 "),t("br"),f("感谢您的理解与合作，祝您身体健康！ ")],-1)),qo={style:{"text-align":"right"}},Vo=U(()=>t("br",null,null,-1)),Io={key:0},Bo={key:1,class:"butAbanText"},Uo={class:"messageList"},Ro={key:0,m:"4",class:"mesBody"},No=U(()=>t("p",null,"尊敬的患者:",-1)),Lo=U(()=>t("p",null,[f("您好！您在我院的就诊处方"),t("b",null,"即将到达缴费截止时间"),f("。处方详情如下：")],-1)),Fo={m:"t-0 b-2"},jo={m:"t-0 b-2"},Ho={m:"t-0 b-2"},zo={m:"t-0 b-2"},Eo=U(()=>t("p",null,[f(" 请您"),t("b",null,"在30分钟内完成缴费"),f("，以免影响您的就诊计划。 "),t("br"),f("感谢您的配合，祝您身体健康！ ")],-1)),Oo={style:{"text-align":"right"}},Yo=U(()=>t("br",null,null,-1)),Go={key:1,m:"4",class:"mesBody"},Jo=U(()=>t("p",null,"尊敬的患者:",-1)),Wo=U(()=>t("p",null,[f("您好！您在我院的就诊处方"),t("b",null,"缴费成功"),f("。处方详情如下：")],-1)),Ko={m:"t-0 b-2"},Zo={m:"t-0 b-2"},Qo={m:"t-0 b-2"},Xo={m:"t-0 b-2"},es=U(()=>t("p",null," 感谢您对我们医院的信任与支持。如有任何疑问或需要进一步的帮助，请随时联系我们。祝您身体健康！ ",-1)),ts={style:{"text-align":"right"}},ns=U(()=>t("br",null,null,-1)),os={key:0},ss={key:1,class:"butAbanText"};function is(e,o,a,c,n,i){const _=u("Calendar"),d=u("el-icon"),r=u("el-table-column"),h=u("el-button"),g=u("el-table"),x=u("el-collapse-item"),D=u("Money"),$=u("router-link"),k=u("el-collapse"),y=u("el-drawer");return m(),v("div",uo,[s(y,{modelValue:n.table,"onUpdate:modelValue":o[1]||(o[1]=b=>n.table=b),title:"消息列表",direction:"rtl",size:"40%"},{default:l(()=>[t("div",mo,[s(k,{modelValue:n.activeNames,"onUpdate:modelValue":o[0]||(o[0]=b=>n.activeNames=b)},{default:l(()=>[s(x,{name:"1",class:"collapseItem1"},{title:l(()=>[f("    "),s(d,null,{default:l(()=>[s(_)]),_:1}),f("  预约通知 ")]),default:l(()=>[t("div",ho,[s(g,{data:n.resMes,style:{width:"100%"},"row-class-name":i.tableRowClassName},{default:l(()=>[s(r,{type:"expand"},{default:l(b=>[b.row.type=="预约成功"?(m(),v("div",po,[_o,fo,t("strong",null,[t("p",vo,"- 预约编号: "+p(b.row.id),1),t("p",go,"- 预约科室: "+p(b.row.department),1),t("p",yo,"- 预约医生: "+p(b.row.doctor),1),t("p",bo,"- 预约就诊时间: "+p(b.row.time),1)]),ko,t("p",Do,[f(" 猫猫就诊ฅ 预约挂号服务中心"),wo,f(" "+p(b.row.timetamp),1)])])):C("",!0),b.row.type=="取消预约"?(m(),v("div",xo,[$o,Co,t("strong",null,[t("p",So,"- 预约编号: "+p(b.row.id),1),t("p",To,"- 预约科室: "+p(b.row.department),1),t("p",Mo,"- 预约医生: "+p(b.row.doctor),1),t("p",Po,"- 预约就诊时间: "+p(b.row.time),1)]),Ao,t("p",qo,[f(" 猫猫就诊 预约挂号服务中心"),Vo,f(" "+p(b.row.timetamp),1)])])):C("",!0)]),_:1}),s(r,{label:"已读?"},{default:l(b=>[b.row.read===!1?(m(),v("div",Io,[s(h,{class:"pay-button",onClick:T=>i.readMes(b.row)},{default:l(()=>[f("确认")]),_:2},1032,["onClick"])])):(m(),v("div",Bo,"已读"))]),_:1}),s(r,{label:"类型",prop:"type"}),s(r,{label:"患者姓名",prop:"name"}),s(r,{label:"就诊时间",prop:"time"})]),_:1},8,["data","row-class-name"])])]),_:1}),s(x,{name:"2",class:"collapseItem2"},{title:l(()=>[f("    "),s(d,null,{default:l(()=>[s(D)]),_:1}),f("  缴费通知 ")]),default:l(()=>[t("div",Uo,[s(g,{data:n.billMes,style:{width:"100%"},"row-class-name":i.tableRowClassName},{default:l(()=>[s(r,{type:"expand"},{default:l(b=>[b.row.type=="处方缴费提醒"?(m(),v("div",Ro,[No,Lo,t("strong",null,[t("p",Fo,"- 处方编号: "+p(b.row.id),1),t("p",jo,"- 开具科室: "+p(b.row.department),1),t("p",Ho,"- 开具医生: "+p(b.row.doctor),1),t("p",zo,"- 开具时间: "+p(b.row.time),1)]),Eo,s($,{to:"/Bill",onClick:i.turnToBill},{default:l(()=>[f("缴费入口")]),_:1},8,["onClick"]),t("p",Oo,[f(" 猫猫就诊 缴费服务中心"),Yo,f(" "+p(b.row.timetamp),1)])])):C("",!0),b.row.type=="处方缴费成功"?(m(),v("div",Go,[Jo,Wo,t("strong",null,[t("p",Ko,"- 处方编号: "+p(b.row.id),1),t("p",Zo,"- 开具科室: "+p(b.row.department),1),t("p",Qo,"- 开具医生: "+p(b.row.doctor),1),t("p",Xo,"- 开具时间: "+p(b.row.time),1)]),es,t("p",ts,[f(" 猫猫就诊 缴费服务中心"),ns,f(" "+p(b.row.timetamp),1)])])):C("",!0)]),_:1}),s(r,{label:"已读?"},{default:l(b=>[b.row.read===!1?(m(),v("div",os,[s(h,{class:"pay-button",onClick:T=>i.readMes(b.row)},{default:l(()=>[f("确认")]),_:2},1032,["onClick"])])):(m(),v("div",ss,"已读"))]),_:1}),s(r,{label:"类型",prop:"type"}),s(r,{label:"患者姓名",prop:"name"}),s(r,{label:"开具时间",prop:"time"})]),_:1},8,["data","row-class-name"])])]),_:1})]),_:1},8,["modelValue"])])]),_:1},8,["modelValue"])])}const as=S(co,[["render",is],["__scopeId","data-v-fac929d0"]]),ls="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIYAAACECAYAAABVsVOaAAAI/UlEQVR4nO3deYxV1R3A8e9cQRwcFOPSljJWlKlUUKpg0opaEY0RpSaSuMUNjWLauPWP2iqx/9Qm1KULpjatdd9Qq0jd0MSlTNwQRXGhRUS0tlahhJFCoTqvf/zekzev782795xzzzn3vd8nmTDMvHPeL/B7527n/E5HqVSizewI7AGMB7qBkUAn0AFU/jE6gM3ABuBfwEvAaqDfd7ChDAkdgAe7Ad8CDgYOAvYv/6wjYz+ry18vAEuBZ5HkaUkdLTpiDAWOBU4EpiOjhGsfAU8CdwF/zqH/oFotMbqA2cD5wGiP77scmAfc6fE9c9VKiXEhcAnw5YAxvA7MBRYEjMGJVkiMbwM/Rc4jYvEIcCWwInQgpoqeGLOB60IH0cBW4LvA4tCBmEhCB2DhOuJNCoDtgceBC0IHYqKoI8YDwDGhg8jgF8Cc0EFkUcQR416KlRQAlwIXhw4ii6IlxrXAcaGDMPQz4PTQQaRVpEPJScDNoYNwYDLwduggmilKYuwMfEj229gxeh+YAHweOpDBFOVQciOtkRQAewJXhQ6imSKMGEcgN4xazUTgndBBNFKExHgb+ZS1mmeI+EQ69kPJkbRmUoCMhJNCB9FI7Inx49AB5OyK0AE0EvOhpJsCP4TKoAf4e+ggasU8YkwJHYAnp4YOoJ6YE2Nq6AA8OTZ0APXEeigZBryLTNRtdVuAMcjE42jEOmIcQHskBciHoDt0ELViTYyzQwfgWXSXrTEeSr4BvBw6CM8+AMaFDqJabCPGfsCi0EEE0A0sRB4WRsHniNEFDGfbaq/PgF2B3ZGnjYcgj9bb2SfAw8ASoA/YG/gSsBEZVT4F3kPu72zMM5C8EmMkMmu7svJrf2AnZClgqfzVX/6Zym4d8CbwPNALPOX6DVwmxnbATGAGcBT6n+7TO8BjwHzgVRcdukiMTuBcZPXXPtYRKVtPIJOPrZZN2ibGecjqr71sOlG5WARcjRxuMjNNjAnA9cgKchW33wGXIQugUjNJjJPKbzY0a0MVzEpkdF+StkHW+xi/RGZqa1IUSw8yY+zMtA2yJMbtSNap4roB+GGaF6ZNjJuQIiSq+H5CiplxaRLjGuBk63BUTOYAFw32gmYnnzGXGVD2ZtDgrulgibEv8EpeEakobEFuSq6v/cVgh5L5uYWjYjGMBv/PjRLjR8gljmp9U6jzVLveoeSrwF99RKSisRF5rPFF3dJ6I8ZcX9GoaHRRUxKqdsQYh1S9Ve1nMzCK8jOV2hHjMu/hqFh0ArMqf6keMbqQpXLbBQhKxeEvyKy7ASPGOWhStLseZPHTgMSYVf+1qo0kwAmVb0Cy5OvBwlExORy2JcaMgIGouBwOjKgkRpQrrlUQncCEBBhB+UxUqbKJCbIYqCt0JCoqByfIImKlqu2R0D51KFR6wxNkR0Glqo1M8LupnCqGzoRtZQmUqiglRFhjUgVXSoivqo4KryOhdbZ7UO70J+RcskcV0sYEWBM6ChWdzQkF2J9LebcyAVYhK5KUqngxAdaiSxHVQMsrl6qF3H9c5WI98GYlMRaEjERFZTGwqZIYrwF/CxiMiscCGHjX8w+BAlHx6AMehIGJMQ+9Oml3d1BnieJm4LYg4ahYXFP5pnZR827ondB29TBVtdZqn6yuBX7lNRwVg01IvbUv1CuckiCFU77iKSgV3lnA/dU/qDcXo5/225OsnS2kJimg8SSdXuA3uYajYvAeDQaBZnU+e4ED3cejIrAV+CYNLjaaTeubjuzTpVrPdAa5Am2WGH3lDvTGV+vYimxNNugGN2kmAr8FHE/GjVBUlN4HvkOKXY/SzhB/Dqmb8KFFUCqsO5EdqV5P8+IsSweWlzu+xyAoFc4y4EJkM8PUE79N90SbgpR+nGbSWHnRD3wP2YAoM9tdFC8BrrLpQOXmCmSrMiMu9l2dh5SCVHEZC/zDtLGL5Ylz0YXRMbKqkuQiMdYD/3bQj3LrbJvGLg4lw4HVaB2v2JSAA4B3TRq7GDFGAzs66Ee51QH81rSxi8Q4Gl0xH6spwGEmDV0khtYgj9vs5i/5f7bnGIcAT9p0oHL3H+BrZCx3YTtipN4rXAWzA3JIycQ2MaZatld+jMnawCYxDkRLQRZF5urPNomhhemLI3P1Z5vEGGvRVvmV+eajTWKMs2ir/BqatYFpYnSgNciLpD9rA9PEGAbsadhW+Zf5ZpVpYgzFYHhSwWSe5a/lottD5nrxponxX8N2KoxVWRuYJsYWZN2jKoa1WRuYJkYJXWNSJKnWklSzOccwmhmkvFsHrMjayCYxlli0Vf704vFyFeBFi7bKn0dNGtkkxgcYHLuUd0+YNLK9j6HrWOP2NPCxSUPbxLjLsr3K192mDW0T4xPgIcs+VD4+Bh4wbezilvjPHfSh3LsWqfZsxMVKNJBS0zNddKSc2ADshUUVJFcP0S5FFzbH5HIsS2O5Sox1wBxHfSk7bwC32Hbi6lBS8Sww2WWHKrPJONgZ0/V8jOPRuqAhXY6j7VJdJ8anwCmO+1TpzMfhzhGuDyUV04H78uhY1bUCmOSyw7ym9j0KnJZT32qgVcCRrjvNc87nQ8DpOfavZBbdVOS+hVN5HUqqTUUetsVeiumPSDL/ExgFHEPc50vPAWcAH+XRuY/EALkLdzdSEyo2a5BylC/U+d1BwE1Aj9eImrsVKe6aG1+JUfFr4Fyfb9jESqRGet8gr9kJ+D1yKR7aJuBiPDzV9r2u5CLkvMNojoBjS4FDGTwpKP/+ZOBEwk5nXIhceXiZ6hBiwdGDyM46NxDu+cr1yPYMWcoPLQKOAL6PFNz3ZSlyhXcqsq2EF74PJbV6kMr4ZwFDPLzfYuBK4CUHfU0DfoAkSx6eR7ZVN55sYyN0YlSMQT4VM4F9HfddQqa43Ug+k4rGIucpRyOlE3ex6Ost4HHgEeqfDHsTS2JUm4bcsDkMuYoxWTzdh3zieoE/ISeZPowA9kP2dRmPVMsbBXQjI2KCJOpnyGFhTfnPZcghY5mnOJuKMTGqjQYmlr8mATsjVwlDkJoPCbJcckP5qxc5/r+G1DiPxe7A9kjcnyNzJWI4AW/of9ZK03bc0/5uAAAAAElFTkSuQmCC",rs={name:"HeaderNavigation",data(){return{date:new Date,WebURL:"http://localhost:8080",currentIndex:0,images:["/static/img/navigation/banner1.jpg","/static/img/navigation/banner2.jpg","/static/img/navigation/banner3.jpg"],unreadCount:0,intervalId:null,currentUser:{userType:"",idCard:"",password:""}}},mounted(){this.checkLoginStatus(),this.intervalId=setInterval(this.updateMessagebox,3e4),console.log("HeaderNavigation 定时器已加载"),this.startBackgroundRotation()},beforeDestroy(){this.stopBackgroundRotation(),clearInterval(this.intervalId)},components:{Login:Qe,Sign:it,RouterLink:Te,RouterView:Me,messagedrawer:as},methods:{checkLoginStatus(){const e=E.get("idCard");console.log("HeaderNavigationcookies"+e);const o=E.get("userType");e&&o&&(I.identityNum=e,this.updateMessagebox(),console.log("刷新后的全局身份"+I.identityNum),this.currentUser.userType=o,this.currentUser.idCard=e)},handleImageClick(e,o){this.currentUser.userType===""?this.showLogin():this.$router.push(e)},refreshPage(){this.currentUser.idCard="",this.currentUser.userType="",this.currentUser.password="",console.log("HeaderNavigarion refreshPage done"),this.$forceUpdate()},updateUserCard(e){this.currentUser.idCard=e,console.log("用户id更新完毕")},updateUserType(e){this.currentUser.userType=e,this.$forceUpdate(),console.log("用户类型更新完毕")},updateMessagebox(){this.$refs.messageBox.getMesData()},showLogin(){this.$refs.Login.openModal(this.currentUser.idCard,this.currentUser.userType)},showSign(){this.$refs.Sign.openModal()},startBackgroundRotation(){this.intervalId=setInterval(this.changeBackground,5e3)},stopBackgroundRotation(){clearInterval(this.intervalId)},changeBackground(){this.currentIndex=(this.currentIndex+1)%this.images.length;let e=document.getElementsByClassName("header-nav");for(let o=0;o<e.length;o++)e[o].style.transition="background-image 2s ease-in-out",e[o].style.backgroundImage="url("+this.images[this.currentIndex]+")"},changeBackgroundOnClick(){this.stopBackgroundRotation(),this.changeBackground(),this.startBackgroundRotation()},showSurroundImage(e){const o=document.querySelector(`.clickable-images a:nth-child(${e}) .Surround-image`);o&&(o.style.opacity=1,o.style.animation="spin 10s linear infinite")},hideSurroundImage(){document.querySelectorAll(".Surround-image").forEach(o=>{o.style.opacity=0,o.style.transform="rotate(0deg)"})},openMessageBox(){this.$refs.messageBox.openDrawer()},getUnreadCount(e){this.unreadCount=e,this.$emit("update:unreadCount",e)},getClickableImages(){switch(this.currentUser.userType){case"医生":return[{link:"/PatientA",icon:"/static/img/navigation/list1_2.png",alt:"Image 2"},{link:"/PresA",icon:"/static/img/navigation/list1_5.png",alt:"Image 5"},{link:"/Prescription",icon:"/static/img/navigation/list1_3.png",alt:"Image 3"}];case"普通用户":return[{link:"/AppointmentRegistration",icon:"/static/img/navigation/list1_1.png",alt:"Image1"},{link:"/PatientA",icon:"/static/img/navigation/list1_2.png",alt:"Image 2"},{link:"/PresA",icon:"/static/img/navigation/list1_5.png",alt:"Image 5"},{link:"/Bill",icon:"/static/img/navigation/list1_4.png",alt:"Image 4"}];case"管理员":return[{link:"/PharmaCist",icon:"/static/img/navigation/信息录入.png",alt:"Image 2"}];default:return[{link:"/AppointmentRegistration",icon:"/static/img/navigation/list1_1.png",alt:"Image1"},{link:"/PharmaCist",icon:"/static/img/navigation/信息录入.png",alt:"Image 2"},{link:"/PresA",icon:"/static/img/navigation/list1_5.png",alt:"Image 5"},{link:"/Bill",icon:"/static/img/navigation/list1_4.png",alt:"Image 4"}]}}}},cs={class:"clickable-images"},ds=["src","alt"],us=t("img",{class:"Surround-image",src:ls,alt:"Surround Image"},null,-1);function ms(e,o,a,c,n,i){const _=u("messagedrawer"),d=u("Login"),r=u("Sign"),h=u("RouterLink"),g=u("el-badge"),x=u("el-header"),D=u("RouterView");return m(),v("div",null,[s(_,{ref:"messageBox",class:"messageBox","onUpdate:result":i.getUnreadCount},null,8,["onUpdate:result"]),s(d,{"onUpdate:refresh":i.refreshPage,"onUpdate:currentUserCard":i.updateUserCard,"onUpdate:messagebox":i.updateMessagebox,"onUpdate:currentUserType":i.updateUserType,ref:"Login"},null,8,["onUpdate:refresh","onUpdate:currentUserCard","onUpdate:messagebox","onUpdate:currentUserType"]),s(r,{ref:"Sign"},null,512),s(x,{class:"header-nav",onClick:i.changeBackgroundOnClick},{default:l(()=>[t("nav",null,[s(h,{to:"/Main"},{default:l(()=>[f("黑神话能玩吗")]),_:1}),t("a",{href:"#unknown",onClick:o[0]||(o[0]=$=>i.showLogin())},"登出键扣了"),t("a",{onClick:o[1]||(o[1]=(...$)=>i.openMessageBox&&i.openMessageBox(...$))},"你先别急"),n.unreadCount!==0?(m(),q(g,{key:0,value:n.unreadCount,class:"item"},null,8,["value"])):C("",!0),t("a",{href:"#unknown",onClick:o[2]||(o[2]=$=>i.showSign())},"您真的没BUG了？")]),t("div",cs,[(m(!0),v(w,null,M(i.getClickableImages(),($,k)=>(m(),q(h,{class:"image-link",to:"/Main",onMouseover:y=>i.showSurroundImage(k+1),onMouseleave:o[3]||(o[3]=y=>i.hideSurroundImage()),onClick:he(y=>i.handleImageClick($.link,y),["prevent"])},{default:l(()=>[t("img",{class:"designed-icon",src:$.icon,alt:$.alt},null,8,ds),us]),_:2},1032,["onMouseover","onClick"]))),256))])]),_:1},8,["onClick"]),s(D)])}const hs=S(rs,[["render",ms]]),ps="/static/jpg/3-BllZ-oxG.jpg",_s="/static/png/subtitle-PaPH0dqX.png",fs="/static/png/logo-DSnrn9Sv.png",vs={},gs=t("div",{class:"flowing-background"},null,-1),ys=t("img",{src:ps,class:"bg"},null,-1),bs=t("img",{src:_s,class:"subtitle"},null,-1),ks=t("img",{src:fs,class:"logo",alt:"Logo"},null,-1),Ds=t("div",{class:"zqssquare1"},null,-1),ws=t("div",{class:"zqssquare2"},null,-1),xs=t("div",{class:"zqssquare3"},null,-1),$s=t("div",{class:"zqssquare4"},null,-1);function Cs(e,o){const a=u("el-header"),c=u("el-container"),n=u("el-footer");return m(),v(w,null,[s(c,{style:{height:"88vh"}},{default:l(()=>[gs,s(a,{class:"Header"},{default:l(()=>[ys,bs,ks,Ds,ws,xs,$s]),_:1})]),_:1}),s(n,{height:"30px",align:"center",class:"footer"},{default:l(()=>[f("SE_GROUP_6")]),_:1})],64)}const Ss=S(vs,[["render",Cs]]),Ts={name:"DetailB",data(){return{isVisible:!1,form:{office:"",time:"",patient:"",doctor:"",medicine:[{name:"金莲花软件囊",times:3,cnt:1,price:""}]}}},methods:{openModal(e){this.isVisible=!0,document.body.style.overflow="hidden",this.form.office=e.office,this.form.time=e.time,this.form.doctor=e.doctor,this.form.patient=e.patient,this.form.medicine=e.medicine},closeModal(){this.isVisible=!1,document.body.style.overflow=""}}},re=e=>(P("data-v-82ad420d"),e=e(),A(),e),Ms={key:0,class:"modal-background"},Ps={class:"modal-container"},As={class:"content"},qs=re(()=>t("h3",null,"处方明细",-1)),Vs=["index"],Is={style:{"margin-left":"15px"}},Bs={style:{"font-size":"smaller","margin-left":"15px"}},Us={class:"line"},Rs=re(()=>t("p",{style:{"margin-left":"15px"}},"疗程：",-1)),Ns={class:"line"},Ls=re(()=>t("p",{style:{"margin-left":"15px"}},"数量：",-1)),Fs=re(()=>t("div",{class:"m"},null,-1)),js={class:"button"};function Hs(e,o,a,c,n,i){const _=u("el-divider"),d=u("el-button");return n.isVisible?(m(),v("div",Ms,[t("div",Ps,[t("div",As,[qs,(m(!0),v(w,null,M(n.form.medicine,r=>(m(),v("div",{index:r,class:"card"},[t("p",Is,p(r.name),1),t("p",Bs,"单价："+p(r.price),1),s(_,{class:"divider"}),t("div",Us,[Rs,t("p",null,p(r.times),1)]),t("div",Ns,[Ls,t("p",null,p(r.cnt),1)]),Fs],8,Vs))),256))]),t("div",js,[s(d,{onClick:i.closeModal},{default:l(()=>[f("退出")]),_:1},8,["onClick"])])])])):C("",!0)}const zs=S(Ts,[["render",Hs],["__scopeId","data-v-82ad420d"]]),Es={name:"PHistory",props:{filterInfo:{type:Array,required:!0}},data(){return{info:[]}},components:{DetailB:zs},methods:{showPrescriptionDetails(e){this.$refs.detail.openModal(e)}}},pe=e=>(P("data-v-f7be1702"),e=e(),A(),e),Os={class:"container"},Ys={class:"card-container"},Gs={class:"header"},Js={class:"row"},Ws={class:"row1"},Ks=pe(()=>t("p",{style:{"margin-right":"10px","font-weight":"600"}},"门诊号",-1)),Zs={style:{"font-size":"small"}},Qs={style:{"font-size":"small"}},Xs={style:{"font-size":"small"}},ei={class:"content"},ti={class:"line"},ni=pe(()=>t("p",null,"诊断：",-1)),oi=pe(()=>t("div",{class:"button"},null,-1));function si(e,o,a,c,n,i){const _=u("DetailB"),d=u("el-divider"),r=u("el-button"),h=u("el-card"),g=u("el-footer");return m(),v(w,null,[s(_,{ref:"detail"},null,512),t("div",Os,[t("div",Ys,[(m(!0),v(w,null,M(a.filterInfo,x=>(m(),q(h,{key:x,style:{width:"30%","min-height":"00px",margin:"1.6%"}},{default:l(()=>[t("div",Gs,[t("div",Js,[t("div",Ws,[Ks,t("p",null,p(x.office),1)]),t("div",Zs,[t("p",null,p(x.time),1)]),t("div",Qs,[t("p",null,"患者："+p(x.patient),1)]),t("div",Xs,[t("p",null,"医生："+p(x.doctor),1)])])]),s(d,{class:"divider"}),t("div",ei,[t("div",ti,[ni,t("p",null,p(x.advice),1),s(r,{type:"primary",plain:"",onClick:D=>i.showPrescriptionDetails(x),class:"xiang"},{default:l(()=>[f("展开处方")]),_:2},1032,["onClick"])])]),oi]),_:2},1024))),128))]),s(g,{height:"30px",align:"center",class:"footer"},{default:l(()=>[f("SE_GROUP_6")]),_:1})])],64)}const ii=S(Es,[["render",si],["__scopeId","data-v-f7be1702"]]),ai=e=>(P("data-v-f53dae46"),e=e(),A(),e),li={class:"all-container",width:"100%"},ri={class:"search-container"},ci=ai(()=>t("div",{class:"wenzi"},[t("p",{class:"guahao"},"处方查询"),t("p",{class:"back"},"首页 > 处方查询")],-1)),di={class:"input-container"},ui={class:"chaxun"},mi={__name:"PresA",setup(e){ve("$identity_num");const o=()=>new Promise((i,_)=>{W.post("/api/treatments/list/",{identity_num:I.identityNum,action:"getTreatmentsData"}).then(d=>{c.value=d.data.treatments,console.log("Treatments data fetched:",c.value),i()}).catch(d=>{console.error("Error fetching treatments data:",d),_(d)})}),a=L(""),c=L([]),n=oe(()=>c.value.filter(i=>/^\d/.test(a.value)?i.time.split(" ")[0]===a.value:a.value?i.office===a.value:!0));return ae(()=>{if(I.identityNum=="0"){console.log("未登录");return}o().then(()=>{})}),(i,_)=>{const d=u("el-divider"),r=u("search"),h=u("el-icon"),g=u("el-input"),x=u("el-button"),D=u("scroll"),$=u("el-container");return m(),q($,{style:{height:"100vh"}},{default:l(()=>[s(D,null,{default:l(()=>[t("div",li,[t("div",ri,[ci,s(d,{class:"divider"})]),s(ke),t("div",di,[t("div",ui,[s(g,{modelValue:a.value,"onUpdate:modelValue":_[0]||(_[0]=k=>a.value=k),style:{width:"300px",height:"40px"},placeholder:"请输入就诊日期(例:2024-05-09) 或 科室",class:"shuru"},{prefix:l(()=>[s(h,{class:"el-input__icon"},{default:l(()=>[s(r)]),_:1})]),_:1},8,["modelValue"]),s(x,{color:"#DBA979",dark:i.isDark,plain:"",class:"searchButton",style:{width:"80px",height:"40px"}},{default:l(()=>[f("查询")]),_:1},8,["dark"]),t("p",null,p(a.value),1)])]),s(ii,{filterInfo:n.value},null,8,["filterInfo"])])]),_:1})]),_:1})}}},hi=S(mi,[["__scopeId","data-v-f53dae46"]]),pi={name:"DetailC",data(){return{fileList:[],isVisible:!1,sign:"",inputName:"",radio:"",info:[{id:"",name:"",use:"",price:"",num:""}]}},methods:{setMedicineData(){return new Promise((e,o)=>{let a={id:this.info.id,name:this.info.name,type:this.radio,symptom:this.info.use,price:this.info.price,quantity:this.info.num,photo_name:this.fileList.length===0?"":this.fileList[0].name,action:this.sign=="add"?"addMedicine":"alterMedicine"};this.$axios.post("/api/medicine/setData/",a).then(function(c){console.log(c.data.msg),e()}).catch(function(c){console.log(c),o(c)})})},removePhoto(){return new Promise((e,o)=>{W.post("/api/medicine/removePhoto/",{id:this.info.id,photo_name:this.fileList[0].name,action:"removePhoto"}).then(a=>{console.log("删除成功:",a.data),e()}).catch(a=>{console.error("删除失败:",a),o(a)})})},handleBeforeUpload(e){if(this.fileList.length===0)return e.formData={id:this.info.id},!0;this.removePhoto().then(()=>(e.formData={id:this.info.id},!0))},handleSuccess(e){this.fileList.length===0?this.fileList.push({name:e.name,url:e.url}):(this.fileList=[],this.fileList.push({name:e.name,url:e.url})),console.log(this.fileList)},handleBeforeRemove(){this.removePhoto().then(()=>!0)},handleRemove(){this.fileList=[]},handlePreview(e){console.log(e)},openModal(e,o){this.isVisible=!0,document.body.style.overflow="hidden",this.info.name=e.name,e.type==="中药"?this.radio=1:e.type==="中成药"?this.radio=2:this.radio=3,this.info.id=e.id,this.info.use=e.use,this.info.price=e.price,this.info.num=e.num,this.sign=o,this.fileList=[],e.photo_name!==void 0&&e.photo_name!=""&&this.fileList.push({name:e.photo_name,url:"/api/medicine/photo/"+e.photo_name}),console.log(`传入的sign是：${this.sign}`)},closeModal(){this.fileList.length!==0&&this.sign=="add"?this.removePhoto().then(()=>{this.isVisible=!1,document.body.style.overflow="",this.$emit("updateData")}):(this.isVisible=!1,document.body.style.overflow="",this.$emit("updateData"))},setDataAndCloseModal(){this.setMedicineData().then(()=>{this.isVisible=!1,document.body.style.overflow="",this.$emit("updateData")})}}},X=e=>(P("data-v-b9b29092"),e=e(),A(),e),_i={key:0,class:"modal-background"},fi={class:"modal-container"},vi={class:"content"},gi=X(()=>t("h3",null,"添加药品",-1)),yi={class:"upload"},bi=X(()=>t("p",{style:{"margin-bottom":"20px","font-size":"14px","font-weight":"500",color:"grey"}}," 点击导入本地药物图片 ",-1)),ki=X(()=>t("div",{class:"el-upload__tip"},"jpg/png files with a size less than 500kb",-1)),Di={class:"line"},wi=X(()=>t("p",{style:{"margin-left":"15px"}},"药品名：",-1)),xi={class:"line"},$i=X(()=>t("p",{style:{"margin-left":"15px"}},"药品类型：",-1)),Ci={class:"line"},Si=X(()=>t("p",{style:{"margin-left":"15px"}},"价格：",-1)),Ti={class:"line"},Mi=X(()=>t("p",{style:{"margin-left":"15px"}},"库存：",-1)),Pi={class:"line"},Ai=X(()=>t("p",{style:{"margin-left":"15px"}},"适应症状：",-1)),qi={class:"button"};function Vi(e,o,a,c,n,i){const _=u("el-button"),d=u("el-upload"),r=u("el-divider"),h=u("el-input"),g=u("el-radio"),x=u("el-radio-group");return n.isVisible?(m(),v("div",_i,[t("div",fi,[t("div",vi,[gi,t("div",yi,[bi,s(d,{"file-list":n.fileList,"onUpdate:fileList":o[0]||(o[0]=D=>n.fileList=D),class:"upload-demo",action:"/api/medicine/uploadPhoto/","before-upload":i.handleBeforeUpload,"on-success":i.handleSuccess,"on-preview":i.handlePreview,"before-remove":i.handleBeforeRemove,"on-remove":i.handleRemove,"list-type":"picture"},{tip:l(()=>[ki]),default:l(()=>[s(_,{type:"primary"},{default:l(()=>[f("Click to upload")]),_:1})]),_:1},8,["file-list","before-upload","on-success","on-preview","before-remove","on-remove"])]),s(r),t("div",Di,[wi,s(h,{modelValue:n.info.name,"onUpdate:modelValue":o[1]||(o[1]=D=>n.info.name=D),style:{width:"240px"},placeholder:"请输入药品名称",clearable:""},null,8,["modelValue"])]),t("div",xi,[$i,s(x,{modelValue:n.radio,"onUpdate:modelValue":o[2]||(o[2]=D=>n.radio=D)},{default:l(()=>[s(g,{value:1},{default:l(()=>[f("中药")]),_:1}),s(g,{value:2},{default:l(()=>[f("中成药")]),_:1}),s(g,{value:3},{default:l(()=>[f("西药")]),_:1})]),_:1},8,["modelValue"])]),t("div",Ci,[Si,s(h,{modelValue:n.info.price,"onUpdate:modelValue":o[3]||(o[3]=D=>n.info.price=D),style:{width:"240px"},placeholder:"请输入单价",clearable:""},null,8,["modelValue"])]),t("div",Ti,[Mi,s(h,{modelValue:n.info.num,"onUpdate:modelValue":o[4]||(o[4]=D=>n.info.num=D),style:{width:"240px"},placeholder:"请输入库存",clearable:""},null,8,["modelValue"])]),t("div",Pi,[Ai,s(h,{modelValue:n.info.use,"onUpdate:modelValue":o[5]||(o[5]=D=>n.info.use=D),style:{width:"240px"},placeholder:"用逗号分隔(例如：感冒，头痛)",type:"textarea",clearable:""},null,8,["modelValue"])])]),t("div",qi,[s(_,{onClick:i.closeModal,plain:""},{default:l(()=>[f("取消")]),_:1},8,["onClick"]),s(_,{onClick:i.setDataAndCloseModal,type:"primary"},{default:l(()=>[f("确定")]),_:1},8,["onClick"])])])])):C("",!0)}const Ii=S(pi,[["render",Vi],["__scopeId","data-v-b9b29092"]]),_e=e=>(P("data-v-17309296"),e=e(),A(),e),Bi={class:"container"},Ui={class:"m"},Ri=_e(()=>t("p",{style:{"margin-left":"50px","font-weight":"bold","margin-right":"10px"}},"首页",-1)),Ni=_e(()=>t("p",{style:{"font-weight":"bold","margin-left":"10px"}},"药品管理",-1)),Li={class:"card-container"},Fi={class:"warn"},ji={key:0},Hi={key:1,class:"warn"},zi=_e(()=>t("p",{style:{color:"red"}},"库存数量不足",-1)),Ei={__name:"MedicineA",setup(e){const o=L(null),a=L(""),c=(k,y)=>{o.value.openModal(k,y)},n=()=>{g().then(()=>{h(),$(_.value.currentPage)})},i=(k,y)=>{x(y).then(()=>{})},_=L({total:0,currentPage:1,pageSize:9}),d=L([{name:"",type:"",use:"",price:"",num:""}]),r=oe(()=>a.value?d.value.filter(k=>k.name.includes(a.value)):d.value),h=()=>{_.value.total=r.value.length};ge(a,()=>{h()});const g=()=>new Promise((k,y)=>{W.get("/api/medicine/list/").then(b=>{d.value=b.data.medicine,_.value.total=d.value.length,console.log("Medicine data fetched:",d.value),k()}).catch(b=>{console.error("Error fetching medicine data:",b),y(b)})}),x=k=>new Promise((y,b)=>{W.post("/api/medicine/delete/",{id:k.id,action:"deleteMedicine"}).then(T=>{d.value=T.data.medicine,_.value.total=d.value.length,console.log("Medicine data deleted"),y()}).catch(T=>{console.error("Error deleting medicine data:",T),b(T)})}),D=oe(()=>{const k=(_.value.currentPage-1)*_.value.pageSize,y=k+_.value.pageSize;return r.value.slice(k,y)}),$=k=>{_.value.currentPage=k};return ae(()=>{g().then(()=>{h(),$(1)})}),(k,y)=>{const b=u("DArrowRight"),T=u("el-icon"),z=u("search"),F=u("el-input"),J=u("el-button"),N=u("el-table-column"),ce=u("WarningFilled"),de=u("el-table"),ue=u("el-pagination"),me=u("el-card"),Z=u("el-footer");return m(),v(w,null,[s(Ii,{ref_key:"detail",ref:o,onUpdateData:n},null,512),t("div",Bi,[t("div",Ui,[Ri,s(T,null,{default:l(()=>[s(b)]),_:1}),Ni]),t("div",Li,[s(me,{style:{height:"660px",width:"95%"}},{default:l(()=>[s(F,{modelValue:a.value,"onUpdate:modelValue":y[0]||(y[0]=H=>a.value=H),style:{width:"300px",height:"40px"},placeholder:"请输入药物名称",class:"shuru"},{prefix:l(()=>[s(T,{class:"el-input__icon"},{default:l(()=>[s(z)]),_:1})]),_:1},8,["modelValue"]),s(J,{type:"primary",plain:"",style:{height:"40px","margin-left":"10px"},onClick:y[1]||(y[1]=H=>c("","add"))},{default:l(()=>[f("+新建药物类型")]),_:1}),s(de,{data:D.value,style:{width:"95%","max-height":"480px"}},{default:l(()=>[s(N,{prop:"name",label:"药物名称",width:"150"}),s(N,{prop:"type",label:"药物种类",width:"150"}),s(N,{prop:"price",label:"药物价格",width:"150"}),s(N,{prop:"num",label:"药物库存",width:"150"},{default:l(H=>[t("div",Fi,[H.row.num!=="0"?(m(),v("span",ji,p(H.row.num),1)):(m(),v("span",Hi,[t("p",null,p(H.row.num),1),s(T,{style:{color:"red"}},{default:l(()=>[s(ce)]),_:1}),zi]))])]),_:1}),s(N,{prop:"use",label:"适应症状"}),s(N,{label:"操作"},{default:l(H=>[s(J,{size:"small",onClick:xe=>c(H.row,"alter")},{default:l(()=>[f(" 修改 ")]),_:2},1032,["onClick"]),s(J,{size:"small",type:"danger",onClick:xe=>i(H.$index,H.row),plain:""},{default:l(()=>[f(" 删除 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),s(ue,{class:"page","current-page":_.value.currentPage,"page-size":_.value.pageSize,total:_.value.total,"pager-count":3,background:"",layout:"prev, pager, next, total","onUpdate:currentPage":$},null,8,["current-page","page-size","total"])]),_:1})]),s(Z,{height:"30px",align:"center",class:"footer"},{default:l(()=>[f("SE_GROUP_6")]),_:1})])],64)}}},De=S(Ei,[["__scopeId","data-v-17309296"]]),Oi={name:"DetailC",data(){return{fileList:[],isVisible:!1,sign:"",inputName:"",radio:"",info:[{name:"",id:"",office:"",title:"",cost:"",research:""}]}},methods:{setDoctorData(){return new Promise((e,o)=>{let a={name:this.info.name,id:this.info.id,department:this.info.office,title:this.info.title,cost:this.info.cost,research:this.info.research,avatar_name:this.fileList.length===0?"":this.fileList[0].name,action:this.sign=="add"?"addDoctor":"alterDoctor"};this.$axios.post("/api/doctors/setData/",a).then(function(c){console.log(c.data.msg),e()}).catch(function(c){console.log(c),o(c)})})},removePhoto(){return new Promise((e,o)=>{W.post("/api/doctors/removeAvatar/",{id:this.info.id,avatar_name:this.fileList[0].name,action:"removeAvatar"}).then(a=>{console.log("删除成功:",a.data),e()}).catch(a=>{console.error("删除失败:",a),o(a)})})},handleBeforeUpload(e){if(this.fileList.length===0)return e.formData={id:this.info.id},!0;this.removePhoto().then(()=>(e.formData={id:this.info.id},!0))},handleSuccess(e){this.fileList.length===0?this.fileList.push({name:e.name,url:e.url}):(this.fileList=[],this.fileList.push({name:e.name,url:e.url})),console.log(this.fileList)},handleBeforeRemove(){this.removePhoto().then(()=>!0)},handleRemove(){this.fileList=[]},handlePreview(e){console.log(e)},openModal(e,o){this.isVisible=!0,document.body.style.overflow="hidden",this.info.name=e.name,this.info.id=e.id,this.info.office=e.office,this.info.title=e.title,this.info.cost=e.cost,this.info.research=e.research,this.sign=o,this.fileList=[],e.avatar_name!==void 0&&e.avatar_name!=""&&this.fileList.push({name:e.avatar_name,url:"/api/doctor/avatar/"+e.avatar_name}),console.log(`传入的sign是：${this.sign}`)},closeModal(){this.fileList.length!==0&&this.sign=="add"?this.removePhoto().then(()=>{this.isVisible=!1,document.body.style.overflow="",this.$emit("updateData")}):(this.isVisible=!1,document.body.style.overflow="",this.$emit("updateData"))},setDataAndCloseModal(){this.setDoctorData().then(()=>{this.isVisible=!1,document.body.style.overflow="",this.$emit("updateData")})}}},K=e=>(P("data-v-82ea385a"),e=e(),A(),e),Yi={key:0,class:"modal-background"},Gi={class:"modal-container"},Ji={class:"content"},Wi=K(()=>t("h3",null,"录入医生",-1)),Ki={class:"upload"},Zi=K(()=>t("p",{style:{"margin-bottom":"20px","font-size":"14px","font-weight":"500",color:"grey"}}," 点击导入本地医生照片 ",-1)),Qi=K(()=>t("div",{class:"el-upload__tip"},"jpg/png files with a size less than 500kb",-1)),Xi={class:"line"},ea=K(()=>t("p",{style:{"margin-left":"15px"}},"姓名：",-1)),ta={class:"line"},na=K(()=>t("p",{style:{"margin-left":"15px"}},"医生编号：",-1)),oa={class:"line"},sa=K(()=>t("p",{style:{"margin-left":"15px"}},"科室：",-1)),ia={class:"line"},aa=K(()=>t("p",{style:{"margin-left":"15px"}},"职称：",-1)),la={class:"line"},ra=K(()=>t("p",{style:{"margin-left":"15px"}},"出诊费：",-1)),ca={class:"line"},da=K(()=>t("p",{style:{"margin-left":"15px"}},"主要研究方向：",-1)),ua={class:"button"};function ma(e,o,a,c,n,i){const _=u("el-button"),d=u("el-upload"),r=u("el-divider"),h=u("el-input");return n.isVisible?(m(),v("div",Yi,[t("div",Gi,[t("div",Ji,[Wi,t("div",Ki,[Zi,s(d,{"file-list":n.fileList,"onUpdate:fileList":o[0]||(o[0]=g=>n.fileList=g),class:"upload-demo",action:"/api/doctors/uploadAvatar/","before-upload":i.handleBeforeUpload,"on-success":i.handleSuccess,"on-preview":i.handlePreview,"before-remove":i.handleBeforeRemove,"on-remove":i.handleRemove,"list-type":"picture"},{tip:l(()=>[Qi]),default:l(()=>[s(_,{type:"primary"},{default:l(()=>[f("Click to upload")]),_:1})]),_:1},8,["file-list","before-upload","on-success","on-preview","before-remove","on-remove"])]),s(r),t("div",Xi,[ea,s(h,{modelValue:n.info.name,"onUpdate:modelValue":o[1]||(o[1]=g=>n.info.name=g),style:{width:"240px"},placeholder:"请输入医生姓名",clearable:""},null,8,["modelValue"])]),t("div",ta,[na,s(h,{modelValue:n.info.id,"onUpdate:modelValue":o[2]||(o[2]=g=>n.info.id=g),style:{width:"240px"},placeholder:"请输入医生编号",clearable:""},null,8,["modelValue"])]),t("div",oa,[sa,s(h,{modelValue:n.info.office,"onUpdate:modelValue":o[3]||(o[3]=g=>n.info.office=g),style:{width:"240px"},placeholder:"请输入工作科室",clearable:""},null,8,["modelValue"])]),t("div",ia,[aa,s(h,{modelValue:n.info.title,"onUpdate:modelValue":o[4]||(o[4]=g=>n.info.title=g),style:{width:"240px"},placeholder:"请输入职称",clearable:""},null,8,["modelValue"])]),t("div",la,[ra,s(h,{modelValue:n.info.cost,"onUpdate:modelValue":o[5]||(o[5]=g=>n.info.cost=g),style:{width:"240px"},placeholder:"请输入单次出诊费",clearable:""},null,8,["modelValue"])]),t("div",ca,[da,s(h,{modelValue:n.info.research,"onUpdate:modelValue":o[6]||(o[6]=g=>n.info.research=g),style:{width:"240px"},placeholder:"用逗号分隔(例如：病理学，生物医学)",type:"textarea",clearable:""},null,8,["modelValue"])])]),t("div",ua,[s(_,{onClick:i.closeModal,plain:""},{default:l(()=>[f("取消")]),_:1},8,["onClick"]),s(_,{onClick:i.setDataAndCloseModal,type:"primary"},{default:l(()=>[f("确定")]),_:1},8,["onClick"])])])])):C("",!0)}const ha=S(Oi,[["render",ma],["__scopeId","data-v-82ea385a"]]),we=e=>(P("data-v-9f546380"),e=e(),A(),e),pa={class:"container"},_a={class:"m"},fa=we(()=>t("p",{style:{"margin-left":"50px","font-weight":"bold","margin-right":"10px"}},"首页",-1)),va=we(()=>t("p",{style:{"font-weight":"bold","margin-left":"10px"}},"医生管理",-1)),ga={class:"card-container"},ya={__name:"DoctorA",setup(e){const o=L(null),a=L(""),c=(k,y)=>{o.value.openModal(k,y)},n=()=>{g().then(()=>{h(),$(_.value.currentPage)})},i=(k,y)=>{x(y).then(()=>{})},_=L({total:0,currentPage:1,pageSize:9}),d=L([]),r=oe(()=>a.value?d.value.filter(k=>k.name.includes(a.value)):d.value),h=()=>{_.value.total=r.value.length};ge(a,()=>{h()});const g=()=>new Promise((k,y)=>{W.get("/api/doctors/list/").then(b=>{d.value=b.data.doctors,_.value.total=d.value.length,console.log("Doctor data fetched:",d.value),k()}).catch(b=>{console.error("Error fetching doctor data:",b),y(b)})}),x=k=>new Promise((y,b)=>{W.post("/api/doctors/delete/",{id:k.id,action:"deleteDoctor"}).then(T=>{d.value=T.data.doctors,_.value.total=d.value.length,console.log("Doctor data deleted"),y()}).catch(T=>{console.error("Error deleting doctor data:",T),b(T)})}),D=oe(()=>{const k=(_.value.currentPage-1)*_.value.pageSize,y=k+_.value.pageSize;return r.value.slice(k,y)}),$=k=>{_.value.currentPage=k};return ae(()=>{g().then(()=>{h(),$(1)})}),(k,y)=>{const b=u("DArrowRight"),T=u("el-icon"),z=u("search"),F=u("el-input"),J=u("el-button"),N=u("el-table-column"),ce=u("el-table"),de=u("el-pagination"),ue=u("el-card"),me=u("el-footer");return m(),v(w,null,[s(ha,{ref_key:"detail",ref:o,onUpdateData:n},null,512),t("div",pa,[t("div",_a,[fa,s(T,null,{default:l(()=>[s(b)]),_:1}),va]),t("div",ga,[s(ue,{style:{height:"660px",width:"95%"}},{default:l(()=>[s(F,{modelValue:a.value,"onUpdate:modelValue":y[0]||(y[0]=Z=>a.value=Z),style:{width:"300px",height:"40px"},placeholder:"请输入医生姓名",class:"shuru"},{prefix:l(()=>[s(T,{class:"el-input__icon"},{default:l(()=>[s(z)]),_:1})]),_:1},8,["modelValue"]),s(J,{type:"primary",plain:"",style:{height:"40px","margin-left":"10px"},onClick:y[1]||(y[1]=Z=>c("","add"))},{default:l(()=>[f("+录入医生")]),_:1}),s(ce,{data:D.value,style:{width:"95%","max-height":"480px"}},{default:l(()=>[s(N,{prop:"name",label:"姓名",width:"150"}),s(N,{prop:"id",label:"医生编号",width:"150"}),s(N,{prop:"office",label:"科室",width:"150"}),s(N,{prop:"title",label:"职称",width:"150"}),s(N,{prop:"cost",label:"出诊费",width:"150"}),s(N,{prop:"research",label:"主要研究方向"}),s(N,{label:"操作"},{default:l(Z=>[s(J,{size:"small",onClick:H=>c(Z.row,"alter")},{default:l(()=>[f(" 修改 ")]),_:2},1032,["onClick"]),s(J,{size:"small",type:"danger",onClick:H=>i(Z.$index,Z.row),plain:""},{default:l(()=>[f(" 删除 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),s(de,{class:"page","current-page":_.value.currentPage,"page-size":_.value.pageSize,total:_.value.total,"pager-count":3,background:"",layout:"prev, pager, next, total","onUpdate:currentPage":$},null,8,["current-page","page-size","total"])]),_:1})]),s(me,{height:"30px",align:"center",class:"footer"},{default:l(()=>[f("SE_GROUP_6")]),_:1})])],64)}}},ba=S(ya,[["__scopeId","data-v-9f546380"]]),ka={class:"container"},Da=$e({__name:"PharmaCist",setup(e){const o=L("first"),a=(c,n)=>{console.log(c,n)};return(c,n)=>{const i=u("el-tab-pane"),_=u("el-tabs");return m(),v("div",ka,[s(_,{modelValue:o.value,"onUpdate:modelValue":n[0]||(n[0]=d=>o.value=d),class:"demo-tabs",onTabClick:a},{default:l(()=>[s(i,{label:"药物录入",name:"first"},{default:l(()=>[s(De)]),_:1}),s(i,{label:"医生录入",name:"second"},{default:l(()=>[s(ba)]),_:1})]),_:1},8,["modelValue"])])}}}),wa={data(){return{squares:[{hovered:!1},{hovered:!0},{hovered:!1},{hovered:!1}],info:["出诊查询","网上预约看诊","预约流程","医生查询"],checked:!1,currentSquareIndex:0,squares2:[{hovered:!1,active:!0},{hovered:!1,active:!1},{hovered:!1,active:!1},{hovered:!1,active:!1},{hovered:!1,active:!1},{hovered:!1,active:!1},{hovered:!1,active:!1},{hovered:!1,active:!1}],info2:["就诊须知","挂号类别","填写预约信息","选择科室","选择医生","选择时间地点","核对预约信息","预约成功"],link:["/TableSearch","/AppointmentRegistration","/Picture","/DoctorSearch"]}},methods:{toggleSquare(e){this.currentSquareIndex=e,this.currentSquareIndex=1,this.checked=!1},nextSquare(){}}},xa=e=>(P("data-v-0859937e"),e=e(),A(),e),$a={class:"containerlyh",style:{display:"flex","justify-content":"center","align-items":"center",height:"180px"}},Ca={class:"container2",style:{display:"flex","justify-content":"center","align-items":"center"}},Sa=["onMouseover","onMouseout","onClick"],Ta=se('<div class="notice-box" data-v-0859937e><h2 data-v-0859937e>温 馨 提 示</h2><p data-v-0859937e>尊敬的就诊者：</p><p data-v-0859937e>您好！我院门诊已实行就诊新流程，敬请注意如下事项：</p><p style="font-weight:bold;" data-v-0859937e>重点：每日上午的号需在当日8:00前挂，下午的号须在当日14:00前挂</p><p data-v-0859937e>一、进入院区请正确佩戴口罩。体温≥37.3℃者请到发热门诊就诊。急危重症患者请到急诊就诊。</p><p data-v-0859937e>二、按照医院整体改造施工计划，东川门诊4楼大部分区域开始围蔽改造。部分康复科及心中医门诊继续安排在4楼新区出诊，请留意指引标识或咨询现场导诊人员。</p><p data-v-0859937e>三、原板房门诊已关停。东川儿科、肝胆内科已分别搬到东川门诊3楼及5楼，东川心理精神科已搬到伟伦楼4楼继续开诊，请留意现场指引。</p><p data-v-0859937e>四、心外科、心儿科门诊已搬迁到东川门诊5楼开诊，请留意现场指引。</p><p data-v-0859937e>五、普通门诊预约后无需先缴诊查费，就诊后交费时一并收取诊查费。但若有欠费（注：看病或咨询后没有开药或开具检验/检查者，也需缴诊查费），在您补交欠费前，将无法预约下次门诊。</p><p data-v-0859937e>六、请于预约时段前10分钟到自助机或分诊台报到（初诊未实名、越秀区公医及省市直医保门特患者须到分诊台人工报到），请勿过早聚集在医院内候诊。如过时未报到，预约号会自动失效（详见预约手机短信或现场预约凭条内容指引）。</p><p data-v-0859937e>七、报到后请留意诊间门前叫号屏，可扫码查阅实时排序信息并候诊。</p><p data-v-0859937e>八、失约管理：累计失约次数超过3次，系统会自动暂停您线上预约挂号功能（但不影响现场挂号），需凭本人身份证明到挂号窗口办理恢复手续。</p><p data-v-0859937e>九、官网、官微、5G互联网医院、自助机、现场、电话、诊间预约挂号期限统一为14天。</p></div>',1),Ma={class:"button-container"},Pa={class:"checkbox-container",style:{"text-align":"center","margin-top":"20px"}},Aa=xa(()=>t("label",{for:"checkbox"},"我已阅读并同意《个人隐私收集声明》",-1));function qa(e,o,a,c,n,i){const _=u("router-link");return m(),v(w,null,[t("div",$a,[(m(!0),v(w,null,M(n.squares,(d,r)=>(m(),q(_,{key:r,to:n.link[r],class:V(["square",{"square-hovered":d.hovered||r===1}]),onMouseover:h=>d.hovered=!0,onMouseout:h=>d.hovered=!1},{default:l(()=>[f(p(n.info[r]),1)]),_:2},1032,["to","class","onMouseover","onMouseout"]))),128))]),t("div",null,[t("div",Ca,[(m(!0),v(w,null,M(n.squares2,(d,r)=>(m(),v("div",{key:r,class:V(["square2",{"square-active2":d.active}]),onMouseover:h=>d.hovered=!0,onMouseout:h=>d.hovered=!1,onClick:h=>i.toggleSquare(r)},p(n.info2[r]),43,Sa))),128))])]),Ta,t("div",null,[t("div",Ma,[n.checked?(m(),q(_,{key:0,onClick:i.nextSquare,class:"router-button",to:"/AppointmentRegistration2"},{default:l(()=>[f(" 下一步 ")]),_:1},8,["onClick"])):C("",!0)]),t("div",Pa,[R(t("input",{type:"checkbox",id:"checkbox","onUpdate:modelValue":o[0]||(o[0]=d=>n.checked=d)},null,512),[[ye,n.checked]]),Aa])])],64)}const Va=S(wa,[["render",qa],["__scopeId","data-v-0859937e"]]),Ia={props:{squares2:{type:Array,required:!0}},data(){return{squares:[{hovered:!1},{hovered:!0},{hovered:!1},{hovered:!1}],info:["出诊查询","网上预约看诊","预约流程","医生查询"],checked:!1,currentSquareIndex:0,info2:["就诊须知","挂号类别","填写预约信息","选择科室","选择医生","选择时间地点","核对预约信息","预约成功"],link:["/TableSearch","/AppointmentRegistration","/Picture","/DoctorSearch"]}},methods:{toggleSquare(e){this.currentSquareIndex=e,this.currentSquareIndex=1,this.checked=!1},nextSquare(){}}},Ba={class:"containerlyh"},Ua={class:"container2",style:{display:"flex","justify-content":"center","align-items":"center"}},Ra=["onMouseover","onMouseout","onClick"];function Na(e,o,a,c,n,i){const _=u("router-link");return m(),v(w,null,[t("div",Ba,[(m(!0),v(w,null,M(n.squares,(d,r)=>(m(),q(_,{key:r,to:n.link[r],class:V(["square",{"square-hovered":d.hovered||r===1}]),onMouseover:h=>d.hovered=!0,onMouseout:h=>d.hovered=!1},{default:l(()=>[f(p(n.info[r]),1)]),_:2},1032,["to","class","onMouseover","onMouseout"]))),128))]),t("div",null,[t("div",Ua,[(m(!0),v(w,null,M(a.squares2,(d,r)=>(m(),v("div",{key:r,class:V(["square2",{"square-active2":d.active,"square-done":d.done}]),onMouseover:h=>d.hovered=!0,onMouseout:h=>d.hovered=!1,onClick:h=>i.toggleSquare(r)},p(n.info2[r]),43,Ra))),128))])])],64)}const te=S(Ia,[["render",Na],["__scopeId","data-v-eb25f5fc"]]),La={components:{Header:te},data(){return{squares:[{hovered:!1},{hovered:!0},{hovered:!1},{hovered:!1}],info:["出诊查询","网上预约看诊","预约流程","取消预约"],checked:!1,selected:-1,currentSquareIndex:0,squares2:[{hovered:!1,active:!1,done:!0},{hovered:!1,active:!0,done:!1},{hovered:!1,active:!1,done:!1},{hovered:!1,active:!1,done:!1},{hovered:!1,active:!1,done:!1},{hovered:!1,active:!1,done:!1},{hovered:!1,active:!1,done:!1},{hovered:!1,active:!1,done:!1}],info2:["就诊须知","挂号类别","填写预约信息","选择科室","选择医生","选择时间地点","核对预约信息","预约成功"],squares3:[{hovered:!1,active:!1},{hovered:!1,active:!1}],treat:["首诊","复诊"]}},methods:{toggleSquare(e){this.currentSquareIndex=e,this.currentSquareIndex=1,this.checked=!1},nextSquare(){},clickbutton(e){this.checked=!0,this.selected=e}}},Fa={class:"notice-box",style:{height:"400px"}},ja={class:"container2"},Ha={class:"containerlyh",style:{display:"flex","justify-content":"center","align-items":"center",height:"180px"}},za=["onMouseover","onMouseout","onClick"];function Ea(e,o,a,c,n,i){const _=u("Header"),d=u("router-link");return m(),v(w,null,[s(_,{squares2:n.squares2},null,8,["squares2"]),t("div",Fa,[t("div",ja,[s(d,{to:"/AppointmentRegistration",class:"button2 button-prev"},{default:l(()=>[f("上一步")]),_:1}),n.checked?(m(),q(d,{key:0,to:{path:"/AppointmentRegistration3",query:{select:n.selected}},class:"button2 button-next"},{default:l(()=>[f("下一步")]),_:1},8,["to"])):C("",!0)]),t("div",Ha,[(m(!0),v(w,null,M(n.squares3,(r,h)=>(m(),v("div",{key:h,class:V(["square3",{"square3-hovered":r.hovered||h==n.selected}]),onMouseover:g=>r.hovered=!0,onMouseout:g=>r.hovered=!1,onClick:g=>i.clickbutton(h)},p(n.treat[h]),43,za))),128))])])],64)}const Oa=S(La,[["render",Ea],["__scopeId","data-v-28068285"]]),Ya={components:{Header:te},data(){return{squares:[{hovered:!1},{hovered:!0},{hovered:!1},{hovered:!1}],info:["出诊查询","网上预约看诊","预约流程","取消预约"],checked:!1,currentSquareIndex:0,squares2:[{hovered:!1,active:!1,done:!0},{hovered:!1,active:!1,done:!0},{hovered:!1,active:!0,done:!1},{hovered:!1,active:!1,done:!1},{hovered:!1,active:!1,done:!1},{hovered:!1,active:!1,done:!1},{hovered:!1,active:!1,done:!1},{hovered:!1,active:!1,done:!1}],info2:["就诊须知","挂号类别","填写预约信息","选择科室","选择医生","选择时间地点","核对预约信息","预约成功"],first:0,second:0,select:0,formData:{queryFirst:0,name:"",paymentType:"",gender:"",birthday:"",idType:"",phone:"",number:"",addr:""}}},methods:{setPatientData(){return new Promise((e,o)=>{let a={name:this.formData.name,paymentType:this.formData.paymentType,gender:this.formData.gender,birthday:this.formData.birthday,idType:this.formData.idType,phone:this.formData.phone,number:this.formData.number,addr:this.formData.addr};this.$axios.post("/api/patient/add/",a).then(function(c){console.log(c.data.msg),e()}).catch(function(c){console.log(c),o(c)})})},toggleSquare(e){this.currentSquareIndex=e,this.currentSquareIndex=1,this.checked=!1},nextSquare(){},submitForm(){console.log(this.formData)},submit(){console.log(this.formData),this.first==1&&this.setPatientData()},submitForm2(){console.log(this.form2)},isformed(){return this.first==1?this.checked?Object.keys(this.formData).filter(e=>e!=="queryFirst").every(e=>this.formData[e]!==""):!1:!(!this.checked||this.formData.name==""||this.formData.gender==""||this.formData.idType==""||this.formData.number==""||this.formData.phone=="")}},created(){this.select=this.$route.query.select,this.$route.query.select==0?(this.first=1,this.formData.queryFirst=1):this.second=1}},Y=e=>(P("data-v-04b8afbc"),e=e(),A(),e),Ga={class:"notice-box"},Ja={class:"container2",style:{"margin-bottom":"50px"}},Wa={key:0,class:"container3"},Ka={class:"form-group"},Za=Y(()=>t("option",{value:"",disabled:"",selected:""},"请选择支付类型",-1)),Qa=Y(()=>t("option",{value:"医保"},"医保",-1)),Xa=Y(()=>t("option",{value:"非医保"},"非医保",-1)),el=[Za,Qa,Xa],tl={class:"form-group"},nl=Y(()=>t("option",{value:"",disabled:"",selected:""},"性别",-1)),ol=Y(()=>t("option",{value:"男"},"男",-1)),sl=Y(()=>t("option",{value:"女"},"女",-1)),il=[nl,ol,sl],al={class:"form-group"},ll=se('<option value="" disabled selected data-v-04b8afbc>请选择证件类型</option><option value="身份证" data-v-04b8afbc>身份证</option><option value="医保卡" data-v-04b8afbc>医保卡</option><option value="诊疗卡" data-v-04b8afbc>诊疗卡</option><option value="护照" data-v-04b8afbc>护照</option><option value="军官证" data-v-04b8afbc>军官证</option><option value="港澳通行证" data-v-04b8afbc>港澳通行证</option>',7),rl=[ll],cl={class:"form-group"},dl={class:"form-group"},ul={key:1,class:"container3"},ml={class:"form-group"},hl=Y(()=>t("option",{value:"",disabled:"",selected:""},"性别",-1)),pl=Y(()=>t("option",{value:"男"},"男",-1)),_l=Y(()=>t("option",{value:"女"},"女",-1)),fl=[hl,pl,_l],vl={class:"form-group"},gl=se('<option value="" disabled selected data-v-04b8afbc>请选择证件类型</option><option value="身份证" data-v-04b8afbc>身份证</option><option value="医保卡" data-v-04b8afbc>医保卡</option><option value="诊疗卡" data-v-04b8afbc>诊疗卡</option><option value="护照" data-v-04b8afbc>护照</option><option value="军官证" data-v-04b8afbc>军官证</option><option value="港澳通行证" data-v-04b8afbc>港澳通行证</option>',7),yl=[gl],bl={class:"form-group"},kl={class:"checkbox-container",style:{"text-align":"center","margin-top":"20px"}},Dl=Y(()=>t("label",{for:"checkbox"},"我已阅读并同意《个人隐私收集声明》",-1));function wl(e,o,a,c,n,i){const _=u("Header"),d=u("router-link");return m(),v(w,null,[s(_,{squares2:n.squares2},null,8,["squares2"]),t("div",Ga,[t("div",Ja,[s(d,{to:"/AppointmentRegistration2",class:"button2 button-prev"},{default:l(()=>[f("上一步")]),_:1}),i.isformed()?(m(),q(d,{key:0,to:{path:"/AppointmentRegistration4",query:{name:n.formData.name,number:n.formData.number,paymentType:n.formData.paymentType,selected:n.select}},class:"button2 button-next",onClick:i.submit},{default:l(()=>[f(" 下一步 ")]),_:1},8,["to","onClick"])):C("",!0)]),n.first?(m(),v("div",Wa,[t("form",{onSubmit:o[8]||(o[8]=he((...r)=>i.submitForm&&i.submitForm(...r),["prevent"]))},[t("div",Ka,[R(t("input",{type:"text",id:"name",name:"name",class:"form-control",placeholder:"请输入姓名","onUpdate:modelValue":o[0]||(o[0]=r=>n.formData.name=r)},null,512),[[Q,n.formData.name]]),R(t("select",{id:"paymentType",name:"paymentType",class:"form-control",placeholder:"支付类型","onUpdate:modelValue":o[1]||(o[1]=r=>n.formData.paymentType=r)},el,512),[[ie,n.formData.paymentType]])]),t("div",tl,[R(t("select",{id:"gender",name:"gender",class:"form-control",placeholder:"性别","onUpdate:modelValue":o[2]||(o[2]=r=>n.formData.gender=r)},il,512),[[ie,n.formData.gender]]),R(t("input",{type:"date",id:"birthday",name:"birthday",class:"form-control",placeholder:"出生日期","onUpdate:modelValue":o[3]||(o[3]=r=>n.formData.birthday=r)},null,512),[[Q,n.formData.birthday]])]),t("div",al,[R(t("select",{id:"idType",name:"idType",class:"form-control",placeholder:"证件类型","onUpdate:modelValue":o[4]||(o[4]=r=>n.formData.idType=r)},rl,512),[[ie,n.formData.idType]]),R(t("input",{type:"tel",id:"phone",name:"phone",class:"form-control",placeholder:"联系电话","onUpdate:modelValue":o[5]||(o[5]=r=>n.formData.phone=r)},null,512),[[Q,n.formData.phone]])]),t("div",cl,[R(t("input",{type:"text",id:"number",name:"number",class:"form-control",placeholder:"请输入证件号","onUpdate:modelValue":o[6]||(o[6]=r=>n.formData.number=r)},null,512),[[Q,n.formData.number]])]),t("div",dl,[R(t("input",{type:"text",id:"addr",name:"addr",class:"form-control",placeholder:"请输入住址","onUpdate:modelValue":o[7]||(o[7]=r=>n.formData.addr=r)},null,512),[[Q,n.formData.addr]])])],32)])):C("",!0),n.second?(m(),v("div",ul,[t("form",{onSubmit2:o[14]||(o[14]=he((...r)=>i.submitForm2&&i.submitForm2(...r),["prevent"]))},[t("div",ml,[R(t("input",{type:"text",id:"name",name:"name",class:"form-control",placeholder:"请输入姓名","onUpdate:modelValue":o[9]||(o[9]=r=>n.formData.name=r)},null,512),[[Q,n.formData.name]]),R(t("select",{id:"gender",name:"gender",class:"form-control",placeholder:"性别","onUpdate:modelValue":o[10]||(o[10]=r=>n.formData.gender=r)},fl,512),[[ie,n.formData.gender]])]),t("div",vl,[R(t("select",{id:"idType",name:"idType",class:"form-control",placeholder:"证件类型","onUpdate:modelValue":o[11]||(o[11]=r=>n.formData.idType=r)},yl,512),[[ie,n.formData.idType]]),R(t("input",{type:"tel",id:"phone",name:"phone",class:"form-control",placeholder:"联系电话","onUpdate:modelValue":o[12]||(o[12]=r=>n.formData.phone=r)},null,512),[[Q,n.formData.phone]])]),t("div",bl,[R(t("input",{type:"text",id:"number",name:"number",class:"form-control",placeholder:"请输入证件号","onUpdate:modelValue":o[13]||(o[13]=r=>n.formData.number=r)},null,512),[[Q,n.formData.number]])])],32)])):C("",!0),t("div",null,[t("div",kl,[R(t("input",{type:"checkbox",id:"checkbox","onUpdate:modelValue":o[15]||(o[15]=r=>n.checked=r)},null,512),[[ye,n.checked]]),Dl])])])],64)}const xl=S(Ya,[["render",wl],["__scopeId","data-v-04b8afbc"]]),$l={components:{Header:te},data(){return{squares:[{hovered:!1},{hovered:!0},{hovered:!1},{hovered:!1}],info:["出诊查询","网上预约看诊","预约流程","取消预约"],checked:!1,currentSquareIndex:0,squares2:[{hovered:!1,active:!1,done:!0},{hovered:!1,active:!1,done:!0},{hovered:!1,active:!1,done:!0},{hovered:!1,active:!0,done:!1},{hovered:!1,active:!1,done:!1},{hovered:!1,active:!1,done:!1},{hovered:!1,active:!1,done:!1},{hovered:!1,active:!1,done:!1}],info2:["就诊须知","挂号类别","填写预约信息","选择科室","选择医生","选择时间地点","核对预约信息","预约成功"],departments:[{id:"internal",name:"内科"},{id:"surgical",name:"外科"},{id:"medical_tech",name:"医技科室"}],selectedDepartment:"internal",hoveredButton:"internal",selectedDepartmentName:"",selectedDepartmentRight:"",selectedSubDepartment:"",selectedSubDepartmentName:"",info:{name:"",paymentType:"",inumber:""},selected:0}},methods:{selectDepartment(e){this.selectedDepartment=e},selectSubDepartment(e){this.selectedDepartmentName=this.getSubDepartments(this.selectedDepartment)[e-1].name,this.selectedDepartmentRight=this.selectedDepartment,this.selectedSubDepartment=this.getSubDepartments(this.selectedDepartment)[e-1].id,this.checked=!0},getSubDepartmentsName(e){if(e==="internal")return[{subname:"内科系统",enbame:"Internal Medician System"}];if(e==="surgical")return[{subname:"外科系统",enbame:"Surgical System"}];if(e==="medical_tech")return[{subname:"医技科室",enbame:"Medical Technology Department"}]},getSubDepartments(e){if(e==="internal")return[{id:1,name:"心血管内科"},{id:2,name:"呼吸与危重症医学科"},{id:3,name:"内分泌科"},{id:4,name:"肾内科"},{id:5,name:"血液内科"},{id:6,name:"消化科"},{id:7,name:"风湿免疫科"},{id:8,name:"老年内科"},{id:9,name:"神经内科"},{id:10,name:"感染疾病科"},{id:11,name:"急诊科"},{id:12,name:"皮肤科"},{id:13,name:"中医科"},{id:14,name:"职业病科"},{id:15,name:"肿瘤放疗科"},{id:16,name:"肿瘤化疗与放射病科"},{id:17,name:"儿科"},{id:18,name:"体检中心"},{id:19,name:"全科医学科"}];if(e==="surgical")return[{id:1,name:"普通外科"},{id:2,name:"骨科"},{id:3,name:"泌尿外科"},{id:4,name:"胸外科"},{id:5,name:"心脏外科"},{id:6,name:"神经外科"},{id:7,name:"整形科"},{id:8,name:"介入血管外科"},{id:9,name:"危重医学科"},{id:10,name:"运动医学科"},{id:11,name:"康复医学科"},{id:12,name:"妇产科"},{id:13,name:"生殖医学科"},{id:14,name:"眼科"},{id:15,name:"耳鼻喉科"},{id:16,name:"口腔科"},{id:17,name:"麻醉科"},{id:18,name:"疼痛医学中心"}];if(e==="medical_tech")return[{id:1,name:"放射科"},{id:2,name:"超声医学科"},{id:3,name:"核医学科"},{id:4,name:"检验科"},{id:5,name:"输血科"},{id:6,name:"药剂科"},{id:7,name:"手术室"},{id:8,name:"病理科"},{id:9,name:"病案科"},{id:10,name:"临床营养科"}]},hoverButton(){},mouseoutButton(){}},created(){this.info.name=this.$route.query.name,this.info.paymentType=this.$route.query.paymentType,this.selected=this.$route.query.selected,this.info.inumber=this.$route.query.number}},Cl=e=>(P("data-v-61bbb60e"),e=e(),A(),e),Sl={class:"notice-box"},Tl={class:"department-selector"},Ml={class:"left-buttons"},Pl=["onClick"],Al={class:"right-buttons"},ql={class:"selected-department-container"},Vl=Cl(()=>t("div",{style:{height:"30px"}},"您选择的科室为：",-1)),Il={class:"sub-department-titles selected-department-title",style:{width:"200px",height:"30px"}},Bl={class:"container2"},Ul={class:"sub-department-titles"},Rl={key:0,class:"sub-department-title-chinese"},Nl={key:1,class:"sub-department-title-english"},Ll={class:"sub-department-buttons"},Fl=["onClick"];function jl(e,o,a,c,n,i){const _=u("Header"),d=u("router-link");return m(),v(w,null,[s(_,{squares2:n.squares2},null,8,["squares2"]),t("div",Sl,[t("div",Tl,[t("div",Ml,[(m(!0),v(w,null,M(n.departments,r=>(m(),v("button",{key:r.id,class:V([{active:n.selectedDepartment===r.id},"round-button"]),onClick:h=>i.selectDepartment(r.id)},p(r.name),11,Pl))),128))]),t("div",Al,[t("div",ql,[Vl,t("div",Il,p(n.selectedDepartmentName),1),t("div",Bl,[s(d,{to:{path:"/AppointmentRegistration3",query:{select:this.selected}},class:"button2 button-prev"},{default:l(()=>[f("上一步")]),_:1},8,["to"]),n.checked?(m(),q(d,{key:0,to:{path:"/AppointmentRegistration5",query:{name:n.info.name,paymentType:n.info.paymentType,inumber:n.info.inumber,department:n.selectedDepartmentName}},class:"button2 button-next"},{default:l(()=>[f(" 下一步 ")]),_:1},8,["to"])):C("",!0)])]),t("div",Ul,[n.selectedDepartment?(m(),v("div",Rl,p(i.getSubDepartmentsName(n.selectedDepartment)[0].subname),1)):C("",!0),n.selectedDepartment?(m(),v("div",Nl,p(i.getSubDepartmentsName(n.selectedDepartment)[0].enbame),1)):C("",!0)]),t("div",Ll,[(m(!0),v(w,null,M(i.getSubDepartments(n.selectedDepartment),r=>(m(),v("button",{key:r.id,class:V(["square-button",{selected:n.selectedSubDepartment===r.id&&n.selectedDepartmentRight===n.selectedDepartment}]),onMouseover:o[0]||(o[0]=(...h)=>i.hoverButton&&i.hoverButton(...h)),onMouseout:o[1]||(o[1]=(...h)=>i.mouseoutButton&&i.mouseoutButton(...h)),onClick:h=>i.selectSubDepartment(r.id)},p(r.name),43,Fl))),128))])])])])],64)}const Hl=S($l,[["render",jl],["__scopeId","data-v-61bbb60e"]]),zl={components:{Header:te},data(){return{squares:[{hovered:!1},{hovered:!0},{hovered:!1},{hovered:!1}],info:["出诊查询","网上预约看诊","预约流程","取消预约"],checked:!1,currentSquareIndex:0,squares2:[{hovered:!1,active:!1,done:!0},{hovered:!1,active:!1,done:!0},{hovered:!1,active:!1,done:!0},{hovered:!1,active:!1,done:!0},{hovered:!1,active:!0,done:!1},{hovered:!1,active:!1,done:!1},{hovered:!1,active:!1,done:!1},{hovered:!1,active:!1,done:!1}],info2:["就诊须知","挂号类别","填写预约信息","选择科室","选择医生","选择时间地点","核对预约信息","预约成功"],nextSevenDays:[],dayStatus:[{status:"none"},{status:"none"},{status:"none"},{status:"none"},{status:"none"},{status:"none"},{status:"none"}],selectedDate:null,selectDoctor:"",selectDate:"",today:new Date,doctors:[],isHovered:[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],info:{name:"",paymentType:"",department:"",inumber:"",info_time:"",doctor:{},day_index:""}}},methods:{getDutyData(){return new Promise((e,o)=>{let a=this,c={action:"getNextSevenDaysDuty",department:this.$route.query.department};console.log(c.department),this.$axios.post("/api/duty/next_seven_days/",c).then(function(n){a.doctors=n.data.duty,console.log(a.doctors),e()}).catch(function(n){console.log(n),o(n)})})},isClick(e,o,a,c){this.info.info_time=o,this.checked=!0,this.selectDoctor=e,this.selectDate=o,this.info.day_index=a,this.info.doctor=this.doctors[c]},locatenextSevenDays(){const e=[];for(let o=0;o<7;o++){const a=new Date(this.today);a.setDate(this.today.getDate()+o),e.push({date:this.formatDate(a),dayOfWeek:this.formatDayOfWeek(a)})}return e},formatDate(e){const o=String(e.getMonth()+1).padStart(2,"0"),a=String(e.getDate()).padStart(2,"0");return`${o}-${a}`},formatDayOfWeek(e){return`周${["日","一","二","三","四","五","六"][e.getDay()]}`},clickButton(e){this.selectedDate=e.date},doctorHasScheduleForDate(e,o){return e.schedule.some(a=>a.time.includes(o))},dayHasScheduleForDate(e,o){return e.time.includes(o)},hoverButton(){},mouseoutButton(){},checkTime(e){const[o,a]=e.split("("),[c,n]=o.split("-").map(h=>parseInt(h,10)),_=a.includes("上午")?"08:00:00":"14:00:00",d=new Date;d.setMonth(c-1),d.setDate(n),d.setHours(..._.split(":").map(Number)),d.setMinutes(0),d.setSeconds(0),d.setMilliseconds(0);const r=new Date;return d.getDate()!==r.getDate()||d.getMonth()!==r.getMonth()?!0:!(r>d)}},mounted(){console.log(this.$route.query.department),console.log(this.$route.query.paymentType),this.getDutyData().then(()=>{console.log("111"),console.log(this.doctors),this.nextSevenDays=this.locatenextSevenDays();for(let e=0;e<this.nextSevenDays.length;e++){const o=this.nextSevenDays[e].date;this.dayStatus[e].status="none",this.doctors.forEach(a=>{a.schedule.forEach(c=>{if(c.time.includes(o)){if(e==0){const[n,i]=c.time.split("("),[_,d]=n.split("-").map(D=>parseInt(D,10)),h=i.includes("上午")?"08:00:00":"14:00:00",g=new Date;g.setMonth(_-1),g.setDate(d),g.setHours(...h.split(":").map(Number)),g.setMinutes(0),g.setSeconds(0),g.setMilliseconds(0),new Date>g&&(c.status="full")}c.status==="full"&&this.dayStatus[e].status!="empty"?this.dayStatus[e].status="full":c.status==="empty"&&(this.dayStatus[e].status="empty")}console.log(this.dayStatus[e].status)})})}})},created(){this.info.name=this.$route.query.name,this.info.paymentType=this.$route.query.paymentType,this.info.department=this.$route.query.department,this.info.inumber=this.$route.query.inumber,console.log(this.info.department)}},El=e=>(P("data-v-57242ae0"),e=e(),A(),e),Ol={class:"notice-box",style:{height:"1000px"}},Yl={class:"container2"},Gl={class:"date-blocks"},Jl=["onClick"],Wl={key:0},Kl={key:1},Zl={key:2},Ql={key:3},Xl={key:4},er={key:5},tr={class:"doctor-intro"},nr={key:0,class:"doctor-item"},or={class:"doctor-header"},sr=["src"],ir={class:"info"},ar={class:"name"},lr={class:"title"},rr={class:"research"},cr={class:"schedule"},dr={key:0},ur={key:0,class:"schedule-item1"},mr={class:"time-label"},hr=El(()=>t("div",null,[t("div",{class:"status"},"约满")],-1)),pr=["onClick"],_r={class:"time-label"},fr={class:"status",style:{color:"blue"}};function vr(e,o,a,c,n,i){const _=u("Header"),d=u("router-link");return m(),v(w,null,[s(_,{squares2:n.squares2},null,8,["squares2"]),t("div",Ol,[t("div",Yl,[s(d,{to:{path:"/AppointmentRegistration4",query:{name:n.info.name,paymentType:n.info.paymentType,department:n.info.department,inumber:n.info.inumber}},class:"button2 button-prev",style:{"text-decoration":"none"}},{default:l(()=>[f("上一步")]),_:1},8,["to"]),n.checked?(m(),q(d,{key:0,to:{path:"/AppointmentRegistration6",query:{info_doctor:JSON.stringify(n.info)}},class:"button2 button-next",style:{"text-decoration":"none"}},{default:l(()=>[f(" 下一步 ")]),_:1},8,["to"])):C("",!0)]),t("div",Gl,[(m(!0),v(w,null,M(n.nextSevenDays,(r,h)=>(m(),v("button",{class:V(["date-block",{noSelected:n.dayStatus[h].status!="empty"}]),key:h,onMouseover:o[0]||(o[0]=(...g)=>i.hoverButton&&i.hoverButton(...g)),onClick:g=>i.clickButton(r)},[t("div",null,p(r.date),1),h==0?(m(),v("div",Wl,"今天")):h==1?(m(),v("div",Kl,"明天")):(m(),v("div",Zl,p(r.dayOfWeek),1)),n.dayStatus[h].status=="none"?(m(),v("div",Ql,"无排班")):n.dayStatus[h].status=="full"?(m(),v("div",Xl,"约满")):(m(),v("div",er,"有号"))],42,Jl))),128))]),t("div",tr,[(m(!0),v(w,null,M(n.doctors,(r,h)=>(m(),v("div",{key:h},[i.doctorHasScheduleForDate(r,n.selectedDate)?(m(),v("div",nr,[t("div",or,[t("img",{src:r.avatar,alt:"",class:"avatar"},null,8,sr),t("div",ir,[t("div",ar,p(r.name),1),t("div",lr,p(r.title),1),t("div",rr,p(r.research),1)])]),t("div",cr,[(m(!0),v(w,null,M(r.schedule,(g,x)=>(m(),v("div",{key:x},[i.dayHasScheduleForDate(g,n.selectedDate)?(m(),v("div",dr,[g.status!="empty"?(m(),v("button",ur,[t("div",mr,p(g.time),1),hr])):(m(),v("button",{key:1,onClick:D=>i.isClick(r.name,g.time,x,h),onMouseover:o[1]||(o[1]=(...D)=>i.hoverButton&&i.hoverButton(...D)),onMouseout:o[2]||(o[2]=(...D)=>i.mouseoutButton&&i.mouseoutButton(...D)),class:V(["schedule-item",{check:r.name===n.selectDoctor&&g.time===n.selectDate}])},[t("div",_r,p(g.time),1),t("div",null,[t("div",fr,"余 "+p(g.number),1)])],42,pr))])):C("",!0)]))),128))])])):C("",!0)]))),128))])])],64)}const gr=S(zl,[["render",vr],["__scopeId","data-v-57242ae0"]]),yr={components:{Header:te},data(){return{squares:[{hovered:!1},{hovered:!0},{hovered:!1},{hovered:!1}],info:["出诊查询","网上预约看诊","预约流程","取消预约"],checked:!1,currentSquareIndex:0,squares2:[{hovered:!1,active:!1,done:!0},{hovered:!1,active:!1,done:!0},{hovered:!1,active:!1,done:!0},{hovered:!1,active:!1,done:!0},{hovered:!1,active:!1,done:!0},{hovered:!1,active:!0,done:!1},{hovered:!1,active:!1,done:!1},{hovered:!1,active:!1,done:!1}],info2:["就诊须知","挂号类别","填写预约信息","选择科室","选择医生","选择时间地点","核对预约信息","预约成功"],selectTime:1,timetable_1:[{startTime:"08:00",endTime:"08:10"},{startTime:"08:10",endTime:"08:20"},{startTime:"08:20",endTime:"08:30"},{startTime:"08:30",endTime:"08:40"},{startTime:"08:40",endTime:"08:50"},{startTime:"08:50",endTime:"09:00"},{startTime:"09:00",endTime:"09:10"},{startTime:"09:10",endTime:"09:20"},{startTime:"09:20",endTime:"09:30"},{startTime:"09:30",endTime:"09:40"},{startTime:"09:40",endTime:"09:50"},{startTime:"09:50",endTime:"10:00"},{startTime:"10:00",endTime:"10:10"},{startTime:"10:10",endTime:"10:20"},{startTime:"10:20",endTime:"10:30"},{startTime:"10:30",endTime:"10:40"},{startTime:"10:40",endTime:"10:50"},{startTime:"10:50",endTime:"11:00"},{startTime:"11:00",endTime:"11:10"},{startTime:"11:10",endTime:"11:20"}],timetable_2:[{startTime:"14:00",endTime:"14:10"},{startTime:"14:10",endTime:"14:20"},{startTime:"14:20",endTime:"14:30"},{startTime:"14:30",endTime:"14:40"},{startTime:"14:40",endTime:"14:50"},{startTime:"14:50",endTime:"15:00"},{startTime:"15:00",endTime:"15:10"},{startTime:"15:10",endTime:"15:20"},{startTime:"15:20",endTime:"15:30"},{startTime:"15:30",endTime:"15:40"},{startTime:"15:40",endTime:"15:50"},{startTime:"15:50",endTime:"16:00"},{startTime:"16:00",endTime:"16:10"},{startTime:"16:10",endTime:"16:20"},{startTime:"16:20",endTime:"16:30"},{startTime:"16:30",endTime:"16:40"},{startTime:"16:40",endTime:"16:50"},{startTime:"16:50",endTime:"17:00"},{startTime:"17:00",endTime:"17:10"},{startTime:"17:10",endTime:"17:20"}],doctors:[],info_doctor:{},info:{name:"",paymentType:"",department:"",inumber:""},info_time:"",timeOfDay:"",info_startTime:"",info_endTime:"",info_number:0,info_detail:{name:"",paymentType:"",department:"",inumber:"",time:"",starttime:"",endtime:"",number:"",doctorName:"",doctorTitle:"",doctorAvatar:"",doctorRearch:"",cost:"",info_doctor:{},doctor_id:""}}},methods:{nextSquare(){},selectTimeSlot(e,o,a){this.selectTime=e,this.checked=!0,this.info_startTime=o,this.info_endTime=a,this.info_number=e+1,this.info_detail.starttime=this.info_startTime,this.info_detail.endtime=this.info_endTime,this.info_detail.number=this.info_number},displayTime(){return this.timeOfDay=this.info_time.match(/\(.*?\)/)||[],timeOfDay=="(下午)"?1:timeOfDay=="(上午)"||!timeOfDay?0:"未知的时间"},submit(){return new Promise((e,o)=>{let a={number:this.info_number,time:this.info_time,starttime:this.info_startTime,doctorId:this.info_detail.doctor_id,action:"lockRegister"};this.$axios.post("/api/register/lock/",a).then(function(c){console.log(c.data.msg),e()}).catch(function(c){console.log(c),o(c)})})}},created(){const e=this.$route.query.info_doctor;if(e&&(this.info_doctor=JSON.parse(e)),console.log(this.info_doctor),this.info.name=this.info_doctor.name,this.info.paymentType=this.info_doctor.paymentType,this.info.department=this.info_doctor.department,this.info_time=this.info_doctor.info_time,this.info.inumber=this.info_doctor.inumber,this.doctors[0]=this.info_doctor.doctor,this.info_detail.doctor_id=this.doctors[0].id,this.info_detail.name=this.info.name,this.info_detail.paymentType=this.info.paymentType,this.info_detail.department=this.info.department,this.info_detail.inumber=this.info.inumber,this.info_detail.time=this.info_time,this.info_detail.doctorName=this.doctors[0].name,this.info_detail.doctorTitle=this.doctors[0].title,this.info_detail.doctorAvatar=this.doctors[0].avatar,this.info_detail.doctorRearch=this.doctors[0].research,this.info_detail.cost=this.doctors[0].cost,this.info_detail.info_doctor=this.info_doctor,(this.info_time.match(/\(.*?\)/)||[])[0]=="(上午)"){var o=0;for(o=0;o<20;o++)if(this.doctors[0].schedule[0].emptytime[o].status=="empty"){this.info_detail.starttime=this.timetable_1[o].startTime,this.info_detail.endtime=this.timetable_1[o].endTime;break}}else{var o=0;for(o=0;o<20;o++)if(this.doctors[0].schedule[0].emptytime[o].status=="empty"){this.info_detail.starttime=this.timetable_2[o].startTime,this.info_detail.endtime=this.timetable_2[o].endTime;break}}console.log(this.info_detail),console.log(this.info_detail.doctor_id),console.log(this.info_doctor)}},br={class:"notice-box",style:{height:"1400px"}},kr={class:"container2"},Dr={class:"doctor-item"},wr={class:"doctor-header"},xr=["src"],$r={class:"info"},Cr={class:"name"},Sr={class:"title"},Tr={class:"research"},Mr={class:"button-container"},Pr=["onClick"],Ar=["onClick"];function qr(e,o,a,c,n,i){const _=u("Header"),d=u("router-link");return m(),v(w,null,[s(_,{squares2:n.squares2},null,8,["squares2"]),t("div",br,[t("div",kr,[s(d,{to:{path:"/AppointmentRegistration5",query:{name:n.info.name,paymentType:n.info.paymentType,department:n.info.department,inumber:n.info.inumber}},class:"button2 button-prev",style:{"text-decoration":"none"}},{default:l(()=>[f("上一步")]),_:1},8,["to"]),n.checked?(m(),q(d,{key:0,to:{path:"/AppointmentRegistration7",query:{info:JSON.stringify(n.info_detail)}},onClick:i.submit,class:"button2 button-next",style:{"text-decoration":"none"}},{default:l(()=>[f(" 下一步")]),_:1},8,["to","onClick"])):C("",!0)]),t("div",Dr,[t("div",wr,[t("img",{src:n.doctors[0].avatar,alt:"",class:"avatar"},null,8,xr),t("div",$r,[t("div",Cr,p(n.doctors[0].name),1),t("div",Sr,p(n.doctors[0].title),1),t("div",Tr,p(n.doctors[0].research),1)])])]),t("div",Mr,[(m(!0),v(w,null,M(n.doctors[0].schedule[this.info_doctor.day_index].emptytime,(r,h)=>(m(),v("div",{key:h,class:"button-row"},[r.status==="empty"&&(this.info_time.match(/\(.*?\)/)||[])[0]=="(上午)"?(m(),v("button",{key:0,onClick:g=>i.selectTimeSlot(h,n.timetable_1[r.number-1].startTime,n.timetable_1[r.number-1].endTime),class:V(["button-down",{selected:n.selectTime===h}])},[f(p(n.timetable_1[r.number-1].startTime)+" - "+p(n.timetable_1[r.number-1].endTime)+" ",1),t("span",null,p(h+1)+" 号",1)],10,Pr)):C("",!0),r.status==="empty"&&(this.info_time.match(/\(.*?\)/)||[])[0]=="(下午)"?(m(),v("button",{key:1,onClick:g=>i.selectTimeSlot(h,n.timetable_2[r.number-1].startTime,n.timetable_2[r.number-1].endTime),class:V(["button-down",{selected:n.selectTime===h}])},[f(p(n.timetable_2[r.number-1].startTime)+" - "+p(n.timetable_2[r.number-1].endTime)+" ",1),t("span",null,p(h+1)+" 号",1)],10,Ar)):C("",!0)]))),128))])])],64)}const Vr=S(yr,[["render",qr],["__scopeId","data-v-60cd7336"]]),Ir={name:"BillDetails",data(){return{isVisible:!1,form:{type:"",issue:"",price:0,date:"",id:0}}},methods:{openModal(e){this.isVisible=!0,document.body.style.overflow="hidden",this.form.type=e.type,this.form.issue=e.issue,this.form.price=e.price,this.form.date=e.date,this.form.id=e.id},closeModal(){this.isVisible=!1,document.body.style.overflow=""},cancelModal(){B({type:"info",message:"取消缴费 ╮(╯▽╰)╭",showClose:!0}),this.closeModal()},submitForm(){this.$emit("billDetailsUpdated",!0),B({showClose:!0,message:"缴费成功 ╰(*°▽°*)╯",type:"success"}),this.closeModal()}}},Br={key:0,class:"modal-background"},Ur={class:"modal-container"},Rr={class:"button-group"};function Nr(e,o,a,c,n,i){const _=u("el-form-header"),d=u("el-form-item"),r=u("el-button"),h=u("el-form");return n.isVisible?(m(),v("div",Br,[t("div",Ur,[s(h,{model:n.form,class:"form","label-width":"auto",style:{"max-width":"600px"}},{default:l(()=>[s(_,{class:"form-header"},{default:l(()=>[f("缴费详情")]),_:1}),s(d,{label:"类型"},{default:l(()=>[f(p(n.form.type),1)]),_:1}),s(d,{label:"具体事由"},{default:l(()=>[f(p(n.form.issue),1)]),_:1}),s(d,{label:"费用（元）"},{default:l(()=>[f(p(n.form.price),1)]),_:1}),s(d,{label:"创建时间"},{default:l(()=>[f(p(n.form.date),1)]),_:1}),t("div",Rr,[s(r,{onClick:i.submitForm,type:"primary",plain:!0},{default:l(()=>[f("确认缴费")]),_:1},8,["onClick"]),s(r,{onClick:i.cancelModal},{default:l(()=>[f("取消")]),_:1},8,["onClick"])])]),_:1},8,["model"])])])):C("",!0)}const Lr=S(Ir,[["render",Nr],["__scopeId","data-v-af3315b7"]]),Fr={inject:["$identity_num"],components:{Header:te},data(){return{countDown:180,intervalId:null,checked:!1,currentSquareIndex:0,squares2:[{hovered:!1,active:!1,done:!0},{hovered:!1,active:!1,done:!0},{hovered:!1,active:!1,done:!0},{hovered:!1,active:!1,done:!0},{hovered:!1,active:!1,done:!0},{hovered:!1,active:!1,done:!0},{hovered:!1,active:!0,done:!1},{hovered:!1,active:!1,done:!1}],info2:["就诊须知","挂号类别","填写预约信息","选择科室","选择医生","选择时间地点","核对预约信息","预约成功"],selectTime:1,isMedicalInsurance:!0,billstatus:!1,info:{name:"",paymentType:"",department:"",time:"",starttime:"",endtime:"",number:"",doctorName:"",doctorTitle:"",doctorAvatar:"",doctorRearch:"",cost:"",inumber:"",identity_num:this.$identityNum,info_last:{},doctor_id:""},info_last:{}}},components:{BillDetails:Lr},methods:{submit(){this.setAppointmentData().then(()=>{})},selectTimeSlot(e){this.selectTime=e,this.checked=!0},togglePaymentType(){this.isMedicalInsurance=!this.isMedicalInsurance,this.isMedicalInsurance?this.info.paymentType="医保":this.info.paymentType="非医保"},showBillDetails(){const e=new Date,o=`${e.getFullYear()}年${String(e.getMonth()+1).padStart(2,"0")}月${String(e.getDate()).padStart(2,"0")}日`;var a={type:"挂号",issue:"挂号费",price:this.info.cost,date:o};this.isMedicalInsurance&&(a.price=0),console.log(a),this.$refs.BillDetails.openModal(a)},onBillDetailsUpdated(e){return this.billstatus=e,e},setAppointmentData(){return new Promise((e,o)=>{let a={name:this.info.name,paymentType:this.info.paymentType,department:this.info.department,time:this.info.time,starttime:this.info.starttime,endtime:this.info.endtime,number:this.info.number,doctorId:this.info.doctor_id,doctorName:this.info.doctorName,doctorTitle:this.info.doctorAvatar,doctorAvatar:this.info.doctorAvatar,doctorRearch:this.info.doctorRearch,cost:this.info.cost,inumber:this.info.inumber,identity_num:I.identityNum,id:this.info.doctor_id};console.log(a),a={name:this.info.name,paymentType:this.info.paymentType,department:this.info.department,time:this.info.time,starttime:this.info.starttime,endtime:this.info.endtime,number:this.info.number,doctorId:this.info.doctor_id,doctorName:this.info.doctorName,doctorTitle:this.info.doctorAvatar,doctorAvatar:this.info.doctorAvatar,doctorRearch:this.info.doctorRearch,cost:this.info.cost,inumber:this.info.inumber,identity_num:I.identityNum,id:this.info.doctor_id,action:"addRegisterData"},this.info.paymentType=="医保"&&(a.cost=0),this.$axios.post("/api/appointment/add/",a).then(function(c){console.log(c.data.msg),e()}).catch(function(c){console.log(c),o(c)})})},navigateToOtherPage(){this.$router.push("/AppointmentRegistration")},cancel(){return new Promise((e,o)=>{let a={number:this.info.number,time:this.info.time,starttime:this.info.starttime,doctorId:this.info.doctor_id,action:"unlockRegister"};this.$axios.post("/api/register/unlock/",a).then(function(c){console.log(c.data.msg),e()}).catch(function(c){console.log(c),o(c)})})}},beforeDestroy(){clearInterval(this.intervalId)},created(){const e=this.$route.query.info;e&&(this.info_last=JSON.parse(e)),this.info.info_last=this.info_last,this.info.name=this.info_last.name,this.info.paymentType=this.info_last.paymentType,this.info.paymentType=="非医保"?this.isMedicalInsurance=!1:this.info.paymentType="医保",this.info.department=this.info_last.department,this.info.time=this.info_last.time,this.info.starttime=this.info_last.starttime,this.info.endtime=this.info_last.endtime,this.info.number=this.info_last.number,this.info.doctorName=this.info_last.doctorName,this.info.doctorTitle=this.info_last.doctorTitle,this.info.doctorAvatar=this.info_last.doctorAvatar,this.info.doctorRearch=this.info_last.doctorRearch,this.info.cost=this.info_last.cost,this.info.inumber=this.info_last.inumber,this.info.doctor_id=this.info_last.doctor_id,console.log(this.info.info_last),console.log(this.info),this.intervalId=setInterval(()=>{this.countDown>0?this.countDown--:(this.cancel(),this.navigateToOtherPage(),clearInterval(this.intervalId))},1e3)}},ne=e=>(P("data-v-d41087f1"),e=e(),A(),e),jr={class:"notice-box",style:{height:"1500px"}},Hr={class:"container2"},zr={key:1,class:"container2"},Er={class:"countdown"},Or={style:{}},Yr={class:"doctor-item"},Gr={class:"doctor-header"},Jr=["src"],Wr={class:"info"},Kr={class:"name"},Zr={class:"title"},Qr={class:"research"},Xr=ne(()=>t("div",{class:"detail-container"},[t("div",{class:"detail-item"},"就诊院区："),t("div",{class:"detail-item"},"猫猫就诊")],-1)),ec={class:"detail-container"},tc=ne(()=>t("div",{class:"detail-item"},"科室：",-1)),nc={class:"detail-item"},oc={class:"detail-container"},sc=ne(()=>t("div",{class:"detail-item"},"就诊日期：",-1)),ic={class:"detail-item"},ac={class:"detail-container"},lc=ne(()=>t("div",{class:"detail-item"},"就诊时间：",-1)),rc={class:"detail-item"},cc={class:"detail-container"},dc=ne(()=>t("div",{class:"detail-item"},"医事服务费：",-1)),uc={class:"detail-item"},mc={class:"detail-container"},hc=ne(()=>t("div",{class:"detail-item"},"就诊人：",-1)),pc={class:"detail-item"},_c={class:"detail-container"},fc=ne(()=>t("div",{class:"detail-item"},"*支付类型（请选择）：",-1)),vc={style:{display:"flex","justify-content":"space-around",height:"50px"},class:"detail-item"};function gc(e,o,a,c,n,i){const _=u("Header"),d=u("BillDetails"),r=u("router-link"),h=u("el-button");return m(),v(w,null,[s(_,{squares2:n.squares2},null,8,["squares2"]),s(d,{onBillDetailsUpdated:i.onBillDetailsUpdated,ref:"BillDetails"},null,8,["onBillDetailsUpdated"]),t("div",jr,[t("div",Hr,[s(r,{to:{path:"/AppointmentRegistration6",query:{info_doctor:JSON.stringify(n.info_last.info_doctor)}},class:"button2 button-prev",style:{"text-decoration":"none"}},{default:l(()=>[f("上一步")]),_:1},8,["to"]),n.billstatus?(m(),q(r,{key:0,to:{path:"/AppointmentRegistration8",query:{order:JSON.stringify(n.info)}},class:"button2 button-next",onClick:i.submit},{default:l(()=>[f("确认")]),_:1},8,["to","onClick"])):C("",!0),n.billstatus?C("",!0):(m(),v("div",zr,[s(h,{onClick:o[0]||(o[0]=g=>i.showBillDetails())},{default:l(()=>[f("缴费")]),_:1})]))]),t("div",Er,[t("p",Or,"倒计时: "+p(n.countDown),1)]),t("div",Yr,[t("div",Gr,[t("img",{src:n.info.doctorAvatar,alt:"",class:"avatar"},null,8,Jr),t("div",Wr,[t("div",Kr,p(n.info.doctorName),1),t("div",Zr,p(n.info.doctorTitle),1),t("div",Qr,p(n.info.doctorRearch),1)])]),Xr,t("div",ec,[tc,t("div",nc,p(n.info.department),1)]),t("div",oc,[sc,t("div",ic,"2024-"+p(n.info.time),1)]),t("div",ac,[lc,t("div",rc,p(n.info.starttime)+"-"+p(n.info.endtime),1)]),t("div",cc,[dc,t("div",uc,p(n.info.cost)+"元",1)]),t("div",mc,[hc,t("div",pc,p(n.info.name),1)]),t("div",_c,[fc,t("div",vc,[t("div",null,p(n.isMedicalInsurance?"医保":"非医保"),1),t("span",{class:"toggle-arrow",onClick:o[1]||(o[1]=(...g)=>i.togglePaymentType&&i.togglePaymentType(...g))},"▶")])])])])],64)}const yc=S(Fr,[["render",gc],["__scopeId","data-v-d41087f1"]]),bc={components:{Header:te},data(){return{checked:!1,currentSquareIndex:0,squares2:[{hovered:!1,active:!1,done:!0},{hovered:!1,active:!1,done:!0},{hovered:!1,active:!1,done:!0},{hovered:!1,active:!1,done:!0},{hovered:!1,active:!1,done:!0},{hovered:!1,active:!1,done:!0},{hovered:!1,active:!1,done:!0},{hovered:!1,active:!0,done:!1}],info2:["就诊须知","挂号类别","填写预约信息","选择科室","选择医生","选择时间地点","核对预约信息","预约成功"],form:{address:"北医三院",selectTimeTable:{time:"05-09(上午)",startTime:"08:00",endTime:"08:10"},order:100,people:{name:"林艺涵",gender:"女",idType:"身份证",phone:"18518559617",number:"370883200503160423"},isMedicalInsurance:!0,doctor:"医生A",department:"心血管内科",num:15},currentTime:"",info1:{}}},methods:{timeBeforeTenMinutes(e){var[o,a]=e.split(":").map(Number),c=o,n=a-10;n<0&&(c-=1,n+=60);const i=String(c).padStart(2,"0"),_=String(n).padStart(2,"0");return`${i}时${_}分`},updateCurrentTime(){const e=new Date,o=`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")} ${String(e.getHours()).padStart(2,"0")}:${String(e.getMinutes()).padStart(2,"0")}:${String(e.getSeconds()).padStart(2,"0")}`;this.currentTime=o}},created(){this.updateCurrentTime();const e=this.$route.query.order;e&&(this.info1=JSON.parse(e))}},G=e=>(P("data-v-920e9ce0"),e=e(),A(),e),kc={class:"notice-box",style:{height:"1400px"}},Dc={style:{width:"800px",margin:"20px auto"}},wc=G(()=>t("div",{class:"subline"},"您好，您已预约成功。订单详情如下",-1)),xc={class:"subline"},$c=G(()=>t("div",null,"就诊人：",-1)),Cc={class:"detail"},Sc={class:"subline"},Tc=G(()=>t("div",null,"医生：",-1)),Mc={class:"detail"},Pc=G(()=>t("div",{class:"subline"},[t("div",null,"就诊医院："),t("div",{class:"detail"},"猫猫就诊")],-1)),Ac={class:"subline"},qc=G(()=>t("div",null,"科室：",-1)),Vc={class:"detail"},Ic={class:"subline"},Bc=G(()=>t("div",null,"就诊时段：",-1)),Uc={class:"detail"},Rc={class:"subline"},Nc=G(()=>t("div",{class:"detail"},"建议到诊时间：",-1)),Lc={class:"detail"},Fc={class:"subline"},jc=G(()=>t("div",null,"医事服务费：",-1)),Hc={key:0,class:"detail"},zc={key:1,class:"detail"},Ec={class:"subline"},Oc=G(()=>t("div",null,"就诊序号：",-1)),Yc={class:"detail"},Gc={class:"subline"},Jc=G(()=>t("div",null,"挂号时间：",-1)),Wc=se('<div class="subline" data-v-920e9ce0><div data-v-920e9ce0>温馨提示：</div></div><div data-v-920e9ce0><div style="margin:5px auto;" data-v-920e9ce0> (1)医保患者请携带挂号凭证(电子就医卡二维码)和医保卡，到自助机或挂号/预约取号窗口缴费取号，再去分诊台分诊。(取号时间:上午号时间11:30前、下午号16:30前) </div><div style="margin:5px auto;" data-v-920e9ce0> (2)非医保患者请携带挂号凭证(电子就医卡二维码)，无需取号即可去分诊台分诊。 </div><div style="margin:5px auto;" data-v-920e9ce0> (3)所有挂号在就诊当日上午号12:00前、下午号17:00前有效，过有效时间后不再安排就诊及退费。 </div><div style="margin:5px auto;" data-v-920e9ce0> 倡导文明绿色出行，共享单车请入栏停放。如需驾车,中大型轿车及SUV车型沿道路最内侧的排队通道进入，标准尺寸小型轿车工作日8-16时周末8-12时可直接进入医院。 </div></div>',2),Kc={class:"container2"};function Zc(e,o,a,c,n,i){const _=u("Header"),d=u("router-link");return m(),v(w,null,[s(_,{squares2:n.squares2},null,8,["squares2"]),t("div",kc,[t("div",Dc,[wc,t("div",xc,[$c,t("div",Cc,p(n.info1.name),1)]),t("div",Sc,[Tc,t("div",Mc,p(n.info1.doctorName),1)]),Pc,t("div",Ac,[qc,t("div",Vc,p(n.info1.department),1)]),t("div",Ic,[Bc,t("div",Uc,"2024-"+p(n.info1.time)+" "+p(n.info1.starttime)+"-"+p(n.info1.endtime),1)]),t("div",Rc,[Nc,t("div",Lc,p(i.timeBeforeTenMinutes(n.info1.starttime)),1)]),t("div",Fc,[jc,this.info1.paymentType=="医保"?(m(),v("div",Hc,"0元")):(m(),v("div",zc,p(n.info1.cost)+"元",1))]),t("div",Ec,[Oc,t("div",Yc,p(n.info1.number),1)]),t("div",Gc,[Jc,t("div",null,p(n.currentTime),1)]),Wc]),t("div",Kc,[s(d,{to:{path:"/AppointmentRegistration7",query:{info:JSON.stringify(n.info1.info_last)}},class:"button2 button-prev",style:{"text-decoration":"none"}},{default:l(()=>[f("上一步")]),_:1},8,["to"]),s(d,{to:"/PatientA",class:"button2 button-next",onClick:e.submit},{default:l(()=>[f("确认")]),_:1},8,["onClick"])])])],64)}const Qc=S(bc,[["render",Zc],["__scopeId","data-v-920e9ce0"]]),Xc={props:{squares2:{type:Array,required:!0}},data(){return{squares:[{hovered:!1},{hovered:!1},{hovered:!1},{hovered:!0}],info:["出诊查询","网上预约看诊","预约流程","医生查询"],checked:!1,currentSquareIndex:0,selected:0,info2:["就诊须知","挂号类别","填写预约信息","选择科室","选择医生","选择时间地点","核对预约信息","预约成功"]}},methods:{toggleSquare(e){this.currentSquareIndex=e,this.currentSquareIndex=1,this.checked=!1},nextSquare(){}}},ed={class:"container",style:{display:"flex","justify-content":"center","align-items":"center",height:"180px"}},td=["onMouseover","onMouseout"];function nd(e,o,a,c,n,i){return m(),v("div",ed,[(m(!0),v(w,null,M(n.squares,(_,d)=>(m(),v("div",{key:d,class:V(["square",{"square-hovered":n.selected==d||_.hovered}]),onMouseover:r=>_.hovered=!0,onMouseout:r=>_.hovered=!1},p(n.info[d]),43,td))),128))])}const fe=S(Xc,[["render",nd],["__scopeId","data-v-481af824"]]),od={components:{Header:fe},data(){return{squares:[{hovered:!0},{hovered:!1},{hovered:!1},{hovered:!1}],info:["出诊查询","网上预约看诊","预约流程","医生查询"],link:["/TableSearch","/AppointmentRegistration","/Picture","/DoctorSearch"],departments:[{id:0,name:"心血管内科",pinyin:"Xinxueguanneike"},{id:1,name:"呼吸与危重症医学科",pinyin:"Huxi"},{id:2,name:"内分泌科",pinyin:"Neifenmi"},{id:3,name:"肾内科",pinyin:"Shenneike"},{id:4,name:"血液内科",pinyin:"Xueye"},{id:5,name:"消化科",pinyin:"Xiaohua"},{id:6,name:"风湿免疫科",pinyin:"Fengshi"},{id:7,name:"老年内科",pinyin:"Laonian"},{id:8,name:"神经内科",pinyin:"Shenjing"},{id:9,name:"感染疾病科",pinyin:"Ganran"},{id:10,name:"急诊科",pinyin:"Jizhen"},{id:11,name:"皮肤科",pinyin:"Pifu"},{id:12,name:"中医科",pinyin:"Zhongyi"},{id:13,name:"职业病科",pinyin:"Zhiye"},{id:14,name:"肿瘤放疗科",pinyin:"Zhongliu"},{id:15,name:"肿瘤化疗与放射病科",pinyin:"Zhongliu"},{id:16,name:"儿科",pinyin:"Erke"},{id:17,name:"体检中心",pinyin:"Tijian"},{id:18,name:"全科医学科",pinyin:"Quanke"},{id:19,name:"普通外科",pinyin:"Puwai"},{id:20,name:"骨科",pinyin:"Guke"},{id:21,name:"泌尿外科",pinyin:"Miniao"},{id:22,name:"胸外科",pinyin:"Xiongwai"},{id:23,name:"心脏外科",pinyin:"Xinwai"},{id:24,name:"神经外科",pinyin:"Shenwai"},{id:25,name:"整形科",pinyin:"Zhengxing"},{id:26,name:"介入血管外科",pinyin:"Jieru"},{id:27,name:"危重医学科",pinyin:"Weizhong"},{id:28,name:"运动医学科",pinyin:"Yundong"},{id:29,name:"康复医学科",pinyin:"Kangfu"},{id:30,name:"妇产科",pinyin:"Fuchan"},{id:31,name:"生殖医学科",pinyin:"Shengzhi"},{id:32,name:"眼科",pinyin:"Yanke"},{id:33,name:"耳鼻喉科",pinyin:"Erbihou"},{id:34,name:"口腔科",pinyin:"Kouqiang"},{id:35,name:"麻醉科",pinyin:"Mazui"},{id:36,name:"疼痛医学中心",pinyin:"Tengtong"},{id:37,name:"放射科",pinyin:"Fangshe"},{id:38,name:"超声医学科",pinyin:"Chaosheng"},{id:39,name:"核医学科",pinyin:"He"},{id:40,name:"检验科",pinyin:"Jianyan"},{id:41,name:"输血科",pinyin:"Shuxue"},{id:42,name:"药剂科",pinyin:"Yaoji"},{id:43,name:"手术室",pinyin:"Shoushu"},{id:44,name:"病理科",pinyin:"Bingli"},{id:45,name:"病案科",pinyin:"Bingan"},{id:46,name:"临床营养科",pinyin:"Linchuang"}],departmentLetters:["ALL","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],selectedLetterIndex:-1,square_selected:-1,select:!1}},computed:{filteredDepartments(){if(this.selectedLetterIndex===-1)return this.departments;{const e=this.departmentLetters[this.selectedLetterIndex].toUpperCase();return this.departments.filter(o=>o.pinyin[0].toUpperCase()===e)}}},methods:{selectDepartment(e){e==0?this.selectedLetterIndex=-1:this.selectedLetterIndex=e},isActive(e){return e==0?this.selectedLetterIndex===-1:this.selectedLetterIndex===e},square_select(e){this.square_selected=e,this.select=!0},filteredDoctors(e){return this.doctors.filter(o=>o.department===this.departments[e].name)},getDutyData(){return new Promise((e,o)=>{let a=this,c={action:"getAllNextSevenDaysDuty"};this.$axios.post("/api/duty/all_next_seven_days/",c).then(function(n){a.doctors=n.data.duty,console.log(a.doctors),e()}).catch(function(n){console.log(n),o(n)})})}},created(){this.getDutyData()}},sd=e=>(P("data-v-04372353"),e=e(),A(),e),id={class:"containerlyh",style:{display:"flex","justify-content":"center","align-items":"center",height:"180px"}},ad={class:"circle-buttons"},ld=["onClick"],rd={class:"square-buttons"},cd=["onClick"],dd={key:0,class:"doctors-table-container",id:"targetDiv"},ud={class:"doctors-table"},md=sd(()=>t("thead",null,[t("tr",null,[t("th",null,"科室"),t("th",null,"姓名"),t("th",null,"专长"),t("th",null,"出诊时间"),t("th",null,"门诊限号")])],-1));function hd(e,o,a,c,n,i){const _=u("router-link");return m(),v(w,null,[t("div",id,[(m(!0),v(w,null,M(n.squares,(d,r)=>(m(),q(_,{key:r,to:n.link[r],class:V(["square",{"square-hovered":d.hovered||r===0}]),onMouseover:h=>d.hovered=!0,onMouseout:h=>d.hovered=!1},{default:l(()=>[f(p(n.info[r]),1)]),_:2},1032,["to","class","onMouseover","onMouseout"]))),128))]),t("div",null,[t("div",ad,[(m(!0),v(w,null,M(n.departmentLetters,(d,r)=>(m(),v("button",{key:r,class:V({selected:i.isActive(r)}),onClick:h=>i.selectDepartment(r)},p(d),11,ld))),128))]),t("div",rd,[(m(!0),v(w,null,M(i.filteredDepartments,(d,r)=>(m(),v("div",{key:r,onClick:h=>i.square_select(d.id)},[t("button",{class:V(["department-button",{"department-button-selected":d.id==n.square_selected}])},p(d.name),3)],8,cd))),128))])]),n.select?(m(),v("div",dd,[t("table",ud,[md,t("tbody",null,[(m(!0),v(w,null,M(i.filteredDoctors(n.square_selected),d=>(m(),v("tr",{key:d.name},[t("td",null,p(d.department),1),t("td",null,p(d.name),1),t("td",null,p(d.research),1),t("td",null,p(d.schedule.map(r=>r.time).join(", ")),1),t("td",null,p(d.schedule.length*20),1)]))),128))])])])):C("",!0)],64)}const pd=S(od,[["render",hd],["__scopeId","data-v-04372353"]]),_d={components:{Header:fe},data(){return{squares:[{hovered:!1},{hovered:!1},{hovered:!1},{hovered:!0}],info:["出诊查询","网上预约看诊","预约流程","医生查询"],link:["/TableSearch","/AppointmentRegistration","/Picture","/DoctorSearch"],departments:[{id:0,name:"心血管内科",pinyin:"Xinxueguanneike"},{id:1,name:"呼吸与危重症医学科",pinyin:"Huxi"},{id:2,name:"内分泌科",pinyin:"Neifenmi"},{id:3,name:"肾内科",pinyin:"Shenneike"},{id:4,name:"血液内科",pinyin:"Xueye"},{id:5,name:"消化科",pinyin:"Xiaohua"},{id:6,name:"风湿免疫科",pinyin:"Fengshi"},{id:7,name:"老年内科",pinyin:"Laonian"},{id:8,name:"神经内科",pinyin:"Shenjing"},{id:9,name:"感染疾病科",pinyin:"Ganran"},{id:10,name:"急诊科",pinyin:"Jizhen"},{id:11,name:"皮肤科",pinyin:"Pifu"},{id:12,name:"中医科",pinyin:"Zhongyi"},{id:13,name:"职业病科",pinyin:"Zhiye"},{id:14,name:"肿瘤放疗科",pinyin:"Zhongliu"},{id:15,name:"肿瘤化疗与放射病科",pinyin:"Zhongliu"},{id:16,name:"儿科",pinyin:"Erke"},{id:17,name:"体检中心",pinyin:"Tijian"},{id:18,name:"全科医学科",pinyin:"Quanke"},{id:19,name:"普通外科",pinyin:"Puwai"},{id:20,name:"骨科",pinyin:"Guke"},{id:21,name:"泌尿外科",pinyin:"Miniao"},{id:22,name:"胸外科",pinyin:"Xiongwai"},{id:23,name:"心脏外科",pinyin:"Xinwai"},{id:24,name:"神经外科",pinyin:"Shenwai"},{id:25,name:"整形科",pinyin:"Zhengxing"},{id:26,name:"介入血管外科",pinyin:"Jieru"},{id:27,name:"危重医学科",pinyin:"Weizhong"},{id:28,name:"运动医学科",pinyin:"Yundong"},{id:29,name:"康复医学科",pinyin:"Kangfu"},{id:30,name:"妇产科",pinyin:"Fuchan"},{id:31,name:"生殖医学科",pinyin:"Shengzhi"},{id:32,name:"眼科",pinyin:"Yanke"},{id:33,name:"耳鼻喉科",pinyin:"Erbihou"},{id:34,name:"口腔科",pinyin:"Kouqiang"},{id:35,name:"麻醉科",pinyin:"Mazui"},{id:36,name:"疼痛医学中心",pinyin:"Tengtong"},{id:37,name:"放射科",pinyin:"Fangshe"},{id:38,name:"超声医学科",pinyin:"Chaosheng"},{id:39,name:"核医学科",pinyin:"He"},{id:40,name:"检验科",pinyin:"Jianyan"},{id:41,name:"输血科",pinyin:"Shuxue"},{id:42,name:"药剂科",pinyin:"Yaoji"},{id:43,name:"手术室",pinyin:"Shoushu"},{id:44,name:"病理科",pinyin:"Bingli"},{id:45,name:"病案科",pinyin:"Bingan"},{id:46,name:"临床营养科",pinyin:"Linchuang"}],doctors:[],departmentLetters:["ALL","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],selectedLetterIndex:-1,square_selected:-1,select:!1,search:"",search_name_id:-1}},computed:{filteredDepartments(){if(this.selectedLetterIndex===-1)return this.departments;{const e=this.departmentLetters[this.selectedLetterIndex].toUpperCase();return this.departments.filter(o=>o.pinyin[0].toUpperCase()===e)}}},methods:{selectDepartment(e){e==0?this.selectedLetterIndex=-1:this.selectedLetterIndex=e},isActive(e){return e==0?this.selectedLetterIndex===-1:this.selectedLetterIndex===e},square_select(e){this.square_selected=e,this.select=!0,this.search_name_id=-1},filteredDoctors(e){if(this.search_name_id!=-1)return this.doctors.filter(o=>o.name==this.doctors[this.search_name_id-1].name);if(this.square_selected!=-1)return this.doctors.filter(o=>o.department==this.departments[this.square_selected].name)},querySearch(e,o){console.log(e);const a=this.doctors.filter(c=>c.name.includes(e));console.log(a),o(a)},handleSelect(e){this.search_name_id=e.id,console.log(e),input.value=e.name},getDutyData(){return new Promise((e,o)=>{let a=this,c={action:"getDoctorsData"};this.$axios.post("api/doctors/list/",c).then(function(n){a.doctors=n.data.doctors,console.log(a.doctors),e()}).catch(function(n){console.log(n),o(n)})})}},mounted(){this.getDutyData()}},fd={class:"containerlyh",style:{display:"flex","justify-content":"center","align-items":"center",height:"180px"}},vd={class:"container2"},gd={class:"input-container",style:{width:"500px",height:"100px",margin:"auto auto"}},yd={class:"chaxun"},bd={class:"el-input__icon"},kd={class:"doctor-intro"},Dd={class:"doctor-header"},wd=["src"],xd={class:"info"},$d={style:{display:"flex","align-items":"center"}},Cd={class:"name"},Sd={style:{"font-size":"12px"}},Td={class:"research"},Md={class:"circle-buttons"},Pd=["onClick"],Ad={class:"square-buttons"},qd=["onClick"];function Vd(e,o,a,c,n,i){const _=u("router-link"),d=u("el-autocomplete"),r=u("el-button");return m(),v(w,null,[t("div",fd,[(m(!0),v(w,null,M(n.squares,(h,g)=>(m(),q(_,{key:g,to:n.link[g],class:V(["square",{"square-hovered":h.hovered||g==3}]),onMouseover:x=>h.hovered=!0,onMouseout:x=>h.hovered=!1},{default:l(()=>[f(p(n.info[g]),1)]),_:2},1032,["to","class","onMouseover","onMouseout"]))),128))]),t("div",vd,[t("div",gd,[t("div",yd,[s(d,{modelValue:n.search,"onUpdate:modelValue":o[0]||(o[0]=h=>n.search=h),"fetch-suggestions":i.querySearch,placeholder:"请输入医生姓名",onSelect:i.handleSelect,style:{width:"300px",height:"40px"}},{default:l(({item:h})=>[t("div",bd,p(h.name),1)]),_:1},8,["modelValue","fetch-suggestions","onSelect"]),s(r,{color:"#DBA979",dark:e.isDark,plain:"",class:"searchButton",style:{width:"80px",height:"40px"}},{default:l(()=>[f("查询")]),_:1},8,["dark"]),t("p",null,p(n.search),1)])]),t("div",kd,[(m(!0),v(w,null,M(i.filteredDoctors(n.square_selected),h=>(m(),v("div",{key:h.name,class:"doctor-item"},[t("div",Dd,[t("img",{src:h.avatar,alt:"",class:"avatar"},null,8,wd),t("div",xd,[t("div",$d,[t("div",Cd,p(h.name),1),t("div",Sd,p(h.title),1)]),t("div",Td,p(h.research),1)])])]))),128))]),t("div",Md,[(m(!0),v(w,null,M(n.departmentLetters,(h,g)=>(m(),v("button",{key:g,class:V({selected:i.isActive(g)}),onClick:x=>i.selectDepartment(g)},p(h),11,Pd))),128))]),t("div",Ad,[(m(!0),v(w,null,M(i.filteredDepartments,(h,g)=>(m(),v("div",{key:g,onClick:x=>i.square_select(h.id)},[t("button",{class:V(["department-button",{"department-button-selected":h.id==n.square_selected}])},p(h.name),3)],8,qd))),128))])])],64)}const Id=S(_d,[["render",Vd],["__scopeId","data-v-22434580"]]),Bd="/static/img/appointment/img.png",Ud={components:{Header:fe},data(){return{squares:[{hovered:!1},{hovered:!1},{hovered:!0},{hovered:!1}],info:["出诊查询","网上预约看诊","预约流程","医生查询"],link:["/TableSearch","/AppointmentRegistration","/Picture","/DoctorSearch"]}},methods:{},created(){}},Rd=e=>(P("data-v-f136a5c7"),e=e(),A(),e),Nd={class:"containerlyh",style:{display:"flex","justify-content":"center","align-items":"center",height:"180px"}},Ld=Rd(()=>t("div",{class:"container2"},[t("img",{src:Bd,alt:"",style:{width:"40%"}})],-1));function Fd(e,o,a,c,n,i){const _=u("router-link");return m(),v(w,null,[t("div",Nd,[(m(!0),v(w,null,M(n.squares,(d,r)=>(m(),q(_,{key:r,to:n.link[r],class:V(["square",{"square-hovered":d.hovered||r==2}]),onMouseover:h=>d.hovered=!0,onMouseout:h=>d.hovered=!1},{default:l(()=>[f(p(n.info[r]),1)]),_:2},1032,["to","class","onMouseover","onMouseout"]))),128))]),Ld],64)}const jd=S(Ud,[["render",Fd],["__scopeId","data-v-f136a5c7"]]),Hd={name:"NavBar",setup(){const e=L(!1),o=()=>{e.value=window.scrollY>200};return ae(()=>{window.addEventListener("scroll",o)}),Ce(()=>{window.removeEventListener("scroll",o)}),{isSticky:e}},data(){return{unreadCount:0}},components:{HeaderNavigation:hs},methods:{NavbarLogin(){this.$refs.HeaderNavigation&&this.$refs.HeaderNavigation.showLogin?this.$refs.HeaderNavigation.showLogin():console.error("HeaderNavigation component is not properly initialized.")},openMessageBox(){this.$refs.HeaderNavigation.openMessageBox()},getUnreadCount(e){this.unreadCount=e},returnTop(){window.scrollTo({top:0,left:0,behavior:"smooth"})}},mounted(){this.$refs.HeaderNavigation.updateMessagebox()}};function zd(e,o,a,c,n,i){const _=u("HeaderNavigation"),d=u("RouterLink"),r=u("el-badge");return m(),v(w,null,[s(_,{ref:"HeaderNavigation","onUpdate:unreadCount":i.getUnreadCount},null,8,["onUpdate:unreadCount"]),t("div",{class:V(["navbar",{sticky:c.isSticky}])},[s(d,{to:"/Main",onClick:i.returnTop,class:"white-bold"},{default:l(()=>[f("首页")]),_:1},8,["onClick"]),t("a",{onClick:o[0]||(o[0]=(...h)=>i.NavbarLogin&&i.NavbarLogin(...h)),class:"white-bold"},"登录"),t("a",{class:"white-bold",onClick:o[1]||(o[1]=(...h)=>i.openMessageBox&&i.openMessageBox(...h))},"消息"),n.unreadCount!==0?(m(),q(r,{key:0,value:n.unreadCount,class:"item"},null,8,["value"])):C("",!0),t("a",{onClick:o[2]||(o[2]=(...h)=>i.returnTop&&i.returnTop(...h)),class:"white-bold"},"回到顶部")],2)],64)}const Ed=S(Hd,[["render",zd],["__scopeId","data-v-77d455ea"]]),Od={id:"app"},Yd={__name:"App",setup(e){return(o,a)=>(m(),v("div",Od,[s(Ed)]))}},Gd=Pe({history:Ae("/"),routes:[{path:"/",redirect:"/Main"},{path:"/Main",name:"Main",component:Ss},{path:"/Bill",name:"Bill",component:yt},{path:"/Prescription",name:"Prescription",component:oo},{path:"/PatientA",name:"PatientA",component:En},{path:"/PresA",name:"PresA",component:hi},{path:"/AppointmentRegistration",name:"AppointmentRegistration",component:Va},{path:"/AppointmentRegistration2",name:"AppointmentRegistration2",component:Oa},{path:"/AppointmentRegistration3",name:"AppointmentRegistration3",component:xl},{path:"/AppointmentRegistration4",name:"AppointmentRegistration4",component:Hl},{path:"/AppointmentRegistration5",name:"AppointmentRegistration5",component:gr},{path:"/AppointmentRegistration6",name:"AppointmentRegistration6",component:Vr},{path:"/AppointmentRegistration7",name:"AppointmentRegistration7",component:yc},{path:"/AppointmentRegistration8",name:"AppointmentRegistration8",component:Qc},{path:"/TableSearch",name:"TableSearch",component:pd},{path:"/DoctorSearch",name:"DoctorSearch",component:Id},{path:"/Picture",name:"Picture",component:jd},{path:"/MedicineA",name:"MedicineA",component:De},{path:"/PharmaCist",name:"PharmaCist",component:Da}]}),ee=Se(Yd);for(const[e,o]of Object.entries(Ie))ee.component(e,o);ee.config.globalProperties.$axios=W;ee.provide("$identity_num","0");ee.config.productionTip=!1;ee.use(Gd);ee.use(Ve);ee.use(be);ee.mount("#app");
