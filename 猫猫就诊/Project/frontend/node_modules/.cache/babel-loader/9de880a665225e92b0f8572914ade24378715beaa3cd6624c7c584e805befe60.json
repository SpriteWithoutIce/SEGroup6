{"ast":null,"code":"import PrescriptionDetails from \"./PrescriptionDetails.vue\";\nexport default {\n  data() {\n    return {\n      desc: \"问诊列表统计\",\n      //注意，函数里有日期比较逻辑，所以务必注意后端的日期数据格式！！！\n      // 把stus设置成数据库读取的内容就好\n      patient: [{\n        name: \"小王\",\n        age: 18,\n        sex: \"男\",\n        date: \"2024年4月27日\"\n      }, {\n        name: \"小张\",\n        age: 17,\n        sex: \"男\",\n        date: \"2024年2月15日\"\n      }, {\n        name: \"小秋\",\n        age: 16,\n        sex: \"女\",\n        date: \"2024年1月15日\"\n      }],\n      //这里设置数据初始化\n      filteredPatients: []\n    };\n  },\n  components: {\n    PrescriptionDetails\n  },\n  methods: {\n    showPrescriptionDetails(row) {\n      this.$refs.prescriptionDetails.openModal(row);\n    },\n    selectFunc(index) {\n      let today = new Date();\n      today.setHours(0, 0, 0, 0); // Set time to midnight\n      let yesterday = new Date(today);\n      yesterday.setDate(yesterday.getDate() - 1);\n      switch (index) {\n        case \"1\":\n          // 今日\n          this.filteredPatients = this.patient.filter(stu => {\n            let parts = stu.date.split(\"年\").join(\"-\").split(\"月\").join(\"-\").split(\"日\").join(\"\").split(\"-\");\n            let stuDate = new Date(parts[0], parts[1] - 1, parts[2]);\n            stuDate.setHours(0, 0, 0, 0);\n            return stuDate.toDateString() === today.toDateString();\n          });\n          break;\n        case \"2\":\n          // 昨日\n          this.filteredPatients = this.patient.filter(stu => {\n            let parts = stu.date.split(\"年\").join(\"-\").split(\"月\").join(\"-\").split(\"日\").join(\"\").split(\"-\");\n            let stuDate = new Date(parts[0], parts[1] - 1, parts[2]);\n            stuDate.setHours(0, 0, 0, 0);\n            return stuDate.toDateString() === yesterday.toDateString();\n          });\n          break;\n        case \"3\":\n          // 更早\n          this.filteredPatients = this.patient.filter(stu => {\n            let parts = stu.date.split(\"年\").join(\"-\").split(\"月\").join(\"-\").split(\"日\").join(\"\").split(\"-\");\n            let stuDate = new Date(parts[0], parts[1] - 1, parts[2]);\n            stuDate.setHours(0, 0, 0, 0);\n            return stuDate < yesterday;\n          });\n          break;\n      }\n      console.log(this.filteredPatients);\n    }\n  },\n  mounted() {\n    console.log(\"Patient data loaded:\", this.patient);\n    // 等待 DOM 更新后再执行筛选逻辑\n    //唉我真吐了，1记得加上单引号\n    this.$nextTick(() => {\n      this.selectFunc(\"1\");\n      console.log(\"here\");\n      console.log(\"Filtered patients after DOM update:\", this.filteredPatients);\n    });\n  }\n};","map":{"version":3,"names":["PrescriptionDetails","data","desc","patient","name","age","sex","date","filteredPatients","components","methods","showPrescriptionDetails","row","$refs","prescriptionDetails","openModal","selectFunc","index","today","Date","setHours","yesterday","setDate","getDate","filter","stu","parts","split","join","stuDate","toDateString","console","log","mounted","$nextTick"],"sources":["D:\\vue_00\\SEGroup6\\猫猫就诊\\Project\\frontend\\src\\components\\Prescription\\MakePrescription.vue"],"sourcesContent":["<template>\r\n  <!-- 注意调用的位置 -->\r\n  <PrescriptionDetails ref=\"prescriptionDetails\"> </PrescriptionDetails>\r\n  <!-- 设置标题 -->\r\n  <el-container style=\"height: 100vh\" class=\"form-container\">\r\n    <el-container>\r\n      <el-container>\r\n        <!-- 在这里插入了一个空标题，让表格内容和菜单内容间距看起来舒服点 -->\r\n        <el-header height=\"30px\" style=\"padding: 0; margin: 0\"> </el-header>\r\n        <el-main class=\"main\">\r\n          <div>\r\n            <el-table :data=\"patient\">\r\n              <!-- 可以加上一个问诊号 -->\r\n              <el-table-column prop=\"name\" label=\"姓名\"> </el-table-column>\r\n              <el-table-column prop=\"age\" label=\"年龄\"> </el-table-column>\r\n              <el-table-column prop=\"sex\" label=\"性别\"> </el-table-column>\r\n              <el-table-column\r\n                prop=\"date\"\r\n                style=\"background-color: black\"\r\n                label=\"问诊时间\"\r\n              >\r\n              </el-table-column>\r\n              <el-table-column style=\"text-align: right\" label=\"操作\">\r\n                <template #default=\"scope\">\r\n                  <el-button\r\n                    class=\"prescribe-button\"\r\n                    @click=\"showPrescriptionDetails(scope.row)\"\r\n                    >开具处方</el-button\r\n                  >\r\n                </template>\r\n              </el-table-column>\r\n            </el-table>\r\n            <!-- 分页组件 -->\r\n            <el-pagination\r\n              :page-size=\"20\"\r\n              :pager-count=\"11\"\r\n              layout=\"prev, pager, next\"\r\n              :total=\"1000\"\r\n              class=\"page\"\r\n            />\r\n          </div>\r\n        </el-main>\r\n\r\n        <el-footer height=\"30px\" align=\"center\" class=\"footer\"\r\n          >SE_GROUP_6</el-footer\r\n        >\r\n      </el-container>\r\n    </el-container>\r\n  </el-container>\r\n</template>\r\n\r\n<script>\r\nimport PrescriptionDetails from \"./PrescriptionDetails.vue\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      desc: \"问诊列表统计\",\r\n      //注意，函数里有日期比较逻辑，所以务必注意后端的日期数据格式！！！\r\n      // 把stus设置成数据库读取的内容就好\r\n      patient: [\r\n        {\r\n          name: \"小王\",\r\n          age: 18,\r\n          sex: \"男\",\r\n          date: \"2024年4月27日\",\r\n        },\r\n        {\r\n          name: \"小张\",\r\n          age: 17,\r\n          sex: \"男\",\r\n          date: \"2024年2月15日\",\r\n        },\r\n        {\r\n          name: \"小秋\",\r\n          age: 16,\r\n          sex: \"女\",\r\n          date: \"2024年1月15日\",\r\n        },\r\n      ],\r\n      //这里设置数据初始化\r\n      filteredPatients: [],\r\n    };\r\n  },\r\n  components: {\r\n    PrescriptionDetails,\r\n  },\r\n  methods: {\r\n    showPrescriptionDetails(row) {\r\n      this.$refs.prescriptionDetails.openModal(row);\r\n    },\r\n    selectFunc(index) {\r\n      let today = new Date();\r\n      today.setHours(0, 0, 0, 0); // Set time to midnight\r\n      let yesterday = new Date(today);\r\n      yesterday.setDate(yesterday.getDate() - 1);\r\n\r\n      switch (index) {\r\n        case \"1\":\r\n          // 今日\r\n          this.filteredPatients = this.patient.filter((stu) => {\r\n            let parts = stu.date\r\n              .split(\"年\")\r\n              .join(\"-\")\r\n              .split(\"月\")\r\n              .join(\"-\")\r\n              .split(\"日\")\r\n              .join(\"\")\r\n              .split(\"-\");\r\n            let stuDate = new Date(parts[0], parts[1] - 1, parts[2]);\r\n            stuDate.setHours(0, 0, 0, 0);\r\n            return stuDate.toDateString() === today.toDateString();\r\n          });\r\n          break;\r\n        case \"2\":\r\n          // 昨日\r\n          this.filteredPatients = this.patient.filter((stu) => {\r\n            let parts = stu.date\r\n              .split(\"年\")\r\n              .join(\"-\")\r\n              .split(\"月\")\r\n              .join(\"-\")\r\n              .split(\"日\")\r\n              .join(\"\")\r\n              .split(\"-\");\r\n            let stuDate = new Date(parts[0], parts[1] - 1, parts[2]);\r\n            stuDate.setHours(0, 0, 0, 0);\r\n            return stuDate.toDateString() === yesterday.toDateString();\r\n          });\r\n          break;\r\n        case \"3\":\r\n          // 更早\r\n          this.filteredPatients = this.patient.filter((stu) => {\r\n            let parts = stu.date\r\n              .split(\"年\")\r\n              .join(\"-\")\r\n              .split(\"月\")\r\n              .join(\"-\")\r\n              .split(\"日\")\r\n              .join(\"\")\r\n              .split(\"-\");\r\n            let stuDate = new Date(parts[0], parts[1] - 1, parts[2]);\r\n            stuDate.setHours(0, 0, 0, 0);\r\n            return stuDate < yesterday;\r\n          });\r\n          break;\r\n      }\r\n      console.log(this.filteredPatients);\r\n    },\r\n  },\r\n  mounted() {\r\n    console.log(\"Patient data loaded:\", this.patient);\r\n    // 等待 DOM 更新后再执行筛选逻辑\r\n    //唉我真吐了，1记得加上单引号\r\n    this.$nextTick(() => {\r\n      this.selectFunc(\"1\");\r\n      console.log(\"here\");\r\n      console.log(\"Filtered patients after DOM update:\", this.filteredPatients);\r\n    });\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.page {\r\n  position: absolute;\r\n  left: 50%;\r\n  transform: translateX(-50%);\r\n  bottom: 5%;\r\n}\r\n.form-container {\r\n  position: absolute;\r\n  top: 600px;\r\n  left: 0;\r\n  width: 100%;\r\n  background-color: white;\r\n}\r\n.header {\r\n  font-size: 30px;\r\n  line-height: 80px;\r\n  background-color: #f1f1f1;\r\n}\r\n\r\n/*菜单栏*/\r\n.aside {\r\n  background-color: wheat;\r\n}\r\n\r\n.my-menu .el-menu-item.is-active {\r\n  color: black;\r\n  background-color: cornflowerblue;\r\n  opacity: 0.5;\r\n}\r\n\r\n/*标题的下划线*/\r\n.subHeader {\r\n  /*background-color: cornflowerblue*/\r\n  background-color: black;\r\n}\r\n\r\n/*问诊列表*/\r\n.main {\r\n  background-color: white;\r\n  background-image: url(../../assets/prescription/prescription_bg.png);\r\n}\r\n\r\n.prescribe-button {\r\n  background-color: whitesmoke;\r\n  margin-left: -10px;\r\n  max-width: 75px;\r\n}\r\n\r\n/*页尾*/\r\n.footer {\r\n  background-color: rgb(8, 3, 88);\r\n  color: white;\r\n  font-size: 17px;\r\n  line-height: 30px;\r\n}\r\n</style>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}